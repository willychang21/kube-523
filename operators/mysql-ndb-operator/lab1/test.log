2024-02-22 19:56:57,880 INFO   , MainThread, __main__.py:117, Acto started with [['/users/WillOJT/CS523/acto/__main__.py', '--config', 'config.json']]
2024-02-22 19:56:57,880 INFO   , MainThread, __main__.py:118, Operator config: deploy=DeployConfig(steps=[DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/crd.yaml', operator=False, operator_container_name=None, namespace='__DELEGATED__'), wait=None), DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/namespace.yaml', operator=False, operator_container_name=None, namespace='__DELEGATED__'), wait=None), DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/role.yaml', operator=False, operator_container_name=None, namespace='__DELEGATED__'), wait=None), DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/role-binding.yaml', operator=False, operator_container_name=None, namespace='__DELEGATED__'), wait=None), DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/config.yaml', operator=False, operator_container_name=None, namespace='__DELEGATED__'), wait=None), DeployStep(apply=ApplyStep(file='data/flinkk8soperator/deploy/flinkk8soperator.yaml', operator=True, operator_container_name=None, namespace='__DELEGATED__'), wait=None)]) analysis=None seed_custom_resource='data/flinkk8soperator/examples/wordcount/flink-operator-custom-resource.yaml' num_nodes=4 wait_time=60 collect_coverage=False custom_oracle=None diff_ignore_fields=[] kubernetes_version='v1.28.0' kubernetes_engine=KubernetesEngineConfig(feature_gates=None) monkey_patch=None custom_module=None crd_name='flinkapplications.flink.k8s.io' example_dir=None context=None focus_fields=None
2024-02-22 19:56:57,887 INFO   , MainThread, engine.py:868, Loading context from file
2024-02-22 19:56:57,897 WARNING, MainThread, object.py:155, Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 19:56:57,897 WARNING, MainThread, object.py:155, Field [kind] does not have a schema, using opaque schema
2024-02-22 19:56:57,897 WARNING, MainThread, object.py:155, Field [metadata] does not have a schema, using opaque schema
2024-02-22 19:56:57,900 DEBUG  , urllib3.connectionpool, connectionpool.py:1052, Starting new HTTPS connection (1): raw.githubusercontent.com:443
2024-02-22 19:56:58,034 DEBUG  , urllib3.connectionpool, connectionpool.py:546, https://raw.githubusercontent.com:443 "GET /kubernetes/kubernetes/v1.28.0/api/openapi-spec/swagger.json HTTP/1.1" 200 213506
2024-02-22 19:56:58,244 INFO   , root, input.py :243, Matched schema ['spec', 'imagePullSecrets', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc755b40>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'affinity', 'nodeAffinity'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc755f00>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'affinity', 'podAffinity', 'preferredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'podAffinityTerm', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'affinity', 'podAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'affinity', 'podAntiAffinity', 'preferredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'podAffinityTerm', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'envConfig', 'env', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc754e80>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'envConfig', 'envFrom', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc754e20>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'jobManagerConfig', 'tolerations', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc740280>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'securityContext', 'sysctls', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc740160>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'affinity', 'nodeAffinity'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc755f00>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'affinity', 'podAffinity', 'preferredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'podAffinityTerm', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'affinity', 'podAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'affinity', 'podAntiAffinity', 'preferredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'podAffinityTerm', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'affinity', 'podAntiAffinity', 'requiredDuringSchedulingIgnoredDuringExecution', 'ITEM', 'labelSelector'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7f8400>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'envConfig', 'env', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc754e80>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'envConfig', 'envFrom', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc754e20>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'taskManagerConfig', 'tolerations', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc740280>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'volumeMounts', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc740580>
2024-02-22 19:56:58,245 INFO   , root, input.py :243, Matched schema ['spec', 'volumes', 'ITEM'] to k8s schema <acto.input.k8s_schemas.KubernetesObjectSchema object at 0x7f4ffc7413c0>
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :343, Generated 1071 test cases in total
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :344, Generated 515 test cases to run
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :345, Generated 1030 primitive test cases
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :348, Generated 30 semantic test cases
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :349, Generated 20 misoperations
2024-02-22 19:56:58,325 INFO   , MainThread, input.py :350, Generated 556 pruned test cases
2024-02-22 19:56:58,338 INFO   , MainThread, __main__.py:148, Acto initialization finished in 0:00:00.457151
2024-02-22 19:56:58,338 INFO   , MainThread, engine.py:1048, Creating preload images archive
2024-02-22 19:57:01,370 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 19:57:51,568 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 19:57:51,588 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 19:57:57,994 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:03,145 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:03,145 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:03,385 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:08,529 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:08,529 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:08,897 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:14,027 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:14,027 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:14,196 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:19,330 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:19,330 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:19,553 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:24,685 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:24,685 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:24,894 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:30,036 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:30,036 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:30,106 DEBUG  , Thread-1 (run), deploy.py:16, Waiting for all pods to be ready
2024-02-22 19:58:35,301 INFO   , Thread-1 (run), deploy.py:32, Operator ready
2024-02-22 19:58:35,301 INFO   , Thread-1 (run), deploy.py:36, All pods took 0 seconds to get ready
2024-02-22 19:58:55,354 WARNING, Thread-1 (run), object.py:155, [trial: 0, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 19:58:55,354 WARNING, Thread-1 (run), object.py:155, [trial: 0, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 19:58:55,354 WARNING, Thread-1 (run), object.py:155, [trial: 0, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 19:58:55,354 DEBUG  , Thread-1 (run), engine.py:652, [trial: 0, gen: 0] Run and check
2024-02-22 19:58:55,497 DEBUG  , Thread-1 (run), runner.py:123, [trial: 0, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 19:58:55,497 DEBUG  , Thread-1 (run), runner.py:124, [trial: 0, gen: 0] STDERR: 
2024-02-22 19:58:55,497 INFO   , Thread-1 (run), runner.py:437, [trial: 0, gen: 0] Waiting for system to converge... 
2024-02-22 20:02:31,332 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:03:31,441 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:05:01,297 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:06:01,404 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:06:55,525 ERROR  , Thread-1 (run), runner.py:586, [trial: 0, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:06:55,798 DEBUG  , Thread-1 (run), runner.py:267, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T02:58:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T02:58:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:06:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1796', 'uid': '9b55b953-3622-49ed-b0b6-ab26f12ae188'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:06:31Z', 'phase': ''}}}
2024-02-22 20:06:55,820 DEBUG  , Thread-1 (run), runner.py:296, [trial: 0, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-llxpp
2024-02-22 20:06:56,038 ERROR  , Thread-1 (run), runner.py:368, [trial: 0, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xr6k2
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '52495166-76e5-48b7-9ecb-a6487b689608', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:06:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xr6k2\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:06:56,091 INFO   , Thread-1 (run), result.py:170, [trial: 0, gen: 0] No stderr, continue
2024-02-22 20:06:56,124 ERROR  , Thread-1 (run), health.py:155, [trial: 0, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 20:06:56,151 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,151 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line time="2024-02-23T02:58:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line time="2024-02-23T02:58:31Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 02:58:31.051462353 +0000 UTC m=+0.011973033]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line time="2024-02-23T02:58:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line time="2024-02-23T02:58:31Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line time="2024-02-23T02:58:31Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 0, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:06:56,385 INFO   , Thread-1 (run), consistency.py:496, [trial: 0, gen: 0] All input deltas are matched
2024-02-22 20:06:56,387 INFO   , Thread-1 (run), engine.py:554, [trial: 0, gen: 0] Error result, running recovery
2024-02-22 20:06:56,387 DEBUG  , Thread-1 (run), engine.py:698, [trial: 0, gen: 0] Running recovery
2024-02-22 20:06:57,227 DEBUG  , Thread-1 (run), runner.py:123, [trial: 0, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 20:06:57,227 DEBUG  , Thread-1 (run), runner.py:124, [trial: 0, gen: 0] STDERR: 
2024-02-22 20:06:57,227 INFO   , Thread-1 (run), runner.py:437, [trial: 0, gen: 0] Waiting for system to converge... 
2024-02-22 20:07:57,395 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:08:57,505 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:10:06,140 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:11:06,248 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:12:06,307 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:13:06,406 INFO   , Thread-1 (run), runner.py:508, [trial: 0, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:14:57,233 ERROR  , Thread-1 (run), runner.py:586, [trial: 0, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:14:57,501 DEBUG  , Thread-1 (run), runner.py:267, [trial: 0, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T02:58:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T02:58:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:14:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2719', 'uid': '9b55b953-3622-49ed-b0b6-ab26f12ae188'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:14:31Z', 'phase': ''}}}
2024-02-22 20:14:57,523 DEBUG  , Thread-1 (run), runner.py:296, [trial: 0, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-llxpp
2024-02-22 20:14:57,760 ERROR  , Thread-1 (run), runner.py:368, [trial: 0, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xr6k2
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2f8cb7c4-bc29-4f12-b55c-4162d153c381', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:14:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xr6k2\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:14:57,812 DEBUG  , Thread-1 (run), engine.py:207, [trial: 0, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 20:14:57,815 INFO   , Thread-1 (run), engine.py:333, Trial 0 finished, completed in 00:17:57
2024-02-22 20:14:57,815 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 57
2024-02-22 20:14:57,815 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 20:14:57,815 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 20:14:57,815 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 20:14:57,851 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-llxpp
2024-02-22 20:15:11,296 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 20:16:02,032 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 20:16:02,053 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 20:16:08,307 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:13,453 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:13,453 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:13,716 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:18,854 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:18,854 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:19,189 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:24,393 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:24,393 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:24,587 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:29,719 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:29,720 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:29,946 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:35,061 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:35,061 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:35,261 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:40,404 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:40,405 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:16:40,472 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 0, gen: 0] Waiting for all pods to be ready
2024-02-22 20:16:45,610 INFO   , Thread-1 (run), deploy.py:32, [trial: 0, gen: 0] Operator ready
2024-02-22 20:16:45,611 INFO   , Thread-1 (run), deploy.py:36, [trial: 0, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:17:05,657 WARNING, Thread-1 (run), object.py:155, [trial: 1, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 20:17:05,657 WARNING, Thread-1 (run), object.py:155, [trial: 1, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 20:17:05,658 WARNING, Thread-1 (run), object.py:155, [trial: 1, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 20:17:05,658 DEBUG  , Thread-1 (run), engine.py:652, [trial: 1, gen: 0] Run and check
2024-02-22 20:17:05,832 DEBUG  , Thread-1 (run), runner.py:123, [trial: 1, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 20:17:05,832 DEBUG  , Thread-1 (run), runner.py:124, [trial: 1, gen: 0] STDERR: 
2024-02-22 20:17:05,832 INFO   , Thread-1 (run), runner.py:437, [trial: 1, gen: 0] Waiting for system to converge... 
2024-02-22 20:20:11,729 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:21:11,817 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:23:16,905 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:24:17,009 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:25:05,856 ERROR  , Thread-1 (run), runner.py:586, [trial: 1, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:25:06,105 DEBUG  , Thread-1 (run), runner.py:267, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:17:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:17:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:24:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1809', 'uid': 'e58bfe9b-850e-4cc5-918d-c02398a11513'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:24:41Z', 'phase': ''}}}
2024-02-22 20:25:06,127 DEBUG  , Thread-1 (run), runner.py:296, [trial: 1, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q6qgp
2024-02-22 20:25:06,349 ERROR  , Thread-1 (run), runner.py:368, [trial: 1, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wmdc9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd337025a-f1fd-4ac7-8f04-5027283961a9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:25:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wmdc9\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:25:06,382 INFO   , Thread-1 (run), result.py:170, [trial: 1, gen: 0] No stderr, continue
2024-02-22 20:25:06,419 ERROR  , Thread-1 (run), health.py:155, [trial: 1, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 20:25:06,444 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,444 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line time="2024-02-23T03:16:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,444 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line time="2024-02-23T03:16:41Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 03:16:41.4606155 +0000 UTC m=+0.024854327]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,444 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line time="2024-02-23T03:16:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,444 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line time="2024-02-23T03:16:41Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,445 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line time="2024-02-23T03:16:41Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,496 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 1, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:25:06,725 INFO   , Thread-1 (run), consistency.py:496, [trial: 1, gen: 0] All input deltas are matched
2024-02-22 20:25:06,727 INFO   , Thread-1 (run), engine.py:554, [trial: 1, gen: 0] Error result, running recovery
2024-02-22 20:25:06,727 DEBUG  , Thread-1 (run), engine.py:698, [trial: 1, gen: 0] Running recovery
2024-02-22 20:25:07,549 DEBUG  , Thread-1 (run), runner.py:123, [trial: 1, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 20:25:07,549 DEBUG  , Thread-1 (run), runner.py:124, [trial: 1, gen: 0] STDERR: 
2024-02-22 20:25:07,549 INFO   , Thread-1 (run), runner.py:437, [trial: 1, gen: 0] Waiting for system to converge... 
2024-02-22 20:26:07,723 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:27:07,831 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:28:11,704 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:29:11,814 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:30:11,921 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:31:12,030 INFO   , Thread-1 (run), runner.py:508, [trial: 1, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:33:07,558 ERROR  , Thread-1 (run), runner.py:586, [trial: 1, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:33:07,856 DEBUG  , Thread-1 (run), runner.py:267, [trial: 1, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:17:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:17:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:32:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2731', 'uid': 'e58bfe9b-850e-4cc5-918d-c02398a11513'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:32:41Z', 'phase': ''}}}
2024-02-22 20:33:07,878 DEBUG  , Thread-1 (run), runner.py:296, [trial: 1, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q6qgp
2024-02-22 20:33:08,132 ERROR  , Thread-1 (run), runner.py:368, [trial: 1, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wmdc9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7dfef8f9-8d42-4997-9a3c-7252946a7933', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:33:08 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wmdc9\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:33:08,189 DEBUG  , Thread-1 (run), engine.py:207, [trial: 1, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 20:33:08,193 INFO   , Thread-1 (run), engine.py:333, Trial 1 finished, completed in 00:18:00
2024-02-22 20:33:08,193 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-22 20:33:08,193 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 20:33:08,193 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 20:33:08,193 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 20:33:08,229 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-q6qgp
2024-02-22 20:33:21,595 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 20:34:15,890 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 20:34:15,918 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 20:34:23,129 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:28,272 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:28,272 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:28,520 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:33,657 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:33,657 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:33,971 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:39,111 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:39,111 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:39,233 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:44,374 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:44,374 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:44,585 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:49,724 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:49,724 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:49,891 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:34:55,027 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:34:55,027 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:34:55,089 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 1, gen: 0] Waiting for all pods to be ready
2024-02-22 20:35:00,294 INFO   , Thread-1 (run), deploy.py:32, [trial: 1, gen: 0] Operator ready
2024-02-22 20:35:00,294 INFO   , Thread-1 (run), deploy.py:36, [trial: 1, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:35:20,329 WARNING, Thread-1 (run), object.py:155, [trial: 2, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 20:35:20,330 WARNING, Thread-1 (run), object.py:155, [trial: 2, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 20:35:20,330 WARNING, Thread-1 (run), object.py:155, [trial: 2, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 20:35:20,330 DEBUG  , Thread-1 (run), engine.py:652, [trial: 2, gen: 0] Run and check
2024-02-22 20:35:20,489 DEBUG  , Thread-1 (run), runner.py:123, [trial: 2, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 20:35:20,489 DEBUG  , Thread-1 (run), runner.py:124, [trial: 2, gen: 0] STDERR: 
2024-02-22 20:35:20,490 INFO   , Thread-1 (run), runner.py:437, [trial: 2, gen: 0] Waiting for system to converge... 
2024-02-22 20:38:27,157 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:39:27,266 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:41:26,320 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:42:26,427 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:43:20,517 ERROR  , Thread-1 (run), runner.py:586, [trial: 2, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:43:20,795 DEBUG  , Thread-1 (run), runner.py:267, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:35:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:35:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:42:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1788', 'uid': '0e9bba55-c547-4ccd-9a1a-cf50efb69d4a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:42:56Z', 'phase': ''}}}
2024-02-22 20:43:20,817 DEBUG  , Thread-1 (run), runner.py:296, [trial: 2, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4wh69
2024-02-22 20:43:21,048 ERROR  , Thread-1 (run), runner.py:368, [trial: 2, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-nk6sq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '75bc21b5-8d19-4cdc-9deb-abb281f3a9f4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:43:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-nk6sq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:43:21,081 INFO   , Thread-1 (run), result.py:170, [trial: 2, gen: 0] No stderr, continue
2024-02-22 20:43:21,115 ERROR  , Thread-1 (run), health.py:155, [trial: 2, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line time="2024-02-23T03:34:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line time="2024-02-23T03:34:56Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 03:34:56.054698079 +0000 UTC m=+0.011566506]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line time="2024-02-23T03:34:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line time="2024-02-23T03:34:56Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,142 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line time="2024-02-23T03:34:56Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 2, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 20:43:21,353 INFO   , Thread-1 (run), consistency.py:496, [trial: 2, gen: 0] All input deltas are matched
2024-02-22 20:43:21,355 INFO   , Thread-1 (run), engine.py:554, [trial: 2, gen: 0] Error result, running recovery
2024-02-22 20:43:21,355 DEBUG  , Thread-1 (run), engine.py:698, [trial: 2, gen: 0] Running recovery
2024-02-22 20:43:22,236 DEBUG  , Thread-1 (run), runner.py:123, [trial: 2, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 20:43:22,236 DEBUG  , Thread-1 (run), runner.py:124, [trial: 2, gen: 0] STDERR: 
2024-02-22 20:43:22,236 INFO   , Thread-1 (run), runner.py:437, [trial: 2, gen: 0] Waiting for system to converge... 
2024-02-22 20:44:22,384 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:45:22,490 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:46:26,283 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:47:26,349 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:48:26,457 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:49:26,537 INFO   , Thread-1 (run), runner.py:508, [trial: 2, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:51:22,245 ERROR  , Thread-1 (run), runner.py:586, [trial: 2, gen: 0] System failed to converge within 480 seconds
2024-02-22 20:51:22,486 DEBUG  , Thread-1 (run), runner.py:267, [trial: 2, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:35:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:35:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T03:50:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2707', 'uid': '0e9bba55-c547-4ccd-9a1a-cf50efb69d4a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T03:50:56Z', 'phase': ''}}}
2024-02-22 20:51:22,509 DEBUG  , Thread-1 (run), runner.py:296, [trial: 2, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4wh69
2024-02-22 20:51:22,767 ERROR  , Thread-1 (run), runner.py:368, [trial: 2, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-nk6sq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1d9ab3c5-e0aa-4195-9fce-a890324a19e8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 03:51:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-nk6sq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 20:51:22,829 DEBUG  , Thread-1 (run), engine.py:207, [trial: 2, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 20:51:22,833 INFO   , Thread-1 (run), engine.py:333, Trial 2 finished, completed in 00:18:04
2024-02-22 20:51:22,833 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-22 20:51:22,833 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 20:51:22,833 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 20:51:22,833 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 20:51:22,878 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4wh69
2024-02-22 20:51:36,409 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 20:52:32,334 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 20:52:32,348 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 20:52:36,910 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:52:42,054 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:52:42,054 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:52:42,303 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:52:47,505 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:52:47,505 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:52:47,803 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:52:52,931 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:52:52,931 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:52:53,088 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:52:58,226 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:52:58,226 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:52:58,484 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:53:03,610 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:53:03,610 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:53:03,793 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:53:08,900 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:53:08,901 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:53:08,967 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 2, gen: 0] Waiting for all pods to be ready
2024-02-22 20:53:14,082 INFO   , Thread-1 (run), deploy.py:32, [trial: 2, gen: 0] Operator ready
2024-02-22 20:53:14,082 INFO   , Thread-1 (run), deploy.py:36, [trial: 2, gen: 0] All pods took 0 seconds to get ready
2024-02-22 20:53:34,135 WARNING, Thread-1 (run), object.py:155, [trial: 3, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 20:53:34,135 WARNING, Thread-1 (run), object.py:155, [trial: 3, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 20:53:34,135 WARNING, Thread-1 (run), object.py:155, [trial: 3, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 20:53:34,136 DEBUG  , Thread-1 (run), engine.py:652, [trial: 3, gen: 0] Run and check
2024-02-22 20:53:34,282 DEBUG  , Thread-1 (run), runner.py:123, [trial: 3, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 20:53:34,282 DEBUG  , Thread-1 (run), runner.py:124, [trial: 3, gen: 0] STDERR: 
2024-02-22 20:53:34,282 INFO   , Thread-1 (run), runner.py:437, [trial: 3, gen: 0] Waiting for system to converge... 
2024-02-22 20:56:40,296 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:57:40,378 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 20:59:44,505 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:00:44,613 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:01:34,306 ERROR  , Thread-1 (run), runner.py:586, [trial: 3, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:01:34,568 DEBUG  , Thread-1 (run), runner.py:267, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:53:34Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:53:34Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:01:10Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': '1aa43e27-e1c5-4a73-a676-bfdb5af5ab9c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:01:10Z', 'phase': ''}}}
2024-02-22 21:01:34,590 DEBUG  , Thread-1 (run), runner.py:296, [trial: 3, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l76nn
2024-02-22 21:01:34,826 ERROR  , Thread-1 (run), runner.py:368, [trial: 3, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-l279v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f3db8610-c12d-4682-9f12-0bc1666ced5a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:01:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-l279v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:01:34,868 INFO   , Thread-1 (run), result.py:170, [trial: 3, gen: 0] No stderr, continue
2024-02-22 21:01:34,904 ERROR  , Thread-1 (run), health.py:155, [trial: 3, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 21:01:34,929 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,929 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line time="2024-02-23T03:53:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,929 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line time="2024-02-23T03:53:09Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 03:53:09.921067668 +0000 UTC m=+0.010246203]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,930 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line time="2024-02-23T03:53:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,930 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line time="2024-02-23T03:53:09Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,930 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line time="2024-02-23T03:53:09Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:34,986 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 3, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:01:35,229 INFO   , Thread-1 (run), consistency.py:496, [trial: 3, gen: 0] All input deltas are matched
2024-02-22 21:01:35,231 INFO   , Thread-1 (run), engine.py:554, [trial: 3, gen: 0] Error result, running recovery
2024-02-22 21:01:35,231 DEBUG  , Thread-1 (run), engine.py:698, [trial: 3, gen: 0] Running recovery
2024-02-22 21:01:36,097 DEBUG  , Thread-1 (run), runner.py:123, [trial: 3, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 21:01:36,098 DEBUG  , Thread-1 (run), runner.py:124, [trial: 3, gen: 0] STDERR: 
2024-02-22 21:01:36,098 INFO   , Thread-1 (run), runner.py:437, [trial: 3, gen: 0] Waiting for system to converge... 
2024-02-22 21:02:36,215 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:03:36,322 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:04:46,475 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:05:46,555 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:06:46,663 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:07:46,771 INFO   , Thread-1 (run), runner.py:508, [trial: 3, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:09:36,107 ERROR  , Thread-1 (run), runner.py:586, [trial: 3, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:09:36,399 DEBUG  , Thread-1 (run), runner.py:267, [trial: 3, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T03:53:34Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T03:53:34Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:09:10Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': '1aa43e27-e1c5-4a73-a676-bfdb5af5ab9c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:09:10Z', 'phase': ''}}}
2024-02-22 21:09:36,421 DEBUG  , Thread-1 (run), runner.py:296, [trial: 3, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l76nn
2024-02-22 21:09:36,670 ERROR  , Thread-1 (run), runner.py:368, [trial: 3, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-l279v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e9612b0f-e09d-4ed2-8ddd-d2762f49be96', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:09:36 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-l279v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:09:36,716 DEBUG  , Thread-1 (run), engine.py:207, [trial: 3, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 21:09:36,720 INFO   , Thread-1 (run), engine.py:333, Trial 3 finished, completed in 00:18:03
2024-02-22 21:09:36,720 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-22 21:09:36,720 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 21:09:36,720 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 21:09:36,721 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 21:09:36,758 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-l76nn
2024-02-22 21:09:50,230 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 21:10:41,568 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 21:10:41,591 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 21:10:48,003 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:10:53,147 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:10:53,148 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:10:53,408 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:10:58,549 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:10:58,549 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:10:58,886 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:11:04,025 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:11:04,025 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:11:04,186 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:11:09,323 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:11:09,323 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:11:09,584 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:11:14,722 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:11:14,723 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:11:14,909 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:11:20,134 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:11:20,135 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:11:20,212 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 3, gen: 0] Waiting for all pods to be ready
2024-02-22 21:11:25,333 INFO   , Thread-1 (run), deploy.py:32, [trial: 3, gen: 0] Operator ready
2024-02-22 21:11:25,333 INFO   , Thread-1 (run), deploy.py:36, [trial: 3, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:11:45,385 WARNING, Thread-1 (run), object.py:155, [trial: 4, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 21:11:45,385 WARNING, Thread-1 (run), object.py:155, [trial: 4, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 21:11:45,385 WARNING, Thread-1 (run), object.py:155, [trial: 4, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 21:11:45,386 DEBUG  , Thread-1 (run), engine.py:652, [trial: 4, gen: 0] Run and check
2024-02-22 21:11:45,539 DEBUG  , Thread-1 (run), runner.py:123, [trial: 4, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 21:11:45,539 DEBUG  , Thread-1 (run), runner.py:124, [trial: 4, gen: 0] STDERR: 
2024-02-22 21:11:45,539 INFO   , Thread-1 (run), runner.py:437, [trial: 4, gen: 0] Waiting for system to converge... 
2024-02-22 21:14:51,723 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:15:51,788 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:17:51,512 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:18:51,584 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:19:45,564 ERROR  , Thread-1 (run), runner.py:586, [trial: 4, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:19:45,797 DEBUG  , Thread-1 (run), runner.py:267, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:11:45Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:11:45Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:19:21Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '313d1cf1-232c-45e3-9abc-55fb8ceade3d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:19:21Z', 'phase': ''}}}
2024-02-22 21:19:45,819 DEBUG  , Thread-1 (run), runner.py:296, [trial: 4, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jvg8k
2024-02-22 21:19:46,040 ERROR  , Thread-1 (run), runner.py:368, [trial: 4, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-69vtk
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a20fffb7-9c38-466f-9531-3682a7fad93e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:19:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-69vtk\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:19:46,083 INFO   , Thread-1 (run), result.py:170, [trial: 4, gen: 0] No stderr, continue
2024-02-22 21:19:46,117 ERROR  , Thread-1 (run), health.py:155, [trial: 4, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 21:19:46,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line time="2024-02-23T04:11:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line time="2024-02-23T04:11:21Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 04:11:21.232236846 +0000 UTC m=+0.022530304]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line time="2024-02-23T04:11:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line time="2024-02-23T04:11:21Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,144 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line time="2024-02-23T04:11:21Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,197 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 4, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:19:46,376 INFO   , Thread-1 (run), consistency.py:496, [trial: 4, gen: 0] All input deltas are matched
2024-02-22 21:19:46,378 INFO   , Thread-1 (run), engine.py:554, [trial: 4, gen: 0] Error result, running recovery
2024-02-22 21:19:46,378 DEBUG  , Thread-1 (run), engine.py:698, [trial: 4, gen: 0] Running recovery
2024-02-22 21:19:47,184 DEBUG  , Thread-1 (run), runner.py:123, [trial: 4, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 21:19:47,184 DEBUG  , Thread-1 (run), runner.py:124, [trial: 4, gen: 0] STDERR: 
2024-02-22 21:19:47,184 INFO   , Thread-1 (run), runner.py:437, [trial: 4, gen: 0] Waiting for system to converge... 
2024-02-22 21:20:47,312 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:21:47,398 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:22:51,482 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:23:51,533 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:24:51,630 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:25:51,735 INFO   , Thread-1 (run), runner.py:508, [trial: 4, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:27:47,195 ERROR  , Thread-1 (run), runner.py:586, [trial: 4, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:27:47,468 DEBUG  , Thread-1 (run), runner.py:267, [trial: 4, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:11:45Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:11:45Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:27:21Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '313d1cf1-232c-45e3-9abc-55fb8ceade3d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:27:21Z', 'phase': ''}}}
2024-02-22 21:27:47,491 DEBUG  , Thread-1 (run), runner.py:296, [trial: 4, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jvg8k
2024-02-22 21:27:47,744 ERROR  , Thread-1 (run), runner.py:368, [trial: 4, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-69vtk
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e420a6ac-d5f7-43b3-be2b-e29b2086eb26', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:27:47 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-69vtk\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:27:47,791 DEBUG  , Thread-1 (run), engine.py:207, [trial: 4, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 21:27:47,795 INFO   , Thread-1 (run), engine.py:333, Trial 4 finished, completed in 00:18:00
2024-02-22 21:27:47,795 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-22 21:27:47,795 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 21:27:47,795 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 21:27:47,795 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 21:27:47,833 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-jvg8k
2024-02-22 21:28:01,394 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 21:28:52,011 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 21:28:52,035 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 21:28:58,871 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:04,012 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:04,012 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:04,241 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:09,441 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:09,441 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:09,740 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:14,880 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:14,880 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:15,014 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:20,154 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:20,154 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:20,432 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:25,557 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:25,557 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:25,718 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:30,860 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:30,860 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:30,931 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 4, gen: 0] Waiting for all pods to be ready
2024-02-22 21:29:36,069 INFO   , Thread-1 (run), deploy.py:32, [trial: 4, gen: 0] Operator ready
2024-02-22 21:29:36,069 INFO   , Thread-1 (run), deploy.py:36, [trial: 4, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:29:56,106 WARNING, Thread-1 (run), object.py:155, [trial: 5, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 21:29:56,106 WARNING, Thread-1 (run), object.py:155, [trial: 5, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 21:29:56,106 WARNING, Thread-1 (run), object.py:155, [trial: 5, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 21:29:56,107 DEBUG  , Thread-1 (run), engine.py:652, [trial: 5, gen: 0] Run and check
2024-02-22 21:29:56,260 DEBUG  , Thread-1 (run), runner.py:123, [trial: 5, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 21:29:56,260 DEBUG  , Thread-1 (run), runner.py:124, [trial: 5, gen: 0] STDERR: 
2024-02-22 21:29:56,260 INFO   , Thread-1 (run), runner.py:437, [trial: 5, gen: 0] Waiting for system to converge... 
2024-02-22 21:33:02,216 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:34:02,306 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:36:02,204 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:37:02,291 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:37:56,283 ERROR  , Thread-1 (run), runner.py:586, [trial: 5, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:37:56,553 DEBUG  , Thread-1 (run), runner.py:267, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:29:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:29:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:37:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '56f07ff8-bebd-4c6e-81f7-afe893ddc974'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:37:32Z', 'phase': ''}}}
2024-02-22 21:37:56,581 DEBUG  , Thread-1 (run), runner.py:296, [trial: 5, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d624b
2024-02-22 21:37:56,808 ERROR  , Thread-1 (run), runner.py:368, [trial: 5, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f26fg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '13ab6aa8-318e-4803-8e6d-5c901a3e52fd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:37:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f26fg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:37:56,858 INFO   , Thread-1 (run), result.py:170, [trial: 5, gen: 0] No stderr, continue
2024-02-22 21:37:56,896 ERROR  , Thread-1 (run), health.py:155, [trial: 5, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line time="2024-02-23T04:29:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line time="2024-02-23T04:29:31Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 04:29:31.921582403 +0000 UTC m=+0.017675026]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line time="2024-02-23T04:29:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line time="2024-02-23T04:29:31Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:56,994 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line time="2024-02-23T04:29:31Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:57,045 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 5, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:37:57,202 INFO   , Thread-1 (run), consistency.py:496, [trial: 5, gen: 0] All input deltas are matched
2024-02-22 21:37:57,205 INFO   , Thread-1 (run), engine.py:554, [trial: 5, gen: 0] Error result, running recovery
2024-02-22 21:37:57,205 DEBUG  , Thread-1 (run), engine.py:698, [trial: 5, gen: 0] Running recovery
2024-02-22 21:37:58,023 DEBUG  , Thread-1 (run), runner.py:123, [trial: 5, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 21:37:58,023 DEBUG  , Thread-1 (run), runner.py:124, [trial: 5, gen: 0] STDERR: 
2024-02-22 21:37:58,023 INFO   , Thread-1 (run), runner.py:437, [trial: 5, gen: 0] Waiting for system to converge... 
2024-02-22 21:38:58,166 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:39:58,242 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:41:03,142 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:42:03,244 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:43:03,350 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:44:03,447 INFO   , Thread-1 (run), runner.py:508, [trial: 5, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:45:58,033 ERROR  , Thread-1 (run), runner.py:586, [trial: 5, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:45:58,330 DEBUG  , Thread-1 (run), runner.py:267, [trial: 5, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:29:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:29:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:45:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '56f07ff8-bebd-4c6e-81f7-afe893ddc974'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:45:32Z', 'phase': ''}}}
2024-02-22 21:45:58,352 DEBUG  , Thread-1 (run), runner.py:296, [trial: 5, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d624b
2024-02-22 21:45:58,612 ERROR  , Thread-1 (run), runner.py:368, [trial: 5, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f26fg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'ca31ac90-fcbc-45c2-9021-35bd5b3d2a81', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:45:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f26fg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:45:58,662 DEBUG  , Thread-1 (run), engine.py:207, [trial: 5, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 21:45:58,666 INFO   , Thread-1 (run), engine.py:333, Trial 5 finished, completed in 00:18:00
2024-02-22 21:45:58,667 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-22 21:45:58,667 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 21:45:58,667 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 21:45:58,667 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 21:45:58,696 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-d624b
2024-02-22 21:46:12,304 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 21:47:03,372 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 21:47:03,385 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 21:47:10,107 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:15,253 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:15,253 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:15,518 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:20,647 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:20,647 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:20,946 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:26,086 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:26,086 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:26,213 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:31,353 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:31,353 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:31,546 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:36,672 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:36,672 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:36,871 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:42,016 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:42,016 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:47:42,098 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 5, gen: 0] Waiting for all pods to be ready
2024-02-22 21:47:47,308 INFO   , Thread-1 (run), deploy.py:32, [trial: 5, gen: 0] Operator ready
2024-02-22 21:47:47,308 INFO   , Thread-1 (run), deploy.py:36, [trial: 5, gen: 0] All pods took 0 seconds to get ready
2024-02-22 21:48:07,357 WARNING, Thread-1 (run), object.py:155, [trial: 6, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 21:48:07,358 WARNING, Thread-1 (run), object.py:155, [trial: 6, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 21:48:07,358 WARNING, Thread-1 (run), object.py:155, [trial: 6, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 21:48:07,358 DEBUG  , Thread-1 (run), engine.py:652, [trial: 6, gen: 0] Run and check
2024-02-22 21:48:07,498 DEBUG  , Thread-1 (run), runner.py:123, [trial: 6, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 21:48:07,498 DEBUG  , Thread-1 (run), runner.py:124, [trial: 6, gen: 0] STDERR: 
2024-02-22 21:48:07,498 INFO   , Thread-1 (run), runner.py:437, [trial: 6, gen: 0] Waiting for system to converge... 
2024-02-22 21:51:43,351 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:52:43,460 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:54:13,307 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:55:13,414 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:56:07,527 ERROR  , Thread-1 (run), runner.py:586, [trial: 6, gen: 0] System failed to converge within 480 seconds
2024-02-22 21:56:07,795 DEBUG  , Thread-1 (run), runner.py:267, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:48:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:48:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T04:55:43Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': '99ee1ace-0a6d-40f7-af4e-88bae94b10df'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T04:55:43Z', 'phase': ''}}}
2024-02-22 21:56:07,817 DEBUG  , Thread-1 (run), runner.py:296, [trial: 6, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rmb6h
2024-02-22 21:56:08,047 ERROR  , Thread-1 (run), runner.py:368, [trial: 6, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zzmp8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6b764b8e-421a-463e-ba6a-fbb1ae9b30ab', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 04:56:08 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zzmp8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 21:56:08,083 INFO   , Thread-1 (run), result.py:170, [trial: 6, gen: 0] No stderr, continue
2024-02-22 21:56:08,118 ERROR  , Thread-1 (run), health.py:155, [trial: 6, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 21:56:08,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line time="2024-02-23T04:47:43Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line time="2024-02-23T04:47:43Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 04:47:43.063272512 +0000 UTC m=+0.022347521]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line time="2024-02-23T04:47:43Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,143 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line time="2024-02-23T04:47:43Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,144 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line time="2024-02-23T04:47:43Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,194 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 6, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 21:56:08,351 INFO   , Thread-1 (run), consistency.py:496, [trial: 6, gen: 0] All input deltas are matched
2024-02-22 21:56:08,354 INFO   , Thread-1 (run), engine.py:554, [trial: 6, gen: 0] Error result, running recovery
2024-02-22 21:56:08,354 DEBUG  , Thread-1 (run), engine.py:698, [trial: 6, gen: 0] Running recovery
2024-02-22 21:56:09,182 DEBUG  , Thread-1 (run), runner.py:123, [trial: 6, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 21:56:09,183 DEBUG  , Thread-1 (run), runner.py:124, [trial: 6, gen: 0] STDERR: 
2024-02-22 21:56:09,183 INFO   , Thread-1 (run), runner.py:437, [trial: 6, gen: 0] Waiting for system to converge... 
2024-02-22 21:57:09,319 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:58:09,418 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 21:59:13,293 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:00:13,401 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:01:13,483 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:02:13,586 INFO   , Thread-1 (run), runner.py:508, [trial: 6, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:04:09,192 ERROR  , Thread-1 (run), runner.py:586, [trial: 6, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:04:09,467 DEBUG  , Thread-1 (run), runner.py:267, [trial: 6, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T04:48:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T04:48:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:03:43Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2722', 'uid': '99ee1ace-0a6d-40f7-af4e-88bae94b10df'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:03:43Z', 'phase': ''}}}
2024-02-22 22:04:09,489 DEBUG  , Thread-1 (run), runner.py:296, [trial: 6, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rmb6h
2024-02-22 22:04:09,736 ERROR  , Thread-1 (run), runner.py:368, [trial: 6, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zzmp8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '037bd03b-d03b-4d78-874b-93e05f8cf08e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:04:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zzmp8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 22:04:09,801 DEBUG  , Thread-1 (run), engine.py:207, [trial: 6, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 22:04:09,805 INFO   , Thread-1 (run), engine.py:333, Trial 6 finished, completed in 00:18:01
2024-02-22 22:04:09,805 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-22 22:04:09,805 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 22:04:09,805 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 22:04:09,806 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 22:04:09,839 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-rmb6h
2024-02-22 22:04:23,392 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 22:05:15,243 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 22:05:15,283 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 22:05:22,228 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:27,374 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:27,374 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:27,646 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:32,827 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:32,827 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:33,131 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:38,260 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:38,260 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:38,410 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:43,548 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:43,548 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:43,762 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:48,891 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:48,891 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:49,062 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:54,203 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:54,203 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:05:54,272 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 6, gen: 0] Waiting for all pods to be ready
2024-02-22 22:05:59,411 INFO   , Thread-1 (run), deploy.py:32, [trial: 6, gen: 0] Operator ready
2024-02-22 22:05:59,411 INFO   , Thread-1 (run), deploy.py:36, [trial: 6, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:06:19,464 WARNING, Thread-1 (run), object.py:155, [trial: 7, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 22:06:19,464 WARNING, Thread-1 (run), object.py:155, [trial: 7, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 22:06:19,464 WARNING, Thread-1 (run), object.py:155, [trial: 7, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 22:06:19,464 DEBUG  , Thread-1 (run), engine.py:652, [trial: 7, gen: 0] Run and check
2024-02-22 22:06:19,648 DEBUG  , Thread-1 (run), runner.py:123, [trial: 7, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 22:06:19,649 DEBUG  , Thread-1 (run), runner.py:124, [trial: 7, gen: 0] STDERR: 
2024-02-22 22:06:19,649 INFO   , Thread-1 (run), runner.py:437, [trial: 7, gen: 0] Waiting for system to converge... 
2024-02-22 22:09:25,607 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:10:25,894 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:12:30,603 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:13:30,659 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:14:19,674 ERROR  , Thread-1 (run), runner.py:586, [trial: 7, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:14:19,944 DEBUG  , Thread-1 (run), runner.py:267, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:06:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:06:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:13:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': '88ae0897-20ef-49ed-a985-3f5756b07636'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:13:55Z', 'phase': ''}}}
2024-02-22 22:14:19,965 DEBUG  , Thread-1 (run), runner.py:296, [trial: 7, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-x9nbh
2024-02-22 22:14:20,178 ERROR  , Thread-1 (run), runner.py:368, [trial: 7, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8xjfm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2055a7ed-25ac-4f2f-aa36-9e0afd508fa9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:14:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8xjfm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 22:14:20,209 INFO   , Thread-1 (run), result.py:170, [trial: 7, gen: 0] No stderr, continue
2024-02-22 22:14:20,242 ERROR  , Thread-1 (run), health.py:155, [trial: 7, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 22:14:20,268 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,268 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,268 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 05:05:55.218709829 +0000 UTC m=+0.011316600]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,269 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,269 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,269 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,269 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line time="2024-02-23T05:05:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,318 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 7, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:14:20,555 INFO   , Thread-1 (run), consistency.py:496, [trial: 7, gen: 0] All input deltas are matched
2024-02-22 22:14:20,557 INFO   , Thread-1 (run), engine.py:554, [trial: 7, gen: 0] Error result, running recovery
2024-02-22 22:14:20,557 DEBUG  , Thread-1 (run), engine.py:698, [trial: 7, gen: 0] Running recovery
2024-02-22 22:14:21,371 DEBUG  , Thread-1 (run), runner.py:123, [trial: 7, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 22:14:21,371 DEBUG  , Thread-1 (run), runner.py:124, [trial: 7, gen: 0] STDERR: 
2024-02-22 22:14:21,371 INFO   , Thread-1 (run), runner.py:437, [trial: 7, gen: 0] Waiting for system to converge... 
2024-02-22 22:15:21,544 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:16:21,602 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:17:28,612 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:18:28,719 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:19:28,777 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:20:28,884 INFO   , Thread-1 (run), runner.py:508, [trial: 7, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:22:21,381 ERROR  , Thread-1 (run), runner.py:586, [trial: 7, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:22:21,650 DEBUG  , Thread-1 (run), runner.py:267, [trial: 7, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:06:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:06:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:21:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2728', 'uid': '88ae0897-20ef-49ed-a985-3f5756b07636'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:21:55Z', 'phase': ''}}}
2024-02-22 22:22:21,672 DEBUG  , Thread-1 (run), runner.py:296, [trial: 7, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-x9nbh
2024-02-22 22:22:21,910 ERROR  , Thread-1 (run), runner.py:368, [trial: 7, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8xjfm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'af63ac12-df64-4976-b02d-cd417487af6e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:22:21 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8xjfm\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-22 22:22:21,953 DEBUG  , Thread-1 (run), engine.py:207, [trial: 7, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 22:22:21,956 INFO   , Thread-1 (run), engine.py:333, Trial 7 finished, completed in 00:18:02
2024-02-22 22:22:21,956 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-22 22:22:21,956 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 22:22:21,956 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 22:22:21,956 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 22:22:22,000 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-x9nbh
2024-02-22 22:22:35,638 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 22:23:32,058 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 22:23:32,076 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 22:23:37,265 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:23:42,406 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:23:42,407 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:23:42,642 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:23:47,768 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:23:47,768 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:23:48,032 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:23:53,173 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:23:53,173 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:23:53,309 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:23:58,453 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:23:58,454 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:23:58,673 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:24:03,815 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:24:03,815 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:24:04,021 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:24:09,161 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:24:09,161 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:24:09,229 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 7, gen: 0] Waiting for all pods to be ready
2024-02-22 22:24:14,432 INFO   , Thread-1 (run), deploy.py:32, [trial: 7, gen: 0] Operator ready
2024-02-22 22:24:14,433 INFO   , Thread-1 (run), deploy.py:36, [trial: 7, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:24:34,499 WARNING, Thread-1 (run), object.py:155, [trial: 8, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 22:24:34,499 WARNING, Thread-1 (run), object.py:155, [trial: 8, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 22:24:34,499 WARNING, Thread-1 (run), object.py:155, [trial: 8, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 22:24:34,500 DEBUG  , Thread-1 (run), engine.py:652, [trial: 8, gen: 0] Run and check
2024-02-22 22:24:34,640 DEBUG  , Thread-1 (run), runner.py:123, [trial: 8, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 22:24:34,640 DEBUG  , Thread-1 (run), runner.py:124, [trial: 8, gen: 0] STDERR: 
2024-02-22 22:24:34,641 INFO   , Thread-1 (run), runner.py:437, [trial: 8, gen: 0] Waiting for system to converge... 
2024-02-22 22:27:40,508 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:28:40,616 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:30:40,514 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:31:40,622 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:32:34,665 ERROR  , Thread-1 (run), runner.py:586, [trial: 8, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:32:34,938 DEBUG  , Thread-1 (run), runner.py:267, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:24:34Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:24:34Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:32:10Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1798', 'uid': 'ed8e549b-7ac3-4df2-b0ff-a6c666b03578'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:32:10Z', 'phase': ''}}}
2024-02-22 22:32:34,962 DEBUG  , Thread-1 (run), runner.py:296, [trial: 8, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4mk5j
2024-02-22 22:32:35,184 ERROR  , Thread-1 (run), runner.py:368, [trial: 8, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-lnt6q
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6f7fdce1-9b09-4bed-a2e0-3b0e2951843a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:32:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-lnt6q\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 22:32:35,232 INFO   , Thread-1 (run), result.py:170, [trial: 8, gen: 0] No stderr, continue
2024-02-22 22:32:35,267 ERROR  , Thread-1 (run), health.py:155, [trial: 8, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 22:32:35,292 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,292 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line time="2024-02-23T05:24:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,292 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line time="2024-02-23T05:24:10Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 05:24:10.216582169 +0000 UTC m=+0.017137984]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,292 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line time="2024-02-23T05:24:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,293 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line time="2024-02-23T05:24:10Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,293 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line time="2024-02-23T05:24:10Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,352 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 8, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:32:35,526 INFO   , Thread-1 (run), consistency.py:496, [trial: 8, gen: 0] All input deltas are matched
2024-02-22 22:32:35,529 INFO   , Thread-1 (run), engine.py:554, [trial: 8, gen: 0] Error result, running recovery
2024-02-22 22:32:35,529 DEBUG  , Thread-1 (run), engine.py:698, [trial: 8, gen: 0] Running recovery
2024-02-22 22:32:36,408 DEBUG  , Thread-1 (run), runner.py:123, [trial: 8, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 22:32:36,408 DEBUG  , Thread-1 (run), runner.py:124, [trial: 8, gen: 0] STDERR: 
2024-02-22 22:32:36,408 INFO   , Thread-1 (run), runner.py:437, [trial: 8, gen: 0] Waiting for system to converge... 
2024-02-22 22:33:36,582 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:34:36,690 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:35:40,484 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:36:40,593 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:37:40,701 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:38:40,810 INFO   , Thread-1 (run), runner.py:508, [trial: 8, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:40:36,418 ERROR  , Thread-1 (run), runner.py:586, [trial: 8, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:40:36,710 DEBUG  , Thread-1 (run), runner.py:267, [trial: 8, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:24:34Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:24:34Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:40:10Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2718', 'uid': 'ed8e549b-7ac3-4df2-b0ff-a6c666b03578'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:40:10Z', 'phase': ''}}}
2024-02-22 22:40:36,732 DEBUG  , Thread-1 (run), runner.py:296, [trial: 8, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4mk5j
2024-02-22 22:40:36,988 ERROR  , Thread-1 (run), runner.py:368, [trial: 8, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-lnt6q
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '516a394d-b635-4064-8fc7-67d0fd158b14', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:40:36 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-lnt6q\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-22 22:40:37,050 DEBUG  , Thread-1 (run), engine.py:207, [trial: 8, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 22:40:37,054 INFO   , Thread-1 (run), engine.py:333, Trial 8 finished, completed in 00:18:05
2024-02-22 22:40:37,054 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-22 22:40:37,054 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 22:40:37,054 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 22:40:37,054 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 22:40:37,093 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4mk5j
2024-02-22 22:40:50,935 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 22:41:40,122 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 22:41:40,149 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 22:41:46,510 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:41:51,653 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:41:51,653 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:41:51,932 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:41:57,068 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:41:57,068 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:41:57,355 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:42:02,549 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:42:02,549 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:42:02,719 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:42:07,840 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:42:07,841 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:42:08,092 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:42:13,232 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:42:13,232 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:42:13,432 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:42:18,592 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:42:18,593 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:42:18,654 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 8, gen: 0] Waiting for all pods to be ready
2024-02-22 22:42:23,801 INFO   , Thread-1 (run), deploy.py:32, [trial: 8, gen: 0] Operator ready
2024-02-22 22:42:23,801 INFO   , Thread-1 (run), deploy.py:36, [trial: 8, gen: 0] All pods took 0 seconds to get ready
2024-02-22 22:42:43,853 WARNING, Thread-1 (run), object.py:155, [trial: 9, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 22:42:43,853 WARNING, Thread-1 (run), object.py:155, [trial: 9, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 22:42:43,853 WARNING, Thread-1 (run), object.py:155, [trial: 9, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 22:42:43,854 DEBUG  , Thread-1 (run), engine.py:652, [trial: 9, gen: 0] Run and check
2024-02-22 22:42:44,003 DEBUG  , Thread-1 (run), runner.py:123, [trial: 9, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 22:42:44,003 DEBUG  , Thread-1 (run), runner.py:124, [trial: 9, gen: 0] STDERR: 
2024-02-22 22:42:44,003 INFO   , Thread-1 (run), runner.py:437, [trial: 9, gen: 0] Waiting for system to converge... 
2024-02-22 22:45:50,005 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:46:50,115 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:48:51,243 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:49:51,352 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:50:44,024 ERROR  , Thread-1 (run), runner.py:586, [trial: 9, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:50:44,300 DEBUG  , Thread-1 (run), runner.py:267, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:42:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:42:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:50:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1816', 'uid': '13a2bb09-4338-40d4-bc29-221cb6f52d46'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:50:19Z', 'phase': ''}}}
2024-02-22 22:50:44,321 DEBUG  , Thread-1 (run), runner.py:296, [trial: 9, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-g65hm
2024-02-22 22:50:44,542 ERROR  , Thread-1 (run), runner.py:368, [trial: 9, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tbb4d
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '55e114dc-421f-466b-a7ac-a123f0dc255d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:50:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tbb4d\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 22:50:44,577 INFO   , Thread-1 (run), result.py:170, [trial: 9, gen: 0] No stderr, continue
2024-02-22 22:50:44,611 ERROR  , Thread-1 (run), health.py:155, [trial: 9, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 22:50:44,635 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,635 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 05:42:19.580368297 +0000 UTC m=+0.022902755]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line time="2024-02-23T05:42:19Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,693 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 9, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 22:50:44,941 INFO   , Thread-1 (run), consistency.py:496, [trial: 9, gen: 0] All input deltas are matched
2024-02-22 22:50:44,944 INFO   , Thread-1 (run), engine.py:554, [trial: 9, gen: 0] Error result, running recovery
2024-02-22 22:50:44,944 DEBUG  , Thread-1 (run), engine.py:698, [trial: 9, gen: 0] Running recovery
2024-02-22 22:50:45,795 DEBUG  , Thread-1 (run), runner.py:123, [trial: 9, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 22:50:45,795 DEBUG  , Thread-1 (run), runner.py:124, [trial: 9, gen: 0] STDERR: 
2024-02-22 22:50:45,795 INFO   , Thread-1 (run), runner.py:437, [trial: 9, gen: 0] Waiting for system to converge... 
2024-02-22 22:51:45,931 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:52:46,039 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:53:50,251 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:54:50,315 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:55:50,422 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:56:50,531 INFO   , Thread-1 (run), runner.py:508, [trial: 9, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 22:58:45,807 ERROR  , Thread-1 (run), runner.py:586, [trial: 9, gen: 0] System failed to converge within 480 seconds
2024-02-22 22:58:46,098 DEBUG  , Thread-1 (run), runner.py:267, [trial: 9, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T05:42:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T05:42:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T05:58:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2737', 'uid': '13a2bb09-4338-40d4-bc29-221cb6f52d46'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T05:58:19Z', 'phase': ''}}}
2024-02-22 22:58:46,120 DEBUG  , Thread-1 (run), runner.py:296, [trial: 9, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-g65hm
2024-02-22 22:58:46,376 ERROR  , Thread-1 (run), runner.py:368, [trial: 9, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tbb4d
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '027d4f5f-8035-461d-9726-5d9be5e28f1b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 05:58:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tbb4d\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 22:58:46,424 DEBUG  , Thread-1 (run), engine.py:207, [trial: 9, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 22:58:46,428 INFO   , Thread-1 (run), engine.py:333, Trial 9 finished, completed in 00:17:59
2024-02-22 22:58:46,428 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-22 22:58:46,429 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 22:58:46,429 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 22:58:46,429 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 22:58:46,463 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-g65hm
2024-02-22 22:59:00,023 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 22:59:51,262 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 22:59:51,299 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 22:59:57,943 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:03,087 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:03,087 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:03,298 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:08,437 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:08,437 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:08,706 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:13,844 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:13,844 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:13,985 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:19,123 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:19,123 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:19,358 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:24,495 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:24,495 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:24,685 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:29,830 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:29,830 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:29,895 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 9, gen: 0] Waiting for all pods to be ready
2024-02-22 23:00:35,031 INFO   , Thread-1 (run), deploy.py:32, [trial: 9, gen: 0] Operator ready
2024-02-22 23:00:35,031 INFO   , Thread-1 (run), deploy.py:36, [trial: 9, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:00:55,084 WARNING, Thread-1 (run), object.py:155, [trial: 10, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 23:00:55,084 WARNING, Thread-1 (run), object.py:155, [trial: 10, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 23:00:55,084 WARNING, Thread-1 (run), object.py:155, [trial: 10, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 23:00:55,085 DEBUG  , Thread-1 (run), engine.py:652, [trial: 10, gen: 0] Run and check
2024-02-22 23:00:55,235 DEBUG  , Thread-1 (run), runner.py:123, [trial: 10, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 23:00:55,236 DEBUG  , Thread-1 (run), runner.py:124, [trial: 10, gen: 0] STDERR: 
2024-02-22 23:00:55,236 INFO   , Thread-1 (run), runner.py:437, [trial: 10, gen: 0] Waiting for system to converge... 
2024-02-22 23:04:01,225 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:05:01,326 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:07:06,425 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:08:06,534 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:08:55,259 ERROR  , Thread-1 (run), runner.py:586, [trial: 10, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:08:55,531 DEBUG  , Thread-1 (run), runner.py:267, [trial: 10, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:00:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:00:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:08:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1791', 'uid': 'be9f2990-4b28-4056-999c-9c28decb5bb7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:08:31Z', 'phase': ''}}}
2024-02-22 23:08:55,553 DEBUG  , Thread-1 (run), runner.py:296, [trial: 10, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bg5ph
2024-02-22 23:08:55,773 ERROR  , Thread-1 (run), runner.py:368, [trial: 10, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mhhrh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '48a46e5f-36fd-43e2-94bd-9edf1db7f905', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:08:55 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mhhrh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:08:55,823 INFO   , Thread-1 (run), result.py:170, [trial: 10, gen: 0] No stderr, continue
2024-02-22 23:08:55,936 ERROR  , Thread-1 (run), health.py:155, [trial: 10, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 23:08:55,960 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:55,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line time="2024-02-23T06:00:30Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:55,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line time="2024-02-23T06:00:30Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 06:00:30.922981868 +0000 UTC m=+0.023666127]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:55,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line time="2024-02-23T06:00:30Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:55,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line time="2024-02-23T06:00:30Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:55,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line time="2024-02-23T06:00:30Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:56,011 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 10, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:08:56,168 INFO   , Thread-1 (run), consistency.py:496, [trial: 10, gen: 0] All input deltas are matched
2024-02-22 23:08:56,171 INFO   , Thread-1 (run), engine.py:554, [trial: 10, gen: 0] Error result, running recovery
2024-02-22 23:08:56,171 DEBUG  , Thread-1 (run), engine.py:698, [trial: 10, gen: 0] Running recovery
2024-02-22 23:08:57,003 DEBUG  , Thread-1 (run), runner.py:123, [trial: 10, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 23:08:57,003 DEBUG  , Thread-1 (run), runner.py:124, [trial: 10, gen: 0] STDERR: 
2024-02-22 23:08:57,003 INFO   , Thread-1 (run), runner.py:437, [trial: 10, gen: 0] Waiting for system to converge... 
2024-02-22 23:09:57,173 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:10:57,285 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:12:04,397 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:13:04,502 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:14:04,610 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:15:04,675 INFO   , Thread-1 (run), runner.py:508, [trial: 10, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:16:57,013 ERROR  , Thread-1 (run), runner.py:586, [trial: 10, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:16:57,312 DEBUG  , Thread-1 (run), runner.py:267, [trial: 10, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:00:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:00:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:16:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2717', 'uid': 'be9f2990-4b28-4056-999c-9c28decb5bb7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:16:31Z', 'phase': ''}}}
2024-02-22 23:16:57,334 DEBUG  , Thread-1 (run), runner.py:296, [trial: 10, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bg5ph
2024-02-22 23:16:57,586 ERROR  , Thread-1 (run), runner.py:368, [trial: 10, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mhhrh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2f823911-a217-48b0-8ac8-0bef9c0f185c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:16:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mhhrh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:16:57,633 DEBUG  , Thread-1 (run), engine.py:207, [trial: 10, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 23:16:57,637 INFO   , Thread-1 (run), engine.py:333, Trial 10 finished, completed in 00:18:01
2024-02-22 23:16:57,637 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-22 23:16:57,637 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 23:16:57,637 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 23:16:57,637 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 23:16:57,675 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-bg5ph
2024-02-22 23:17:11,266 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 23:18:00,879 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 23:18:00,906 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 23:18:07,273 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:12,419 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:12,419 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:12,636 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:17,758 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:17,758 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:18,042 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:23,168 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:23,168 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:23,307 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:28,443 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:28,443 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:28,667 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:33,868 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:33,868 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:34,060 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:39,185 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:39,185 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:18:39,259 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 10, gen: 0] Waiting for all pods to be ready
2024-02-22 23:18:44,395 INFO   , Thread-1 (run), deploy.py:32, [trial: 10, gen: 0] Operator ready
2024-02-22 23:18:44,395 INFO   , Thread-1 (run), deploy.py:36, [trial: 10, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:19:04,433 WARNING, Thread-1 (run), object.py:155, [trial: 11, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 23:19:04,433 WARNING, Thread-1 (run), object.py:155, [trial: 11, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 23:19:04,433 WARNING, Thread-1 (run), object.py:155, [trial: 11, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 23:19:04,434 DEBUG  , Thread-1 (run), engine.py:652, [trial: 11, gen: 0] Run and check
2024-02-22 23:19:04,576 DEBUG  , Thread-1 (run), runner.py:123, [trial: 11, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 23:19:04,576 DEBUG  , Thread-1 (run), runner.py:124, [trial: 11, gen: 0] STDERR: 
2024-02-22 23:19:04,576 INFO   , Thread-1 (run), runner.py:437, [trial: 11, gen: 0] Waiting for system to converge... 
2024-02-22 23:22:10,596 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:23:10,703 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:25:13,208 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:26:13,269 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:27:04,608 ERROR  , Thread-1 (run), runner.py:586, [trial: 11, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:27:04,878 DEBUG  , Thread-1 (run), runner.py:267, [trial: 11, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:19:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:19:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:26:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'cac84238-9459-4e67-8b50-0bfde1224d51'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:26:40Z', 'phase': ''}}}
2024-02-22 23:27:04,900 DEBUG  , Thread-1 (run), runner.py:296, [trial: 11, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cjgrd
2024-02-22 23:27:05,120 ERROR  , Thread-1 (run), runner.py:368, [trial: 11, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kjdfn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5f85ff86-3eaf-4efc-abf4-9308465214b2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:27:05 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kjdfn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:27:05,154 INFO   , Thread-1 (run), result.py:170, [trial: 11, gen: 0] No stderr, continue
2024-02-22 23:27:05,189 ERROR  , Thread-1 (run), health.py:155, [trial: 11, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 23:27:05,213 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,214 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line time="2024-02-23T06:18:40Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,214 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line time="2024-02-23T06:18:40Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 06:18:40.307546665 +0000 UTC m=+0.011874261]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,214 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line time="2024-02-23T06:18:40Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,214 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line time="2024-02-23T06:18:40Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,214 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line time="2024-02-23T06:18:40Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,275 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 11, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:27:05,451 INFO   , Thread-1 (run), consistency.py:496, [trial: 11, gen: 0] All input deltas are matched
2024-02-22 23:27:05,454 INFO   , Thread-1 (run), engine.py:554, [trial: 11, gen: 0] Error result, running recovery
2024-02-22 23:27:05,454 DEBUG  , Thread-1 (run), engine.py:698, [trial: 11, gen: 0] Running recovery
2024-02-22 23:27:06,240 DEBUG  , Thread-1 (run), runner.py:123, [trial: 11, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 23:27:06,240 DEBUG  , Thread-1 (run), runner.py:124, [trial: 11, gen: 0] STDERR: 
2024-02-22 23:27:06,240 INFO   , Thread-1 (run), runner.py:437, [trial: 11, gen: 0] Waiting for system to converge... 
2024-02-22 23:28:06,416 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:29:06,523 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:30:10,534 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:31:10,642 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:32:10,750 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:33:10,860 INFO   , Thread-1 (run), runner.py:508, [trial: 11, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:35:06,250 ERROR  , Thread-1 (run), runner.py:586, [trial: 11, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:35:06,541 DEBUG  , Thread-1 (run), runner.py:267, [trial: 11, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:19:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:19:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:34:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': 'cac84238-9459-4e67-8b50-0bfde1224d51'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:34:40Z', 'phase': ''}}}
2024-02-22 23:35:06,563 DEBUG  , Thread-1 (run), runner.py:296, [trial: 11, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cjgrd
2024-02-22 23:35:06,814 ERROR  , Thread-1 (run), runner.py:368, [trial: 11, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kjdfn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a95bda48-2206-461d-88cf-a6fe03a04bc5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:35:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kjdfn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:35:06,859 DEBUG  , Thread-1 (run), engine.py:207, [trial: 11, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 23:35:06,863 INFO   , Thread-1 (run), engine.py:333, Trial 11 finished, completed in 00:17:59
2024-02-22 23:35:06,863 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-22 23:35:06,863 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 23:35:06,864 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 23:35:06,864 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 23:35:06,901 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-cjgrd
2024-02-22 23:35:21,033 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 23:36:11,359 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 23:36:11,375 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 23:36:17,331 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:22,477 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:22,477 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:22,693 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:27,840 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:27,840 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:28,139 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:33,280 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:33,280 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:33,420 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:38,560 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:38,560 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:38,761 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:43,903 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:43,903 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:44,083 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:49,200 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:49,200 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:36:49,273 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 11, gen: 0] Waiting for all pods to be ready
2024-02-22 23:36:54,407 INFO   , Thread-1 (run), deploy.py:32, [trial: 11, gen: 0] Operator ready
2024-02-22 23:36:54,408 INFO   , Thread-1 (run), deploy.py:36, [trial: 11, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:37:14,460 WARNING, Thread-1 (run), object.py:155, [trial: 12, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 23:37:14,460 WARNING, Thread-1 (run), object.py:155, [trial: 12, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 23:37:14,460 WARNING, Thread-1 (run), object.py:155, [trial: 12, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 23:37:14,461 DEBUG  , Thread-1 (run), engine.py:652, [trial: 12, gen: 0] Run and check
2024-02-22 23:37:14,650 DEBUG  , Thread-1 (run), runner.py:123, [trial: 12, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 23:37:14,651 DEBUG  , Thread-1 (run), runner.py:124, [trial: 12, gen: 0] STDERR: 
2024-02-22 23:37:14,651 INFO   , Thread-1 (run), runner.py:437, [trial: 12, gen: 0] Waiting for system to converge... 
2024-02-22 23:40:50,632 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:41:50,691 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:43:26,175 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:44:26,282 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:45:14,677 ERROR  , Thread-1 (run), runner.py:586, [trial: 12, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:45:14,945 DEBUG  , Thread-1 (run), runner.py:267, [trial: 12, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:37:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:37:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:44:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': 'b735aa96-4ffb-47d2-b55f-51645ae7ccf4'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:44:50Z', 'phase': ''}}}
2024-02-22 23:45:14,968 DEBUG  , Thread-1 (run), runner.py:296, [trial: 12, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cwzq4
2024-02-22 23:45:15,267 ERROR  , Thread-1 (run), runner.py:368, [trial: 12, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xfvqc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9c8f8bd9-0bb3-4f61-90aa-1065e2342c00', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:45:15 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xfvqc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:45:15,292 INFO   , Thread-1 (run), result.py:170, [trial: 12, gen: 0] No stderr, continue
2024-02-22 23:45:15,325 ERROR  , Thread-1 (run), health.py:155, [trial: 12, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-22 23:45:15,366 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,366 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line time="2024-02-23T06:36:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,366 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line time="2024-02-23T06:36:50Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 06:36:50.338836194 +0000 UTC m=+0.014651443]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,366 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line time="2024-02-23T06:36:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,367 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line time="2024-02-23T06:36:50Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,367 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line time="2024-02-23T06:36:50Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,458 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 12, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-22 23:45:15,620 INFO   , Thread-1 (run), consistency.py:496, [trial: 12, gen: 0] All input deltas are matched
2024-02-22 23:45:15,623 INFO   , Thread-1 (run), engine.py:554, [trial: 12, gen: 0] Error result, running recovery
2024-02-22 23:45:15,623 DEBUG  , Thread-1 (run), engine.py:698, [trial: 12, gen: 0] Running recovery
2024-02-22 23:45:16,389 DEBUG  , Thread-1 (run), runner.py:123, [trial: 12, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-22 23:45:16,389 DEBUG  , Thread-1 (run), runner.py:124, [trial: 12, gen: 0] STDERR: 
2024-02-22 23:45:16,389 INFO   , Thread-1 (run), runner.py:437, [trial: 12, gen: 0] Waiting for system to converge... 
2024-02-22 23:46:16,558 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:47:16,621 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:48:27,085 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:49:27,163 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:50:27,269 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:51:27,374 INFO   , Thread-1 (run), runner.py:508, [trial: 12, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:53:16,399 ERROR  , Thread-1 (run), runner.py:586, [trial: 12, gen: 0] System failed to converge within 480 seconds
2024-02-22 23:53:16,691 DEBUG  , Thread-1 (run), runner.py:267, [trial: 12, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:37:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:37:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T06:52:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'b735aa96-4ffb-47d2-b55f-51645ae7ccf4'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T06:52:50Z', 'phase': ''}}}
2024-02-22 23:53:16,712 DEBUG  , Thread-1 (run), runner.py:296, [trial: 12, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cwzq4
2024-02-22 23:53:16,953 ERROR  , Thread-1 (run), runner.py:368, [trial: 12, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xfvqc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '843405e5-58d0-4e22-bf89-7a15519afac9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 06:53:16 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xfvqc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-22 23:53:16,996 DEBUG  , Thread-1 (run), engine.py:207, [trial: 12, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-22 23:53:16,999 INFO   , Thread-1 (run), engine.py:333, Trial 12 finished, completed in 00:17:59
2024-02-22 23:53:16,999 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-22 23:53:17,000 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-22 23:53:17,000 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-22 23:53:17,000 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-22 23:53:17,036 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-cwzq4
2024-02-22 23:53:30,993 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-22 23:54:21,866 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-22 23:54:21,882 INFO   , root, kind.py  :145, Loading preload images
2024-02-22 23:54:28,769 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:54:33,915 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:54:33,915 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:54:34,153 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:54:39,301 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:54:39,302 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:54:39,662 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:54:44,804 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:54:44,804 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:54:44,936 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:54:50,178 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:54:50,178 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:54:50,501 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:54:55,608 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:54:55,608 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:54:55,816 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:55:00,936 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:55:00,936 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:55:01,010 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 12, gen: 0] Waiting for all pods to be ready
2024-02-22 23:55:06,137 INFO   , Thread-1 (run), deploy.py:32, [trial: 12, gen: 0] Operator ready
2024-02-22 23:55:06,137 INFO   , Thread-1 (run), deploy.py:36, [trial: 12, gen: 0] All pods took 0 seconds to get ready
2024-02-22 23:55:26,175 WARNING, Thread-1 (run), object.py:155, [trial: 13, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-22 23:55:26,175 WARNING, Thread-1 (run), object.py:155, [trial: 13, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-22 23:55:26,175 WARNING, Thread-1 (run), object.py:155, [trial: 13, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-22 23:55:26,176 DEBUG  , Thread-1 (run), engine.py:652, [trial: 13, gen: 0] Run and check
2024-02-22 23:55:26,314 DEBUG  , Thread-1 (run), runner.py:123, [trial: 13, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-22 23:55:26,315 DEBUG  , Thread-1 (run), runner.py:124, [trial: 13, gen: 0] STDERR: 
2024-02-22 23:55:26,315 INFO   , Thread-1 (run), runner.py:437, [trial: 13, gen: 0] Waiting for system to converge... 
2024-02-22 23:58:32,332 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-22 23:59:32,444 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:01:34,906 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:02:35,015 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:03:26,342 ERROR  , Thread-1 (run), runner.py:586, [trial: 13, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:03:26,591 DEBUG  , Thread-1 (run), runner.py:267, [trial: 13, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:55:26Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:55:26Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:03:02Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': 'af61a5be-ea79-4010-a9cb-90cfc88d0f0c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:03:02Z', 'phase': ''}}}
2024-02-23 00:03:26,613 DEBUG  , Thread-1 (run), runner.py:296, [trial: 13, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-kgjx4
2024-02-23 00:03:26,831 ERROR  , Thread-1 (run), runner.py:368, [trial: 13, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ltphp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a56376ba-673f-42d6-9244-05e36b1be62c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:03:26 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ltphp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:03:26,864 INFO   , Thread-1 (run), result.py:170, [trial: 13, gen: 0] No stderr, continue
2024-02-23 00:03:26,899 ERROR  , Thread-1 (run), health.py:155, [trial: 13, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line time="2024-02-23T06:55:01Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line time="2024-02-23T06:55:01Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 06:55:01.959121454 +0000 UTC m=+0.020238114]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line time="2024-02-23T06:55:01Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line time="2024-02-23T06:55:01Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line time="2024-02-23T06:55:01Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:26,982 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 13, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:03:27,143 INFO   , Thread-1 (run), consistency.py:496, [trial: 13, gen: 0] All input deltas are matched
2024-02-23 00:03:27,146 INFO   , Thread-1 (run), engine.py:554, [trial: 13, gen: 0] Error result, running recovery
2024-02-23 00:03:27,146 DEBUG  , Thread-1 (run), engine.py:698, [trial: 13, gen: 0] Running recovery
2024-02-23 00:03:27,926 DEBUG  , Thread-1 (run), runner.py:123, [trial: 13, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 00:03:27,926 DEBUG  , Thread-1 (run), runner.py:124, [trial: 13, gen: 0] STDERR: 
2024-02-23 00:03:27,927 INFO   , Thread-1 (run), runner.py:437, [trial: 13, gen: 0] Waiting for system to converge... 
2024-02-23 00:04:28,094 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:05:28,183 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:06:35,906 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:07:36,015 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:08:36,239 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:09:36,322 INFO   , Thread-1 (run), runner.py:508, [trial: 13, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:11:27,937 ERROR  , Thread-1 (run), runner.py:586, [trial: 13, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:11:28,231 DEBUG  , Thread-1 (run), runner.py:267, [trial: 13, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T06:55:26Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T06:55:26Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:11:02Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'af61a5be-ea79-4010-a9cb-90cfc88d0f0c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:11:02Z', 'phase': ''}}}
2024-02-23 00:11:28,254 DEBUG  , Thread-1 (run), runner.py:296, [trial: 13, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-kgjx4
2024-02-23 00:11:28,494 ERROR  , Thread-1 (run), runner.py:368, [trial: 13, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ltphp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f49c3eef-f4bf-44bd-8dfd-57219deb2835', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:11:28 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ltphp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:11:28,536 DEBUG  , Thread-1 (run), engine.py:207, [trial: 13, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 00:11:28,542 INFO   , Thread-1 (run), engine.py:333, Trial 13 finished, completed in 00:18:01
2024-02-23 00:11:28,542 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 00:11:28,542 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 00:11:28,542 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 00:11:28,542 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 00:11:28,581 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-kgjx4
2024-02-23 00:11:42,126 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 00:12:33,558 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 00:12:33,576 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 00:12:39,684 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:12:44,829 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:12:44,829 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:12:45,034 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:12:50,159 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:12:50,159 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:12:50,486 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:12:55,628 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:12:55,628 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:12:55,801 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:13:00,933 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:13:00,933 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:13:01,160 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:13:06,284 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:13:06,284 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:13:06,461 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:13:11,606 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:13:11,606 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:13:11,678 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 13, gen: 0] Waiting for all pods to be ready
2024-02-23 00:13:16,808 INFO   , Thread-1 (run), deploy.py:32, [trial: 13, gen: 0] Operator ready
2024-02-23 00:13:16,808 INFO   , Thread-1 (run), deploy.py:36, [trial: 13, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:13:36,913 WARNING, Thread-1 (run), object.py:155, [trial: 14, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 00:13:36,914 WARNING, Thread-1 (run), object.py:155, [trial: 14, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 00:13:36,914 WARNING, Thread-1 (run), object.py:155, [trial: 14, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 00:13:36,915 DEBUG  , Thread-1 (run), engine.py:652, [trial: 14, gen: 0] Run and check
2024-02-23 00:13:37,087 DEBUG  , Thread-1 (run), runner.py:123, [trial: 14, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 00:13:37,088 DEBUG  , Thread-1 (run), runner.py:124, [trial: 14, gen: 0] STDERR: 
2024-02-23 00:13:37,088 INFO   , Thread-1 (run), runner.py:437, [trial: 14, gen: 0] Waiting for system to converge... 
2024-02-23 00:16:38,225 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:17:38,303 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:18:38,412 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:19:42,817 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:20:42,906 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:21:37,122 ERROR  , Thread-1 (run), runner.py:586, [trial: 14, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:21:37,387 DEBUG  , Thread-1 (run), runner.py:267, [trial: 14, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:13:37Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:13:37Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:21:12Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': '186e4927-8ed5-4343-8111-09ee3c8a1c17'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:21:12Z', 'phase': ''}}}
2024-02-23 00:21:37,409 DEBUG  , Thread-1 (run), runner.py:296, [trial: 14, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-nn22g
2024-02-23 00:21:37,632 ERROR  , Thread-1 (run), runner.py:368, [trial: 14, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sm6fq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f3d89791-02c0-4e8f-b80f-3596f17c9ea5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:21:37 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sm6fq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:21:37,676 INFO   , Thread-1 (run), result.py:170, [trial: 14, gen: 0] No stderr, continue
2024-02-23 00:21:37,712 ERROR  , Thread-1 (run), health.py:155, [trial: 14, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 00:21:37,736 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,736 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line time="2024-02-23T07:13:12Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,736 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line time="2024-02-23T07:13:12Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 07:13:12.575226865 +0000 UTC m=+0.010024563]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,736 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line time="2024-02-23T07:13:12Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,736 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line time="2024-02-23T07:13:12Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,737 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line time="2024-02-23T07:13:12Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,793 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 14, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:21:37,966 INFO   , Thread-1 (run), consistency.py:496, [trial: 14, gen: 0] All input deltas are matched
2024-02-23 00:21:37,969 INFO   , Thread-1 (run), engine.py:554, [trial: 14, gen: 0] Error result, running recovery
2024-02-23 00:21:37,969 DEBUG  , Thread-1 (run), engine.py:698, [trial: 14, gen: 0] Running recovery
2024-02-23 00:21:38,802 DEBUG  , Thread-1 (run), runner.py:123, [trial: 14, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 00:21:38,802 DEBUG  , Thread-1 (run), runner.py:124, [trial: 14, gen: 0] STDERR: 
2024-02-23 00:21:38,802 INFO   , Thread-1 (run), runner.py:437, [trial: 14, gen: 0] Waiting for system to converge... 
2024-02-23 00:22:38,974 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:24:42,849 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:25:42,957 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:26:43,069 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:27:43,171 INFO   , Thread-1 (run), runner.py:508, [trial: 14, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:29:38,812 ERROR  , Thread-1 (run), runner.py:586, [trial: 14, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:29:39,110 DEBUG  , Thread-1 (run), runner.py:267, [trial: 14, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:13:37Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:13:37Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:29:12Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '186e4927-8ed5-4343-8111-09ee3c8a1c17'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:29:12Z', 'phase': ''}}}
2024-02-23 00:29:39,133 DEBUG  , Thread-1 (run), runner.py:296, [trial: 14, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-nn22g
2024-02-23 00:29:39,380 ERROR  , Thread-1 (run), runner.py:368, [trial: 14, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sm6fq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0404ffd8-17b9-4d61-b10a-a2e841cd7f63', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:29:39 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sm6fq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:29:39,437 DEBUG  , Thread-1 (run), engine.py:207, [trial: 14, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 00:29:39,441 INFO   , Thread-1 (run), engine.py:333, Trial 14 finished, completed in 00:18:00
2024-02-23 00:29:39,441 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 00:29:39,441 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 00:29:39,441 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 00:29:39,441 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 00:29:39,478 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-nn22g
2024-02-23 00:29:53,005 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 00:30:45,399 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 00:30:45,427 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 00:30:52,134 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:30:57,277 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:30:57,277 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:30:57,497 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:02,650 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:02,651 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:02,930 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:08,160 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:08,160 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:08,282 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:13,402 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:13,402 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:13,628 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:18,780 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:18,780 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:18,943 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:24,088 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:24,088 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:24,158 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 14, gen: 0] Waiting for all pods to be ready
2024-02-23 00:31:29,295 INFO   , Thread-1 (run), deploy.py:32, [trial: 14, gen: 0] Operator ready
2024-02-23 00:31:29,295 INFO   , Thread-1 (run), deploy.py:36, [trial: 14, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:31:49,335 WARNING, Thread-1 (run), object.py:155, [trial: 15, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 00:31:49,335 WARNING, Thread-1 (run), object.py:155, [trial: 15, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 00:31:49,336 WARNING, Thread-1 (run), object.py:155, [trial: 15, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 00:31:49,336 DEBUG  , Thread-1 (run), engine.py:652, [trial: 15, gen: 0] Run and check
2024-02-23 00:31:49,482 DEBUG  , Thread-1 (run), runner.py:123, [trial: 15, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 00:31:49,483 DEBUG  , Thread-1 (run), runner.py:124, [trial: 15, gen: 0] STDERR: 
2024-02-23 00:31:49,483 INFO   , Thread-1 (run), runner.py:437, [trial: 15, gen: 0] Waiting for system to converge... 
2024-02-23 00:34:55,406 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:35:55,492 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:37:58,214 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:38:58,323 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:39:49,504 ERROR  , Thread-1 (run), runner.py:586, [trial: 15, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:39:49,777 DEBUG  , Thread-1 (run), runner.py:267, [trial: 15, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:31:49Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:31:49Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:39:25Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': 'bd28833c-b1ba-48a8-97ee-95ef45c478d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:39:25Z', 'phase': ''}}}
2024-02-23 00:39:49,799 DEBUG  , Thread-1 (run), runner.py:296, [trial: 15, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wq6l4
2024-02-23 00:39:50,018 ERROR  , Thread-1 (run), runner.py:368, [trial: 15, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5nsq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7640f76e-2769-40ae-817a-5ab8550b7e0e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:39:50 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5nsq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:39:50,068 INFO   , Thread-1 (run), result.py:170, [trial: 15, gen: 0] No stderr, continue
2024-02-23 00:39:50,106 ERROR  , Thread-1 (run), health.py:155, [trial: 15, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line time="2024-02-23T07:31:25Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line time="2024-02-23T07:31:25Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 07:31:25.111867634 +0000 UTC m=+0.022576919]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line time="2024-02-23T07:31:25Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line time="2024-02-23T07:31:25Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,131 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line time="2024-02-23T07:31:25Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,182 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 15, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:39:50,479 INFO   , Thread-1 (run), consistency.py:496, [trial: 15, gen: 0] All input deltas are matched
2024-02-23 00:39:50,481 INFO   , Thread-1 (run), engine.py:554, [trial: 15, gen: 0] Error result, running recovery
2024-02-23 00:39:50,482 DEBUG  , Thread-1 (run), engine.py:698, [trial: 15, gen: 0] Running recovery
2024-02-23 00:39:51,273 DEBUG  , Thread-1 (run), runner.py:123, [trial: 15, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 00:39:51,274 DEBUG  , Thread-1 (run), runner.py:124, [trial: 15, gen: 0] STDERR: 
2024-02-23 00:39:51,274 INFO   , Thread-1 (run), runner.py:437, [trial: 15, gen: 0] Waiting for system to converge... 
2024-02-23 00:40:51,442 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:41:51,533 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:43:01,148 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:44:01,256 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:45:01,367 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:46:01,417 INFO   , Thread-1 (run), runner.py:508, [trial: 15, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:47:51,283 ERROR  , Thread-1 (run), runner.py:586, [trial: 15, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:47:51,574 DEBUG  , Thread-1 (run), runner.py:267, [trial: 15, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:31:49Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:31:49Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:47:25Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': 'bd28833c-b1ba-48a8-97ee-95ef45c478d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:47:25Z', 'phase': ''}}}
2024-02-23 00:47:51,596 DEBUG  , Thread-1 (run), runner.py:296, [trial: 15, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wq6l4
2024-02-23 00:47:51,844 ERROR  , Thread-1 (run), runner.py:368, [trial: 15, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5nsq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e2133822-9c22-4529-a22b-9614ae571919', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:47:51 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5nsq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:47:51,898 DEBUG  , Thread-1 (run), engine.py:207, [trial: 15, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 00:47:51,902 INFO   , Thread-1 (run), engine.py:333, Trial 15 finished, completed in 00:18:02
2024-02-23 00:47:51,903 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 00:47:51,903 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 00:47:51,903 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 00:47:51,903 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 00:47:51,939 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wq6l4
2024-02-23 00:48:05,656 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 00:49:00,806 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 00:49:00,816 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 00:49:06,657 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:11,802 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:11,803 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:12,033 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:17,143 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:17,143 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:17,438 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:22,581 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:22,581 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:22,707 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:27,845 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:27,846 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:28,100 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:33,236 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:33,237 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:33,428 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:38,575 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:38,575 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:49:38,705 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 15, gen: 0] Waiting for all pods to be ready
2024-02-23 00:49:43,851 INFO   , Thread-1 (run), deploy.py:32, [trial: 15, gen: 0] Operator ready
2024-02-23 00:49:43,851 INFO   , Thread-1 (run), deploy.py:36, [trial: 15, gen: 0] All pods took 0 seconds to get ready
2024-02-23 00:50:03,890 WARNING, Thread-1 (run), object.py:155, [trial: 16, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 00:50:03,890 WARNING, Thread-1 (run), object.py:155, [trial: 16, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 00:50:03,890 WARNING, Thread-1 (run), object.py:155, [trial: 16, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 00:50:03,891 DEBUG  , Thread-1 (run), engine.py:652, [trial: 16, gen: 0] Run and check
2024-02-23 00:50:04,057 DEBUG  , Thread-1 (run), runner.py:123, [trial: 16, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 00:50:04,058 DEBUG  , Thread-1 (run), runner.py:124, [trial: 16, gen: 0] STDERR: 
2024-02-23 00:50:04,058 INFO   , Thread-1 (run), runner.py:437, [trial: 16, gen: 0] Waiting for system to converge... 
2024-02-23 00:53:13,236 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:54:13,362 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:56:13,216 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:57:13,315 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 00:58:04,084 ERROR  , Thread-1 (run), runner.py:586, [trial: 16, gen: 0] System failed to converge within 480 seconds
2024-02-23 00:58:04,359 DEBUG  , Thread-1 (run), runner.py:267, [trial: 16, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:50:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:50:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T07:57:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1885', 'uid': '22b357a4-2eea-4145-8663-c274362e524b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T07:57:40Z', 'phase': ''}}}
2024-02-23 00:58:04,382 DEBUG  , Thread-1 (run), runner.py:296, [trial: 16, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wkjb2
2024-02-23 00:58:04,616 ERROR  , Thread-1 (run), runner.py:368, [trial: 16, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dczsm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'af055f64-57ed-4550-a733-8e372e94650f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 07:58:04 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dczsm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 00:58:04,664 INFO   , Thread-1 (run), result.py:170, [trial: 16, gen: 0] No stderr, continue
2024-02-23 00:58:04,779 ERROR  , Thread-1 (run), health.py:155, [trial: 16, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 00:58:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line time="2024-02-23T07:49:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line time="2024-02-23T07:49:39Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 07:49:39.811221676 +0000 UTC m=+0.011878806]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line time="2024-02-23T07:49:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line time="2024-02-23T07:49:39Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,803 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line time="2024-02-23T07:49:39Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:04,871 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 16, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 00:58:05,029 INFO   , Thread-1 (run), consistency.py:496, [trial: 16, gen: 0] All input deltas are matched
2024-02-23 00:58:05,031 INFO   , Thread-1 (run), engine.py:554, [trial: 16, gen: 0] Error result, running recovery
2024-02-23 00:58:05,031 DEBUG  , Thread-1 (run), engine.py:698, [trial: 16, gen: 0] Running recovery
2024-02-23 00:58:05,767 DEBUG  , Thread-1 (run), runner.py:123, [trial: 16, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 00:58:05,767 DEBUG  , Thread-1 (run), runner.py:124, [trial: 16, gen: 0] STDERR: 
2024-02-23 00:58:05,767 INFO   , Thread-1 (run), runner.py:437, [trial: 16, gen: 0] Waiting for system to converge... 
2024-02-23 00:59:05,925 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:00:05,976 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:01:10,044 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:02:10,155 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:03:10,286 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:04:10,393 INFO   , Thread-1 (run), runner.py:508, [trial: 16, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:06:05,777 ERROR  , Thread-1 (run), runner.py:586, [trial: 16, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:06:06,072 DEBUG  , Thread-1 (run), runner.py:267, [trial: 16, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T07:50:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T07:50:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:05:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2885', 'uid': '22b357a4-2eea-4145-8663-c274362e524b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:05:40Z', 'phase': ''}}}
2024-02-23 01:06:06,094 DEBUG  , Thread-1 (run), runner.py:296, [trial: 16, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wkjb2
2024-02-23 01:06:06,371 ERROR  , Thread-1 (run), runner.py:368, [trial: 16, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dczsm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '86cc8b9b-bc17-4275-a237-649e6375e8a5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:06:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dczsm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:06:06,419 DEBUG  , Thread-1 (run), engine.py:207, [trial: 16, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 01:06:06,423 INFO   , Thread-1 (run), engine.py:333, Trial 16 finished, completed in 00:18:04
2024-02-23 01:06:06,423 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-23 01:06:06,423 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 01:06:06,423 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 01:06:06,423 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 01:06:06,467 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wkjb2
2024-02-23 01:06:19,951 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 01:07:10,910 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 01:07:10,932 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 01:07:17,683 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:22,828 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:22,828 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:23,056 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:28,179 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:28,179 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:28,490 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:33,634 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:33,634 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:33,756 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:38,891 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:38,891 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:39,141 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:44,359 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:44,359 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:44,550 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:49,685 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:49,685 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:07:49,747 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 16, gen: 0] Waiting for all pods to be ready
2024-02-23 01:07:54,883 INFO   , Thread-1 (run), deploy.py:32, [trial: 16, gen: 0] Operator ready
2024-02-23 01:07:54,883 INFO   , Thread-1 (run), deploy.py:36, [trial: 16, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:08:14,933 WARNING, Thread-1 (run), object.py:155, [trial: 17, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 01:08:14,933 WARNING, Thread-1 (run), object.py:155, [trial: 17, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 01:08:14,933 WARNING, Thread-1 (run), object.py:155, [trial: 17, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 01:08:14,934 DEBUG  , Thread-1 (run), engine.py:652, [trial: 17, gen: 0] Run and check
2024-02-23 01:08:15,156 DEBUG  , Thread-1 (run), runner.py:123, [trial: 17, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 01:08:15,156 DEBUG  , Thread-1 (run), runner.py:124, [trial: 17, gen: 0] STDERR: 
2024-02-23 01:08:15,156 INFO   , Thread-1 (run), runner.py:437, [trial: 17, gen: 0] Waiting for system to converge... 
2024-02-23 01:11:20,975 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:12:21,057 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:14:24,170 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:15:24,278 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:16:15,181 ERROR  , Thread-1 (run), runner.py:586, [trial: 17, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:16:15,456 DEBUG  , Thread-1 (run), runner.py:267, [trial: 17, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:08:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:08:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:15:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': '8abe0217-133c-4a33-ba2a-e959a816d494'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:15:50Z', 'phase': ''}}}
2024-02-23 01:16:15,479 DEBUG  , Thread-1 (run), runner.py:296, [trial: 17, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-99pzl
2024-02-23 01:16:15,701 ERROR  , Thread-1 (run), runner.py:368, [trial: 17, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-db7nl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '70442632-bd9c-4f05-8421-7e6f737abcc4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:16:15 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-db7nl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:16:15,750 INFO   , Thread-1 (run), result.py:170, [trial: 17, gen: 0] No stderr, continue
2024-02-23 01:16:15,788 ERROR  , Thread-1 (run), health.py:155, [trial: 17, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line time="2024-02-23T08:07:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line time="2024-02-23T08:07:50Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 08:07:50.677201343 +0000 UTC m=+0.010063512]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line time="2024-02-23T08:07:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line time="2024-02-23T08:07:50Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,814 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line time="2024-02-23T08:07:50Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:15,866 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 17, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:16:16,023 INFO   , Thread-1 (run), consistency.py:496, [trial: 17, gen: 0] All input deltas are matched
2024-02-23 01:16:16,025 INFO   , Thread-1 (run), engine.py:554, [trial: 17, gen: 0] Error result, running recovery
2024-02-23 01:16:16,026 DEBUG  , Thread-1 (run), engine.py:698, [trial: 17, gen: 0] Running recovery
2024-02-23 01:16:16,787 DEBUG  , Thread-1 (run), runner.py:123, [trial: 17, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 01:16:16,787 DEBUG  , Thread-1 (run), runner.py:124, [trial: 17, gen: 0] STDERR: 
2024-02-23 01:16:16,787 INFO   , Thread-1 (run), runner.py:437, [trial: 17, gen: 0] Waiting for system to converge... 
2024-02-23 01:17:16,929 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:18:17,037 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:19:25,123 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:20:25,230 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:21:25,322 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:22:25,393 INFO   , Thread-1 (run), runner.py:508, [trial: 17, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:24:16,797 ERROR  , Thread-1 (run), runner.py:586, [trial: 17, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:24:17,095 DEBUG  , Thread-1 (run), runner.py:267, [trial: 17, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:08:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:08:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:23:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '8abe0217-133c-4a33-ba2a-e959a816d494'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:23:50Z', 'phase': ''}}}
2024-02-23 01:24:17,117 DEBUG  , Thread-1 (run), runner.py:296, [trial: 17, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-99pzl
2024-02-23 01:24:17,364 ERROR  , Thread-1 (run), runner.py:368, [trial: 17, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-db7nl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8fda690c-97ea-4cea-8852-7c1393aa26b8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:24:17 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-db7nl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:24:17,407 DEBUG  , Thread-1 (run), engine.py:207, [trial: 17, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 01:24:17,411 INFO   , Thread-1 (run), engine.py:333, Trial 17 finished, completed in 00:18:00
2024-02-23 01:24:17,411 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 01:24:17,411 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 01:24:17,411 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 01:24:17,411 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 01:24:17,449 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-99pzl
2024-02-23 01:24:30,794 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 01:25:20,724 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 01:25:20,761 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 01:25:27,028 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:32,238 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:32,238 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:32,444 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:37,577 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:37,577 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:37,860 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:42,995 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:42,995 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:43,151 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:48,275 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:48,275 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:48,558 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:53,694 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:53,694 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:53,885 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:25:59,029 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:25:59,030 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:25:59,137 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 17, gen: 0] Waiting for all pods to be ready
2024-02-23 01:26:04,280 INFO   , Thread-1 (run), deploy.py:32, [trial: 17, gen: 0] Operator ready
2024-02-23 01:26:04,280 INFO   , Thread-1 (run), deploy.py:36, [trial: 17, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:26:24,329 WARNING, Thread-1 (run), object.py:155, [trial: 18, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 01:26:24,329 WARNING, Thread-1 (run), object.py:155, [trial: 18, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 01:26:24,329 WARNING, Thread-1 (run), object.py:155, [trial: 18, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 01:26:24,330 DEBUG  , Thread-1 (run), engine.py:652, [trial: 18, gen: 0] Run and check
2024-02-23 01:26:24,475 DEBUG  , Thread-1 (run), runner.py:123, [trial: 18, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 01:26:24,475 DEBUG  , Thread-1 (run), runner.py:124, [trial: 18, gen: 0] STDERR: 
2024-02-23 01:26:24,475 INFO   , Thread-1 (run), runner.py:437, [trial: 18, gen: 0] Waiting for system to converge... 
2024-02-23 01:30:00,537 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:31:00,641 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:32:30,361 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:33:30,466 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:34:24,501 ERROR  , Thread-1 (run), runner.py:586, [trial: 18, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:34:24,770 DEBUG  , Thread-1 (run), runner.py:267, [trial: 18, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:26:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:26:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:34:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1806', 'uid': '3383cd8a-845d-4990-b32c-8d9a6d614885'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:34:00Z', 'phase': ''}}}
2024-02-23 01:34:24,792 DEBUG  , Thread-1 (run), runner.py:296, [trial: 18, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rfss5
2024-02-23 01:34:25,010 ERROR  , Thread-1 (run), runner.py:368, [trial: 18, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-x79zj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7ee069e1-9c0b-4e09-97d7-6b3db230f3ce', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:34:25 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-x79zj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:34:25,050 INFO   , Thread-1 (run), result.py:170, [trial: 18, gen: 0] No stderr, continue
2024-02-23 01:34:25,164 ERROR  , Thread-1 (run), health.py:155, [trial: 18, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 01:34:25,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line time="2024-02-23T08:26:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line time="2024-02-23T08:26:00Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 08:26:00.115701967 +0000 UTC m=+0.011447111]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line time="2024-02-23T08:26:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line time="2024-02-23T08:26:00Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,194 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line time="2024-02-23T08:26:00Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,256 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 18, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:34:25,424 INFO   , Thread-1 (run), consistency.py:496, [trial: 18, gen: 0] All input deltas are matched
2024-02-23 01:34:25,427 INFO   , Thread-1 (run), engine.py:554, [trial: 18, gen: 0] Error result, running recovery
2024-02-23 01:34:25,427 DEBUG  , Thread-1 (run), engine.py:698, [trial: 18, gen: 0] Running recovery
2024-02-23 01:34:26,251 DEBUG  , Thread-1 (run), runner.py:123, [trial: 18, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 01:34:26,251 DEBUG  , Thread-1 (run), runner.py:124, [trial: 18, gen: 0] STDERR: 
2024-02-23 01:34:26,251 INFO   , Thread-1 (run), runner.py:437, [trial: 18, gen: 0] Waiting for system to converge... 
2024-02-23 01:35:26,369 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:36:26,459 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:37:32,638 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:38:32,749 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:39:32,853 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:40:32,908 INFO   , Thread-1 (run), runner.py:508, [trial: 18, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:42:26,259 ERROR  , Thread-1 (run), runner.py:586, [trial: 18, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:42:26,561 DEBUG  , Thread-1 (run), runner.py:267, [trial: 18, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:26:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:26:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:42:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': '3383cd8a-845d-4990-b32c-8d9a6d614885'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:42:00Z', 'phase': ''}}}
2024-02-23 01:42:26,582 DEBUG  , Thread-1 (run), runner.py:296, [trial: 18, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rfss5
2024-02-23 01:42:26,835 ERROR  , Thread-1 (run), runner.py:368, [trial: 18, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-x79zj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'cd0456ba-df4d-4150-8c6a-5f5e9c9ce643', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:42:26 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-x79zj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:42:26,877 DEBUG  , Thread-1 (run), engine.py:207, [trial: 18, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 01:42:26,880 INFO   , Thread-1 (run), engine.py:333, Trial 18 finished, completed in 00:17:59
2024-02-23 01:42:26,880 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 01:42:26,881 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 01:42:26,881 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 01:42:26,881 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 01:42:26,917 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-rfss5
2024-02-23 01:42:40,376 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 01:43:34,474 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 01:43:34,487 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 01:43:40,004 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:43:45,149 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:43:45,149 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:43:45,384 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:43:50,523 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:43:50,523 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:43:50,804 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:43:55,945 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:43:55,946 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:43:56,068 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:44:01,205 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:44:01,205 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:44:01,451 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:44:06,667 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:44:06,667 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:44:06,862 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:44:12,041 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:44:12,041 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:44:12,113 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 18, gen: 0] Waiting for all pods to be ready
2024-02-23 01:44:17,254 INFO   , Thread-1 (run), deploy.py:32, [trial: 18, gen: 0] Operator ready
2024-02-23 01:44:17,254 INFO   , Thread-1 (run), deploy.py:36, [trial: 18, gen: 0] All pods took 0 seconds to get ready
2024-02-23 01:44:37,306 WARNING, Thread-1 (run), object.py:155, [trial: 19, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 01:44:37,306 WARNING, Thread-1 (run), object.py:155, [trial: 19, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 01:44:37,306 WARNING, Thread-1 (run), object.py:155, [trial: 19, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 01:44:37,307 DEBUG  , Thread-1 (run), engine.py:652, [trial: 19, gen: 0] Run and check
2024-02-23 01:44:37,465 DEBUG  , Thread-1 (run), runner.py:123, [trial: 19, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 01:44:37,465 DEBUG  , Thread-1 (run), runner.py:124, [trial: 19, gen: 0] STDERR: 
2024-02-23 01:44:37,465 INFO   , Thread-1 (run), runner.py:437, [trial: 19, gen: 0] Waiting for system to converge... 
2024-02-23 01:47:43,308 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:48:43,414 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:50:43,314 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:51:43,422 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:52:37,496 ERROR  , Thread-1 (run), runner.py:586, [trial: 19, gen: 0] System failed to converge within 480 seconds
2024-02-23 01:52:37,772 DEBUG  , Thread-1 (run), runner.py:267, [trial: 19, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:44:37Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:44:37Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T08:52:13Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '9e857694-44e1-42a0-b7a6-5a170cc9cd4d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T08:52:13Z', 'phase': ''}}}
2024-02-23 01:52:37,794 DEBUG  , Thread-1 (run), runner.py:296, [trial: 19, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5v277
2024-02-23 01:52:38,018 ERROR  , Thread-1 (run), runner.py:368, [trial: 19, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ptj29
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '10bec0d7-375e-4e40-9ab7-c5fc6275d5e0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 08:52:38 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ptj29\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 01:52:38,067 INFO   , Thread-1 (run), result.py:170, [trial: 19, gen: 0] No stderr, continue
2024-02-23 01:52:38,101 ERROR  , Thread-1 (run), health.py:155, [trial: 19, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 01:52:38,125 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,125 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line time="2024-02-23T08:44:13Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,125 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line time="2024-02-23T08:44:13Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 08:44:13.034941018 +0000 UTC m=+0.023002634]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,126 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line time="2024-02-23T08:44:13Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,126 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line time="2024-02-23T08:44:13Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,126 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line time="2024-02-23T08:44:13Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,176 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 19, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 01:52:38,332 INFO   , Thread-1 (run), consistency.py:496, [trial: 19, gen: 0] All input deltas are matched
2024-02-23 01:52:38,335 INFO   , Thread-1 (run), engine.py:554, [trial: 19, gen: 0] Error result, running recovery
2024-02-23 01:52:38,335 DEBUG  , Thread-1 (run), engine.py:698, [trial: 19, gen: 0] Running recovery
2024-02-23 01:52:39,075 DEBUG  , Thread-1 (run), runner.py:123, [trial: 19, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 01:52:39,075 DEBUG  , Thread-1 (run), runner.py:124, [trial: 19, gen: 0] STDERR: 
2024-02-23 01:52:39,075 INFO   , Thread-1 (run), runner.py:437, [trial: 19, gen: 0] Waiting for system to converge... 
2024-02-23 01:53:39,247 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:54:39,355 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:55:43,285 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:56:43,396 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:57:43,506 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 01:58:43,614 INFO   , Thread-1 (run), runner.py:508, [trial: 19, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:00:39,085 ERROR  , Thread-1 (run), runner.py:586, [trial: 19, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:00:39,387 DEBUG  , Thread-1 (run), runner.py:267, [trial: 19, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T08:44:37Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T08:44:37Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:00:13Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '9e857694-44e1-42a0-b7a6-5a170cc9cd4d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:00:13Z', 'phase': ''}}}
2024-02-23 02:00:39,408 DEBUG  , Thread-1 (run), runner.py:296, [trial: 19, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5v277
2024-02-23 02:00:39,658 ERROR  , Thread-1 (run), runner.py:368, [trial: 19, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ptj29
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4645acae-a4fa-461f-9f82-7cff5366f362', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:00:39 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ptj29\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:00:39,701 DEBUG  , Thread-1 (run), engine.py:207, [trial: 19, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 02:00:39,705 INFO   , Thread-1 (run), engine.py:333, Trial 19 finished, completed in 00:18:02
2024-02-23 02:00:39,705 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 02:00:39,705 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 02:00:39,705 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 02:00:39,705 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 02:00:39,748 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5v277
2024-02-23 02:00:53,431 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 02:01:48,226 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 02:01:48,248 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 02:01:54,270 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:01:59,485 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:01:59,485 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:01:59,753 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:04,868 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:04,868 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:05,168 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:10,316 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:10,316 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:10,463 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:15,600 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:15,600 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:15,827 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:20,969 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:20,969 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:21,219 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:26,427 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:26,427 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:26,501 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 19, gen: 0] Waiting for all pods to be ready
2024-02-23 02:02:31,639 INFO   , Thread-1 (run), deploy.py:32, [trial: 19, gen: 0] Operator ready
2024-02-23 02:02:31,639 INFO   , Thread-1 (run), deploy.py:36, [trial: 19, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:02:51,689 WARNING, Thread-1 (run), object.py:155, [trial: 20, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 02:02:51,689 WARNING, Thread-1 (run), object.py:155, [trial: 20, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 02:02:51,689 WARNING, Thread-1 (run), object.py:155, [trial: 20, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 02:02:51,690 DEBUG  , Thread-1 (run), engine.py:652, [trial: 20, gen: 0] Run and check
2024-02-23 02:02:51,849 DEBUG  , Thread-1 (run), runner.py:123, [trial: 20, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 02:02:51,849 DEBUG  , Thread-1 (run), runner.py:124, [trial: 20, gen: 0] STDERR: 
2024-02-23 02:02:51,849 INFO   , Thread-1 (run), runner.py:437, [trial: 20, gen: 0] Waiting for system to converge... 
2024-02-23 02:05:57,783 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:06:57,892 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:08:57,768 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:09:57,832 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:10:51,891 ERROR  , Thread-1 (run), runner.py:586, [trial: 20, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:10:52,175 DEBUG  , Thread-1 (run), runner.py:267, [trial: 20, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:02:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:02:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:10:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': 'd80a82bb-1dc3-41ee-a6a9-20cb4ac7e7d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:10:27Z', 'phase': ''}}}
2024-02-23 02:10:52,206 DEBUG  , Thread-1 (run), runner.py:296, [trial: 20, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-s87zx
2024-02-23 02:10:52,423 ERROR  , Thread-1 (run), runner.py:368, [trial: 20, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q5fdq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f47d56dd-524b-49cb-afaa-2cb8023c9637', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:10:52 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q5fdq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:10:52,456 INFO   , Thread-1 (run), result.py:170, [trial: 20, gen: 0] No stderr, continue
2024-02-23 02:10:52,568 ERROR  , Thread-1 (run), health.py:155, [trial: 20, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line time="2024-02-23T09:02:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line time="2024-02-23T09:02:27Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 09:02:27.502548981 +0000 UTC m=+0.011300066]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line time="2024-02-23T09:02:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line time="2024-02-23T09:02:27Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,592 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line time="2024-02-23T09:02:27Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,642 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 20, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:10:52,798 INFO   , Thread-1 (run), consistency.py:496, [trial: 20, gen: 0] All input deltas are matched
2024-02-23 02:10:52,801 INFO   , Thread-1 (run), engine.py:554, [trial: 20, gen: 0] Error result, running recovery
2024-02-23 02:10:52,801 DEBUG  , Thread-1 (run), engine.py:698, [trial: 20, gen: 0] Running recovery
2024-02-23 02:10:53,587 DEBUG  , Thread-1 (run), runner.py:123, [trial: 20, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 02:10:53,587 DEBUG  , Thread-1 (run), runner.py:124, [trial: 20, gen: 0] STDERR: 
2024-02-23 02:10:53,588 INFO   , Thread-1 (run), runner.py:437, [trial: 20, gen: 0] Waiting for system to converge... 
2024-02-23 02:11:53,763 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:12:53,871 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:13:58,422 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:14:58,531 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:15:58,638 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:16:58,747 INFO   , Thread-1 (run), runner.py:508, [trial: 20, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:18:53,598 ERROR  , Thread-1 (run), runner.py:586, [trial: 20, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:18:53,892 DEBUG  , Thread-1 (run), runner.py:267, [trial: 20, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:02:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:02:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:18:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'd80a82bb-1dc3-41ee-a6a9-20cb4ac7e7d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:18:27Z', 'phase': ''}}}
2024-02-23 02:18:53,914 DEBUG  , Thread-1 (run), runner.py:296, [trial: 20, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-s87zx
2024-02-23 02:18:54,163 ERROR  , Thread-1 (run), runner.py:368, [trial: 20, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q5fdq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '56e4db45-6588-482f-a868-1df3e2f4077a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:18:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q5fdq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:18:54,210 DEBUG  , Thread-1 (run), engine.py:207, [trial: 20, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 02:18:54,213 INFO   , Thread-1 (run), engine.py:333, Trial 20 finished, completed in 00:18:04
2024-02-23 02:18:54,214 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-23 02:18:54,214 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 02:18:54,214 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 02:18:54,214 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 02:18:54,250 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-s87zx
2024-02-23 02:19:07,678 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 02:19:58,455 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 02:19:58,465 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 02:20:05,051 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:10,197 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:10,197 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:10,414 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:15,555 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:15,555 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:15,909 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:21,044 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:21,044 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:21,176 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:26,399 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:26,399 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:26,638 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:31,768 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:31,768 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:31,976 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:37,118 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:37,118 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:20:37,188 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 20, gen: 0] Waiting for all pods to be ready
2024-02-23 02:20:42,326 INFO   , Thread-1 (run), deploy.py:32, [trial: 20, gen: 0] Operator ready
2024-02-23 02:20:42,326 INFO   , Thread-1 (run), deploy.py:36, [trial: 20, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:21:02,378 WARNING, Thread-1 (run), object.py:155, [trial: 21, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 02:21:02,378 WARNING, Thread-1 (run), object.py:155, [trial: 21, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 02:21:02,378 WARNING, Thread-1 (run), object.py:155, [trial: 21, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 02:21:02,379 DEBUG  , Thread-1 (run), engine.py:652, [trial: 21, gen: 0] Run and check
2024-02-23 02:21:02,540 DEBUG  , Thread-1 (run), runner.py:123, [trial: 21, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 02:21:02,540 DEBUG  , Thread-1 (run), runner.py:124, [trial: 21, gen: 0] STDERR: 
2024-02-23 02:21:02,540 INFO   , Thread-1 (run), runner.py:437, [trial: 21, gen: 0] Waiting for system to converge... 
2024-02-23 02:24:38,454 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:25:38,563 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:27:08,407 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:28:08,515 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:29:02,567 ERROR  , Thread-1 (run), runner.py:586, [trial: 21, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:29:02,839 DEBUG  , Thread-1 (run), runner.py:267, [trial: 21, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:21:02Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:21:02Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:28:38Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': '0177d705-ca03-4bbb-877d-e84d95c110aa'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:28:38Z', 'phase': ''}}}
2024-02-23 02:29:02,860 DEBUG  , Thread-1 (run), runner.py:296, [trial: 21, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wdm6w
2024-02-23 02:29:03,079 ERROR  , Thread-1 (run), runner.py:368, [trial: 21, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-pbjr4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0e45a3b2-093a-401c-a05e-470d4eef1aac', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:29:03 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-pbjr4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:29:03,112 INFO   , Thread-1 (run), result.py:170, [trial: 21, gen: 0] No stderr, continue
2024-02-23 02:29:03,146 ERROR  , Thread-1 (run), health.py:155, [trial: 21, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 02:29:03,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line time="2024-02-23T09:20:38Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line time="2024-02-23T09:20:38Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 09:20:38.168779937 +0000 UTC m=+0.010281968]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line time="2024-02-23T09:20:38Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line time="2024-02-23T09:20:38Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,171 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line time="2024-02-23T09:20:38Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,233 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 21, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:29:03,412 INFO   , Thread-1 (run), consistency.py:496, [trial: 21, gen: 0] All input deltas are matched
2024-02-23 02:29:03,414 INFO   , Thread-1 (run), engine.py:554, [trial: 21, gen: 0] Error result, running recovery
2024-02-23 02:29:03,415 DEBUG  , Thread-1 (run), engine.py:698, [trial: 21, gen: 0] Running recovery
2024-02-23 02:29:04,242 DEBUG  , Thread-1 (run), runner.py:123, [trial: 21, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 02:29:04,242 DEBUG  , Thread-1 (run), runner.py:124, [trial: 21, gen: 0] STDERR: 
2024-02-23 02:29:04,242 INFO   , Thread-1 (run), runner.py:437, [trial: 21, gen: 0] Waiting for system to converge... 
2024-02-23 02:30:04,418 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:31:04,527 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:32:13,423 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:33:13,508 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:34:13,617 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:35:13,724 INFO   , Thread-1 (run), runner.py:508, [trial: 21, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:37:04,251 ERROR  , Thread-1 (run), runner.py:586, [trial: 21, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:37:04,545 DEBUG  , Thread-1 (run), runner.py:267, [trial: 21, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:21:02Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:21:02Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:36:38Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2712', 'uid': '0177d705-ca03-4bbb-877d-e84d95c110aa'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:36:38Z', 'phase': ''}}}
2024-02-23 02:37:04,670 DEBUG  , Thread-1 (run), runner.py:296, [trial: 21, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wdm6w
2024-02-23 02:37:04,915 ERROR  , Thread-1 (run), runner.py:368, [trial: 21, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-pbjr4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c0c5fc75-d36b-4fa8-abce-c21bd5bf5dca', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:37:04 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-pbjr4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:37:04,974 DEBUG  , Thread-1 (run), engine.py:207, [trial: 21, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 02:37:04,978 INFO   , Thread-1 (run), engine.py:333, Trial 21 finished, completed in 00:18:00
2024-02-23 02:37:04,978 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 02:37:04,978 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 02:37:04,978 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 02:37:04,978 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 02:37:05,015 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wdm6w
2024-02-23 02:37:18,454 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 02:38:10,400 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 02:38:10,410 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 02:38:16,317 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:21,462 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:21,462 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:21,740 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:26,880 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:26,880 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:27,208 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:32,348 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:32,348 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:32,498 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:37,638 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:37,638 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:37,861 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:42,982 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:42,982 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:43,197 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:48,341 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:48,341 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:38:48,438 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 21, gen: 0] Waiting for all pods to be ready
2024-02-23 02:38:53,579 INFO   , Thread-1 (run), deploy.py:32, [trial: 21, gen: 0] Operator ready
2024-02-23 02:38:53,580 INFO   , Thread-1 (run), deploy.py:36, [trial: 21, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:39:13,632 WARNING, Thread-1 (run), object.py:155, [trial: 22, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 02:39:13,632 WARNING, Thread-1 (run), object.py:155, [trial: 22, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 02:39:13,632 WARNING, Thread-1 (run), object.py:155, [trial: 22, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 02:39:13,633 DEBUG  , Thread-1 (run), engine.py:652, [trial: 22, gen: 0] Run and check
2024-02-23 02:39:13,791 DEBUG  , Thread-1 (run), runner.py:123, [trial: 22, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 02:39:13,792 DEBUG  , Thread-1 (run), runner.py:124, [trial: 22, gen: 0] STDERR: 
2024-02-23 02:39:13,792 INFO   , Thread-1 (run), runner.py:437, [trial: 22, gen: 0] Waiting for system to converge... 
2024-02-23 02:42:19,620 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:43:19,730 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:45:19,608 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:46:19,715 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:47:13,839 ERROR  , Thread-1 (run), runner.py:586, [trial: 22, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:47:14,102 DEBUG  , Thread-1 (run), runner.py:267, [trial: 22, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:39:13Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:39:13Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:46:49Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1797', 'uid': '8fb9e21c-9810-4e37-8524-4f30b3a31d72'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:46:49Z', 'phase': ''}}}
2024-02-23 02:47:14,124 DEBUG  , Thread-1 (run), runner.py:296, [trial: 22, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6djgl
2024-02-23 02:47:14,350 ERROR  , Thread-1 (run), runner.py:368, [trial: 22, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8fsd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '85763152-56a3-4762-ba2f-1cc1c92d722a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:47:14 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8fsd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:47:14,386 INFO   , Thread-1 (run), result.py:170, [trial: 22, gen: 0] No stderr, continue
2024-02-23 02:47:14,503 ERROR  , Thread-1 (run), health.py:155, [trial: 22, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 02:47:14,528 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,528 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line time="2024-02-23T09:38:49Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,528 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line time="2024-02-23T09:38:49Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 09:38:49.33419271 +0000 UTC m=+0.010143486]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line time="2024-02-23T09:38:49Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line time="2024-02-23T09:38:49Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line time="2024-02-23T09:38:49Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,580 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 22, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 02:47:14,738 INFO   , Thread-1 (run), consistency.py:496, [trial: 22, gen: 0] All input deltas are matched
2024-02-23 02:47:14,740 INFO   , Thread-1 (run), engine.py:554, [trial: 22, gen: 0] Error result, running recovery
2024-02-23 02:47:14,740 DEBUG  , Thread-1 (run), engine.py:698, [trial: 22, gen: 0] Running recovery
2024-02-23 02:47:15,568 DEBUG  , Thread-1 (run), runner.py:123, [trial: 22, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 02:47:15,568 DEBUG  , Thread-1 (run), runner.py:124, [trial: 22, gen: 0] STDERR: 
2024-02-23 02:47:15,568 INFO   , Thread-1 (run), runner.py:437, [trial: 22, gen: 0] Waiting for system to converge... 
2024-02-23 02:48:15,734 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:49:15,827 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:50:19,573 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:51:19,670 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:52:19,779 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:53:19,886 INFO   , Thread-1 (run), runner.py:508, [trial: 22, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 02:55:15,575 ERROR  , Thread-1 (run), runner.py:586, [trial: 22, gen: 0] System failed to converge within 480 seconds
2024-02-23 02:55:15,850 DEBUG  , Thread-1 (run), runner.py:267, [trial: 22, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:39:13Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:39:13Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T09:54:49Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2718', 'uid': '8fb9e21c-9810-4e37-8524-4f30b3a31d72'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T09:54:49Z', 'phase': ''}}}
2024-02-23 02:55:15,869 DEBUG  , Thread-1 (run), runner.py:296, [trial: 22, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6djgl
2024-02-23 02:55:16,120 ERROR  , Thread-1 (run), runner.py:368, [trial: 22, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8fsd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '211d6683-e98f-4373-ba83-a2fb98e6ed8d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 09:55:16 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8fsd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 02:55:16,170 DEBUG  , Thread-1 (run), engine.py:207, [trial: 22, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 02:55:16,174 INFO   , Thread-1 (run), engine.py:333, Trial 22 finished, completed in 00:18:01
2024-02-23 02:55:16,174 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 02:55:16,175 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 02:55:16,175 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 02:55:16,175 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 02:55:16,212 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6djgl
2024-02-23 02:55:29,661 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 02:56:20,499 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 02:56:20,541 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 02:56:27,100 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:32,240 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:32,240 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:32,515 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:37,646 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:37,646 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:37,959 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:43,089 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:43,089 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:43,214 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:48,434 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:48,434 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:48,659 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:53,789 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:53,790 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:53,987 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:56:59,134 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:56:59,134 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:56:59,202 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 22, gen: 0] Waiting for all pods to be ready
2024-02-23 02:57:04,337 INFO   , Thread-1 (run), deploy.py:32, [trial: 22, gen: 0] Operator ready
2024-02-23 02:57:04,337 INFO   , Thread-1 (run), deploy.py:36, [trial: 22, gen: 0] All pods took 0 seconds to get ready
2024-02-23 02:57:24,379 WARNING, Thread-1 (run), object.py:155, [trial: 23, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 02:57:24,379 WARNING, Thread-1 (run), object.py:155, [trial: 23, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 02:57:24,380 WARNING, Thread-1 (run), object.py:155, [trial: 23, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 02:57:24,380 DEBUG  , Thread-1 (run), engine.py:652, [trial: 23, gen: 0] Run and check
2024-02-23 02:57:24,545 DEBUG  , Thread-1 (run), runner.py:123, [trial: 23, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 02:57:24,545 DEBUG  , Thread-1 (run), runner.py:124, [trial: 23, gen: 0] STDERR: 
2024-02-23 02:57:24,546 INFO   , Thread-1 (run), runner.py:437, [trial: 23, gen: 0] Waiting for system to converge... 
2024-02-23 03:00:30,472 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:01:30,562 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:03:31,752 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:04:31,844 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:05:24,580 ERROR  , Thread-1 (run), runner.py:586, [trial: 23, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:05:24,848 DEBUG  , Thread-1 (run), runner.py:267, [trial: 23, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:57:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:57:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:05:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': '45ee7239-b1ad-42d8-a313-38858712e79c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:05:00Z', 'phase': ''}}}
2024-02-23 03:05:24,870 DEBUG  , Thread-1 (run), runner.py:296, [trial: 23, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7wl88
2024-02-23 03:05:25,087 ERROR  , Thread-1 (run), runner.py:368, [trial: 23, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7sxqd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'fd2c4b75-23b8-4eff-b197-90bc115ef545', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:05:25 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7sxqd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:05:25,118 INFO   , Thread-1 (run), result.py:170, [trial: 23, gen: 0] No stderr, continue
2024-02-23 03:05:25,152 ERROR  , Thread-1 (run), health.py:155, [trial: 23, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 03:05:25,176 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,176 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line time="2024-02-23T09:57:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,176 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line time="2024-02-23T09:57:00Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 09:57:00.11932787 +0000 UTC m=+0.011912953]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,176 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line time="2024-02-23T09:57:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,177 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line time="2024-02-23T09:57:00Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,177 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line time="2024-02-23T09:57:00Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 23, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:05:25,390 INFO   , Thread-1 (run), consistency.py:496, [trial: 23, gen: 0] All input deltas are matched
2024-02-23 03:05:25,393 INFO   , Thread-1 (run), engine.py:554, [trial: 23, gen: 0] Error result, running recovery
2024-02-23 03:05:25,393 DEBUG  , Thread-1 (run), engine.py:698, [trial: 23, gen: 0] Running recovery
2024-02-23 03:05:26,210 DEBUG  , Thread-1 (run), runner.py:123, [trial: 23, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 03:05:26,210 DEBUG  , Thread-1 (run), runner.py:124, [trial: 23, gen: 0] STDERR: 
2024-02-23 03:05:26,210 INFO   , Thread-1 (run), runner.py:437, [trial: 23, gen: 0] Waiting for system to converge... 
2024-02-23 03:06:26,351 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:07:26,419 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:08:35,713 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:09:35,768 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:10:35,818 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:11:35,927 INFO   , Thread-1 (run), runner.py:508, [trial: 23, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:13:26,220 ERROR  , Thread-1 (run), runner.py:586, [trial: 23, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:13:26,514 DEBUG  , Thread-1 (run), runner.py:267, [trial: 23, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T09:57:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T09:57:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:13:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': '45ee7239-b1ad-42d8-a313-38858712e79c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:13:00Z', 'phase': ''}}}
2024-02-23 03:13:26,537 DEBUG  , Thread-1 (run), runner.py:296, [trial: 23, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7wl88
2024-02-23 03:13:26,864 ERROR  , Thread-1 (run), runner.py:368, [trial: 23, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7sxqd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c7808a1f-28a5-405c-90d2-49b6d42a2719', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:13:26 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7sxqd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:13:26,893 DEBUG  , Thread-1 (run), engine.py:207, [trial: 23, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 03:13:26,896 INFO   , Thread-1 (run), engine.py:333, Trial 23 finished, completed in 00:18:00
2024-02-23 03:13:26,896 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 03:13:26,896 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 03:13:26,896 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 03:13:26,896 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 03:13:26,930 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7wl88
2024-02-23 03:13:40,468 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 03:14:31,709 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 03:14:31,740 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 03:14:37,943 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:14:43,089 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:14:43,090 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:14:43,370 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:14:48,508 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:14:48,508 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:14:48,816 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:14:53,952 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:14:53,952 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:14:54,101 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:14:59,257 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:14:59,257 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:14:59,523 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:15:04,662 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:15:04,662 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:15:04,856 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:15:09,983 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:15:09,983 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:15:10,055 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 23, gen: 0] Waiting for all pods to be ready
2024-02-23 03:15:15,187 INFO   , Thread-1 (run), deploy.py:32, [trial: 23, gen: 0] Operator ready
2024-02-23 03:15:15,187 INFO   , Thread-1 (run), deploy.py:36, [trial: 23, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:15:35,243 WARNING, Thread-1 (run), object.py:155, [trial: 24, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 03:15:35,243 WARNING, Thread-1 (run), object.py:155, [trial: 24, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 03:15:35,243 WARNING, Thread-1 (run), object.py:155, [trial: 24, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 03:15:35,245 DEBUG  , Thread-1 (run), engine.py:652, [trial: 24, gen: 0] Run and check
2024-02-23 03:15:35,396 DEBUG  , Thread-1 (run), runner.py:123, [trial: 24, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 03:15:35,396 DEBUG  , Thread-1 (run), runner.py:124, [trial: 24, gen: 0] STDERR: 
2024-02-23 03:15:35,396 INFO   , Thread-1 (run), runner.py:437, [trial: 24, gen: 0] Waiting for system to converge... 
2024-02-23 03:18:41,209 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:19:41,320 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:21:47,411 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:22:47,514 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:23:35,419 ERROR  , Thread-1 (run), runner.py:586, [trial: 24, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:23:35,685 DEBUG  , Thread-1 (run), runner.py:267, [trial: 24, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:15:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:15:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:23:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1806', 'uid': '95cf5dff-6a07-4ffe-8990-769e6fd9ea11'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:23:11Z', 'phase': ''}}}
2024-02-23 03:23:35,706 DEBUG  , Thread-1 (run), runner.py:296, [trial: 24, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zxck4
2024-02-23 03:23:35,923 ERROR  , Thread-1 (run), runner.py:368, [trial: 24, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f26xt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9a7f9194-530b-4d83-a977-9e01affb16e4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:23:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f26xt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:23:35,956 INFO   , Thread-1 (run), result.py:170, [trial: 24, gen: 0] No stderr, continue
2024-02-23 03:23:35,993 ERROR  , Thread-1 (run), health.py:155, [trial: 24, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 03:23:36,100 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,100 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line time="2024-02-23T10:15:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,100 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line time="2024-02-23T10:15:10Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 10:15:10.941179175 +0000 UTC m=+0.013648894]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,100 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line time="2024-02-23T10:15:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,100 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line time="2024-02-23T10:15:10Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,101 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line time="2024-02-23T10:15:10Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 24, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:23:36,313 INFO   , Thread-1 (run), consistency.py:496, [trial: 24, gen: 0] All input deltas are matched
2024-02-23 03:23:36,316 INFO   , Thread-1 (run), engine.py:554, [trial: 24, gen: 0] Error result, running recovery
2024-02-23 03:23:36,316 DEBUG  , Thread-1 (run), engine.py:698, [trial: 24, gen: 0] Running recovery
2024-02-23 03:23:37,102 DEBUG  , Thread-1 (run), runner.py:123, [trial: 24, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 03:23:37,102 DEBUG  , Thread-1 (run), runner.py:124, [trial: 24, gen: 0] STDERR: 
2024-02-23 03:23:37,102 INFO   , Thread-1 (run), runner.py:437, [trial: 24, gen: 0] Waiting for system to converge... 
2024-02-23 03:24:37,273 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:25:37,380 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:26:48,412 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:27:48,520 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:28:48,628 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:29:48,742 INFO   , Thread-1 (run), runner.py:508, [trial: 24, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:31:37,112 ERROR  , Thread-1 (run), runner.py:586, [trial: 24, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:31:37,402 DEBUG  , Thread-1 (run), runner.py:267, [trial: 24, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:15:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:15:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:31:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': '95cf5dff-6a07-4ffe-8990-769e6fd9ea11'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:31:11Z', 'phase': ''}}}
2024-02-23 03:31:37,424 DEBUG  , Thread-1 (run), runner.py:296, [trial: 24, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zxck4
2024-02-23 03:31:37,677 ERROR  , Thread-1 (run), runner.py:368, [trial: 24, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f26xt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1131b3db-c1f8-454a-ad4a-cca24e918c38', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:31:37 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f26xt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:31:37,719 DEBUG  , Thread-1 (run), engine.py:207, [trial: 24, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 03:31:37,723 INFO   , Thread-1 (run), engine.py:333, Trial 24 finished, completed in 00:18:00
2024-02-23 03:31:37,723 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 03:31:37,723 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 03:31:37,723 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 03:31:37,724 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 03:31:37,759 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-zxck4
2024-02-23 03:31:51,373 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 03:32:40,679 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 03:32:40,691 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 03:32:46,992 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:32:52,137 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:32:52,137 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:32:52,401 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:32:57,534 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:32:57,534 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:32:57,814 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:33:02,951 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:33:02,951 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:33:03,077 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:33:08,216 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:33:08,216 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:33:08,427 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:33:13,655 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:33:13,655 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:33:13,842 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:33:18,979 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:33:18,979 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:33:19,044 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 24, gen: 0] Waiting for all pods to be ready
2024-02-23 03:33:24,180 INFO   , Thread-1 (run), deploy.py:32, [trial: 24, gen: 0] Operator ready
2024-02-23 03:33:24,180 INFO   , Thread-1 (run), deploy.py:36, [trial: 24, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:33:44,277 WARNING, Thread-1 (run), object.py:155, [trial: 25, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 03:33:44,278 WARNING, Thread-1 (run), object.py:155, [trial: 25, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 03:33:44,278 WARNING, Thread-1 (run), object.py:155, [trial: 25, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 03:33:44,279 DEBUG  , Thread-1 (run), engine.py:652, [trial: 25, gen: 0] Run and check
2024-02-23 03:33:44,496 DEBUG  , Thread-1 (run), runner.py:123, [trial: 25, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 03:33:44,497 DEBUG  , Thread-1 (run), runner.py:124, [trial: 25, gen: 0] STDERR: 
2024-02-23 03:33:44,497 INFO   , Thread-1 (run), runner.py:437, [trial: 25, gen: 0] Waiting for system to converge... 
2024-02-23 03:36:50,448 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:37:50,557 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:39:57,690 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:40:57,797 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:41:44,524 ERROR  , Thread-1 (run), runner.py:586, [trial: 25, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:41:44,791 DEBUG  , Thread-1 (run), runner.py:267, [trial: 25, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:33:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:33:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:41:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': '6c513267-a9ba-4c40-9138-026cd120fff2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:41:20Z', 'phase': ''}}}
2024-02-23 03:41:44,813 DEBUG  , Thread-1 (run), runner.py:296, [trial: 25, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bl4hx
2024-02-23 03:41:45,027 ERROR  , Thread-1 (run), runner.py:368, [trial: 25, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-78854
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '17e80528-ab46-4df6-8520-b8dcfe07a137', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:41:45 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-78854\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:41:45,058 INFO   , Thread-1 (run), result.py:170, [trial: 25, gen: 0] No stderr, continue
2024-02-23 03:41:45,093 ERROR  , Thread-1 (run), health.py:155, [trial: 25, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 03:41:45,118 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,119 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line time="2024-02-23T10:33:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,119 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line time="2024-02-23T10:33:20Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 10:33:20.053133932 +0000 UTC m=+0.011720289]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,119 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line time="2024-02-23T10:33:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,119 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line time="2024-02-23T10:33:20Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,119 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line time="2024-02-23T10:33:20Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,172 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 25, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 03:41:45,333 INFO   , Thread-1 (run), consistency.py:496, [trial: 25, gen: 0] All input deltas are matched
2024-02-23 03:41:45,335 INFO   , Thread-1 (run), engine.py:554, [trial: 25, gen: 0] Error result, running recovery
2024-02-23 03:41:45,336 DEBUG  , Thread-1 (run), engine.py:698, [trial: 25, gen: 0] Running recovery
2024-02-23 03:41:46,177 DEBUG  , Thread-1 (run), runner.py:123, [trial: 25, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 03:41:46,178 DEBUG  , Thread-1 (run), runner.py:124, [trial: 25, gen: 0] STDERR: 
2024-02-23 03:41:46,178 INFO   , Thread-1 (run), runner.py:437, [trial: 25, gen: 0] Waiting for system to converge... 
2024-02-23 03:42:46,351 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:43:46,425 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:44:50,311 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:45:50,418 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:46:50,525 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:47:50,629 INFO   , Thread-1 (run), runner.py:508, [trial: 25, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:49:46,187 ERROR  , Thread-1 (run), runner.py:586, [trial: 25, gen: 0] System failed to converge within 480 seconds
2024-02-23 03:49:46,489 DEBUG  , Thread-1 (run), runner.py:267, [trial: 25, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:33:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:33:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:49:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '6c513267-a9ba-4c40-9138-026cd120fff2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:49:20Z', 'phase': ''}}}
2024-02-23 03:49:46,510 DEBUG  , Thread-1 (run), runner.py:296, [trial: 25, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bl4hx
2024-02-23 03:49:46,767 ERROR  , Thread-1 (run), runner.py:368, [trial: 25, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-78854
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd016d24a-e7b6-4ba4-9046-1ecd005a7b54', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 10:49:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-78854\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 03:49:46,811 DEBUG  , Thread-1 (run), engine.py:207, [trial: 25, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 03:49:46,815 INFO   , Thread-1 (run), engine.py:333, Trial 25 finished, completed in 00:17:59
2024-02-23 03:49:46,815 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 58
2024-02-23 03:49:46,816 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 03:49:46,816 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 03:49:46,816 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 03:49:46,850 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-bl4hx
2024-02-23 03:50:00,161 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 03:50:59,695 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 03:50:59,712 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 03:51:04,077 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:09,298 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:09,298 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:09,567 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:14,709 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:14,709 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:14,993 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:20,132 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:20,132 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:20,293 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:25,434 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:25,434 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:25,682 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:30,819 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:30,819 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:31,005 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:36,151 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:36,151 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:51:36,211 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 25, gen: 0] Waiting for all pods to be ready
2024-02-23 03:51:41,351 INFO   , Thread-1 (run), deploy.py:32, [trial: 25, gen: 0] Operator ready
2024-02-23 03:51:41,351 INFO   , Thread-1 (run), deploy.py:36, [trial: 25, gen: 0] All pods took 0 seconds to get ready
2024-02-23 03:52:01,399 WARNING, Thread-1 (run), object.py:155, [trial: 26, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 03:52:01,399 WARNING, Thread-1 (run), object.py:155, [trial: 26, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 03:52:01,400 WARNING, Thread-1 (run), object.py:155, [trial: 26, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 03:52:01,400 DEBUG  , Thread-1 (run), engine.py:652, [trial: 26, gen: 0] Run and check
2024-02-23 03:52:01,578 DEBUG  , Thread-1 (run), runner.py:123, [trial: 26, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 03:52:01,579 DEBUG  , Thread-1 (run), runner.py:124, [trial: 26, gen: 0] STDERR: 
2024-02-23 03:52:01,579 INFO   , Thread-1 (run), runner.py:437, [trial: 26, gen: 0] Waiting for system to converge... 
2024-02-23 03:55:07,551 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:56:07,661 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:58:07,456 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 03:59:07,554 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:00:01,613 ERROR  , Thread-1 (run), runner.py:586, [trial: 26, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:00:01,881 DEBUG  , Thread-1 (run), runner.py:267, [trial: 26, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:52:01Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:52:01Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T10:59:37Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '79a9ef1c-79aa-4bfc-bf03-516c29ee4657'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T10:59:37Z', 'phase': ''}}}
2024-02-23 04:00:01,904 DEBUG  , Thread-1 (run), runner.py:296, [trial: 26, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-mzxp2
2024-02-23 04:00:02,121 ERROR  , Thread-1 (run), runner.py:368, [trial: 26, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-w7bkm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a1aa9073-fd5f-483f-bc75-3c42e38e6713', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:00:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-w7bkm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:00:02,153 INFO   , Thread-1 (run), result.py:170, [trial: 26, gen: 0] No stderr, continue
2024-02-23 04:00:02,188 ERROR  , Thread-1 (run), health.py:155, [trial: 26, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line time="2024-02-23T10:51:37Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line time="2024-02-23T10:51:37Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 10:51:37.166543198 +0000 UTC m=+0.011565818]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line time="2024-02-23T10:51:37Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line time="2024-02-23T10:51:37Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,299 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line time="2024-02-23T10:51:37Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 26, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:00:02,518 INFO   , Thread-1 (run), consistency.py:496, [trial: 26, gen: 0] All input deltas are matched
2024-02-23 04:00:02,521 INFO   , Thread-1 (run), engine.py:554, [trial: 26, gen: 0] Error result, running recovery
2024-02-23 04:00:02,521 DEBUG  , Thread-1 (run), engine.py:698, [trial: 26, gen: 0] Running recovery
2024-02-23 04:00:03,312 DEBUG  , Thread-1 (run), runner.py:123, [trial: 26, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 04:00:03,312 DEBUG  , Thread-1 (run), runner.py:124, [trial: 26, gen: 0] STDERR: 
2024-02-23 04:00:03,312 INFO   , Thread-1 (run), runner.py:437, [trial: 26, gen: 0] Waiting for system to converge... 
2024-02-23 04:01:03,447 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:02:03,557 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:03:09,738 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:04:09,845 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:05:09,937 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:06:10,043 INFO   , Thread-1 (run), runner.py:508, [trial: 26, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:08:03,322 ERROR  , Thread-1 (run), runner.py:586, [trial: 26, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:08:03,612 DEBUG  , Thread-1 (run), runner.py:267, [trial: 26, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T10:52:01Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T10:52:01Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:07:37Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': '79a9ef1c-79aa-4bfc-bf03-516c29ee4657'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:07:37Z', 'phase': ''}}}
2024-02-23 04:08:03,635 DEBUG  , Thread-1 (run), runner.py:296, [trial: 26, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-mzxp2
2024-02-23 04:08:03,887 ERROR  , Thread-1 (run), runner.py:368, [trial: 26, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-w7bkm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6366e7bf-82a7-4071-8d18-5c5493fee964', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:08:03 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-w7bkm\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 04:08:03,946 DEBUG  , Thread-1 (run), engine.py:207, [trial: 26, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 04:08:03,950 INFO   , Thread-1 (run), engine.py:333, Trial 26 finished, completed in 00:18:07
2024-02-23 04:08:03,951 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 66
2024-02-23 04:08:03,951 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 04:08:03,951 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 04:08:03,951 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 04:08:03,988 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-mzxp2
2024-02-23 04:08:17,472 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 04:09:05,504 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 04:09:05,520 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 04:09:11,400 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:16,545 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:16,545 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:16,768 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:21,907 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:21,907 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:22,241 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:27,384 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:27,384 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:27,541 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:32,681 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:32,682 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:32,887 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:38,110 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:38,110 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:38,363 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:43,509 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:43,509 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:09:43,583 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 26, gen: 0] Waiting for all pods to be ready
2024-02-23 04:09:48,710 INFO   , Thread-1 (run), deploy.py:32, [trial: 26, gen: 0] Operator ready
2024-02-23 04:09:48,710 INFO   , Thread-1 (run), deploy.py:36, [trial: 26, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:10:08,762 WARNING, Thread-1 (run), object.py:155, [trial: 27, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 04:10:08,762 WARNING, Thread-1 (run), object.py:155, [trial: 27, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 04:10:08,762 WARNING, Thread-1 (run), object.py:155, [trial: 27, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 04:10:08,762 DEBUG  , Thread-1 (run), engine.py:652, [trial: 27, gen: 0] Run and check
2024-02-23 04:10:08,912 DEBUG  , Thread-1 (run), runner.py:123, [trial: 27, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 04:10:08,912 DEBUG  , Thread-1 (run), runner.py:124, [trial: 27, gen: 0] STDERR: 
2024-02-23 04:10:08,912 INFO   , Thread-1 (run), runner.py:437, [trial: 27, gen: 0] Waiting for system to converge... 
2024-02-23 04:13:14,841 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:14:14,949 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:16:14,816 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:17:14,922 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:18:08,938 ERROR  , Thread-1 (run), runner.py:586, [trial: 27, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:18:09,159 DEBUG  , Thread-1 (run), runner.py:267, [trial: 27, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:10:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:10:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:17:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1809', 'uid': 'b8255c74-184d-44e7-967a-93ac71490e3e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:17:44Z', 'phase': ''}}}
2024-02-23 04:18:09,180 DEBUG  , Thread-1 (run), runner.py:296, [trial: 27, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-562h7
2024-02-23 04:18:09,397 ERROR  , Thread-1 (run), runner.py:368, [trial: 27, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zkhm2
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '92a07f1d-79f2-4c65-8fb2-c2c76e4252cf', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:18:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zkhm2\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:18:09,446 INFO   , Thread-1 (run), result.py:170, [trial: 27, gen: 0] No stderr, continue
2024-02-23 04:18:09,486 ERROR  , Thread-1 (run), health.py:155, [trial: 27, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 04:18:09,512 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,512 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line time="2024-02-23T11:09:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,512 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line time="2024-02-23T11:09:44Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 11:09:44.547324645 +0000 UTC m=+0.009963226]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,513 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line time="2024-02-23T11:09:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,513 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line time="2024-02-23T11:09:44Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,513 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line time="2024-02-23T11:09:44Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,565 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 27, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:18:09,726 INFO   , Thread-1 (run), consistency.py:496, [trial: 27, gen: 0] All input deltas are matched
2024-02-23 04:18:09,728 INFO   , Thread-1 (run), engine.py:554, [trial: 27, gen: 0] Error result, running recovery
2024-02-23 04:18:09,728 DEBUG  , Thread-1 (run), engine.py:698, [trial: 27, gen: 0] Running recovery
2024-02-23 04:18:10,551 DEBUG  , Thread-1 (run), runner.py:123, [trial: 27, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 04:18:10,552 DEBUG  , Thread-1 (run), runner.py:124, [trial: 27, gen: 0] STDERR: 
2024-02-23 04:18:10,552 INFO   , Thread-1 (run), runner.py:437, [trial: 27, gen: 0] Waiting for system to converge... 
2024-02-23 04:19:10,726 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:20:10,819 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:21:16,701 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:22:16,809 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:23:16,901 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:24:17,008 INFO   , Thread-1 (run), runner.py:508, [trial: 27, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:26:10,560 ERROR  , Thread-1 (run), runner.py:586, [trial: 27, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:26:10,853 DEBUG  , Thread-1 (run), runner.py:267, [trial: 27, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:10:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:10:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:25:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': 'b8255c74-184d-44e7-967a-93ac71490e3e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:25:44Z', 'phase': ''}}}
2024-02-23 04:26:10,877 DEBUG  , Thread-1 (run), runner.py:296, [trial: 27, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-562h7
2024-02-23 04:26:11,124 ERROR  , Thread-1 (run), runner.py:368, [trial: 27, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zkhm2
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '62b7ed59-5e6a-40e3-b03b-6aa704d63ae0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:26:11 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zkhm2\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:26:11,184 DEBUG  , Thread-1 (run), engine.py:207, [trial: 27, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 04:26:11,188 INFO   , Thread-1 (run), engine.py:333, Trial 27 finished, completed in 00:17:57
2024-02-23 04:26:11,188 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 57
2024-02-23 04:26:11,188 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 04:26:11,188 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 04:26:11,188 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 04:26:11,224 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-562h7
2024-02-23 04:26:24,937 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 04:27:16,210 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 04:27:16,225 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 04:27:22,395 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:27,621 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:27,621 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:27,880 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:33,007 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:33,007 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:33,300 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:38,440 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:38,440 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:38,572 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:43,706 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:43,707 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:43,968 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:49,091 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:49,091 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:49,295 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:54,433 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:54,433 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:27:54,506 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 27, gen: 0] Waiting for all pods to be ready
2024-02-23 04:27:59,638 INFO   , Thread-1 (run), deploy.py:32, [trial: 27, gen: 0] Operator ready
2024-02-23 04:27:59,638 INFO   , Thread-1 (run), deploy.py:36, [trial: 27, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:28:19,689 WARNING, Thread-1 (run), object.py:155, [trial: 28, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 04:28:19,689 WARNING, Thread-1 (run), object.py:155, [trial: 28, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 04:28:19,689 WARNING, Thread-1 (run), object.py:155, [trial: 28, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 04:28:19,689 DEBUG  , Thread-1 (run), engine.py:652, [trial: 28, gen: 0] Run and check
2024-02-23 04:28:19,836 DEBUG  , Thread-1 (run), runner.py:123, [trial: 28, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 04:28:19,836 DEBUG  , Thread-1 (run), runner.py:124, [trial: 28, gen: 0] STDERR: 
2024-02-23 04:28:19,836 INFO   , Thread-1 (run), runner.py:437, [trial: 28, gen: 0] Waiting for system to converge... 
2024-02-23 04:31:22,195 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:32:22,307 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:33:22,361 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:34:25,710 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:35:25,820 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:36:19,860 ERROR  , Thread-1 (run), runner.py:586, [trial: 28, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:36:20,130 DEBUG  , Thread-1 (run), runner.py:267, [trial: 28, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:28:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:28:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:35:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '3a34767b-de7a-4eb4-b55b-57c210f657ca'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:35:55Z', 'phase': ''}}}
2024-02-23 04:36:20,151 DEBUG  , Thread-1 (run), runner.py:296, [trial: 28, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-c7gxs
2024-02-23 04:36:20,379 ERROR  , Thread-1 (run), runner.py:368, [trial: 28, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-6z8pc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '479dc1b7-1bcc-459b-bf5e-45dab152fe20', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:36:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-6z8pc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:36:20,415 INFO   , Thread-1 (run), result.py:170, [trial: 28, gen: 0] No stderr, continue
2024-02-23 04:36:20,450 ERROR  , Thread-1 (run), health.py:155, [trial: 28, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 04:36:20,563 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,563 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line time="2024-02-23T11:27:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,563 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line time="2024-02-23T11:27:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 11:27:55.46730017 +0000 UTC m=+0.011821495]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,563 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line time="2024-02-23T11:27:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,564 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line time="2024-02-23T11:27:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,564 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line time="2024-02-23T11:27:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,616 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 28, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:36:20,775 INFO   , Thread-1 (run), consistency.py:496, [trial: 28, gen: 0] All input deltas are matched
2024-02-23 04:36:20,777 INFO   , Thread-1 (run), engine.py:554, [trial: 28, gen: 0] Error result, running recovery
2024-02-23 04:36:20,777 DEBUG  , Thread-1 (run), engine.py:698, [trial: 28, gen: 0] Running recovery
2024-02-23 04:36:21,575 DEBUG  , Thread-1 (run), runner.py:123, [trial: 28, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 04:36:21,575 DEBUG  , Thread-1 (run), runner.py:124, [trial: 28, gen: 0] STDERR: 
2024-02-23 04:36:21,575 INFO   , Thread-1 (run), runner.py:437, [trial: 28, gen: 0] Waiting for system to converge... 
2024-02-23 04:37:21,750 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:38:21,860 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:39:29,159 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:40:29,223 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:41:29,330 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:42:29,438 INFO   , Thread-1 (run), runner.py:508, [trial: 28, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:44:21,586 ERROR  , Thread-1 (run), runner.py:586, [trial: 28, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:44:21,890 DEBUG  , Thread-1 (run), runner.py:267, [trial: 28, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:28:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:28:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:43:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '3a34767b-de7a-4eb4-b55b-57c210f657ca'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:43:55Z', 'phase': ''}}}
2024-02-23 04:44:21,913 DEBUG  , Thread-1 (run), runner.py:296, [trial: 28, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-c7gxs
2024-02-23 04:44:22,164 ERROR  , Thread-1 (run), runner.py:368, [trial: 28, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-6z8pc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'ce5e2f74-dc36-45e5-9b86-ad9c9d54b3b2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:44:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-6z8pc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:44:22,209 DEBUG  , Thread-1 (run), engine.py:207, [trial: 28, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 04:44:22,213 INFO   , Thread-1 (run), engine.py:333, Trial 28 finished, completed in 00:18:00
2024-02-23 04:44:22,213 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 04:44:22,213 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 04:44:22,213 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 04:44:22,213 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 04:44:22,241 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-c7gxs
2024-02-23 04:44:35,964 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 04:45:26,799 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 04:45:26,813 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 04:45:32,808 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:45:37,951 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:45:37,952 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:45:38,216 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:45:43,358 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:45:43,358 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:45:43,663 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:45:48,799 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:45:48,799 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:45:48,932 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:45:54,073 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:45:54,073 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:45:54,350 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:45:59,566 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:45:59,566 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:45:59,751 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:46:04,887 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:46:04,887 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:46:04,954 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 28, gen: 0] Waiting for all pods to be ready
2024-02-23 04:46:10,094 INFO   , Thread-1 (run), deploy.py:32, [trial: 28, gen: 0] Operator ready
2024-02-23 04:46:10,094 INFO   , Thread-1 (run), deploy.py:36, [trial: 28, gen: 0] All pods took 0 seconds to get ready
2024-02-23 04:46:30,145 WARNING, Thread-1 (run), object.py:155, [trial: 29, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 04:46:30,145 WARNING, Thread-1 (run), object.py:155, [trial: 29, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 04:46:30,145 WARNING, Thread-1 (run), object.py:155, [trial: 29, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 04:46:30,146 DEBUG  , Thread-1 (run), engine.py:652, [trial: 29, gen: 0] Run and check
2024-02-23 04:46:30,280 DEBUG  , Thread-1 (run), runner.py:123, [trial: 29, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 04:46:30,280 DEBUG  , Thread-1 (run), runner.py:124, [trial: 29, gen: 0] STDERR: 
2024-02-23 04:46:30,280 INFO   , Thread-1 (run), runner.py:437, [trial: 29, gen: 0] Waiting for system to converge... 
2024-02-23 04:49:33,121 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:50:33,230 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:51:33,338 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:52:43,070 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:53:43,121 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:54:30,305 ERROR  , Thread-1 (run), runner.py:586, [trial: 29, gen: 0] System failed to converge within 480 seconds
2024-02-23 04:54:30,576 DEBUG  , Thread-1 (run), runner.py:267, [trial: 29, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:46:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:46:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T11:54:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1880', 'uid': '5997aec4-7647-42c5-be64-872e4bc65d8a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T11:54:06Z', 'phase': ''}}}
2024-02-23 04:54:30,599 DEBUG  , Thread-1 (run), runner.py:296, [trial: 29, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r56rl
2024-02-23 04:54:30,829 ERROR  , Thread-1 (run), runner.py:368, [trial: 29, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wbdzw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2bf39e73-3eec-4a8d-a1d5-fe09b34b3f91', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 11:54:30 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wbdzw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 04:54:30,864 INFO   , Thread-1 (run), result.py:170, [trial: 29, gen: 0] No stderr, continue
2024-02-23 04:54:30,898 ERROR  , Thread-1 (run), health.py:155, [trial: 29, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 04:54:30,923 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,923 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line time="2024-02-23T11:46:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,923 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line time="2024-02-23T11:46:05Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 11:46:05.873398243 +0000 UTC m=+0.010133694]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line time="2024-02-23T11:46:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line time="2024-02-23T11:46:05Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,924 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line time="2024-02-23T11:46:05Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:30,991 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 29, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 04:54:31,147 INFO   , Thread-1 (run), consistency.py:496, [trial: 29, gen: 0] All input deltas are matched
2024-02-23 04:54:31,149 INFO   , Thread-1 (run), engine.py:554, [trial: 29, gen: 0] Error result, running recovery
2024-02-23 04:54:31,149 DEBUG  , Thread-1 (run), engine.py:698, [trial: 29, gen: 0] Running recovery
2024-02-23 04:54:31,952 DEBUG  , Thread-1 (run), runner.py:123, [trial: 29, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 04:54:31,952 DEBUG  , Thread-1 (run), runner.py:124, [trial: 29, gen: 0] STDERR: 
2024-02-23 04:54:31,952 INFO   , Thread-1 (run), runner.py:437, [trial: 29, gen: 0] Waiting for system to converge... 
2024-02-23 04:55:32,126 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:56:32,213 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:57:38,071 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:58:38,146 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 04:59:38,198 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:00:38,307 INFO   , Thread-1 (run), runner.py:508, [trial: 29, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:02:31,961 ERROR  , Thread-1 (run), runner.py:586, [trial: 29, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:02:32,253 DEBUG  , Thread-1 (run), runner.py:267, [trial: 29, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T11:46:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T11:46:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:02:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2871', 'uid': '5997aec4-7647-42c5-be64-872e4bc65d8a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:02:06Z', 'phase': ''}}}
2024-02-23 05:02:32,274 DEBUG  , Thread-1 (run), runner.py:296, [trial: 29, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r56rl
2024-02-23 05:02:32,545 ERROR  , Thread-1 (run), runner.py:368, [trial: 29, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wbdzw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2fdea605-254a-49fa-aa69-6baa496c38d0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:02:32 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wbdzw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:02:32,603 DEBUG  , Thread-1 (run), engine.py:207, [trial: 29, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 05:02:32,608 INFO   , Thread-1 (run), engine.py:333, Trial 29 finished, completed in 00:18:00
2024-02-23 05:02:32,608 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 05:02:32,608 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 05:02:32,608 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 05:02:32,608 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 05:02:32,645 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-r56rl
2024-02-23 05:02:46,150 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 05:03:39,561 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 05:03:39,593 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 05:03:45,710 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:03:50,938 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:03:50,938 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:03:51,148 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:03:56,280 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:03:56,280 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:03:56,555 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:04:01,697 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:04:01,697 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:04:01,818 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:04:06,944 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:04:06,944 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:04:07,184 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:04:12,319 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:04:12,320 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:04:12,539 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:04:17,705 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:04:17,706 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:04:17,775 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 29, gen: 0] Waiting for all pods to be ready
2024-02-23 05:04:22,925 INFO   , Thread-1 (run), deploy.py:32, [trial: 29, gen: 0] Operator ready
2024-02-23 05:04:22,925 INFO   , Thread-1 (run), deploy.py:36, [trial: 29, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:04:42,977 WARNING, Thread-1 (run), object.py:155, [trial: 30, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 05:04:42,977 WARNING, Thread-1 (run), object.py:155, [trial: 30, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 05:04:42,977 WARNING, Thread-1 (run), object.py:155, [trial: 30, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 05:04:42,978 DEBUG  , Thread-1 (run), engine.py:652, [trial: 30, gen: 0] Run and check
2024-02-23 05:04:43,119 DEBUG  , Thread-1 (run), runner.py:123, [trial: 30, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 05:04:43,119 DEBUG  , Thread-1 (run), runner.py:124, [trial: 30, gen: 0] STDERR: 
2024-02-23 05:04:43,120 INFO   , Thread-1 (run), runner.py:437, [trial: 30, gen: 0] Waiting for system to converge... 
2024-02-23 05:07:49,002 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:08:49,116 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:10:51,777 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:11:51,879 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:12:43,142 ERROR  , Thread-1 (run), runner.py:586, [trial: 30, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:12:43,405 DEBUG  , Thread-1 (run), runner.py:267, [trial: 30, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:04:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:04:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:12:18Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': 'f5f2f433-6f8b-4d6b-aac5-10e239f7c72b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:12:18Z', 'phase': ''}}}
2024-02-23 05:12:43,430 DEBUG  , Thread-1 (run), runner.py:296, [trial: 30, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4m5pg
2024-02-23 05:12:43,657 ERROR  , Thread-1 (run), runner.py:368, [trial: 30, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jq8ks
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1cd88c9d-6a2e-474c-a41c-b174d81d89aa', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:12:43 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jq8ks\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:12:43,709 INFO   , Thread-1 (run), result.py:170, [trial: 30, gen: 0] No stderr, continue
2024-02-23 05:12:43,744 ERROR  , Thread-1 (run), health.py:155, [trial: 30, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 05:12:43,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line time="2024-02-23T12:04:18Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line time="2024-02-23T12:04:18Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 12:04:18.724559841 +0000 UTC m=+0.010755556]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line time="2024-02-23T12:04:18Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line time="2024-02-23T12:04:18Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,858 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line time="2024-02-23T12:04:18Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:43,910 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 30, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:12:44,068 INFO   , Thread-1 (run), consistency.py:496, [trial: 30, gen: 0] All input deltas are matched
2024-02-23 05:12:44,071 INFO   , Thread-1 (run), engine.py:554, [trial: 30, gen: 0] Error result, running recovery
2024-02-23 05:12:44,071 DEBUG  , Thread-1 (run), engine.py:698, [trial: 30, gen: 0] Running recovery
2024-02-23 05:12:44,865 DEBUG  , Thread-1 (run), runner.py:123, [trial: 30, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 05:12:44,865 DEBUG  , Thread-1 (run), runner.py:124, [trial: 30, gen: 0] STDERR: 
2024-02-23 05:12:44,865 INFO   , Thread-1 (run), runner.py:437, [trial: 30, gen: 0] Waiting for system to converge... 
2024-02-23 05:13:45,036 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:14:45,147 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:15:49,734 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:16:49,842 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:17:49,913 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:18:50,007 INFO   , Thread-1 (run), runner.py:508, [trial: 30, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:20:44,872 ERROR  , Thread-1 (run), runner.py:586, [trial: 30, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:20:45,172 DEBUG  , Thread-1 (run), runner.py:267, [trial: 30, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:04:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:04:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:20:18Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': 'f5f2f433-6f8b-4d6b-aac5-10e239f7c72b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:20:18Z', 'phase': ''}}}
2024-02-23 05:20:45,193 DEBUG  , Thread-1 (run), runner.py:296, [trial: 30, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4m5pg
2024-02-23 05:20:45,456 ERROR  , Thread-1 (run), runner.py:368, [trial: 30, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jq8ks
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '27b0601e-3190-4aea-ae0d-a4fde911fab6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:20:45 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jq8ks\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:20:45,519 DEBUG  , Thread-1 (run), engine.py:207, [trial: 30, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 05:20:45,523 INFO   , Thread-1 (run), engine.py:333, Trial 30 finished, completed in 00:18:02
2024-02-23 05:20:45,523 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 05:20:45,523 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 05:20:45,523 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 05:20:45,523 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 05:20:45,561 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4m5pg
2024-02-23 05:20:58,942 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 05:21:50,444 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 05:21:50,455 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 05:21:57,083 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:02,226 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:02,226 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:02,428 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:07,570 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:07,571 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:07,881 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:13,024 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:13,024 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:13,159 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:18,285 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:18,286 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:18,521 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:23,736 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:23,736 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:23,905 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:29,043 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:29,043 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:29,113 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 30, gen: 0] Waiting for all pods to be ready
2024-02-23 05:22:34,260 INFO   , Thread-1 (run), deploy.py:32, [trial: 30, gen: 0] Operator ready
2024-02-23 05:22:34,260 INFO   , Thread-1 (run), deploy.py:36, [trial: 30, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:22:54,309 WARNING, Thread-1 (run), object.py:155, [trial: 31, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 05:22:54,310 WARNING, Thread-1 (run), object.py:155, [trial: 31, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 05:22:54,310 WARNING, Thread-1 (run), object.py:155, [trial: 31, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 05:22:54,310 DEBUG  , Thread-1 (run), engine.py:652, [trial: 31, gen: 0] Run and check
2024-02-23 05:22:54,469 DEBUG  , Thread-1 (run), runner.py:123, [trial: 31, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 05:22:54,469 DEBUG  , Thread-1 (run), runner.py:124, [trial: 31, gen: 0] STDERR: 
2024-02-23 05:22:54,469 INFO   , Thread-1 (run), runner.py:437, [trial: 31, gen: 0] Waiting for system to converge... 
2024-02-23 05:26:01,423 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:27:01,490 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:29:00,352 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:30:00,458 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:30:54,495 ERROR  , Thread-1 (run), runner.py:586, [trial: 31, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:30:54,765 DEBUG  , Thread-1 (run), runner.py:267, [trial: 31, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:22:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:22:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:30:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1790', 'uid': '65177702-0622-4ce5-bf31-bdfcf888c26f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:30:30Z', 'phase': ''}}}
2024-02-23 05:30:54,786 DEBUG  , Thread-1 (run), runner.py:296, [trial: 31, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-29vpc
2024-02-23 05:30:55,001 ERROR  , Thread-1 (run), runner.py:368, [trial: 31, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bvpbt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9a1d63b6-9783-4aae-b0aa-0d6f08b196dd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:30:55 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bvpbt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:30:55,038 INFO   , Thread-1 (run), result.py:170, [trial: 31, gen: 0] No stderr, continue
2024-02-23 05:30:55,071 ERROR  , Thread-1 (run), health.py:155, [trial: 31, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 05:30:55,095 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,096 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line time="2024-02-23T12:22:30Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,096 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line time="2024-02-23T12:22:30Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 12:22:30.069815181 +0000 UTC m=+0.011692966]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,096 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line time="2024-02-23T12:22:30Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,096 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line time="2024-02-23T12:22:30Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,096 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line time="2024-02-23T12:22:30Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,151 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 31, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:30:55,328 INFO   , Thread-1 (run), consistency.py:496, [trial: 31, gen: 0] All input deltas are matched
2024-02-23 05:30:55,331 INFO   , Thread-1 (run), engine.py:554, [trial: 31, gen: 0] Error result, running recovery
2024-02-23 05:30:55,331 DEBUG  , Thread-1 (run), engine.py:698, [trial: 31, gen: 0] Running recovery
2024-02-23 05:30:56,174 DEBUG  , Thread-1 (run), runner.py:123, [trial: 31, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 05:30:56,174 DEBUG  , Thread-1 (run), runner.py:124, [trial: 31, gen: 0] STDERR: 
2024-02-23 05:30:56,174 INFO   , Thread-1 (run), runner.py:437, [trial: 31, gen: 0] Waiting for system to converge... 
2024-02-23 05:31:56,347 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:32:56,455 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:34:04,382 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:35:04,490 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:36:04,558 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:37:04,630 INFO   , Thread-1 (run), runner.py:508, [trial: 31, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:38:56,183 ERROR  , Thread-1 (run), runner.py:586, [trial: 31, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:38:56,480 DEBUG  , Thread-1 (run), runner.py:267, [trial: 31, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:22:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:22:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:38:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2709', 'uid': '65177702-0622-4ce5-bf31-bdfcf888c26f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:38:30Z', 'phase': ''}}}
2024-02-23 05:38:56,503 DEBUG  , Thread-1 (run), runner.py:296, [trial: 31, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-29vpc
2024-02-23 05:38:56,748 ERROR  , Thread-1 (run), runner.py:368, [trial: 31, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bvpbt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7ef553f4-8c86-44e9-a0a0-b10a1c1c7610', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:38:56 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bvpbt\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 05:38:56,809 DEBUG  , Thread-1 (run), engine.py:207, [trial: 31, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 05:38:56,813 INFO   , Thread-1 (run), engine.py:333, Trial 31 finished, completed in 00:18:01
2024-02-23 05:38:56,813 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 05:38:56,813 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 05:38:56,813 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 05:38:56,813 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 05:38:56,850 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-29vpc
2024-02-23 05:39:10,165 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 05:40:00,620 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 05:40:00,639 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 05:40:07,618 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:12,847 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:12,847 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:13,085 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:18,234 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:18,234 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:18,513 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:23,647 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:23,647 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:23,797 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:28,932 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:28,932 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:29,158 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:34,281 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:34,281 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:34,491 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:39,631 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:39,631 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:40:39,702 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 31, gen: 0] Waiting for all pods to be ready
2024-02-23 05:40:44,849 INFO   , Thread-1 (run), deploy.py:32, [trial: 31, gen: 0] Operator ready
2024-02-23 05:40:44,849 INFO   , Thread-1 (run), deploy.py:36, [trial: 31, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:41:04,904 WARNING, Thread-1 (run), object.py:155, [trial: 32, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 05:41:04,904 WARNING, Thread-1 (run), object.py:155, [trial: 32, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 05:41:04,904 WARNING, Thread-1 (run), object.py:155, [trial: 32, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 05:41:04,905 DEBUG  , Thread-1 (run), engine.py:652, [trial: 32, gen: 0] Run and check
2024-02-23 05:41:05,050 DEBUG  , Thread-1 (run), runner.py:123, [trial: 32, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 05:41:05,050 DEBUG  , Thread-1 (run), runner.py:124, [trial: 32, gen: 0] STDERR: 
2024-02-23 05:41:05,050 INFO   , Thread-1 (run), runner.py:437, [trial: 32, gen: 0] Waiting for system to converge... 
2024-02-23 05:44:08,972 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:45:09,082 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:46:09,142 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:47:15,925 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:48:16,015 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:49:05,077 ERROR  , Thread-1 (run), runner.py:586, [trial: 32, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:49:05,323 DEBUG  , Thread-1 (run), runner.py:267, [trial: 32, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:41:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:41:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:48:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1816', 'uid': 'e2a23f6b-6e69-4ead-9796-bb16f96e5bad'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:48:40Z', 'phase': ''}}}
2024-02-23 05:49:05,337 DEBUG  , Thread-1 (run), runner.py:296, [trial: 32, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wrcfl
2024-02-23 05:49:05,561 ERROR  , Thread-1 (run), runner.py:368, [trial: 32, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vr8xv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b6b9ceee-93de-4942-ba13-f613f89550e2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:49:05 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vr8xv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:49:05,592 INFO   , Thread-1 (run), result.py:170, [trial: 32, gen: 0] No stderr, continue
2024-02-23 05:49:05,625 ERROR  , Thread-1 (run), health.py:155, [trial: 32, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 05:49:05,737 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,737 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line time="2024-02-23T12:40:40Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,738 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line time="2024-02-23T12:40:40Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 12:40:40.605478319 +0000 UTC m=+0.016940155]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,738 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line time="2024-02-23T12:40:40Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,738 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line time="2024-02-23T12:40:40Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,738 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line time="2024-02-23T12:40:40Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,793 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 32, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 05:49:05,952 INFO   , Thread-1 (run), consistency.py:496, [trial: 32, gen: 0] All input deltas are matched
2024-02-23 05:49:05,954 INFO   , Thread-1 (run), engine.py:554, [trial: 32, gen: 0] Error result, running recovery
2024-02-23 05:49:05,955 DEBUG  , Thread-1 (run), engine.py:698, [trial: 32, gen: 0] Running recovery
2024-02-23 05:49:06,758 DEBUG  , Thread-1 (run), runner.py:123, [trial: 32, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 05:49:06,758 DEBUG  , Thread-1 (run), runner.py:124, [trial: 32, gen: 0] STDERR: 
2024-02-23 05:49:06,758 INFO   , Thread-1 (run), runner.py:437, [trial: 32, gen: 0] Waiting for system to converge... 
2024-02-23 05:50:06,874 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:52:10,895 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:53:10,978 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:54:11,044 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:55:11,130 INFO   , Thread-1 (run), runner.py:508, [trial: 32, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 05:57:06,767 ERROR  , Thread-1 (run), runner.py:586, [trial: 32, gen: 0] System failed to converge within 480 seconds
2024-02-23 05:57:07,067 DEBUG  , Thread-1 (run), runner.py:267, [trial: 32, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:41:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:41:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T12:56:40Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2736', 'uid': 'e2a23f6b-6e69-4ead-9796-bb16f96e5bad'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T12:56:40Z', 'phase': ''}}}
2024-02-23 05:57:07,089 DEBUG  , Thread-1 (run), runner.py:296, [trial: 32, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wrcfl
2024-02-23 05:57:07,336 ERROR  , Thread-1 (run), runner.py:368, [trial: 32, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vr8xv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a891efe0-c0db-46a9-b92d-41e2b195550a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 12:57:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vr8xv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 05:57:07,400 DEBUG  , Thread-1 (run), engine.py:207, [trial: 32, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 05:57:07,404 INFO   , Thread-1 (run), engine.py:333, Trial 32 finished, completed in 00:18:00
2024-02-23 05:57:07,404 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 05:57:07,404 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 05:57:07,404 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 05:57:07,404 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 05:57:07,442 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wrcfl
2024-02-23 05:57:20,925 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 05:58:12,245 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 05:58:12,272 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 05:58:18,600 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:23,743 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:23,743 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:23,970 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:29,109 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:29,109 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:29,425 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:34,571 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:34,571 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:34,710 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:39,833 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:39,833 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:40,065 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:45,292 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:45,293 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:45,455 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:50,591 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:50,591 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:58:50,666 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 32, gen: 0] Waiting for all pods to be ready
2024-02-23 05:58:55,808 INFO   , Thread-1 (run), deploy.py:32, [trial: 32, gen: 0] Operator ready
2024-02-23 05:58:55,808 INFO   , Thread-1 (run), deploy.py:36, [trial: 32, gen: 0] All pods took 0 seconds to get ready
2024-02-23 05:59:15,857 WARNING, Thread-1 (run), object.py:155, [trial: 33, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 05:59:15,858 WARNING, Thread-1 (run), object.py:155, [trial: 33, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 05:59:15,858 WARNING, Thread-1 (run), object.py:155, [trial: 33, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 05:59:15,858 DEBUG  , Thread-1 (run), engine.py:652, [trial: 33, gen: 0] Run and check
2024-02-23 05:59:16,008 DEBUG  , Thread-1 (run), runner.py:123, [trial: 33, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 05:59:16,008 DEBUG  , Thread-1 (run), runner.py:124, [trial: 33, gen: 0] STDERR: 
2024-02-23 05:59:16,009 INFO   , Thread-1 (run), runner.py:437, [trial: 33, gen: 0] Waiting for system to converge... 
2024-02-23 06:02:22,211 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:03:22,321 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:05:26,222 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:06:26,329 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:07:16,035 ERROR  , Thread-1 (run), runner.py:586, [trial: 33, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:07:16,303 DEBUG  , Thread-1 (run), runner.py:267, [trial: 33, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:59:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:59:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:06:51Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '4edb4c93-445b-4919-9a5e-fb33cb0818de'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:06:51Z', 'phase': ''}}}
2024-02-23 06:07:16,325 DEBUG  , Thread-1 (run), runner.py:296, [trial: 33, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zvkdt
2024-02-23 06:07:16,549 ERROR  , Thread-1 (run), runner.py:368, [trial: 33, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hp5gg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'fd1da8fd-11cc-4fbb-9ef5-0e4a971ed46d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:07:16 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hp5gg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:07:16,592 INFO   , Thread-1 (run), result.py:170, [trial: 33, gen: 0] No stderr, continue
2024-02-23 06:07:16,627 ERROR  , Thread-1 (run), health.py:155, [trial: 33, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 06:07:16,651 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,651 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line time="2024-02-23T12:58:51Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,651 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line time="2024-02-23T12:58:51Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 12:58:51.573292841 +0000 UTC m=+0.010567707]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,652 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line time="2024-02-23T12:58:51Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,652 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line time="2024-02-23T12:58:51Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,652 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line time="2024-02-23T12:58:51Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,709 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 33, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:07:16,887 INFO   , Thread-1 (run), consistency.py:496, [trial: 33, gen: 0] All input deltas are matched
2024-02-23 06:07:16,889 INFO   , Thread-1 (run), engine.py:554, [trial: 33, gen: 0] Error result, running recovery
2024-02-23 06:07:16,889 DEBUG  , Thread-1 (run), engine.py:698, [trial: 33, gen: 0] Running recovery
2024-02-23 06:07:17,654 DEBUG  , Thread-1 (run), runner.py:123, [trial: 33, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 06:07:17,654 DEBUG  , Thread-1 (run), runner.py:124, [trial: 33, gen: 0] STDERR: 
2024-02-23 06:07:17,654 INFO   , Thread-1 (run), runner.py:437, [trial: 33, gen: 0] Waiting for system to converge... 
2024-02-23 06:08:17,821 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:09:17,898 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:10:21,827 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:11:21,935 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:12:22,041 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:13:22,110 INFO   , Thread-1 (run), runner.py:508, [trial: 33, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:15:17,663 ERROR  , Thread-1 (run), runner.py:586, [trial: 33, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:15:17,959 DEBUG  , Thread-1 (run), runner.py:267, [trial: 33, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T12:59:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T12:59:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:14:51Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': '4edb4c93-445b-4919-9a5e-fb33cb0818de'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:14:51Z', 'phase': ''}}}
2024-02-23 06:15:17,980 DEBUG  , Thread-1 (run), runner.py:296, [trial: 33, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zvkdt
2024-02-23 06:15:18,246 ERROR  , Thread-1 (run), runner.py:368, [trial: 33, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hp5gg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'aed11cf4-8816-4d9b-bff3-9899cb0ab6af', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:15:18 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hp5gg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:15:18,308 DEBUG  , Thread-1 (run), engine.py:207, [trial: 33, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 06:15:18,312 INFO   , Thread-1 (run), engine.py:333, Trial 33 finished, completed in 00:18:00
2024-02-23 06:15:18,312 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 06:15:18,312 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 06:15:18,312 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 06:15:18,312 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 06:15:18,350 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-zvkdt
2024-02-23 06:15:31,796 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 06:16:25,406 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 06:16:25,417 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 06:16:32,169 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:16:37,313 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:16:37,313 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:16:37,570 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:16:42,795 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:16:42,795 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:16:43,086 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:16:48,233 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:16:48,233 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:16:48,360 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:16:53,453 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:16:53,453 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:16:53,701 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:16:58,840 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:16:58,840 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:16:59,014 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:17:04,160 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:17:04,160 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:17:04,233 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 33, gen: 0] Waiting for all pods to be ready
2024-02-23 06:17:09,373 INFO   , Thread-1 (run), deploy.py:32, [trial: 33, gen: 0] Operator ready
2024-02-23 06:17:09,374 INFO   , Thread-1 (run), deploy.py:36, [trial: 33, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:17:29,434 WARNING, Thread-1 (run), object.py:155, [trial: 34, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 06:17:29,434 WARNING, Thread-1 (run), object.py:155, [trial: 34, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 06:17:29,435 WARNING, Thread-1 (run), object.py:155, [trial: 34, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 06:17:29,436 DEBUG  , Thread-1 (run), engine.py:652, [trial: 34, gen: 0] Run and check
2024-02-23 06:17:29,608 DEBUG  , Thread-1 (run), runner.py:123, [trial: 34, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 06:17:29,608 DEBUG  , Thread-1 (run), runner.py:124, [trial: 34, gen: 0] STDERR: 
2024-02-23 06:17:29,609 INFO   , Thread-1 (run), runner.py:437, [trial: 34, gen: 0] Waiting for system to converge... 
2024-02-23 06:20:35,567 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:21:35,677 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:23:37,207 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:24:37,314 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:25:29,642 ERROR  , Thread-1 (run), runner.py:586, [trial: 34, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:25:29,909 DEBUG  , Thread-1 (run), runner.py:267, [trial: 34, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:17:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:17:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:25:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'a1a3c001-3949-4390-9160-f7b97db89cd1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:25:05Z', 'phase': ''}}}
2024-02-23 06:25:29,931 DEBUG  , Thread-1 (run), runner.py:296, [trial: 34, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5rwh6
2024-02-23 06:25:30,147 ERROR  , Thread-1 (run), runner.py:368, [trial: 34, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-592kf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6fe9d7b7-6a8e-4141-b4f4-05c27f8c97cd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:25:30 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-592kf\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:25:30,193 INFO   , Thread-1 (run), result.py:170, [trial: 34, gen: 0] No stderr, continue
2024-02-23 06:25:30,231 ERROR  , Thread-1 (run), health.py:155, [trial: 34, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 06:25:30,255 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,255 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,255 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 13:17:05.195747533 +0000 UTC m=+0.022623709]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,255 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,255 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,256 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,256 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line time="2024-02-23T13:17:05Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,316 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 34, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:25:30,587 INFO   , Thread-1 (run), consistency.py:496, [trial: 34, gen: 0] All input deltas are matched
2024-02-23 06:25:30,590 INFO   , Thread-1 (run), engine.py:554, [trial: 34, gen: 0] Error result, running recovery
2024-02-23 06:25:30,590 DEBUG  , Thread-1 (run), engine.py:698, [trial: 34, gen: 0] Running recovery
2024-02-23 06:25:31,396 DEBUG  , Thread-1 (run), runner.py:123, [trial: 34, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 06:25:31,396 DEBUG  , Thread-1 (run), runner.py:124, [trial: 34, gen: 0] STDERR: 
2024-02-23 06:25:31,396 INFO   , Thread-1 (run), runner.py:437, [trial: 34, gen: 0] Waiting for system to converge... 
2024-02-23 06:26:31,568 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:28:35,486 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:29:35,593 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:30:35,681 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:31:35,789 INFO   , Thread-1 (run), runner.py:508, [trial: 34, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:33:31,406 ERROR  , Thread-1 (run), runner.py:586, [trial: 34, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:33:31,703 DEBUG  , Thread-1 (run), runner.py:267, [trial: 34, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:17:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:17:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:33:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'a1a3c001-3949-4390-9160-f7b97db89cd1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:33:05Z', 'phase': ''}}}
2024-02-23 06:33:31,724 DEBUG  , Thread-1 (run), runner.py:296, [trial: 34, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5rwh6
2024-02-23 06:33:31,960 ERROR  , Thread-1 (run), runner.py:368, [trial: 34, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-592kf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'cdf15a41-f1b7-4eaf-93a3-c85106d89f03', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:33:31 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-592kf\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:33:32,004 DEBUG  , Thread-1 (run), engine.py:207, [trial: 34, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 06:33:32,008 INFO   , Thread-1 (run), engine.py:333, Trial 34 finished, completed in 00:18:03
2024-02-23 06:33:32,008 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-23 06:33:32,008 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 06:33:32,008 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 06:33:32,008 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 06:33:32,053 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5rwh6
2024-02-23 06:33:45,465 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 06:34:36,900 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 06:34:36,923 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 06:34:42,823 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:34:47,963 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:34:47,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:34:48,179 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:34:53,303 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:34:53,303 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:34:53,603 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:34:58,745 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:34:58,745 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:34:58,933 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:35:04,073 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:35:04,073 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:35:04,316 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:35:09,454 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:35:09,454 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:35:09,634 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:35:14,780 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:35:14,781 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:35:14,854 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 34, gen: 0] Waiting for all pods to be ready
2024-02-23 06:35:19,991 INFO   , Thread-1 (run), deploy.py:32, [trial: 34, gen: 0] Operator ready
2024-02-23 06:35:19,992 INFO   , Thread-1 (run), deploy.py:36, [trial: 34, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:35:40,084 WARNING, Thread-1 (run), object.py:155, [trial: 35, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 06:35:40,084 WARNING, Thread-1 (run), object.py:155, [trial: 35, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 06:35:40,084 WARNING, Thread-1 (run), object.py:155, [trial: 35, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 06:35:40,086 DEBUG  , Thread-1 (run), engine.py:652, [trial: 35, gen: 0] Run and check
2024-02-23 06:35:40,246 DEBUG  , Thread-1 (run), runner.py:123, [trial: 35, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 06:35:40,247 DEBUG  , Thread-1 (run), runner.py:124, [trial: 35, gen: 0] STDERR: 
2024-02-23 06:35:40,247 INFO   , Thread-1 (run), runner.py:437, [trial: 35, gen: 0] Waiting for system to converge... 
2024-02-23 06:38:49,680 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:39:49,787 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:41:46,105 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:42:46,209 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:43:40,279 ERROR  , Thread-1 (run), runner.py:586, [trial: 35, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:43:40,549 DEBUG  , Thread-1 (run), runner.py:267, [trial: 35, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:35:40Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:35:40Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:43:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1873', 'uid': 'c81954af-2453-456e-ba27-771a2b333f7b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:43:16Z', 'phase': ''}}}
2024-02-23 06:43:40,572 DEBUG  , Thread-1 (run), runner.py:296, [trial: 35, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xkr95
2024-02-23 06:43:40,810 ERROR  , Thread-1 (run), runner.py:368, [trial: 35, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jhd8t
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '004c5b6b-df63-448a-9690-f90f15276aa0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:43:40 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jhd8t\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:43:40,860 INFO   , Thread-1 (run), result.py:170, [trial: 35, gen: 0] No stderr, continue
2024-02-23 06:43:40,896 ERROR  , Thread-1 (run), health.py:155, [trial: 35, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 06:43:41,012 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,013 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line time="2024-02-23T13:35:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,013 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line time="2024-02-23T13:35:15Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 13:35:15.831009378 +0000 UTC m=+0.011969464]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,013 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line time="2024-02-23T13:35:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,013 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line time="2024-02-23T13:35:15Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,013 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line time="2024-02-23T13:35:15Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,080 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 35, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 06:43:41,238 INFO   , Thread-1 (run), consistency.py:496, [trial: 35, gen: 0] All input deltas are matched
2024-02-23 06:43:41,241 INFO   , Thread-1 (run), engine.py:554, [trial: 35, gen: 0] Error result, running recovery
2024-02-23 06:43:41,241 DEBUG  , Thread-1 (run), engine.py:698, [trial: 35, gen: 0] Running recovery
2024-02-23 06:43:42,137 DEBUG  , Thread-1 (run), runner.py:123, [trial: 35, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 06:43:42,137 DEBUG  , Thread-1 (run), runner.py:124, [trial: 35, gen: 0] STDERR: 
2024-02-23 06:43:42,137 INFO   , Thread-1 (run), runner.py:437, [trial: 35, gen: 0] Waiting for system to converge... 
2024-02-23 06:44:42,259 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:45:42,347 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:46:55,683 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:47:55,791 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:48:55,882 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:49:55,989 INFO   , Thread-1 (run), runner.py:508, [trial: 35, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:51:42,144 ERROR  , Thread-1 (run), runner.py:586, [trial: 35, gen: 0] System failed to converge within 480 seconds
2024-02-23 06:51:42,393 DEBUG  , Thread-1 (run), runner.py:267, [trial: 35, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:35:40Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:35:40Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T13:51:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2873', 'uid': 'c81954af-2453-456e-ba27-771a2b333f7b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T13:51:16Z', 'phase': ''}}}
2024-02-23 06:51:42,415 DEBUG  , Thread-1 (run), runner.py:296, [trial: 35, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xkr95
2024-02-23 06:51:42,694 ERROR  , Thread-1 (run), runner.py:368, [trial: 35, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jhd8t
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a493f6d8-f0b0-4ed3-ac1c-3f48fe62e120', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 13:51:42 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jhd8t\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 06:51:42,737 DEBUG  , Thread-1 (run), engine.py:207, [trial: 35, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 06:51:42,743 INFO   , Thread-1 (run), engine.py:333, Trial 35 finished, completed in 00:18:00
2024-02-23 06:51:42,743 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 06:51:42,743 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 06:51:42,743 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 06:51:42,743 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 06:51:42,780 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-xkr95
2024-02-23 06:51:56,276 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 06:52:47,654 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 06:52:47,673 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 06:52:53,254 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:52:58,401 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:52:58,401 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:52:58,655 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:03,791 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:03,792 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:04,112 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:09,249 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:09,249 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:09,369 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:14,495 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:14,495 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:14,766 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:19,902 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:19,902 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:20,092 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:25,220 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:25,220 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:25,303 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 35, gen: 0] Waiting for all pods to be ready
2024-02-23 06:53:30,533 INFO   , Thread-1 (run), deploy.py:32, [trial: 35, gen: 0] Operator ready
2024-02-23 06:53:30,533 INFO   , Thread-1 (run), deploy.py:36, [trial: 35, gen: 0] All pods took 0 seconds to get ready
2024-02-23 06:53:50,586 WARNING, Thread-1 (run), object.py:155, [trial: 36, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 06:53:50,586 WARNING, Thread-1 (run), object.py:155, [trial: 36, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 06:53:50,586 WARNING, Thread-1 (run), object.py:155, [trial: 36, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 06:53:50,587 DEBUG  , Thread-1 (run), engine.py:652, [trial: 36, gen: 0] Run and check
2024-02-23 06:53:50,725 DEBUG  , Thread-1 (run), runner.py:123, [trial: 36, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 06:53:50,725 DEBUG  , Thread-1 (run), runner.py:124, [trial: 36, gen: 0] STDERR: 
2024-02-23 06:53:50,725 INFO   , Thread-1 (run), runner.py:437, [trial: 36, gen: 0] Waiting for system to converge... 
2024-02-23 06:56:56,798 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:57:56,907 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 06:59:56,457 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:00:56,604 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:01:50,762 ERROR  , Thread-1 (run), runner.py:586, [trial: 36, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:01:51,036 DEBUG  , Thread-1 (run), runner.py:267, [trial: 36, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:53:50Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:53:50Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:01:26Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1796', 'uid': '99d119f3-c021-41a9-bd23-f2527a8e30aa'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:01:26Z', 'phase': ''}}}
2024-02-23 07:01:51,058 DEBUG  , Thread-1 (run), runner.py:296, [trial: 36, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rw2gg
2024-02-23 07:01:51,287 ERROR  , Thread-1 (run), runner.py:368, [trial: 36, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8h5d
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'cf979ccb-0760-46bb-b783-d252857aa975', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:01:51 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8h5d\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:01:51,337 INFO   , Thread-1 (run), result.py:170, [trial: 36, gen: 0] No stderr, continue
2024-02-23 07:01:51,377 ERROR  , Thread-1 (run), health.py:155, [trial: 36, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 07:01:51,401 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,401 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,401 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 13:53:26.180672701 +0000 UTC m=+0.009974423]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,402 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,402 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,402 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,402 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line time="2024-02-23T13:53:26Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,453 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 36, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:01:51,617 INFO   , Thread-1 (run), consistency.py:496, [trial: 36, gen: 0] All input deltas are matched
2024-02-23 07:01:51,620 INFO   , Thread-1 (run), engine.py:554, [trial: 36, gen: 0] Error result, running recovery
2024-02-23 07:01:51,620 DEBUG  , Thread-1 (run), engine.py:698, [trial: 36, gen: 0] Running recovery
2024-02-23 07:01:52,440 DEBUG  , Thread-1 (run), runner.py:123, [trial: 36, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 07:01:52,440 DEBUG  , Thread-1 (run), runner.py:124, [trial: 36, gen: 0] STDERR: 
2024-02-23 07:01:52,440 INFO   , Thread-1 (run), runner.py:437, [trial: 36, gen: 0] Waiting for system to converge... 
2024-02-23 07:02:52,610 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:03:52,690 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:04:57,409 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:05:57,471 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:06:57,538 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:07:57,613 INFO   , Thread-1 (run), runner.py:508, [trial: 36, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:09:52,451 ERROR  , Thread-1 (run), runner.py:586, [trial: 36, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:09:52,753 DEBUG  , Thread-1 (run), runner.py:267, [trial: 36, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T13:53:50Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T13:53:50Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:09:26Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2716', 'uid': '99d119f3-c021-41a9-bd23-f2527a8e30aa'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:09:26Z', 'phase': ''}}}
2024-02-23 07:09:52,774 DEBUG  , Thread-1 (run), runner.py:296, [trial: 36, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-rw2gg
2024-02-23 07:09:53,016 ERROR  , Thread-1 (run), runner.py:368, [trial: 36, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8h5d
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '94b5e516-a1ce-4a2c-bb36-30c52a750349', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:09:53 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8h5d\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:09:53,079 DEBUG  , Thread-1 (run), engine.py:207, [trial: 36, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 07:09:53,084 INFO   , Thread-1 (run), engine.py:333, Trial 36 finished, completed in 00:18:00
2024-02-23 07:09:53,085 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 07:09:53,085 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 07:09:53,085 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 07:09:53,085 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 07:09:53,122 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-rw2gg
2024-02-23 07:10:06,847 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 07:11:00,318 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 07:11:00,328 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 07:11:06,821 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:11,966 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:11,967 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:12,224 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:17,358 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:17,358 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:17,619 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:22,818 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:22,818 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:22,938 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:28,067 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:28,067 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:28,279 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:33,416 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:33,416 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:33,619 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:38,760 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:38,761 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:11:38,836 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 36, gen: 0] Waiting for all pods to be ready
2024-02-23 07:11:43,962 INFO   , Thread-1 (run), deploy.py:32, [trial: 36, gen: 0] Operator ready
2024-02-23 07:11:43,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 36, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:12:04,015 WARNING, Thread-1 (run), object.py:155, [trial: 37, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 07:12:04,015 WARNING, Thread-1 (run), object.py:155, [trial: 37, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 07:12:04,015 WARNING, Thread-1 (run), object.py:155, [trial: 37, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 07:12:04,015 DEBUG  , Thread-1 (run), engine.py:652, [trial: 37, gen: 0] Run and check
2024-02-23 07:12:04,183 DEBUG  , Thread-1 (run), runner.py:123, [trial: 37, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 07:12:04,183 DEBUG  , Thread-1 (run), runner.py:124, [trial: 37, gen: 0] STDERR: 
2024-02-23 07:12:04,183 INFO   , Thread-1 (run), runner.py:437, [trial: 37, gen: 0] Waiting for system to converge... 
2024-02-23 07:15:10,124 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:16:10,234 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:18:10,041 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:19:10,148 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:20:04,208 ERROR  , Thread-1 (run), runner.py:586, [trial: 37, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:20:04,464 DEBUG  , Thread-1 (run), runner.py:267, [trial: 37, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:12:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:12:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:19:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1818', 'uid': 'c0f8e376-8abd-4792-9184-da2809477c4f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:19:39Z', 'phase': ''}}}
2024-02-23 07:20:04,485 DEBUG  , Thread-1 (run), runner.py:296, [trial: 37, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gzf28
2024-02-23 07:20:04,710 ERROR  , Thread-1 (run), runner.py:368, [trial: 37, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cnzt8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '40463154-b232-43a9-ae22-e03dab792e75', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:20:04 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cnzt8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:20:04,744 INFO   , Thread-1 (run), result.py:170, [trial: 37, gen: 0] No stderr, continue
2024-02-23 07:20:04,778 ERROR  , Thread-1 (run), health.py:155, [trial: 37, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 07:20:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line time="2024-02-23T14:11:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line time="2024-02-23T14:11:39Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 14:11:39.772405838 +0000 UTC m=+0.013134187]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line time="2024-02-23T14:11:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line time="2024-02-23T14:11:39Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,803 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line time="2024-02-23T14:11:39Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:04,855 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 37, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:20:05,108 INFO   , Thread-1 (run), consistency.py:496, [trial: 37, gen: 0] All input deltas are matched
2024-02-23 07:20:05,110 INFO   , Thread-1 (run), engine.py:554, [trial: 37, gen: 0] Error result, running recovery
2024-02-23 07:20:05,110 DEBUG  , Thread-1 (run), engine.py:698, [trial: 37, gen: 0] Running recovery
2024-02-23 07:20:05,961 DEBUG  , Thread-1 (run), runner.py:123, [trial: 37, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 07:20:05,961 DEBUG  , Thread-1 (run), runner.py:124, [trial: 37, gen: 0] STDERR: 
2024-02-23 07:20:05,961 INFO   , Thread-1 (run), runner.py:437, [trial: 37, gen: 0] Waiting for system to converge... 
2024-02-23 07:21:06,121 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:22:06,231 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:23:19,386 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:24:19,481 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:25:19,590 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:26:19,652 INFO   , Thread-1 (run), runner.py:508, [trial: 37, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:28:05,971 ERROR  , Thread-1 (run), runner.py:586, [trial: 37, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:28:06,265 DEBUG  , Thread-1 (run), runner.py:267, [trial: 37, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:12:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:12:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:27:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2743', 'uid': 'c0f8e376-8abd-4792-9184-da2809477c4f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:27:39Z', 'phase': ''}}}
2024-02-23 07:28:06,286 DEBUG  , Thread-1 (run), runner.py:296, [trial: 37, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gzf28
2024-02-23 07:28:06,527 ERROR  , Thread-1 (run), runner.py:368, [trial: 37, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cnzt8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '869b31ff-4be3-4bf5-9a91-5b98f467934a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:28:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cnzt8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:28:06,577 DEBUG  , Thread-1 (run), engine.py:207, [trial: 37, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 07:28:06,581 INFO   , Thread-1 (run), engine.py:333, Trial 37 finished, completed in 00:18:03
2024-02-23 07:28:06,581 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-23 07:28:06,581 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 07:28:06,582 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 07:28:06,582 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 07:28:06,619 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-gzf28
2024-02-23 07:28:20,141 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 07:29:10,599 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 07:29:10,617 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 07:29:17,660 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:22,806 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:22,806 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:23,052 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:28,191 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:28,191 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:28,485 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:33,628 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:33,628 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:33,756 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:38,909 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:38,909 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:39,138 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:44,282 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:44,282 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:44,483 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:49,617 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:49,617 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:29:49,682 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 37, gen: 0] Waiting for all pods to be ready
2024-02-23 07:29:54,905 INFO   , Thread-1 (run), deploy.py:32, [trial: 37, gen: 0] Operator ready
2024-02-23 07:29:54,906 INFO   , Thread-1 (run), deploy.py:36, [trial: 37, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:30:14,959 WARNING, Thread-1 (run), object.py:155, [trial: 38, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 07:30:14,959 WARNING, Thread-1 (run), object.py:155, [trial: 38, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 07:30:14,959 WARNING, Thread-1 (run), object.py:155, [trial: 38, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 07:30:14,960 DEBUG  , Thread-1 (run), engine.py:652, [trial: 38, gen: 0] Run and check
2024-02-23 07:30:15,108 DEBUG  , Thread-1 (run), runner.py:123, [trial: 38, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 07:30:15,109 DEBUG  , Thread-1 (run), runner.py:124, [trial: 38, gen: 0] STDERR: 
2024-02-23 07:30:15,109 INFO   , Thread-1 (run), runner.py:437, [trial: 38, gen: 0] Waiting for system to converge... 
2024-02-23 07:33:21,436 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:34:21,545 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:36:22,415 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:37:22,507 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:38:15,133 ERROR  , Thread-1 (run), runner.py:586, [trial: 38, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:38:15,403 DEBUG  , Thread-1 (run), runner.py:267, [trial: 38, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:30:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:30:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:37:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1806', 'uid': 'f474d867-9514-41b3-83b7-cfb960e4094e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:37:50Z', 'phase': ''}}}
2024-02-23 07:38:15,426 DEBUG  , Thread-1 (run), runner.py:296, [trial: 38, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qhjw8
2024-02-23 07:38:15,653 ERROR  , Thread-1 (run), runner.py:368, [trial: 38, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wzh84
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a15a84be-0906-4546-b49b-11623ffebf12', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:38:15 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wzh84\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:38:15,701 INFO   , Thread-1 (run), result.py:170, [trial: 38, gen: 0] No stderr, continue
2024-02-23 07:38:15,734 ERROR  , Thread-1 (run), health.py:155, [trial: 38, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 07:38:15,758 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,759 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line time="2024-02-23T14:29:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,759 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line time="2024-02-23T14:29:50Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 14:29:50.622399434 +0000 UTC m=+0.011477583]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,759 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line time="2024-02-23T14:29:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,759 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line time="2024-02-23T14:29:50Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,759 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line time="2024-02-23T14:29:50Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:15,827 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 38, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:38:16,014 INFO   , Thread-1 (run), consistency.py:496, [trial: 38, gen: 0] All input deltas are matched
2024-02-23 07:38:16,017 INFO   , Thread-1 (run), engine.py:554, [trial: 38, gen: 0] Error result, running recovery
2024-02-23 07:38:16,017 DEBUG  , Thread-1 (run), engine.py:698, [trial: 38, gen: 0] Running recovery
2024-02-23 07:38:16,919 DEBUG  , Thread-1 (run), runner.py:123, [trial: 38, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 07:38:16,919 DEBUG  , Thread-1 (run), runner.py:124, [trial: 38, gen: 0] STDERR: 
2024-02-23 07:38:16,920 INFO   , Thread-1 (run), runner.py:437, [trial: 38, gen: 0] Waiting for system to converge... 
2024-02-23 07:39:17,089 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:40:17,155 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:41:23,384 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:42:23,436 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:43:23,545 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:44:23,653 INFO   , Thread-1 (run), runner.py:508, [trial: 38, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:46:16,929 ERROR  , Thread-1 (run), runner.py:586, [trial: 38, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:46:17,203 DEBUG  , Thread-1 (run), runner.py:267, [trial: 38, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:30:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:30:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:45:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': 'f474d867-9514-41b3-83b7-cfb960e4094e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:45:50Z', 'phase': ''}}}
2024-02-23 07:46:17,225 DEBUG  , Thread-1 (run), runner.py:296, [trial: 38, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qhjw8
2024-02-23 07:46:17,433 ERROR  , Thread-1 (run), runner.py:368, [trial: 38, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wzh84
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9aa9319e-f9c3-4b42-ae94-d2ab14aa17c3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:46:17 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wzh84\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:46:17,472 DEBUG  , Thread-1 (run), engine.py:207, [trial: 38, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 07:46:17,475 INFO   , Thread-1 (run), engine.py:333, Trial 38 finished, completed in 00:18:00
2024-02-23 07:46:17,475 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 07:46:17,475 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 07:46:17,476 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 07:46:17,476 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 07:46:17,510 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-qhjw8
2024-02-23 07:46:31,019 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 07:47:23,944 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 07:47:23,992 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 07:47:30,164 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:47:35,310 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:47:35,310 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:47:35,529 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:47:40,667 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:47:40,667 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:47:40,992 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:47:46,217 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:47:46,217 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:47:46,334 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:47:51,466 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:47:51,466 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:47:51,709 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:47:56,847 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:47:56,847 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:47:57,028 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:48:02,157 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:48:02,157 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:48:02,226 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 38, gen: 0] Waiting for all pods to be ready
2024-02-23 07:48:07,361 INFO   , Thread-1 (run), deploy.py:32, [trial: 38, gen: 0] Operator ready
2024-02-23 07:48:07,361 INFO   , Thread-1 (run), deploy.py:36, [trial: 38, gen: 0] All pods took 0 seconds to get ready
2024-02-23 07:48:27,435 WARNING, Thread-1 (run), object.py:155, [trial: 39, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 07:48:27,435 WARNING, Thread-1 (run), object.py:155, [trial: 39, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 07:48:27,435 WARNING, Thread-1 (run), object.py:155, [trial: 39, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 07:48:27,437 DEBUG  , Thread-1 (run), engine.py:652, [trial: 39, gen: 0] Run and check
2024-02-23 07:48:27,593 DEBUG  , Thread-1 (run), runner.py:123, [trial: 39, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 07:48:27,593 DEBUG  , Thread-1 (run), runner.py:124, [trial: 39, gen: 0] STDERR: 
2024-02-23 07:48:27,594 INFO   , Thread-1 (run), runner.py:437, [trial: 39, gen: 0] Waiting for system to converge... 
2024-02-23 07:51:33,606 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:52:33,676 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:54:33,475 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:55:33,585 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:56:27,619 ERROR  , Thread-1 (run), runner.py:586, [trial: 39, gen: 0] System failed to converge within 480 seconds
2024-02-23 07:56:27,890 DEBUG  , Thread-1 (run), runner.py:267, [trial: 39, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:48:27Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:48:27Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T14:56:03Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1809', 'uid': '510c360a-7987-477a-a724-e62abed41343'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T14:56:03Z', 'phase': ''}}}
2024-02-23 07:56:27,911 DEBUG  , Thread-1 (run), runner.py:296, [trial: 39, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-w4kws
2024-02-23 07:56:28,126 ERROR  , Thread-1 (run), runner.py:368, [trial: 39, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xnj7f
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '86026b10-e62a-4927-90bb-da1035b4dd11', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 14:56:28 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xnj7f\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 07:56:28,176 INFO   , Thread-1 (run), result.py:170, [trial: 39, gen: 0] No stderr, continue
2024-02-23 07:56:28,210 ERROR  , Thread-1 (run), health.py:155, [trial: 39, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 07:56:28,234 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,234 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,234 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 14:48:03.196691867 +0000 UTC m=+0.023407235]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,234 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,235 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,235 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,235 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line time="2024-02-23T14:48:03Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,300 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 39, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 07:56:28,568 INFO   , Thread-1 (run), consistency.py:496, [trial: 39, gen: 0] All input deltas are matched
2024-02-23 07:56:28,570 INFO   , Thread-1 (run), engine.py:554, [trial: 39, gen: 0] Error result, running recovery
2024-02-23 07:56:28,570 DEBUG  , Thread-1 (run), engine.py:698, [trial: 39, gen: 0] Running recovery
2024-02-23 07:56:29,384 DEBUG  , Thread-1 (run), runner.py:123, [trial: 39, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 07:56:29,385 DEBUG  , Thread-1 (run), runner.py:124, [trial: 39, gen: 0] STDERR: 
2024-02-23 07:56:29,385 INFO   , Thread-1 (run), runner.py:437, [trial: 39, gen: 0] Waiting for system to converge... 
2024-02-23 07:57:29,562 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:58:29,672 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 07:59:33,690 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:00:33,783 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:01:33,872 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:02:33,939 INFO   , Thread-1 (run), runner.py:508, [trial: 39, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:04:29,395 ERROR  , Thread-1 (run), runner.py:586, [trial: 39, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:04:29,686 DEBUG  , Thread-1 (run), runner.py:267, [trial: 39, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T14:48:27Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T14:48:27Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:04:03Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2730', 'uid': '510c360a-7987-477a-a724-e62abed41343'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:04:03Z', 'phase': ''}}}
2024-02-23 08:04:29,708 DEBUG  , Thread-1 (run), runner.py:296, [trial: 39, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-w4kws
2024-02-23 08:04:29,960 ERROR  , Thread-1 (run), runner.py:368, [trial: 39, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xnj7f
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '12ad6395-7b27-4248-99fb-0b08e84d0709', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:04:29 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xnj7f\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:04:30,008 DEBUG  , Thread-1 (run), engine.py:207, [trial: 39, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 08:04:30,013 INFO   , Thread-1 (run), engine.py:333, Trial 39 finished, completed in 00:18:02
2024-02-23 08:04:30,013 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 08:04:30,013 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 08:04:30,013 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 08:04:30,013 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 08:04:30,041 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-w4kws
2024-02-23 08:04:43,628 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 08:05:34,474 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 08:05:34,484 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 08:05:41,186 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:05:46,330 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:05:46,330 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:05:46,601 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:05:51,742 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:05:51,742 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:05:52,050 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:05:57,189 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:05:57,189 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:05:57,346 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:06:02,486 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:06:02,486 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:06:02,709 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:06:07,849 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:06:07,849 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:06:08,042 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:06:13,189 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:06:13,189 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:06:13,258 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 39, gen: 0] Waiting for all pods to be ready
2024-02-23 08:06:18,395 INFO   , Thread-1 (run), deploy.py:32, [trial: 39, gen: 0] Operator ready
2024-02-23 08:06:18,395 INFO   , Thread-1 (run), deploy.py:36, [trial: 39, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:06:38,448 WARNING, Thread-1 (run), object.py:155, [trial: 40, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 08:06:38,448 WARNING, Thread-1 (run), object.py:155, [trial: 40, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 08:06:38,448 WARNING, Thread-1 (run), object.py:155, [trial: 40, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 08:06:38,448 DEBUG  , Thread-1 (run), engine.py:652, [trial: 40, gen: 0] Run and check
2024-02-23 08:06:38,590 DEBUG  , Thread-1 (run), runner.py:123, [trial: 40, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 08:06:38,590 DEBUG  , Thread-1 (run), runner.py:124, [trial: 40, gen: 0] STDERR: 
2024-02-23 08:06:38,590 INFO   , Thread-1 (run), runner.py:437, [trial: 40, gen: 0] Waiting for system to converge... 
2024-02-23 08:10:14,858 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:11:14,967 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:12:44,492 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:13:44,597 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:14:38,620 ERROR  , Thread-1 (run), runner.py:586, [trial: 40, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:14:38,885 DEBUG  , Thread-1 (run), runner.py:267, [trial: 40, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:06:38Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:06:38Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:14:14Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1792', 'uid': '77035803-e62b-4d69-8aca-4a1c7a9996b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:14:14Z', 'phase': ''}}}
2024-02-23 08:14:38,906 DEBUG  , Thread-1 (run), runner.py:296, [trial: 40, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xmdwr
2024-02-23 08:14:39,089 ERROR  , Thread-1 (run), runner.py:368, [trial: 40, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2mnbw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c5ead9eb-541d-45a3-a24c-b78ab40d2c7d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:14:39 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2mnbw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:14:39,125 INFO   , Thread-1 (run), result.py:170, [trial: 40, gen: 0] No stderr, continue
2024-02-23 08:14:39,156 ERROR  , Thread-1 (run), health.py:155, [trial: 40, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 08:14:39,277 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line time="2024-02-23T15:06:14Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line time="2024-02-23T15:06:14Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 15:06:14.222779334 +0000 UTC m=+0.014815587]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line time="2024-02-23T15:06:14Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line time="2024-02-23T15:06:14Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line time="2024-02-23T15:06:14Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,333 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 40, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:14:39,493 INFO   , Thread-1 (run), consistency.py:496, [trial: 40, gen: 0] All input deltas are matched
2024-02-23 08:14:39,495 INFO   , Thread-1 (run), engine.py:554, [trial: 40, gen: 0] Error result, running recovery
2024-02-23 08:14:39,495 DEBUG  , Thread-1 (run), engine.py:698, [trial: 40, gen: 0] Running recovery
2024-02-23 08:14:40,376 DEBUG  , Thread-1 (run), runner.py:123, [trial: 40, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 08:14:40,376 DEBUG  , Thread-1 (run), runner.py:124, [trial: 40, gen: 0] STDERR: 
2024-02-23 08:14:40,376 INFO   , Thread-1 (run), runner.py:437, [trial: 40, gen: 0] Waiting for system to converge... 
2024-02-23 08:15:40,504 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:16:40,620 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:17:50,490 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:18:50,588 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:19:50,639 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:20:50,748 INFO   , Thread-1 (run), runner.py:508, [trial: 40, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:22:40,386 ERROR  , Thread-1 (run), runner.py:586, [trial: 40, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:22:40,689 DEBUG  , Thread-1 (run), runner.py:267, [trial: 40, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:06:38Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:06:38Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:22:14Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2712', 'uid': '77035803-e62b-4d69-8aca-4a1c7a9996b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:22:14Z', 'phase': ''}}}
2024-02-23 08:22:40,711 DEBUG  , Thread-1 (run), runner.py:296, [trial: 40, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xmdwr
2024-02-23 08:22:40,962 ERROR  , Thread-1 (run), runner.py:368, [trial: 40, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2mnbw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '43253d1d-5688-44eb-8749-2c5ff7b34514', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:22:40 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2mnbw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:22:41,006 DEBUG  , Thread-1 (run), engine.py:207, [trial: 40, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 08:22:41,010 INFO   , Thread-1 (run), engine.py:333, Trial 40 finished, completed in 00:18:00
2024-02-23 08:22:41,010 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 08:22:41,010 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 08:22:41,010 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 08:22:41,010 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 08:22:41,043 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-xmdwr
2024-02-23 08:22:54,497 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 08:23:48,328 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 08:23:48,360 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 08:23:55,064 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:00,208 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:00,208 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:00,434 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:05,575 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:05,575 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:05,886 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:11,022 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:11,022 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:11,166 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:16,306 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:16,306 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:16,560 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:21,793 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:21,793 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:22,020 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:27,154 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:27,154 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:27,243 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 40, gen: 0] Waiting for all pods to be ready
2024-02-23 08:24:32,386 INFO   , Thread-1 (run), deploy.py:32, [trial: 40, gen: 0] Operator ready
2024-02-23 08:24:32,386 INFO   , Thread-1 (run), deploy.py:36, [trial: 40, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:24:52,423 WARNING, Thread-1 (run), object.py:155, [trial: 41, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 08:24:52,424 WARNING, Thread-1 (run), object.py:155, [trial: 41, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 08:24:52,424 WARNING, Thread-1 (run), object.py:155, [trial: 41, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 08:24:52,424 DEBUG  , Thread-1 (run), engine.py:652, [trial: 41, gen: 0] Run and check
2024-02-23 08:24:52,584 DEBUG  , Thread-1 (run), runner.py:123, [trial: 41, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 08:24:52,584 DEBUG  , Thread-1 (run), runner.py:124, [trial: 41, gen: 0] STDERR: 
2024-02-23 08:24:52,584 INFO   , Thread-1 (run), runner.py:437, [trial: 41, gen: 0] Waiting for system to converge... 
2024-02-23 08:27:58,509 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:28:58,618 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:31:04,708 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:32:04,817 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:32:52,615 ERROR  , Thread-1 (run), runner.py:586, [trial: 41, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:32:52,891 DEBUG  , Thread-1 (run), runner.py:267, [trial: 41, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:24:52Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:24:52Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:32:28Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': 'd7fa3c44-e35e-40de-83fa-bbaebd12a8a5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:32:28Z', 'phase': ''}}}
2024-02-23 08:32:52,913 DEBUG  , Thread-1 (run), runner.py:296, [trial: 41, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4h4sz
2024-02-23 08:32:53,131 ERROR  , Thread-1 (run), runner.py:368, [trial: 41, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-flfcf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '72a8dcd0-6edb-416d-9bd5-d283bbf2b0d3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:32:53 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-flfcf\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:32:53,165 INFO   , Thread-1 (run), result.py:170, [trial: 41, gen: 0] No stderr, continue
2024-02-23 08:32:53,203 ERROR  , Thread-1 (run), health.py:155, [trial: 41, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 08:32:53,228 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,228 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line time="2024-02-23T15:24:28Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line time="2024-02-23T15:24:28Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 15:24:28.216391848 +0000 UTC m=+0.017206425]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line time="2024-02-23T15:24:28Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line time="2024-02-23T15:24:28Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line time="2024-02-23T15:24:28Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,281 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 41, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:32:53,438 INFO   , Thread-1 (run), consistency.py:496, [trial: 41, gen: 0] All input deltas are matched
2024-02-23 08:32:53,441 INFO   , Thread-1 (run), engine.py:554, [trial: 41, gen: 0] Error result, running recovery
2024-02-23 08:32:53,441 DEBUG  , Thread-1 (run), engine.py:698, [trial: 41, gen: 0] Running recovery
2024-02-23 08:32:54,291 DEBUG  , Thread-1 (run), runner.py:123, [trial: 41, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 08:32:54,292 DEBUG  , Thread-1 (run), runner.py:124, [trial: 41, gen: 0] STDERR: 
2024-02-23 08:32:54,292 INFO   , Thread-1 (run), runner.py:437, [trial: 41, gen: 0] Waiting for system to converge... 
2024-02-23 08:33:54,423 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:34:54,483 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:35:58,445 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:36:58,545 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:37:58,638 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:38:58,704 INFO   , Thread-1 (run), runner.py:508, [trial: 41, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:40:54,302 ERROR  , Thread-1 (run), runner.py:586, [trial: 41, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:40:54,600 DEBUG  , Thread-1 (run), runner.py:267, [trial: 41, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:24:52Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:24:52Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:40:28Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2730', 'uid': 'd7fa3c44-e35e-40de-83fa-bbaebd12a8a5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:40:28Z', 'phase': ''}}}
2024-02-23 08:40:54,622 DEBUG  , Thread-1 (run), runner.py:296, [trial: 41, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4h4sz
2024-02-23 08:40:54,885 ERROR  , Thread-1 (run), runner.py:368, [trial: 41, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-flfcf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '63605524-0e0d-47cd-bbe2-19f3f9dec3ef', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:40:54 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-flfcf\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 08:40:54,932 DEBUG  , Thread-1 (run), engine.py:207, [trial: 41, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 08:40:54,936 INFO   , Thread-1 (run), engine.py:333, Trial 41 finished, completed in 00:18:03
2024-02-23 08:40:54,936 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-23 08:40:54,936 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 08:40:54,936 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 08:40:54,936 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 08:40:54,973 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4h4sz
2024-02-23 08:41:08,529 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 08:41:56,750 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 08:41:56,766 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 08:42:03,203 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:08,432 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:08,432 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:08,665 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:13,793 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:13,793 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:14,141 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:19,279 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:19,280 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:19,396 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:24,546 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:24,546 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:24,794 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:29,932 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:29,932 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:30,126 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:35,263 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:35,263 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:42:35,334 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 41, gen: 0] Waiting for all pods to be ready
2024-02-23 08:42:40,457 INFO   , Thread-1 (run), deploy.py:32, [trial: 41, gen: 0] Operator ready
2024-02-23 08:42:40,458 INFO   , Thread-1 (run), deploy.py:36, [trial: 41, gen: 0] All pods took 0 seconds to get ready
2024-02-23 08:43:00,510 WARNING, Thread-1 (run), object.py:155, [trial: 42, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 08:43:00,510 WARNING, Thread-1 (run), object.py:155, [trial: 42, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 08:43:00,510 WARNING, Thread-1 (run), object.py:155, [trial: 42, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 08:43:00,511 DEBUG  , Thread-1 (run), engine.py:652, [trial: 42, gen: 0] Run and check
2024-02-23 08:43:00,651 DEBUG  , Thread-1 (run), runner.py:123, [trial: 42, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 08:43:00,651 DEBUG  , Thread-1 (run), runner.py:124, [trial: 42, gen: 0] STDERR: 
2024-02-23 08:43:00,651 INFO   , Thread-1 (run), runner.py:437, [trial: 42, gen: 0] Waiting for system to converge... 
2024-02-23 08:46:08,710 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:47:08,821 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:49:10,693 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:50:10,782 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:51:00,675 ERROR  , Thread-1 (run), runner.py:586, [trial: 42, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:51:00,966 DEBUG  , Thread-1 (run), runner.py:267, [trial: 42, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:43:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:43:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:50:36Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '0b339d61-9891-4792-8561-a88b273e9b74'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:50:36Z', 'phase': ''}}}
2024-02-23 08:51:00,988 DEBUG  , Thread-1 (run), runner.py:296, [trial: 42, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2tc6z
2024-02-23 08:51:01,216 ERROR  , Thread-1 (run), runner.py:368, [trial: 42, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9rwgd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2b997dd6-1959-4866-873b-e67f15d46672', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:51:01 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9rwgd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:51:01,252 INFO   , Thread-1 (run), result.py:170, [trial: 42, gen: 0] No stderr, continue
2024-02-23 08:51:01,287 ERROR  , Thread-1 (run), health.py:155, [trial: 42, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line time="2024-02-23T15:42:36Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line time="2024-02-23T15:42:36Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 15:42:36.279221518 +0000 UTC m=+0.011663840]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line time="2024-02-23T15:42:36Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line time="2024-02-23T15:42:36Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,409 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line time="2024-02-23T15:42:36Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,461 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 42, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 08:51:01,619 INFO   , Thread-1 (run), consistency.py:496, [trial: 42, gen: 0] All input deltas are matched
2024-02-23 08:51:01,621 INFO   , Thread-1 (run), engine.py:554, [trial: 42, gen: 0] Error result, running recovery
2024-02-23 08:51:01,622 DEBUG  , Thread-1 (run), engine.py:698, [trial: 42, gen: 0] Running recovery
2024-02-23 08:51:02,437 DEBUG  , Thread-1 (run), runner.py:123, [trial: 42, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 08:51:02,437 DEBUG  , Thread-1 (run), runner.py:124, [trial: 42, gen: 0] STDERR: 
2024-02-23 08:51:02,437 INFO   , Thread-1 (run), runner.py:437, [trial: 42, gen: 0] Waiting for system to converge... 
2024-02-23 08:52:02,610 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:53:02,709 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:54:06,544 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:55:06,655 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:56:06,764 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:57:06,846 INFO   , Thread-1 (run), runner.py:508, [trial: 42, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 08:59:02,448 ERROR  , Thread-1 (run), runner.py:586, [trial: 42, gen: 0] System failed to converge within 480 seconds
2024-02-23 08:59:02,731 DEBUG  , Thread-1 (run), runner.py:267, [trial: 42, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T15:43:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T15:43:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T15:58:36Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': '0b339d61-9891-4792-8561-a88b273e9b74'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T15:58:36Z', 'phase': ''}}}
2024-02-23 08:59:02,753 DEBUG  , Thread-1 (run), runner.py:296, [trial: 42, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2tc6z
2024-02-23 08:59:03,000 ERROR  , Thread-1 (run), runner.py:368, [trial: 42, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9rwgd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8cf9d1d4-01c1-47d0-8d02-cd8756d92fd0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 15:59:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9rwgd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 08:59:03,051 DEBUG  , Thread-1 (run), engine.py:207, [trial: 42, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 08:59:03,055 INFO   , Thread-1 (run), engine.py:333, Trial 42 finished, completed in 00:17:58
2024-02-23 08:59:03,055 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 57
2024-02-23 08:59:03,055 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 08:59:03,056 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 08:59:03,056 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 08:59:03,092 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-2tc6z
2024-02-23 08:59:16,464 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 09:00:08,122 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 09:00:08,132 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 09:00:14,257 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:19,400 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:19,401 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:19,602 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:24,744 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:24,744 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:25,068 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:30,209 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:30,209 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:30,344 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:35,476 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:35,476 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:35,775 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:41,011 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:41,011 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:41,179 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:46,298 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:46,298 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:00:46,369 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 42, gen: 0] Waiting for all pods to be ready
2024-02-23 09:00:51,516 INFO   , Thread-1 (run), deploy.py:32, [trial: 42, gen: 0] Operator ready
2024-02-23 09:00:51,516 INFO   , Thread-1 (run), deploy.py:36, [trial: 42, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:01:11,569 WARNING, Thread-1 (run), object.py:155, [trial: 43, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 09:01:11,569 WARNING, Thread-1 (run), object.py:155, [trial: 43, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 09:01:11,569 WARNING, Thread-1 (run), object.py:155, [trial: 43, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 09:01:11,569 DEBUG  , Thread-1 (run), engine.py:652, [trial: 43, gen: 0] Run and check
2024-02-23 09:01:11,723 DEBUG  , Thread-1 (run), runner.py:123, [trial: 43, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 09:01:11,723 DEBUG  , Thread-1 (run), runner.py:124, [trial: 43, gen: 0] STDERR: 
2024-02-23 09:01:11,723 INFO   , Thread-1 (run), runner.py:437, [trial: 43, gen: 0] Waiting for system to converge... 
2024-02-23 09:04:17,611 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:05:17,762 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:07:17,591 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:08:17,698 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:09:11,747 ERROR  , Thread-1 (run), runner.py:586, [trial: 43, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:09:12,015 DEBUG  , Thread-1 (run), runner.py:267, [trial: 43, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:01:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:01:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:08:47Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'a7553514-6be6-4269-9def-3c3a5d17f6c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:08:47Z', 'phase': ''}}}
2024-02-23 09:09:12,036 DEBUG  , Thread-1 (run), runner.py:296, [trial: 43, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-25p6n
2024-02-23 09:09:12,272 ERROR  , Thread-1 (run), runner.py:368, [trial: 43, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tg9hz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '987e693b-ab32-48ba-9de8-dc80e4485672', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:09:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tg9hz\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:09:12,306 INFO   , Thread-1 (run), result.py:170, [trial: 43, gen: 0] No stderr, continue
2024-02-23 09:09:12,342 ERROR  , Thread-1 (run), health.py:155, [trial: 43, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 09:09:12,367 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line time="2024-02-23T16:00:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line time="2024-02-23T16:00:47Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 16:00:47.32762895 +0000 UTC m=+0.010730066]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line time="2024-02-23T16:00:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line time="2024-02-23T16:00:47Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line time="2024-02-23T16:00:47Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,434 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 43, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:09:12,614 INFO   , Thread-1 (run), consistency.py:496, [trial: 43, gen: 0] All input deltas are matched
2024-02-23 09:09:12,617 INFO   , Thread-1 (run), engine.py:554, [trial: 43, gen: 0] Error result, running recovery
2024-02-23 09:09:12,617 DEBUG  , Thread-1 (run), engine.py:698, [trial: 43, gen: 0] Running recovery
2024-02-23 09:09:13,412 DEBUG  , Thread-1 (run), runner.py:123, [trial: 43, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 09:09:13,412 DEBUG  , Thread-1 (run), runner.py:124, [trial: 43, gen: 0] STDERR: 
2024-02-23 09:09:13,412 INFO   , Thread-1 (run), runner.py:437, [trial: 43, gen: 0] Waiting for system to converge... 
2024-02-23 09:10:13,522 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:11:13,637 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:12:17,544 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:13:17,650 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:14:17,754 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:15:17,862 INFO   , Thread-1 (run), runner.py:508, [trial: 43, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:17:13,421 ERROR  , Thread-1 (run), runner.py:586, [trial: 43, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:17:13,720 DEBUG  , Thread-1 (run), runner.py:267, [trial: 43, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:01:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:01:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:16:47Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': 'a7553514-6be6-4269-9def-3c3a5d17f6c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:16:47Z', 'phase': ''}}}
2024-02-23 09:17:13,741 DEBUG  , Thread-1 (run), runner.py:296, [trial: 43, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-25p6n
2024-02-23 09:17:14,000 ERROR  , Thread-1 (run), runner.py:368, [trial: 43, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tg9hz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6cbf0c64-57eb-4b21-8e90-084dea64107b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:17:13 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tg9hz\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:17:14,061 DEBUG  , Thread-1 (run), engine.py:207, [trial: 43, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 09:17:14,065 INFO   , Thread-1 (run), engine.py:333, Trial 43 finished, completed in 00:18:00
2024-02-23 09:17:14,065 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 09:17:14,065 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 09:17:14,065 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 09:17:14,065 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 09:17:14,103 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-25p6n
2024-02-23 09:17:27,545 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 09:18:16,918 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 09:18:16,936 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 09:18:23,936 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:29,202 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:29,202 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:29,431 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:34,552 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:34,553 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:34,793 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:39,936 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:39,936 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:40,058 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:45,195 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:45,195 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:45,411 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:50,532 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:50,533 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:50,712 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:18:55,851 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:18:55,851 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:18:55,936 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 43, gen: 0] Waiting for all pods to be ready
2024-02-23 09:19:01,073 INFO   , Thread-1 (run), deploy.py:32, [trial: 43, gen: 0] Operator ready
2024-02-23 09:19:01,073 INFO   , Thread-1 (run), deploy.py:36, [trial: 43, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:19:21,123 WARNING, Thread-1 (run), object.py:155, [trial: 44, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 09:19:21,123 WARNING, Thread-1 (run), object.py:155, [trial: 44, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 09:19:21,123 WARNING, Thread-1 (run), object.py:155, [trial: 44, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 09:19:21,125 DEBUG  , Thread-1 (run), engine.py:652, [trial: 44, gen: 0] Run and check
2024-02-23 09:19:21,266 DEBUG  , Thread-1 (run), runner.py:123, [trial: 44, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 09:19:21,266 DEBUG  , Thread-1 (run), runner.py:124, [trial: 44, gen: 0] STDERR: 
2024-02-23 09:19:21,266 INFO   , Thread-1 (run), runner.py:437, [trial: 44, gen: 0] Waiting for system to converge... 
2024-02-23 09:22:24,172 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:23:24,282 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:24:24,389 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:25:28,079 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:26:28,149 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:27:21,312 ERROR  , Thread-1 (run), runner.py:586, [trial: 44, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:27:21,582 DEBUG  , Thread-1 (run), runner.py:267, [trial: 44, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:19:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:19:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:26:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1864', 'uid': '9426a205-3790-4cbd-bffb-dc618064bc98'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:26:57Z', 'phase': ''}}}
2024-02-23 09:27:21,603 DEBUG  , Thread-1 (run), runner.py:296, [trial: 44, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tpvjn
2024-02-23 09:27:21,837 ERROR  , Thread-1 (run), runner.py:368, [trial: 44, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-m5fds
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1e8b4cec-c312-4a4b-a007-d523d9404770', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:27:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-m5fds\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:27:21,880 INFO   , Thread-1 (run), result.py:170, [trial: 44, gen: 0] No stderr, continue
2024-02-23 09:27:21,914 ERROR  , Thread-1 (run), health.py:155, [trial: 44, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 09:27:22,042 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,042 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line time="2024-02-23T16:18:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line time="2024-02-23T16:18:56Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 16:18:56.855619605 +0000 UTC m=+0.010585045]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line time="2024-02-23T16:18:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line time="2024-02-23T16:18:56Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line time="2024-02-23T16:18:56Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,117 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 44, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:27:22,274 INFO   , Thread-1 (run), consistency.py:496, [trial: 44, gen: 0] All input deltas are matched
2024-02-23 09:27:22,277 INFO   , Thread-1 (run), engine.py:554, [trial: 44, gen: 0] Error result, running recovery
2024-02-23 09:27:22,277 DEBUG  , Thread-1 (run), engine.py:698, [trial: 44, gen: 0] Running recovery
2024-02-23 09:27:23,106 DEBUG  , Thread-1 (run), runner.py:123, [trial: 44, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 09:27:23,106 DEBUG  , Thread-1 (run), runner.py:124, [trial: 44, gen: 0] STDERR: 
2024-02-23 09:27:23,106 INFO   , Thread-1 (run), runner.py:437, [trial: 44, gen: 0] Waiting for system to converge... 
2024-02-23 09:28:23,276 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:29:23,337 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:30:32,129 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:31:32,213 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:32:32,320 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:33:32,428 INFO   , Thread-1 (run), runner.py:508, [trial: 44, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:35:23,116 ERROR  , Thread-1 (run), runner.py:586, [trial: 44, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:35:23,404 DEBUG  , Thread-1 (run), runner.py:267, [trial: 44, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:19:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:19:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:34:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2864', 'uid': '9426a205-3790-4cbd-bffb-dc618064bc98'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:34:57Z', 'phase': ''}}}
2024-02-23 09:35:23,426 DEBUG  , Thread-1 (run), runner.py:296, [trial: 44, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tpvjn
2024-02-23 09:35:23,700 ERROR  , Thread-1 (run), runner.py:368, [trial: 44, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-m5fds
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e720d9e6-1f84-4a9a-833d-6469b0e93b13', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:35:23 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-m5fds\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:35:23,751 DEBUG  , Thread-1 (run), engine.py:207, [trial: 44, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 09:35:23,755 INFO   , Thread-1 (run), engine.py:333, Trial 44 finished, completed in 00:17:59
2024-02-23 09:35:23,755 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 09:35:23,755 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 09:35:23,755 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 09:35:23,755 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 09:35:23,791 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-tpvjn
2024-02-23 09:35:37,342 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 09:36:28,355 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 09:36:28,371 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 09:36:34,254 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:36:39,396 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:36:39,396 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:36:39,646 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:36:44,786 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:36:44,787 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:36:45,054 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:36:50,196 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:36:50,196 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:36:50,339 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:36:55,475 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:36:55,476 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:36:55,754 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:37:00,890 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:37:00,890 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:37:01,080 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:37:06,237 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:37:06,238 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:37:06,297 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 44, gen: 0] Waiting for all pods to be ready
2024-02-23 09:37:11,548 INFO   , Thread-1 (run), deploy.py:32, [trial: 44, gen: 0] Operator ready
2024-02-23 09:37:11,548 INFO   , Thread-1 (run), deploy.py:36, [trial: 44, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:37:31,621 WARNING, Thread-1 (run), object.py:155, [trial: 45, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 09:37:31,622 WARNING, Thread-1 (run), object.py:155, [trial: 45, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 09:37:31,622 WARNING, Thread-1 (run), object.py:155, [trial: 45, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 09:37:31,623 DEBUG  , Thread-1 (run), engine.py:652, [trial: 45, gen: 0] Run and check
2024-02-23 09:37:31,784 DEBUG  , Thread-1 (run), runner.py:123, [trial: 45, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 09:37:31,784 DEBUG  , Thread-1 (run), runner.py:124, [trial: 45, gen: 0] STDERR: 
2024-02-23 09:37:31,785 INFO   , Thread-1 (run), runner.py:437, [trial: 45, gen: 0] Waiting for system to converge... 
2024-02-23 09:40:37,529 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:41:37,607 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:43:42,714 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:44:42,822 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:45:31,814 ERROR  , Thread-1 (run), runner.py:586, [trial: 45, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:45:32,079 DEBUG  , Thread-1 (run), runner.py:267, [trial: 45, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:37:31Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:37:31Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:45:07Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1797', 'uid': 'd04df347-151a-4f58-9153-c5b1852aa4b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:45:07Z', 'phase': ''}}}
2024-02-23 09:45:32,100 DEBUG  , Thread-1 (run), runner.py:296, [trial: 45, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jfg6j
2024-02-23 09:45:32,317 ERROR  , Thread-1 (run), runner.py:368, [trial: 45, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q6qwc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b5b0a3c1-8b5b-44d5-83b2-0628439983a1', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:45:32 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q6qwc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:45:32,363 INFO   , Thread-1 (run), result.py:170, [trial: 45, gen: 0] No stderr, continue
2024-02-23 09:45:32,396 ERROR  , Thread-1 (run), health.py:155, [trial: 45, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 09:45:32,421 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,421 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line time="2024-02-23T16:37:07Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,421 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line time="2024-02-23T16:37:07Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 16:37:07.24899948 +0000 UTC m=+0.013128140]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,422 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line time="2024-02-23T16:37:07Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,422 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line time="2024-02-23T16:37:07Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,422 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line time="2024-02-23T16:37:07Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,479 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 45, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 09:45:32,656 INFO   , Thread-1 (run), consistency.py:496, [trial: 45, gen: 0] All input deltas are matched
2024-02-23 09:45:32,658 INFO   , Thread-1 (run), engine.py:554, [trial: 45, gen: 0] Error result, running recovery
2024-02-23 09:45:32,659 DEBUG  , Thread-1 (run), engine.py:698, [trial: 45, gen: 0] Running recovery
2024-02-23 09:45:33,482 DEBUG  , Thread-1 (run), runner.py:123, [trial: 45, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 09:45:33,482 DEBUG  , Thread-1 (run), runner.py:124, [trial: 45, gen: 0] STDERR: 
2024-02-23 09:45:33,482 INFO   , Thread-1 (run), runner.py:437, [trial: 45, gen: 0] Waiting for system to converge... 
2024-02-23 09:46:33,628 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:47:33,688 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:48:37,686 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:49:37,762 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:50:37,868 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:51:37,976 INFO   , Thread-1 (run), runner.py:508, [trial: 45, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:53:33,492 ERROR  , Thread-1 (run), runner.py:586, [trial: 45, gen: 0] System failed to converge within 480 seconds
2024-02-23 09:53:33,786 DEBUG  , Thread-1 (run), runner.py:267, [trial: 45, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:37:31Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:37:31Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T16:53:07Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2718', 'uid': 'd04df347-151a-4f58-9153-c5b1852aa4b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T16:53:07Z', 'phase': ''}}}
2024-02-23 09:53:33,807 DEBUG  , Thread-1 (run), runner.py:296, [trial: 45, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jfg6j
2024-02-23 09:53:34,046 ERROR  , Thread-1 (run), runner.py:368, [trial: 45, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q6qwc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '61534a6b-f0aa-423c-91a4-a9cd0a3f177c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 16:53:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q6qwc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 09:53:34,100 DEBUG  , Thread-1 (run), engine.py:207, [trial: 45, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 09:53:34,104 INFO   , Thread-1 (run), engine.py:333, Trial 45 finished, completed in 00:18:00
2024-02-23 09:53:34,104 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 09:53:34,104 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 09:53:34,104 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 09:53:34,104 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 09:53:34,136 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-jfg6j
2024-02-23 09:53:47,718 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 09:54:45,638 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 09:54:45,659 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 09:54:51,153 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:54:56,295 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:54:56,296 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:54:56,623 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:01,761 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:01,761 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:02,023 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:07,265 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:07,265 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:07,399 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:12,540 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:12,540 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:12,866 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:17,990 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:17,990 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:18,195 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:23,337 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:23,337 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:23,407 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 45, gen: 0] Waiting for all pods to be ready
2024-02-23 09:55:28,552 INFO   , Thread-1 (run), deploy.py:32, [trial: 45, gen: 0] Operator ready
2024-02-23 09:55:28,552 INFO   , Thread-1 (run), deploy.py:36, [trial: 45, gen: 0] All pods took 0 seconds to get ready
2024-02-23 09:55:48,605 WARNING, Thread-1 (run), object.py:155, [trial: 46, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 09:55:48,605 WARNING, Thread-1 (run), object.py:155, [trial: 46, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 09:55:48,606 WARNING, Thread-1 (run), object.py:155, [trial: 46, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 09:55:48,606 DEBUG  , Thread-1 (run), engine.py:652, [trial: 46, gen: 0] Run and check
2024-02-23 09:55:48,756 DEBUG  , Thread-1 (run), runner.py:123, [trial: 46, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 09:55:48,756 DEBUG  , Thread-1 (run), runner.py:124, [trial: 46, gen: 0] STDERR: 
2024-02-23 09:55:48,756 INFO   , Thread-1 (run), runner.py:437, [trial: 46, gen: 0] Waiting for system to converge... 
2024-02-23 09:58:54,666 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 09:59:54,775 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:02:00,459 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:03:00,568 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:03:48,783 ERROR  , Thread-1 (run), runner.py:586, [trial: 46, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:03:49,063 DEBUG  , Thread-1 (run), runner.py:267, [trial: 46, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:55:48Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:55:48Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:03:24Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1801', 'uid': 'd60b2b3f-9101-4c7e-8518-9f711f57bb39'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:03:24Z', 'phase': ''}}}
2024-02-23 10:03:49,084 DEBUG  , Thread-1 (run), runner.py:296, [trial: 46, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4m5dc
2024-02-23 10:03:49,299 ERROR  , Thread-1 (run), runner.py:368, [trial: 46, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-4fzq6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a52d9e10-b033-4edc-b2a7-4e69220e9ad2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:03:49 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-4fzq6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:03:49,351 INFO   , Thread-1 (run), result.py:170, [trial: 46, gen: 0] No stderr, continue
2024-02-23 10:03:49,390 ERROR  , Thread-1 (run), health.py:155, [trial: 46, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line time="2024-02-23T16:55:24Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line time="2024-02-23T16:55:24Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 16:55:24.381635178 +0000 UTC m=+0.010697055]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line time="2024-02-23T16:55:24Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line time="2024-02-23T16:55:24Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line time="2024-02-23T16:55:24Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,468 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 46, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:03:49,728 INFO   , Thread-1 (run), consistency.py:496, [trial: 46, gen: 0] All input deltas are matched
2024-02-23 10:03:49,731 INFO   , Thread-1 (run), engine.py:554, [trial: 46, gen: 0] Error result, running recovery
2024-02-23 10:03:49,731 DEBUG  , Thread-1 (run), engine.py:698, [trial: 46, gen: 0] Running recovery
2024-02-23 10:03:50,498 DEBUG  , Thread-1 (run), runner.py:123, [trial: 46, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 10:03:50,499 DEBUG  , Thread-1 (run), runner.py:124, [trial: 46, gen: 0] STDERR: 
2024-02-23 10:03:50,499 INFO   , Thread-1 (run), runner.py:437, [trial: 46, gen: 0] Waiting for system to converge... 
2024-02-23 10:04:50,660 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:05:50,750 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:06:54,629 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:07:54,710 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:08:54,777 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:09:54,836 INFO   , Thread-1 (run), runner.py:508, [trial: 46, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:11:50,509 ERROR  , Thread-1 (run), runner.py:586, [trial: 46, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:11:50,802 DEBUG  , Thread-1 (run), runner.py:267, [trial: 46, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T16:55:48Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T16:55:48Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:11:24Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2722', 'uid': 'd60b2b3f-9101-4c7e-8518-9f711f57bb39'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:11:24Z', 'phase': ''}}}
2024-02-23 10:11:50,823 DEBUG  , Thread-1 (run), runner.py:296, [trial: 46, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4m5dc
2024-02-23 10:11:51,077 ERROR  , Thread-1 (run), runner.py:368, [trial: 46, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-4fzq6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '79ebc69f-9e91-4b9b-8383-fe708fd5d094', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:11:51 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-4fzq6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:11:51,123 DEBUG  , Thread-1 (run), engine.py:207, [trial: 46, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 10:11:51,128 INFO   , Thread-1 (run), engine.py:333, Trial 46 finished, completed in 00:18:06
2024-02-23 10:11:51,128 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 66
2024-02-23 10:11:51,128 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 10:11:51,128 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 10:11:51,128 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 10:11:51,172 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4m5dc
2024-02-23 10:12:04,464 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 10:12:57,219 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 10:12:57,233 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 10:13:03,384 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:08,519 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:08,519 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:08,740 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:13,882 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:13,882 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:14,195 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:19,334 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:19,334 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:19,461 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:24,598 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:24,598 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:24,824 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:29,962 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:29,962 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:30,118 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:35,262 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:35,262 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:13:35,332 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 46, gen: 0] Waiting for all pods to be ready
2024-02-23 10:13:40,469 INFO   , Thread-1 (run), deploy.py:32, [trial: 46, gen: 0] Operator ready
2024-02-23 10:13:40,469 INFO   , Thread-1 (run), deploy.py:36, [trial: 46, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:14:00,520 WARNING, Thread-1 (run), object.py:155, [trial: 47, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 10:14:00,520 WARNING, Thread-1 (run), object.py:155, [trial: 47, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 10:14:00,521 WARNING, Thread-1 (run), object.py:155, [trial: 47, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 10:14:00,521 DEBUG  , Thread-1 (run), engine.py:652, [trial: 47, gen: 0] Run and check
2024-02-23 10:14:00,674 DEBUG  , Thread-1 (run), runner.py:123, [trial: 47, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 10:14:00,674 DEBUG  , Thread-1 (run), runner.py:124, [trial: 47, gen: 0] STDERR: 
2024-02-23 10:14:00,674 INFO   , Thread-1 (run), runner.py:437, [trial: 47, gen: 0] Waiting for system to converge... 
2024-02-23 10:17:06,664 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:18:06,758 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:20:11,715 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:21:11,793 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:22:00,703 ERROR  , Thread-1 (run), runner.py:586, [trial: 47, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:22:00,969 DEBUG  , Thread-1 (run), runner.py:267, [trial: 47, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:14:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:14:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:21:36Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '70119dc7-f5be-4a01-ae34-da8a5be1ac63'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:21:36Z', 'phase': ''}}}
2024-02-23 10:22:00,990 DEBUG  , Thread-1 (run), runner.py:296, [trial: 47, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-8556l
2024-02-23 10:22:01,210 ERROR  , Thread-1 (run), runner.py:368, [trial: 47, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9htmv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2be07375-59e9-411d-93ae-95c3efdeb31e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:22:01 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9htmv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:22:01,241 INFO   , Thread-1 (run), result.py:170, [trial: 47, gen: 0] No stderr, continue
2024-02-23 10:22:01,371 ERROR  , Thread-1 (run), health.py:155, [trial: 47, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 10:22:01,395 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,395 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line time="2024-02-23T17:13:36Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,395 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line time="2024-02-23T17:13:36Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 17:13:36.270454859 +0000 UTC m=+0.011579129]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,396 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line time="2024-02-23T17:13:36Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,396 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line time="2024-02-23T17:13:36Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,396 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line time="2024-02-23T17:13:36Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,447 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 47, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:22:01,608 INFO   , Thread-1 (run), consistency.py:496, [trial: 47, gen: 0] All input deltas are matched
2024-02-23 10:22:01,611 INFO   , Thread-1 (run), engine.py:554, [trial: 47, gen: 0] Error result, running recovery
2024-02-23 10:22:01,611 DEBUG  , Thread-1 (run), engine.py:698, [trial: 47, gen: 0] Running recovery
2024-02-23 10:22:02,395 DEBUG  , Thread-1 (run), runner.py:123, [trial: 47, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 10:22:02,395 DEBUG  , Thread-1 (run), runner.py:124, [trial: 47, gen: 0] STDERR: 
2024-02-23 10:22:02,396 INFO   , Thread-1 (run), runner.py:437, [trial: 47, gen: 0] Waiting for system to converge... 
2024-02-23 10:23:02,563 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:24:02,671 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:25:10,688 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:26:10,770 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:27:10,877 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:28:10,981 INFO   , Thread-1 (run), runner.py:508, [trial: 47, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:30:02,406 ERROR  , Thread-1 (run), runner.py:586, [trial: 47, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:30:02,701 DEBUG  , Thread-1 (run), runner.py:267, [trial: 47, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:14:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:14:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:29:36Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2735', 'uid': '70119dc7-f5be-4a01-ae34-da8a5be1ac63'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:29:36Z', 'phase': ''}}}
2024-02-23 10:30:02,722 DEBUG  , Thread-1 (run), runner.py:296, [trial: 47, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-8556l
2024-02-23 10:30:02,976 ERROR  , Thread-1 (run), runner.py:368, [trial: 47, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9htmv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'bb81755c-2819-4f34-a316-f736b8b03ea7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:30:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9htmv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:30:03,026 DEBUG  , Thread-1 (run), engine.py:207, [trial: 47, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 10:30:03,030 INFO   , Thread-1 (run), engine.py:333, Trial 47 finished, completed in 00:18:01
2024-02-23 10:30:03,030 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 10:30:03,030 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 10:30:03,030 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 10:30:03,030 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 10:30:03,067 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-8556l
2024-02-23 10:30:16,657 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 10:31:06,795 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 10:31:06,828 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 10:31:12,997 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:18,145 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:18,145 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:18,374 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:23,511 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:23,511 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:23,822 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:28,963 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:28,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:29,094 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:34,233 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:34,233 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:34,441 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:39,580 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:39,580 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:39,813 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:45,059 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:45,059 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:31:45,143 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 47, gen: 0] Waiting for all pods to be ready
2024-02-23 10:31:50,274 INFO   , Thread-1 (run), deploy.py:32, [trial: 47, gen: 0] Operator ready
2024-02-23 10:31:50,274 INFO   , Thread-1 (run), deploy.py:36, [trial: 47, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:32:10,325 WARNING, Thread-1 (run), object.py:155, [trial: 48, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 10:32:10,325 WARNING, Thread-1 (run), object.py:155, [trial: 48, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 10:32:10,325 WARNING, Thread-1 (run), object.py:155, [trial: 48, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 10:32:10,326 DEBUG  , Thread-1 (run), engine.py:652, [trial: 48, gen: 0] Run and check
2024-02-23 10:32:10,477 DEBUG  , Thread-1 (run), runner.py:123, [trial: 48, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 10:32:10,478 DEBUG  , Thread-1 (run), runner.py:124, [trial: 48, gen: 0] STDERR: 
2024-02-23 10:32:10,478 INFO   , Thread-1 (run), runner.py:437, [trial: 48, gen: 0] Waiting for system to converge... 
2024-02-23 10:35:16,456 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:36:16,559 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:38:22,404 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:39:22,473 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:40:10,504 ERROR  , Thread-1 (run), runner.py:586, [trial: 48, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:40:10,784 DEBUG  , Thread-1 (run), runner.py:267, [trial: 48, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:32:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:32:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:39:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': '35b2ff44-f88e-4bb9-91be-85ed086373ed'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:39:46Z', 'phase': ''}}}
2024-02-23 10:40:10,805 DEBUG  , Thread-1 (run), runner.py:296, [trial: 48, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5l6wt
2024-02-23 10:40:11,024 ERROR  , Thread-1 (run), runner.py:368, [trial: 48, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f7s7v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0fb905a7-7b34-4028-9ccc-2f52f423f0b6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:40:11 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f7s7v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:40:11,074 INFO   , Thread-1 (run), result.py:170, [trial: 48, gen: 0] No stderr, continue
2024-02-23 10:40:11,111 ERROR  , Thread-1 (run), health.py:155, [trial: 48, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 10:40:11,135 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,136 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line time="2024-02-23T17:31:46Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,136 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line time="2024-02-23T17:31:46Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 17:31:46.111374928 +0000 UTC m=+0.011540575]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,136 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line time="2024-02-23T17:31:46Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,136 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line time="2024-02-23T17:31:46Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,136 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line time="2024-02-23T17:31:46Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,186 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 48, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:40:11,345 INFO   , Thread-1 (run), consistency.py:496, [trial: 48, gen: 0] All input deltas are matched
2024-02-23 10:40:11,348 INFO   , Thread-1 (run), engine.py:554, [trial: 48, gen: 0] Error result, running recovery
2024-02-23 10:40:11,348 DEBUG  , Thread-1 (run), engine.py:698, [trial: 48, gen: 0] Running recovery
2024-02-23 10:40:12,142 DEBUG  , Thread-1 (run), runner.py:123, [trial: 48, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 10:40:12,142 DEBUG  , Thread-1 (run), runner.py:124, [trial: 48, gen: 0] STDERR: 
2024-02-23 10:40:12,142 INFO   , Thread-1 (run), runner.py:437, [trial: 48, gen: 0] Waiting for system to converge... 
2024-02-23 10:41:12,304 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:42:12,413 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:43:16,361 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:44:16,414 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:45:16,521 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:46:16,576 INFO   , Thread-1 (run), runner.py:508, [trial: 48, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:48:12,152 ERROR  , Thread-1 (run), runner.py:586, [trial: 48, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:48:12,443 DEBUG  , Thread-1 (run), runner.py:267, [trial: 48, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:32:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:32:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:47:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': '35b2ff44-f88e-4bb9-91be-85ed086373ed'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:47:46Z', 'phase': ''}}}
2024-02-23 10:48:12,465 DEBUG  , Thread-1 (run), runner.py:296, [trial: 48, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5l6wt
2024-02-23 10:48:12,721 ERROR  , Thread-1 (run), runner.py:368, [trial: 48, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-f7s7v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4db03f2c-0659-4a0f-9160-b2e761d41a2a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:48:12 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-f7s7v\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 10:48:12,781 DEBUG  , Thread-1 (run), engine.py:207, [trial: 48, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 10:48:12,785 INFO   , Thread-1 (run), engine.py:333, Trial 48 finished, completed in 00:17:59
2024-02-23 10:48:12,786 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 10:48:12,786 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 10:48:12,786 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 10:48:12,786 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 10:48:12,815 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5l6wt
2024-02-23 10:48:26,400 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 10:49:17,451 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 10:49:17,486 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 10:49:23,841 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:28,988 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:28,988 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:29,259 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:34,404 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:34,404 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:34,690 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:39,963 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:39,964 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:40,109 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:45,210 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:45,210 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:45,455 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:50,562 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:50,562 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:50,787 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:49:55,917 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:49:55,917 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:49:55,986 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 48, gen: 0] Waiting for all pods to be ready
2024-02-23 10:50:01,125 INFO   , Thread-1 (run), deploy.py:32, [trial: 48, gen: 0] Operator ready
2024-02-23 10:50:01,125 INFO   , Thread-1 (run), deploy.py:36, [trial: 48, gen: 0] All pods took 0 seconds to get ready
2024-02-23 10:50:21,177 WARNING, Thread-1 (run), object.py:155, [trial: 49, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 10:50:21,177 WARNING, Thread-1 (run), object.py:155, [trial: 49, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 10:50:21,177 WARNING, Thread-1 (run), object.py:155, [trial: 49, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 10:50:21,178 DEBUG  , Thread-1 (run), engine.py:652, [trial: 49, gen: 0] Run and check
2024-02-23 10:50:21,324 DEBUG  , Thread-1 (run), runner.py:123, [trial: 49, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 10:50:21,324 DEBUG  , Thread-1 (run), runner.py:124, [trial: 49, gen: 0] STDERR: 
2024-02-23 10:50:21,324 INFO   , Thread-1 (run), runner.py:437, [trial: 49, gen: 0] Waiting for system to converge... 
2024-02-23 10:53:27,263 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:54:27,371 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:56:35,257 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:57:35,366 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 10:58:21,364 ERROR  , Thread-1 (run), runner.py:586, [trial: 49, gen: 0] System failed to converge within 480 seconds
2024-02-23 10:58:21,632 DEBUG  , Thread-1 (run), runner.py:267, [trial: 49, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:50:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:50:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T17:57:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': '37ea8218-fc36-4a96-907f-d1185ee0f40a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T17:57:57Z', 'phase': ''}}}
2024-02-23 10:58:21,653 DEBUG  , Thread-1 (run), runner.py:296, [trial: 49, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-fzkg2
2024-02-23 10:58:21,882 ERROR  , Thread-1 (run), runner.py:368, [trial: 49, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5zqjc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '12c26b21-00df-426b-a8cb-cb35d8ca98af', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 17:58:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5zqjc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 10:58:21,913 INFO   , Thread-1 (run), result.py:170, [trial: 49, gen: 0] No stderr, continue
2024-02-23 10:58:21,947 ERROR  , Thread-1 (run), health.py:155, [trial: 49, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 10:58:21,971 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 17:49:56.912709195 +0000 UTC m=+0.011417013]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:21,972 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line time="2024-02-23T17:49:56Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:22,023 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 49, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 10:58:22,180 INFO   , Thread-1 (run), consistency.py:496, [trial: 49, gen: 0] All input deltas are matched
2024-02-23 10:58:22,183 INFO   , Thread-1 (run), engine.py:554, [trial: 49, gen: 0] Error result, running recovery
2024-02-23 10:58:22,183 DEBUG  , Thread-1 (run), engine.py:698, [trial: 49, gen: 0] Running recovery
2024-02-23 10:58:23,027 DEBUG  , Thread-1 (run), runner.py:123, [trial: 49, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 10:58:23,028 DEBUG  , Thread-1 (run), runner.py:124, [trial: 49, gen: 0] STDERR: 
2024-02-23 10:58:23,028 INFO   , Thread-1 (run), runner.py:437, [trial: 49, gen: 0] Waiting for system to converge... 
2024-02-23 10:59:23,202 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:00:23,316 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:01:27,145 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:02:27,223 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:03:27,306 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:04:27,400 INFO   , Thread-1 (run), runner.py:508, [trial: 49, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:06:23,038 ERROR  , Thread-1 (run), runner.py:586, [trial: 49, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:06:23,330 DEBUG  , Thread-1 (run), runner.py:267, [trial: 49, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T17:50:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T17:50:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:05:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': '37ea8218-fc36-4a96-907f-d1185ee0f40a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:05:57Z', 'phase': ''}}}
2024-02-23 11:06:23,352 DEBUG  , Thread-1 (run), runner.py:296, [trial: 49, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-fzkg2
2024-02-23 11:06:23,610 ERROR  , Thread-1 (run), runner.py:368, [trial: 49, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5zqjc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0a036e61-f741-4d50-ad28-12aaa30d9bf5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:06:23 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5zqjc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:06:23,669 DEBUG  , Thread-1 (run), engine.py:207, [trial: 49, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 11:06:23,673 INFO   , Thread-1 (run), engine.py:333, Trial 49 finished, completed in 00:18:00
2024-02-23 11:06:23,673 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 11:06:23,673 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 11:06:23,673 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 11:06:23,673 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 11:06:23,720 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-fzkg2
2024-02-23 11:06:37,349 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 11:07:32,876 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 11:07:32,906 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 11:07:38,030 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:07:43,291 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:07:43,291 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:07:43,600 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:07:48,715 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:07:48,715 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:07:49,000 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:07:54,142 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:07:54,143 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:07:54,294 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:07:59,444 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:07:59,444 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:07:59,690 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:08:04,825 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:08:04,825 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:08:05,020 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:08:10,166 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:08:10,167 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:08:10,240 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 49, gen: 0] Waiting for all pods to be ready
2024-02-23 11:08:15,376 INFO   , Thread-1 (run), deploy.py:32, [trial: 49, gen: 0] Operator ready
2024-02-23 11:08:15,377 INFO   , Thread-1 (run), deploy.py:36, [trial: 49, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:08:35,429 WARNING, Thread-1 (run), object.py:155, [trial: 50, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 11:08:35,429 WARNING, Thread-1 (run), object.py:155, [trial: 50, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 11:08:35,429 WARNING, Thread-1 (run), object.py:155, [trial: 50, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 11:08:35,430 DEBUG  , Thread-1 (run), engine.py:652, [trial: 50, gen: 0] Run and check
2024-02-23 11:08:35,638 DEBUG  , Thread-1 (run), runner.py:123, [trial: 50, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 11:08:35,638 DEBUG  , Thread-1 (run), runner.py:124, [trial: 50, gen: 0] STDERR: 
2024-02-23 11:08:35,639 INFO   , Thread-1 (run), runner.py:437, [trial: 50, gen: 0] Waiting for system to converge... 
2024-02-23 11:11:42,879 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:12:42,990 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:14:49,856 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:15:49,962 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:16:35,664 ERROR  , Thread-1 (run), runner.py:586, [trial: 50, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:16:35,931 DEBUG  , Thread-1 (run), runner.py:267, [trial: 50, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:08:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:08:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:16:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': 'ce4ca93d-4dfb-4839-9293-a0f1e72fc39b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:16:11Z', 'phase': ''}}}
2024-02-23 11:16:35,953 DEBUG  , Thread-1 (run), runner.py:296, [trial: 50, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xjkqf
2024-02-23 11:16:36,168 ERROR  , Thread-1 (run), runner.py:368, [trial: 50, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kxs98
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b42118e1-c811-4a44-a94e-ac32d3dd779d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:16:36 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kxs98\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:16:36,215 INFO   , Thread-1 (run), result.py:170, [trial: 50, gen: 0] No stderr, continue
2024-02-23 11:16:36,249 ERROR  , Thread-1 (run), health.py:155, [trial: 50, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 11:16:36,387 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,387 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line time="2024-02-23T18:08:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,387 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line time="2024-02-23T18:08:11Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 18:08:11.177283502 +0000 UTC m=+0.010476929]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,388 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line time="2024-02-23T18:08:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,388 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line time="2024-02-23T18:08:11Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,388 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line time="2024-02-23T18:08:11Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,446 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 50, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:16:36,603 INFO   , Thread-1 (run), consistency.py:496, [trial: 50, gen: 0] All input deltas are matched
2024-02-23 11:16:36,606 INFO   , Thread-1 (run), engine.py:554, [trial: 50, gen: 0] Error result, running recovery
2024-02-23 11:16:36,606 DEBUG  , Thread-1 (run), engine.py:698, [trial: 50, gen: 0] Running recovery
2024-02-23 11:16:37,398 DEBUG  , Thread-1 (run), runner.py:123, [trial: 50, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 11:16:37,398 DEBUG  , Thread-1 (run), runner.py:124, [trial: 50, gen: 0] STDERR: 
2024-02-23 11:16:37,399 INFO   , Thread-1 (run), runner.py:437, [trial: 50, gen: 0] Waiting for system to converge... 
2024-02-23 11:17:37,527 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:18:37,636 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:19:41,416 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:20:41,501 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:21:41,609 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:22:41,717 INFO   , Thread-1 (run), runner.py:508, [trial: 50, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:24:37,409 ERROR  , Thread-1 (run), runner.py:586, [trial: 50, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:24:37,703 DEBUG  , Thread-1 (run), runner.py:267, [trial: 50, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:08:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:08:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:24:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': 'ce4ca93d-4dfb-4839-9293-a0f1e72fc39b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:24:11Z', 'phase': ''}}}
2024-02-23 11:24:37,724 DEBUG  , Thread-1 (run), runner.py:296, [trial: 50, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xjkqf
2024-02-23 11:24:37,980 ERROR  , Thread-1 (run), runner.py:368, [trial: 50, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kxs98
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5ede86bf-a6ad-4712-af60-610d36881de6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:24:37 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kxs98\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:24:38,045 DEBUG  , Thread-1 (run), engine.py:207, [trial: 50, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 11:24:38,049 INFO   , Thread-1 (run), engine.py:333, Trial 50 finished, completed in 00:18:04
2024-02-23 11:24:38,049 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-23 11:24:38,049 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 11:24:38,049 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 11:24:38,049 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 11:24:38,087 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-xjkqf
2024-02-23 11:24:51,859 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 11:25:42,221 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 11:25:42,258 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 11:25:48,811 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:25:53,955 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:25:53,955 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:25:54,144 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:25:59,278 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:25:59,278 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:25:59,597 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:26:04,742 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:26:04,742 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:26:04,869 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:26:10,008 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:26:10,008 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:26:10,245 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:26:15,384 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:26:15,384 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:26:15,569 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:26:20,711 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:26:20,711 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:26:20,771 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 50, gen: 0] Waiting for all pods to be ready
2024-02-23 11:26:26,010 INFO   , Thread-1 (run), deploy.py:32, [trial: 50, gen: 0] Operator ready
2024-02-23 11:26:26,010 INFO   , Thread-1 (run), deploy.py:36, [trial: 50, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:26:46,104 WARNING, Thread-1 (run), object.py:155, [trial: 51, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 11:26:46,104 WARNING, Thread-1 (run), object.py:155, [trial: 51, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 11:26:46,105 WARNING, Thread-1 (run), object.py:155, [trial: 51, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 11:26:46,106 DEBUG  , Thread-1 (run), engine.py:652, [trial: 51, gen: 0] Run and check
2024-02-23 11:26:46,311 DEBUG  , Thread-1 (run), runner.py:123, [trial: 51, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 11:26:46,311 DEBUG  , Thread-1 (run), runner.py:124, [trial: 51, gen: 0] STDERR: 
2024-02-23 11:26:46,311 INFO   , Thread-1 (run), runner.py:437, [trial: 51, gen: 0] Waiting for system to converge... 
2024-02-23 11:29:51,993 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:30:52,101 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:32:51,980 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:33:52,066 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:34:46,336 ERROR  , Thread-1 (run), runner.py:586, [trial: 51, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:34:46,601 DEBUG  , Thread-1 (run), runner.py:267, [trial: 51, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:26:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:26:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:34:21Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': 'db391aef-c8c9-4f8c-97e6-29e582280bf7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:34:21Z', 'phase': ''}}}
2024-02-23 11:34:46,624 DEBUG  , Thread-1 (run), runner.py:296, [trial: 51, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jm9dq
2024-02-23 11:34:46,844 ERROR  , Thread-1 (run), runner.py:368, [trial: 51, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2t9nb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c26aa920-b3f3-4b2b-99d0-f77a39ea1687', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:34:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2t9nb\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:34:46,875 INFO   , Thread-1 (run), result.py:170, [trial: 51, gen: 0] No stderr, continue
2024-02-23 11:34:46,909 ERROR  , Thread-1 (run), health.py:155, [trial: 51, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line time="2024-02-23T18:26:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line time="2024-02-23T18:26:21Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 18:26:21.710666924 +0000 UTC m=+0.011178181]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line time="2024-02-23T18:26:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line time="2024-02-23T18:26:21Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,934 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line time="2024-02-23T18:26:21Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:46,988 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 51, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:34:47,148 INFO   , Thread-1 (run), consistency.py:496, [trial: 51, gen: 0] All input deltas are matched
2024-02-23 11:34:47,151 INFO   , Thread-1 (run), engine.py:554, [trial: 51, gen: 0] Error result, running recovery
2024-02-23 11:34:47,151 DEBUG  , Thread-1 (run), engine.py:698, [trial: 51, gen: 0] Running recovery
2024-02-23 11:34:48,021 DEBUG  , Thread-1 (run), runner.py:123, [trial: 51, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 11:34:48,021 DEBUG  , Thread-1 (run), runner.py:124, [trial: 51, gen: 0] STDERR: 
2024-02-23 11:34:48,022 INFO   , Thread-1 (run), runner.py:437, [trial: 51, gen: 0] Waiting for system to converge... 
2024-02-23 11:35:48,184 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:36:48,290 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:37:52,672 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:38:52,777 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:39:52,834 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:40:52,934 INFO   , Thread-1 (run), runner.py:508, [trial: 51, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:42:48,029 ERROR  , Thread-1 (run), runner.py:586, [trial: 51, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:42:48,327 DEBUG  , Thread-1 (run), runner.py:267, [trial: 51, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:26:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:26:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:42:21Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2733', 'uid': 'db391aef-c8c9-4f8c-97e6-29e582280bf7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:42:21Z', 'phase': ''}}}
2024-02-23 11:42:48,349 DEBUG  , Thread-1 (run), runner.py:296, [trial: 51, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jm9dq
2024-02-23 11:42:48,605 ERROR  , Thread-1 (run), runner.py:368, [trial: 51, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2t9nb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0962479e-1bee-4358-80b5-a360f7819288', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:42:48 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2t9nb\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:42:48,655 DEBUG  , Thread-1 (run), engine.py:207, [trial: 51, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 11:42:48,659 INFO   , Thread-1 (run), engine.py:333, Trial 51 finished, completed in 00:18:00
2024-02-23 11:42:48,659 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 11:42:48,659 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 11:42:48,659 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 11:42:48,659 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 11:42:48,696 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-jm9dq
2024-02-23 11:43:02,115 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 11:43:54,015 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 11:43:54,040 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 11:44:00,652 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:05,795 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:05,795 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:06,020 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:11,145 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:11,145 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:11,388 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:16,529 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:16,530 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:16,664 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:21,875 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:21,875 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:22,102 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:27,282 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:27,282 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:27,465 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:32,610 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:32,610 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:32,678 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 51, gen: 0] Waiting for all pods to be ready
2024-02-23 11:44:37,817 INFO   , Thread-1 (run), deploy.py:32, [trial: 51, gen: 0] Operator ready
2024-02-23 11:44:37,817 INFO   , Thread-1 (run), deploy.py:36, [trial: 51, gen: 0] All pods took 0 seconds to get ready
2024-02-23 11:44:57,869 WARNING, Thread-1 (run), object.py:155, [trial: 52, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 11:44:57,870 WARNING, Thread-1 (run), object.py:155, [trial: 52, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 11:44:57,870 WARNING, Thread-1 (run), object.py:155, [trial: 52, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 11:44:57,870 DEBUG  , Thread-1 (run), engine.py:652, [trial: 52, gen: 0] Run and check
2024-02-23 11:44:58,007 DEBUG  , Thread-1 (run), runner.py:123, [trial: 52, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 11:44:58,007 DEBUG  , Thread-1 (run), runner.py:124, [trial: 52, gen: 0] STDERR: 
2024-02-23 11:44:58,007 INFO   , Thread-1 (run), runner.py:437, [trial: 52, gen: 0] Waiting for system to converge... 
2024-02-23 11:48:04,084 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:49:04,191 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:51:09,790 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:52:09,848 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:52:58,029 ERROR  , Thread-1 (run), runner.py:586, [trial: 52, gen: 0] System failed to converge within 480 seconds
2024-02-23 11:52:58,305 DEBUG  , Thread-1 (run), runner.py:267, [trial: 52, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:44:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:44:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T18:52:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': '7dd12a5f-a626-4835-9a82-d12023cbc3a7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T18:52:33Z', 'phase': ''}}}
2024-02-23 11:52:58,326 DEBUG  , Thread-1 (run), runner.py:296, [trial: 52, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9b6px
2024-02-23 11:52:58,562 ERROR  , Thread-1 (run), runner.py:368, [trial: 52, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-nz6gn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4e86d35e-011c-43ba-ae28-a0b80e67d924', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 18:52:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-nz6gn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 11:52:58,612 INFO   , Thread-1 (run), result.py:170, [trial: 52, gen: 0] No stderr, continue
2024-02-23 11:52:58,653 ERROR  , Thread-1 (run), health.py:155, [trial: 52, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 11:52:58,679 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line time="2024-02-23T18:44:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line time="2024-02-23T18:44:33Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 18:44:33.618218754 +0000 UTC m=+0.011357291]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line time="2024-02-23T18:44:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line time="2024-02-23T18:44:33Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line time="2024-02-23T18:44:33Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,734 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 52, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 11:52:58,901 INFO   , Thread-1 (run), consistency.py:496, [trial: 52, gen: 0] All input deltas are matched
2024-02-23 11:52:58,903 INFO   , Thread-1 (run), engine.py:554, [trial: 52, gen: 0] Error result, running recovery
2024-02-23 11:52:58,904 DEBUG  , Thread-1 (run), engine.py:698, [trial: 52, gen: 0] Running recovery
2024-02-23 11:52:59,728 DEBUG  , Thread-1 (run), runner.py:123, [trial: 52, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 11:52:59,728 DEBUG  , Thread-1 (run), runner.py:124, [trial: 52, gen: 0] STDERR: 
2024-02-23 11:52:59,728 INFO   , Thread-1 (run), runner.py:437, [trial: 52, gen: 0] Waiting for system to converge... 
2024-02-23 11:53:59,877 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:54:59,974 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:56:03,887 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:57:03,994 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:58:04,103 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 11:59:04,209 INFO   , Thread-1 (run), runner.py:508, [trial: 52, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:00:59,738 ERROR  , Thread-1 (run), runner.py:586, [trial: 52, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:01:00,033 DEBUG  , Thread-1 (run), runner.py:267, [trial: 52, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T18:44:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T18:44:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:00:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': '7dd12a5f-a626-4835-9a82-d12023cbc3a7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:00:33Z', 'phase': ''}}}
2024-02-23 12:01:00,056 DEBUG  , Thread-1 (run), runner.py:296, [trial: 52, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9b6px
2024-02-23 12:01:00,305 ERROR  , Thread-1 (run), runner.py:368, [trial: 52, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-nz6gn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'edd06ba5-14b6-467c-a224-8f2ebbcbe2c9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:01:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-nz6gn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:01:00,352 DEBUG  , Thread-1 (run), engine.py:207, [trial: 52, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 12:01:00,356 INFO   , Thread-1 (run), engine.py:333, Trial 52 finished, completed in 00:18:01
2024-02-23 12:01:00,356 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 12:01:00,356 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 12:01:00,356 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 12:01:00,357 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 12:01:00,393 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-9b6px
2024-02-23 12:01:14,013 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 12:02:04,075 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 12:02:04,098 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 12:02:10,276 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:15,418 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:15,418 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:15,691 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:20,831 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:20,831 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:21,090 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:26,236 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:26,236 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:26,377 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:31,503 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:31,504 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:31,705 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:36,842 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:36,842 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:37,053 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:42,197 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:42,197 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:02:42,268 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 52, gen: 0] Waiting for all pods to be ready
2024-02-23 12:02:47,392 INFO   , Thread-1 (run), deploy.py:32, [trial: 52, gen: 0] Operator ready
2024-02-23 12:02:47,392 INFO   , Thread-1 (run), deploy.py:36, [trial: 52, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:03:07,444 WARNING, Thread-1 (run), object.py:155, [trial: 53, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 12:03:07,445 WARNING, Thread-1 (run), object.py:155, [trial: 53, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 12:03:07,445 WARNING, Thread-1 (run), object.py:155, [trial: 53, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 12:03:07,445 DEBUG  , Thread-1 (run), engine.py:652, [trial: 53, gen: 0] Run and check
2024-02-23 12:03:07,602 DEBUG  , Thread-1 (run), runner.py:123, [trial: 53, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 12:03:07,602 DEBUG  , Thread-1 (run), runner.py:124, [trial: 53, gen: 0] STDERR: 
2024-02-23 12:03:07,603 INFO   , Thread-1 (run), runner.py:437, [trial: 53, gen: 0] Waiting for system to converge... 
2024-02-23 12:06:43,482 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:07:43,568 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:09:13,370 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:10:13,480 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:11:07,642 ERROR  , Thread-1 (run), runner.py:586, [trial: 53, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:11:07,905 DEBUG  , Thread-1 (run), runner.py:267, [trial: 53, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:03:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:03:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:10:43Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': 'ee0776a2-92d1-4a9b-9cea-3f8725c07bdd'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:10:43Z', 'phase': ''}}}
2024-02-23 12:11:07,928 DEBUG  , Thread-1 (run), runner.py:296, [trial: 53, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jjw9f
2024-02-23 12:11:08,150 ERROR  , Thread-1 (run), runner.py:368, [trial: 53, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tkdr9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '984b4f56-2241-4e67-895d-cc70e626f786', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:11:08 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tkdr9\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:11:08,187 INFO   , Thread-1 (run), result.py:170, [trial: 53, gen: 0] No stderr, continue
2024-02-23 12:11:08,222 ERROR  , Thread-1 (run), health.py:155, [trial: 53, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line time="2024-02-23T19:02:43Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line time="2024-02-23T19:02:43Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 19:02:43.18675997 +0000 UTC m=+0.011449326]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line time="2024-02-23T19:02:43Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line time="2024-02-23T19:02:43Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,350 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line time="2024-02-23T19:02:43Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,403 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 53, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:11:08,559 INFO   , Thread-1 (run), consistency.py:496, [trial: 53, gen: 0] All input deltas are matched
2024-02-23 12:11:08,561 INFO   , Thread-1 (run), engine.py:554, [trial: 53, gen: 0] Error result, running recovery
2024-02-23 12:11:08,561 DEBUG  , Thread-1 (run), engine.py:698, [trial: 53, gen: 0] Running recovery
2024-02-23 12:11:09,388 DEBUG  , Thread-1 (run), runner.py:123, [trial: 53, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 12:11:09,389 DEBUG  , Thread-1 (run), runner.py:124, [trial: 53, gen: 0] STDERR: 
2024-02-23 12:11:09,389 INFO   , Thread-1 (run), runner.py:437, [trial: 53, gen: 0] Waiting for system to converge... 
2024-02-23 12:12:09,554 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:13:09,663 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:14:19,694 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:15:19,802 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:16:19,909 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:17:19,994 INFO   , Thread-1 (run), runner.py:508, [trial: 53, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:19:09,399 ERROR  , Thread-1 (run), runner.py:586, [trial: 53, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:19:09,692 DEBUG  , Thread-1 (run), runner.py:267, [trial: 53, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:03:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:03:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:18:43Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2728', 'uid': 'ee0776a2-92d1-4a9b-9cea-3f8725c07bdd'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:18:43Z', 'phase': ''}}}
2024-02-23 12:19:09,715 DEBUG  , Thread-1 (run), runner.py:296, [trial: 53, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jjw9f
2024-02-23 12:19:09,960 ERROR  , Thread-1 (run), runner.py:368, [trial: 53, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tkdr9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2eb8daf9-1815-470d-85e4-33d4f60983c5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:19:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tkdr9\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:19:10,004 DEBUG  , Thread-1 (run), engine.py:207, [trial: 53, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 12:19:10,008 INFO   , Thread-1 (run), engine.py:333, Trial 53 finished, completed in 00:17:59
2024-02-23 12:19:10,008 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 12:19:10,008 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 12:19:10,008 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 12:19:10,008 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 12:19:10,045 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-jjw9f
2024-02-23 12:19:23,327 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 12:20:14,453 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 12:20:14,479 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 12:20:20,800 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:25,947 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:25,947 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:26,225 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:31,365 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:31,366 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:31,678 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:36,820 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:36,821 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:36,966 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:42,108 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:42,109 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:42,349 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:47,485 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:47,485 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:47,681 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:52,820 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:52,820 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:20:52,896 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 53, gen: 0] Waiting for all pods to be ready
2024-02-23 12:20:58,038 INFO   , Thread-1 (run), deploy.py:32, [trial: 53, gen: 0] Operator ready
2024-02-23 12:20:58,038 INFO   , Thread-1 (run), deploy.py:36, [trial: 53, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:21:18,117 WARNING, Thread-1 (run), object.py:155, [trial: 54, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 12:21:18,117 WARNING, Thread-1 (run), object.py:155, [trial: 54, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 12:21:18,117 WARNING, Thread-1 (run), object.py:155, [trial: 54, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 12:21:18,118 DEBUG  , Thread-1 (run), engine.py:652, [trial: 54, gen: 0] Run and check
2024-02-23 12:21:18,284 DEBUG  , Thread-1 (run), runner.py:123, [trial: 54, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 12:21:18,285 DEBUG  , Thread-1 (run), runner.py:124, [trial: 54, gen: 0] STDERR: 
2024-02-23 12:21:18,285 INFO   , Thread-1 (run), runner.py:437, [trial: 54, gen: 0] Waiting for system to converge... 
2024-02-23 12:24:19,828 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:25:19,932 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:26:19,984 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:27:24,062 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:28:24,159 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:29:18,315 ERROR  , Thread-1 (run), runner.py:586, [trial: 54, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:29:18,585 DEBUG  , Thread-1 (run), runner.py:267, [trial: 54, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:21:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:21:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:28:54Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1882', 'uid': 'd3dbc37e-b2ef-42b6-9d71-3df2c8fadcfc'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:28:54Z', 'phase': ''}}}
2024-02-23 12:29:18,607 DEBUG  , Thread-1 (run), runner.py:296, [trial: 54, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l5dhq
2024-02-23 12:29:18,842 ERROR  , Thread-1 (run), runner.py:368, [trial: 54, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-h2fsk
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e8411e4b-3e21-40eb-8482-360502ce12e5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:29:18 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-h2fsk\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:29:18,890 INFO   , Thread-1 (run), result.py:170, [trial: 54, gen: 0] No stderr, continue
2024-02-23 12:29:19,034 ERROR  , Thread-1 (run), health.py:155, [trial: 54, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 12:29:19,057 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,058 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line time="2024-02-23T19:20:53Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,058 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line time="2024-02-23T19:20:53Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 19:20:53.808398651 +0000 UTC m=+0.010300100]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,058 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line time="2024-02-23T19:20:53Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,058 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line time="2024-02-23T19:20:53Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,058 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line time="2024-02-23T19:20:53Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,124 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 54, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:29:19,280 INFO   , Thread-1 (run), consistency.py:496, [trial: 54, gen: 0] All input deltas are matched
2024-02-23 12:29:19,283 INFO   , Thread-1 (run), engine.py:554, [trial: 54, gen: 0] Error result, running recovery
2024-02-23 12:29:19,283 DEBUG  , Thread-1 (run), engine.py:698, [trial: 54, gen: 0] Running recovery
2024-02-23 12:29:20,161 DEBUG  , Thread-1 (run), runner.py:123, [trial: 54, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 12:29:20,162 DEBUG  , Thread-1 (run), runner.py:124, [trial: 54, gen: 0] STDERR: 
2024-02-23 12:29:20,162 INFO   , Thread-1 (run), runner.py:437, [trial: 54, gen: 0] Waiting for system to converge... 
2024-02-23 12:30:20,301 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:31:20,383 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:32:24,061 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:33:24,130 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:34:24,242 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:35:24,350 INFO   , Thread-1 (run), runner.py:508, [trial: 54, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:37:20,172 ERROR  , Thread-1 (run), runner.py:586, [trial: 54, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:37:20,463 DEBUG  , Thread-1 (run), runner.py:267, [trial: 54, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:21:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:21:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:36:54Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2882', 'uid': 'd3dbc37e-b2ef-42b6-9d71-3df2c8fadcfc'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:36:54Z', 'phase': ''}}}
2024-02-23 12:37:20,484 DEBUG  , Thread-1 (run), runner.py:296, [trial: 54, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l5dhq
2024-02-23 12:37:20,756 ERROR  , Thread-1 (run), runner.py:368, [trial: 54, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-h2fsk
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b3dce0a9-17a5-4aba-9fcb-71a84fd149a6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:37:20 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-h2fsk\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 12:37:20,803 DEBUG  , Thread-1 (run), engine.py:207, [trial: 54, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 12:37:20,807 INFO   , Thread-1 (run), engine.py:333, Trial 54 finished, completed in 00:18:00
2024-02-23 12:37:20,807 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 12:37:20,807 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 12:37:20,807 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 12:37:20,807 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 12:37:20,843 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-l5dhq
2024-02-23 12:37:34,255 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 12:38:30,644 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 12:38:30,658 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 12:38:35,319 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:38:40,463 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:38:40,463 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:38:40,697 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:38:45,823 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:38:45,823 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:38:46,120 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:38:51,259 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:38:51,259 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:38:51,389 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:38:56,530 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:38:56,530 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:38:56,791 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:39:01,916 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:39:01,916 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:39:02,077 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:39:07,328 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:39:07,328 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:39:07,398 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 54, gen: 0] Waiting for all pods to be ready
2024-02-23 12:39:12,533 INFO   , Thread-1 (run), deploy.py:32, [trial: 54, gen: 0] Operator ready
2024-02-23 12:39:12,533 INFO   , Thread-1 (run), deploy.py:36, [trial: 54, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:39:32,586 WARNING, Thread-1 (run), object.py:155, [trial: 55, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 12:39:32,586 WARNING, Thread-1 (run), object.py:155, [trial: 55, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 12:39:32,586 WARNING, Thread-1 (run), object.py:155, [trial: 55, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 12:39:32,587 DEBUG  , Thread-1 (run), engine.py:652, [trial: 55, gen: 0] Run and check
2024-02-23 12:39:32,731 DEBUG  , Thread-1 (run), runner.py:123, [trial: 55, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 12:39:32,731 DEBUG  , Thread-1 (run), runner.py:124, [trial: 55, gen: 0] STDERR: 
2024-02-23 12:39:32,732 INFO   , Thread-1 (run), runner.py:437, [trial: 55, gen: 0] Waiting for system to converge... 
2024-02-23 12:42:44,040 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:43:44,095 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:45:41,068 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:46:41,121 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:47:32,762 ERROR  , Thread-1 (run), runner.py:586, [trial: 55, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:47:33,016 DEBUG  , Thread-1 (run), runner.py:267, [trial: 55, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:39:32Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:39:32Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:47:08Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1823', 'uid': 'e29e1e02-ed06-455e-a24f-1cbe8c8c089b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:47:08Z', 'phase': ''}}}
2024-02-23 12:47:33,038 DEBUG  , Thread-1 (run), runner.py:296, [trial: 55, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-p5wwz
2024-02-23 12:47:33,272 ERROR  , Thread-1 (run), runner.py:368, [trial: 55, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-drwlp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'fe880dea-e12b-4430-8b0c-004b68476a0b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:47:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-drwlp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:47:33,310 INFO   , Thread-1 (run), result.py:170, [trial: 55, gen: 0] No stderr, continue
2024-02-23 12:47:33,344 ERROR  , Thread-1 (run), health.py:155, [trial: 55, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 12:47:33,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line time="2024-02-23T19:39:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line time="2024-02-23T19:39:08Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 19:39:08.321480644 +0000 UTC m=+0.021892229]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line time="2024-02-23T19:39:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,368 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line time="2024-02-23T19:39:08Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,369 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line time="2024-02-23T19:39:08Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,426 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 55, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 12:47:33,613 INFO   , Thread-1 (run), consistency.py:496, [trial: 55, gen: 0] All input deltas are matched
2024-02-23 12:47:33,616 INFO   , Thread-1 (run), engine.py:554, [trial: 55, gen: 0] Error result, running recovery
2024-02-23 12:47:33,616 DEBUG  , Thread-1 (run), engine.py:698, [trial: 55, gen: 0] Running recovery
2024-02-23 12:47:34,373 DEBUG  , Thread-1 (run), runner.py:123, [trial: 55, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 12:47:34,373 DEBUG  , Thread-1 (run), runner.py:124, [trial: 55, gen: 0] STDERR: 
2024-02-23 12:47:34,373 INFO   , Thread-1 (run), runner.py:437, [trial: 55, gen: 0] Waiting for system to converge... 
2024-02-23 12:48:34,549 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:49:34,658 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:50:41,029 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:51:41,110 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:52:41,218 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:53:41,282 INFO   , Thread-1 (run), runner.py:508, [trial: 55, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 12:55:34,382 ERROR  , Thread-1 (run), runner.py:586, [trial: 55, gen: 0] System failed to converge within 480 seconds
2024-02-23 12:55:34,680 DEBUG  , Thread-1 (run), runner.py:267, [trial: 55, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:39:32Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:39:32Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T19:55:08Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2743', 'uid': 'e29e1e02-ed06-455e-a24f-1cbe8c8c089b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T19:55:08Z', 'phase': ''}}}
2024-02-23 12:55:34,702 DEBUG  , Thread-1 (run), runner.py:296, [trial: 55, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-p5wwz
2024-02-23 12:55:34,959 ERROR  , Thread-1 (run), runner.py:368, [trial: 55, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-drwlp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4d3e26a7-a372-4d15-83cc-cbc0d14b5d6a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 19:55:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-drwlp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 12:55:35,021 DEBUG  , Thread-1 (run), engine.py:207, [trial: 55, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 12:55:35,025 INFO   , Thread-1 (run), engine.py:333, Trial 55 finished, completed in 00:18:04
2024-02-23 12:55:35,025 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-23 12:55:35,025 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 12:55:35,026 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 12:55:35,026 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 12:55:35,064 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-p5wwz
2024-02-23 12:55:48,903 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 12:56:45,351 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 12:56:45,364 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 12:56:50,684 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:56:55,832 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:56:55,832 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:56:56,043 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:01,181 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:01,181 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:01,487 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:06,730 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:06,730 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:06,848 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:11,987 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:11,987 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:12,184 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:17,323 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:17,323 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:17,499 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:22,631 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:22,631 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:22,701 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 55, gen: 0] Waiting for all pods to be ready
2024-02-23 12:57:27,839 INFO   , Thread-1 (run), deploy.py:32, [trial: 55, gen: 0] Operator ready
2024-02-23 12:57:27,840 INFO   , Thread-1 (run), deploy.py:36, [trial: 55, gen: 0] All pods took 0 seconds to get ready
2024-02-23 12:57:47,898 WARNING, Thread-1 (run), object.py:155, [trial: 56, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 12:57:47,898 WARNING, Thread-1 (run), object.py:155, [trial: 56, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 12:57:47,898 WARNING, Thread-1 (run), object.py:155, [trial: 56, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 12:57:47,900 DEBUG  , Thread-1 (run), engine.py:652, [trial: 56, gen: 0] Run and check
2024-02-23 12:57:48,056 DEBUG  , Thread-1 (run), runner.py:123, [trial: 56, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 12:57:48,056 DEBUG  , Thread-1 (run), runner.py:124, [trial: 56, gen: 0] STDERR: 
2024-02-23 12:57:48,057 INFO   , Thread-1 (run), runner.py:437, [trial: 56, gen: 0] Waiting for system to converge... 
2024-02-23 13:00:53,954 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:01:54,063 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:03:53,908 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:04:53,991 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:05:48,089 ERROR  , Thread-1 (run), runner.py:586, [trial: 56, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:05:48,355 DEBUG  , Thread-1 (run), runner.py:267, [trial: 56, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:57:48Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:57:48Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:05:23Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1801', 'uid': 'b7afc5b8-4e92-4084-8449-a81b709fe6a9'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:05:23Z', 'phase': ''}}}
2024-02-23 13:05:48,377 DEBUG  , Thread-1 (run), runner.py:296, [trial: 56, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l5gd7
2024-02-23 13:05:48,589 ERROR  , Thread-1 (run), runner.py:368, [trial: 56, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mpnbg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c4919db6-78b2-426b-82ba-ad6fd658775f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:05:48 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mpnbg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 13:05:48,624 INFO   , Thread-1 (run), result.py:170, [trial: 56, gen: 0] No stderr, continue
2024-02-23 13:05:48,657 ERROR  , Thread-1 (run), health.py:155, [trial: 56, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 13:05:48,681 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,681 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line time="2024-02-23T19:57:23Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,682 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line time="2024-02-23T19:57:23Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 19:57:23.663556203 +0000 UTC m=+0.010319741]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,682 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line time="2024-02-23T19:57:23Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,682 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line time="2024-02-23T19:57:23Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,682 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line time="2024-02-23T19:57:23Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:48,732 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 56, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:05:49,002 INFO   , Thread-1 (run), consistency.py:496, [trial: 56, gen: 0] All input deltas are matched
2024-02-23 13:05:49,005 INFO   , Thread-1 (run), engine.py:554, [trial: 56, gen: 0] Error result, running recovery
2024-02-23 13:05:49,005 DEBUG  , Thread-1 (run), engine.py:698, [trial: 56, gen: 0] Running recovery
2024-02-23 13:05:49,843 DEBUG  , Thread-1 (run), runner.py:123, [trial: 56, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 13:05:49,843 DEBUG  , Thread-1 (run), runner.py:124, [trial: 56, gen: 0] STDERR: 
2024-02-23 13:05:49,843 INFO   , Thread-1 (run), runner.py:437, [trial: 56, gen: 0] Waiting for system to converge... 
2024-02-23 13:06:49,971 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:07:50,076 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:08:59,517 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:09:59,625 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:10:59,733 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:11:59,825 INFO   , Thread-1 (run), runner.py:508, [trial: 56, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:13:49,853 ERROR  , Thread-1 (run), runner.py:586, [trial: 56, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:13:50,155 DEBUG  , Thread-1 (run), runner.py:267, [trial: 56, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T19:57:48Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T19:57:48Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:13:23Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': 'b7afc5b8-4e92-4084-8449-a81b709fe6a9'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:13:23Z', 'phase': ''}}}
2024-02-23 13:13:50,179 DEBUG  , Thread-1 (run), runner.py:296, [trial: 56, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-l5gd7
2024-02-23 13:13:50,424 ERROR  , Thread-1 (run), runner.py:368, [trial: 56, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mpnbg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '773c11a0-d734-4ae2-83ac-2321262058bb', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:13:50 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mpnbg\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 13:13:50,468 DEBUG  , Thread-1 (run), engine.py:207, [trial: 56, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 13:13:50,473 INFO   , Thread-1 (run), engine.py:333, Trial 56 finished, completed in 00:18:05
2024-02-23 13:13:50,473 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-23 13:13:50,473 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 13:13:50,473 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 13:13:50,473 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 13:13:50,512 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-l5gd7
2024-02-23 13:14:04,027 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 13:14:54,505 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 13:14:54,541 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 13:15:01,022 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:06,168 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:06,168 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:06,447 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:11,584 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:11,585 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:11,878 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:17,017 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:17,017 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:17,145 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:22,281 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:22,281 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:22,555 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:27,694 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:27,694 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:27,859 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:33,001 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:33,001 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:33,072 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 56, gen: 0] Waiting for all pods to be ready
2024-02-23 13:15:38,199 INFO   , Thread-1 (run), deploy.py:32, [trial: 56, gen: 0] Operator ready
2024-02-23 13:15:38,199 INFO   , Thread-1 (run), deploy.py:36, [trial: 56, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:15:58,285 WARNING, Thread-1 (run), object.py:155, [trial: 57, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 13:15:58,285 WARNING, Thread-1 (run), object.py:155, [trial: 57, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 13:15:58,286 WARNING, Thread-1 (run), object.py:155, [trial: 57, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 13:15:58,287 DEBUG  , Thread-1 (run), engine.py:652, [trial: 57, gen: 0] Run and check
2024-02-23 13:15:58,453 DEBUG  , Thread-1 (run), runner.py:123, [trial: 57, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 13:15:58,453 DEBUG  , Thread-1 (run), runner.py:124, [trial: 57, gen: 0] STDERR: 
2024-02-23 13:15:58,453 INFO   , Thread-1 (run), runner.py:437, [trial: 57, gen: 0] Waiting for system to converge... 
2024-02-23 13:19:04,380 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:20:04,487 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:22:04,369 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:23:04,433 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:23:58,479 ERROR  , Thread-1 (run), runner.py:586, [trial: 57, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:23:58,752 DEBUG  , Thread-1 (run), runner.py:267, [trial: 57, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:15:58Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:15:58Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:23:34Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1798', 'uid': '121d8d1c-12e8-4fb4-928d-b4606a0cba1a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:23:34Z', 'phase': ''}}}
2024-02-23 13:23:58,774 DEBUG  , Thread-1 (run), runner.py:296, [trial: 57, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gwpd2
2024-02-23 13:23:59,003 ERROR  , Thread-1 (run), runner.py:368, [trial: 57, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dln7j
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c5a9ad46-b92f-4d20-ba69-9b578c64414f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:23:59 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dln7j\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 13:23:59,051 INFO   , Thread-1 (run), result.py:170, [trial: 57, gen: 0] No stderr, continue
2024-02-23 13:23:59,089 ERROR  , Thread-1 (run), health.py:155, [trial: 57, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 13:23:59,221 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,221 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line time="2024-02-23T20:15:34Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,221 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line time="2024-02-23T20:15:34Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 20:15:34.080862617 +0000 UTC m=+0.010246996]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,221 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line time="2024-02-23T20:15:34Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,221 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line time="2024-02-23T20:15:34Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line time="2024-02-23T20:15:34Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,273 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 57, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:23:59,431 INFO   , Thread-1 (run), consistency.py:496, [trial: 57, gen: 0] All input deltas are matched
2024-02-23 13:23:59,433 INFO   , Thread-1 (run), engine.py:554, [trial: 57, gen: 0] Error result, running recovery
2024-02-23 13:23:59,433 DEBUG  , Thread-1 (run), engine.py:698, [trial: 57, gen: 0] Running recovery
2024-02-23 13:24:00,200 DEBUG  , Thread-1 (run), runner.py:123, [trial: 57, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 13:24:00,200 DEBUG  , Thread-1 (run), runner.py:124, [trial: 57, gen: 0] STDERR: 
2024-02-23 13:24:00,200 INFO   , Thread-1 (run), runner.py:437, [trial: 57, gen: 0] Waiting for system to converge... 
2024-02-23 13:25:00,372 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:26:00,456 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:27:07,718 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:28:07,817 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:29:07,919 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:30:08,011 INFO   , Thread-1 (run), runner.py:508, [trial: 57, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:32:00,210 ERROR  , Thread-1 (run), runner.py:586, [trial: 57, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:32:00,515 DEBUG  , Thread-1 (run), runner.py:267, [trial: 57, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:15:58Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:15:58Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:31:34Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '121d8d1c-12e8-4fb4-928d-b4606a0cba1a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:31:34Z', 'phase': ''}}}
2024-02-23 13:32:00,536 DEBUG  , Thread-1 (run), runner.py:296, [trial: 57, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gwpd2
2024-02-23 13:32:00,789 ERROR  , Thread-1 (run), runner.py:368, [trial: 57, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dln7j
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '472dc709-e592-4717-848e-2b0b682089c0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:32:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dln7j\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 13:32:00,834 DEBUG  , Thread-1 (run), engine.py:207, [trial: 57, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 13:32:00,838 INFO   , Thread-1 (run), engine.py:333, Trial 57 finished, completed in 00:18:00
2024-02-23 13:32:00,838 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 13:32:00,838 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 13:32:00,838 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 13:32:00,838 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 13:32:00,875 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-gwpd2
2024-02-23 13:32:14,297 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 13:33:06,573 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 13:33:06,596 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 13:33:12,866 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:18,010 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:18,011 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:18,263 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:23,397 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:23,397 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:23,712 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:28,847 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:28,847 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:28,965 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:34,103 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:34,103 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:34,361 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:39,497 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:39,497 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:39,655 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:44,801 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:44,801 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:33:44,867 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 57, gen: 0] Waiting for all pods to be ready
2024-02-23 13:33:50,110 INFO   , Thread-1 (run), deploy.py:32, [trial: 57, gen: 0] Operator ready
2024-02-23 13:33:50,111 INFO   , Thread-1 (run), deploy.py:36, [trial: 57, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:34:10,155 WARNING, Thread-1 (run), object.py:155, [trial: 58, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 13:34:10,155 WARNING, Thread-1 (run), object.py:155, [trial: 58, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 13:34:10,155 WARNING, Thread-1 (run), object.py:155, [trial: 58, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 13:34:10,156 DEBUG  , Thread-1 (run), engine.py:652, [trial: 58, gen: 0] Run and check
2024-02-23 13:34:10,328 DEBUG  , Thread-1 (run), runner.py:123, [trial: 58, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 13:34:10,328 DEBUG  , Thread-1 (run), runner.py:124, [trial: 58, gen: 0] STDERR: 
2024-02-23 13:34:10,328 INFO   , Thread-1 (run), runner.py:437, [trial: 58, gen: 0] Waiting for system to converge... 
2024-02-23 13:37:10,179 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:38:10,261 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:39:10,325 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:40:16,009 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:41:16,124 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:42:10,353 ERROR  , Thread-1 (run), runner.py:586, [trial: 58, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:42:10,623 DEBUG  , Thread-1 (run), runner.py:267, [trial: 58, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:34:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:34:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:41:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1870', 'uid': '19656223-e87f-48d3-9bfe-3aa55a9cece3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:41:46Z', 'phase': ''}}}
2024-02-23 13:42:10,645 DEBUG  , Thread-1 (run), runner.py:296, [trial: 58, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5hp66
2024-02-23 13:42:10,883 ERROR  , Thread-1 (run), runner.py:368, [trial: 58, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-csrh6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f7df5123-5087-4656-bc17-892ffbdd2bdd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:42:10 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-csrh6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 13:42:10,916 INFO   , Thread-1 (run), result.py:170, [trial: 58, gen: 0] No stderr, continue
2024-02-23 13:42:10,953 ERROR  , Thread-1 (run), health.py:155, [trial: 58, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 13:42:10,976 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:10,977 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line time="2024-02-23T20:33:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:10,977 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line time="2024-02-23T20:33:45Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 20:33:45.805348442 +0000 UTC m=+0.010473806]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:10,977 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line time="2024-02-23T20:33:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:10,977 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line time="2024-02-23T20:33:45Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:10,977 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line time="2024-02-23T20:33:45Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:11,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 58, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 13:42:11,200 INFO   , Thread-1 (run), consistency.py:496, [trial: 58, gen: 0] All input deltas are matched
2024-02-23 13:42:11,202 INFO   , Thread-1 (run), engine.py:554, [trial: 58, gen: 0] Error result, running recovery
2024-02-23 13:42:11,203 DEBUG  , Thread-1 (run), engine.py:698, [trial: 58, gen: 0] Running recovery
2024-02-23 13:42:12,037 DEBUG  , Thread-1 (run), runner.py:123, [trial: 58, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 13:42:12,037 DEBUG  , Thread-1 (run), runner.py:124, [trial: 58, gen: 0] STDERR: 
2024-02-23 13:42:12,037 INFO   , Thread-1 (run), runner.py:437, [trial: 58, gen: 0] Waiting for system to converge... 
2024-02-23 13:43:12,213 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:44:12,297 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:45:18,181 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:46:18,265 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:47:18,341 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:48:18,418 INFO   , Thread-1 (run), runner.py:508, [trial: 58, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:50:12,047 ERROR  , Thread-1 (run), runner.py:586, [trial: 58, gen: 0] System failed to converge within 480 seconds
2024-02-23 13:50:12,350 DEBUG  , Thread-1 (run), runner.py:267, [trial: 58, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:34:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:34:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:49:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2870', 'uid': '19656223-e87f-48d3-9bfe-3aa55a9cece3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:49:46Z', 'phase': ''}}}
2024-02-23 13:50:12,371 DEBUG  , Thread-1 (run), runner.py:296, [trial: 58, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5hp66
2024-02-23 13:50:12,650 ERROR  , Thread-1 (run), runner.py:368, [trial: 58, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-csrh6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0efe5197-621d-47e5-9397-5dae51035bbe', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 20:50:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-csrh6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 13:50:12,702 DEBUG  , Thread-1 (run), engine.py:207, [trial: 58, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 13:50:12,706 INFO   , Thread-1 (run), engine.py:333, Trial 58 finished, completed in 00:18:01
2024-02-23 13:50:12,707 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 13:50:12,707 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 13:50:12,707 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 13:50:12,707 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 13:50:12,744 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5hp66
2024-02-23 13:50:26,378 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 13:51:20,319 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 13:51:20,338 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 13:51:26,250 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:31,392 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:31,393 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:31,611 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:36,737 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:36,737 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:37,031 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:42,282 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:42,282 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:42,412 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:47,541 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:47,542 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:47,764 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:52,879 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:52,879 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:53,046 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:51:58,160 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:51:58,160 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:51:58,235 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 58, gen: 0] Waiting for all pods to be ready
2024-02-23 13:52:03,372 INFO   , Thread-1 (run), deploy.py:32, [trial: 58, gen: 0] Operator ready
2024-02-23 13:52:03,372 INFO   , Thread-1 (run), deploy.py:36, [trial: 58, gen: 0] All pods took 0 seconds to get ready
2024-02-23 13:52:23,409 WARNING, Thread-1 (run), object.py:155, [trial: 59, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 13:52:23,409 WARNING, Thread-1 (run), object.py:155, [trial: 59, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 13:52:23,410 WARNING, Thread-1 (run), object.py:155, [trial: 59, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 13:52:23,410 DEBUG  , Thread-1 (run), engine.py:652, [trial: 59, gen: 0] Run and check
2024-02-23 13:52:23,564 DEBUG  , Thread-1 (run), runner.py:123, [trial: 59, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 13:52:23,564 DEBUG  , Thread-1 (run), runner.py:124, [trial: 59, gen: 0] STDERR: 
2024-02-23 13:52:23,565 INFO   , Thread-1 (run), runner.py:437, [trial: 59, gen: 0] Waiting for system to converge... 
2024-02-23 13:55:29,530 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:56:29,638 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:58:35,183 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 13:59:35,233 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:00:23,590 ERROR  , Thread-1 (run), runner.py:586, [trial: 59, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:00:23,861 DEBUG  , Thread-1 (run), runner.py:267, [trial: 59, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:52:23Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:52:23Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T20:59:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1789', 'uid': '2d738dc4-4e39-448c-8f89-6873c2d69e02'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T20:59:59Z', 'phase': ''}}}
2024-02-23 14:00:23,883 DEBUG  , Thread-1 (run), runner.py:296, [trial: 59, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-glksr
2024-02-23 14:00:24,099 ERROR  , Thread-1 (run), runner.py:368, [trial: 59, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-99hnw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b45322e2-794a-4bef-b312-e85204135ff9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:00:24 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-99hnw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 14:00:24,133 INFO   , Thread-1 (run), result.py:170, [trial: 59, gen: 0] No stderr, continue
2024-02-23 14:00:24,169 ERROR  , Thread-1 (run), health.py:155, [trial: 59, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 14:00:24,192 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line time="2024-02-23T20:51:59Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line time="2024-02-23T20:51:59Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 20:51:59.228739991 +0000 UTC m=+0.020194178]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line time="2024-02-23T20:51:59Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line time="2024-02-23T20:51:59Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line time="2024-02-23T20:51:59Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,244 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 59, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:00:24,513 INFO   , Thread-1 (run), consistency.py:496, [trial: 59, gen: 0] All input deltas are matched
2024-02-23 14:00:24,515 INFO   , Thread-1 (run), engine.py:554, [trial: 59, gen: 0] Error result, running recovery
2024-02-23 14:00:24,515 DEBUG  , Thread-1 (run), engine.py:698, [trial: 59, gen: 0] Running recovery
2024-02-23 14:00:25,312 DEBUG  , Thread-1 (run), runner.py:123, [trial: 59, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 14:00:25,313 DEBUG  , Thread-1 (run), runner.py:124, [trial: 59, gen: 0] STDERR: 
2024-02-23 14:00:25,313 INFO   , Thread-1 (run), runner.py:437, [trial: 59, gen: 0] Waiting for system to converge... 
2024-02-23 14:01:25,450 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:03:29,510 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:04:29,620 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:05:29,724 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:06:29,829 INFO   , Thread-1 (run), runner.py:508, [trial: 59, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:08:25,323 ERROR  , Thread-1 (run), runner.py:586, [trial: 59, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:08:25,612 DEBUG  , Thread-1 (run), runner.py:267, [trial: 59, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T20:52:23Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T20:52:23Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:07:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2712', 'uid': '2d738dc4-4e39-448c-8f89-6873c2d69e02'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:07:59Z', 'phase': ''}}}
2024-02-23 14:08:25,634 DEBUG  , Thread-1 (run), runner.py:296, [trial: 59, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-glksr
2024-02-23 14:08:25,881 ERROR  , Thread-1 (run), runner.py:368, [trial: 59, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-99hnw
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f6698313-9b18-4f1e-b930-998794728bcf', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:08:25 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-99hnw\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 14:08:25,938 DEBUG  , Thread-1 (run), engine.py:207, [trial: 59, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 14:08:25,942 INFO   , Thread-1 (run), engine.py:333, Trial 59 finished, completed in 00:18:03
2024-02-23 14:08:25,942 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-23 14:08:25,942 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 14:08:25,942 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 14:08:25,943 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 14:08:25,975 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-glksr
2024-02-23 14:08:39,545 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 14:09:29,971 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 14:09:29,995 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 14:09:36,539 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:09:41,688 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:09:41,688 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:09:41,942 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:09:47,067 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:09:47,067 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:09:47,348 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:09:52,485 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:09:52,486 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:09:52,605 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:09:57,737 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:09:57,738 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:09:57,984 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:10:03,127 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:10:03,127 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:10:03,323 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:10:08,464 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:10:08,464 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:10:08,537 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 59, gen: 0] Waiting for all pods to be ready
2024-02-23 14:10:13,675 INFO   , Thread-1 (run), deploy.py:32, [trial: 59, gen: 0] Operator ready
2024-02-23 14:10:13,675 INFO   , Thread-1 (run), deploy.py:36, [trial: 59, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:10:33,725 WARNING, Thread-1 (run), object.py:155, [trial: 60, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 14:10:33,725 WARNING, Thread-1 (run), object.py:155, [trial: 60, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 14:10:33,726 WARNING, Thread-1 (run), object.py:155, [trial: 60, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 14:10:33,726 DEBUG  , Thread-1 (run), engine.py:652, [trial: 60, gen: 0] Run and check
2024-02-23 14:10:33,851 DEBUG  , Thread-1 (run), runner.py:123, [trial: 60, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 14:10:33,851 DEBUG  , Thread-1 (run), runner.py:124, [trial: 60, gen: 0] STDERR: 
2024-02-23 14:10:33,852 INFO   , Thread-1 (run), runner.py:437, [trial: 60, gen: 0] Waiting for system to converge... 
2024-02-23 14:13:41,594 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:14:41,699 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:16:39,722 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:17:39,773 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:18:33,875 ERROR  , Thread-1 (run), runner.py:586, [trial: 60, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:18:34,148 DEBUG  , Thread-1 (run), runner.py:267, [trial: 60, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:10:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:10:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:18:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': '0cabd34e-4b3b-4933-959d-6f119438d509'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:18:09Z', 'phase': ''}}}
2024-02-23 14:18:34,170 DEBUG  , Thread-1 (run), runner.py:296, [trial: 60, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2nkxx
2024-02-23 14:18:34,387 ERROR  , Thread-1 (run), runner.py:368, [trial: 60, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-c8zvq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'effc2322-ee8d-4293-81dd-11c90ec3625a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:18:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-c8zvq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 14:18:34,421 INFO   , Thread-1 (run), result.py:170, [trial: 60, gen: 0] No stderr, continue
2024-02-23 14:18:34,455 ERROR  , Thread-1 (run), health.py:155, [trial: 60, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 14:18:34,621 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,622 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line time="2024-02-23T21:10:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,622 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line time="2024-02-23T21:10:09Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 21:10:09.446460116 +0000 UTC m=+0.011413703]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,623 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line time="2024-02-23T21:10:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,623 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line time="2024-02-23T21:10:09Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,623 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line time="2024-02-23T21:10:09Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 60, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:18:34,839 INFO   , Thread-1 (run), consistency.py:496, [trial: 60, gen: 0] All input deltas are matched
2024-02-23 14:18:34,842 INFO   , Thread-1 (run), engine.py:554, [trial: 60, gen: 0] Error result, running recovery
2024-02-23 14:18:34,842 DEBUG  , Thread-1 (run), engine.py:698, [trial: 60, gen: 0] Running recovery
2024-02-23 14:18:35,604 DEBUG  , Thread-1 (run), runner.py:123, [trial: 60, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 14:18:35,605 DEBUG  , Thread-1 (run), runner.py:124, [trial: 60, gen: 0] STDERR: 
2024-02-23 14:18:35,605 INFO   , Thread-1 (run), runner.py:437, [trial: 60, gen: 0] Waiting for system to converge... 
2024-02-23 14:19:35,778 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:20:35,864 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:21:39,693 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:22:39,804 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:23:39,909 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:24:39,976 INFO   , Thread-1 (run), runner.py:508, [trial: 60, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:26:35,613 ERROR  , Thread-1 (run), runner.py:586, [trial: 60, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:26:35,911 DEBUG  , Thread-1 (run), runner.py:267, [trial: 60, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:10:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:10:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:26:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2730', 'uid': '0cabd34e-4b3b-4933-959d-6f119438d509'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:26:09Z', 'phase': ''}}}
2024-02-23 14:26:35,933 DEBUG  , Thread-1 (run), runner.py:296, [trial: 60, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2nkxx
2024-02-23 14:26:36,189 ERROR  , Thread-1 (run), runner.py:368, [trial: 60, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-c8zvq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f920eed4-6b1b-4915-9bcd-b8f26de4f685', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:26:36 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-c8zvq\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 14:26:36,232 DEBUG  , Thread-1 (run), engine.py:207, [trial: 60, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 14:26:36,238 INFO   , Thread-1 (run), engine.py:333, Trial 60 finished, completed in 00:18:00
2024-02-23 14:26:36,238 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 14:26:36,238 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 14:26:36,238 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 14:26:36,238 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 14:26:36,269 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-2nkxx
2024-02-23 14:26:49,823 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 14:27:39,970 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 14:27:39,983 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 14:27:46,825 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:27:51,970 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:27:51,970 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:27:52,231 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:27:57,372 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:27:57,373 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:27:57,676 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:28:02,817 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:28:02,818 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:28:02,969 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:28:08,098 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:28:08,099 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:28:08,305 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:28:13,436 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:28:13,436 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:28:13,602 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:28:18,717 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:28:18,717 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:28:18,789 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 60, gen: 0] Waiting for all pods to be ready
2024-02-23 14:28:23,921 INFO   , Thread-1 (run), deploy.py:32, [trial: 60, gen: 0] Operator ready
2024-02-23 14:28:23,921 INFO   , Thread-1 (run), deploy.py:36, [trial: 60, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:28:43,975 WARNING, Thread-1 (run), object.py:155, [trial: 61, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 14:28:43,975 WARNING, Thread-1 (run), object.py:155, [trial: 61, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 14:28:43,975 WARNING, Thread-1 (run), object.py:155, [trial: 61, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 14:28:43,975 DEBUG  , Thread-1 (run), engine.py:652, [trial: 61, gen: 0] Run and check
2024-02-23 14:28:44,117 DEBUG  , Thread-1 (run), runner.py:123, [trial: 61, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 14:28:44,118 DEBUG  , Thread-1 (run), runner.py:124, [trial: 61, gen: 0] STDERR: 
2024-02-23 14:28:44,118 INFO   , Thread-1 (run), runner.py:437, [trial: 61, gen: 0] Waiting for system to converge... 
2024-02-23 14:31:42,735 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:32:42,822 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:33:42,914 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:34:50,776 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:35:50,873 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:36:44,160 ERROR  , Thread-1 (run), runner.py:586, [trial: 61, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:36:44,440 DEBUG  , Thread-1 (run), runner.py:267, [trial: 61, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:28:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:28:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:36:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1826', 'uid': '43921a66-59c0-43c0-85ba-1ad76d26f66a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:36:19Z', 'phase': ''}}}
2024-02-23 14:36:44,461 DEBUG  , Thread-1 (run), runner.py:296, [trial: 61, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zshl7
2024-02-23 14:36:44,684 ERROR  , Thread-1 (run), runner.py:368, [trial: 61, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2sgv5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c5f712d6-6a35-4ed1-b3ca-c7714451b54d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:36:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2sgv5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 14:36:44,717 INFO   , Thread-1 (run), result.py:170, [trial: 61, gen: 0] No stderr, continue
2024-02-23 14:36:44,753 ERROR  , Thread-1 (run), health.py:155, [trial: 61, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 14:36:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line time="2024-02-23T21:28:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,778 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line time="2024-02-23T21:28:19Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 21:28:19.759891141 +0000 UTC m=+0.022586649]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,778 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line time="2024-02-23T21:28:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,778 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line time="2024-02-23T21:28:19Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,778 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line time="2024-02-23T21:28:19Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:44,834 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 61, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:36:45,000 INFO   , Thread-1 (run), consistency.py:496, [trial: 61, gen: 0] All input deltas are matched
2024-02-23 14:36:45,002 INFO   , Thread-1 (run), engine.py:554, [trial: 61, gen: 0] Error result, running recovery
2024-02-23 14:36:45,002 DEBUG  , Thread-1 (run), engine.py:698, [trial: 61, gen: 0] Running recovery
2024-02-23 14:36:45,860 DEBUG  , Thread-1 (run), runner.py:123, [trial: 61, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 14:36:45,860 DEBUG  , Thread-1 (run), runner.py:124, [trial: 61, gen: 0] STDERR: 
2024-02-23 14:36:45,860 INFO   , Thread-1 (run), runner.py:437, [trial: 61, gen: 0] Waiting for system to converge... 
2024-02-23 14:37:46,029 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:38:46,101 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:39:50,646 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:40:50,758 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:41:50,865 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:42:50,930 INFO   , Thread-1 (run), runner.py:508, [trial: 61, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:44:45,869 ERROR  , Thread-1 (run), runner.py:586, [trial: 61, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:44:46,152 DEBUG  , Thread-1 (run), runner.py:267, [trial: 61, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:28:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:28:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:44:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2751', 'uid': '43921a66-59c0-43c0-85ba-1ad76d26f66a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:44:19Z', 'phase': ''}}}
2024-02-23 14:44:46,175 DEBUG  , Thread-1 (run), runner.py:296, [trial: 61, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-zshl7
2024-02-23 14:44:46,422 ERROR  , Thread-1 (run), runner.py:368, [trial: 61, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2sgv5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1c9b8153-6bb3-4143-a793-5c5f00edb79c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:44:46 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2sgv5\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 14:44:46,467 DEBUG  , Thread-1 (run), engine.py:207, [trial: 61, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 14:44:46,471 INFO   , Thread-1 (run), engine.py:333, Trial 61 finished, completed in 00:18:00
2024-02-23 14:44:46,471 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 14:44:46,471 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 14:44:46,471 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 14:44:46,471 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 14:44:46,504 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-zshl7
2024-02-23 14:45:00,060 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 14:45:52,648 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 14:45:52,660 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 14:45:58,600 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:03,749 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:03,749 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:04,019 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:09,158 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:09,158 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:09,476 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:14,618 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:14,618 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:14,745 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:19,975 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:19,975 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:20,235 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:25,368 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:25,368 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:25,617 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:30,766 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:30,767 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:30,838 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 61, gen: 0] Waiting for all pods to be ready
2024-02-23 14:46:35,963 INFO   , Thread-1 (run), deploy.py:32, [trial: 61, gen: 0] Operator ready
2024-02-23 14:46:35,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 61, gen: 0] All pods took 0 seconds to get ready
2024-02-23 14:46:55,998 WARNING, Thread-1 (run), object.py:155, [trial: 62, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 14:46:55,999 WARNING, Thread-1 (run), object.py:155, [trial: 62, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 14:46:55,999 WARNING, Thread-1 (run), object.py:155, [trial: 62, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 14:46:55,999 DEBUG  , Thread-1 (run), engine.py:652, [trial: 62, gen: 0] Run and check
2024-02-23 14:46:56,143 DEBUG  , Thread-1 (run), runner.py:123, [trial: 62, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 14:46:56,143 DEBUG  , Thread-1 (run), runner.py:124, [trial: 62, gen: 0] STDERR: 
2024-02-23 14:46:56,144 INFO   , Thread-1 (run), runner.py:437, [trial: 62, gen: 0] Waiting for system to converge... 
2024-02-23 14:50:00,782 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:51:00,856 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:52:00,963 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:53:05,682 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:54:05,760 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:54:56,169 ERROR  , Thread-1 (run), runner.py:586, [trial: 62, gen: 0] System failed to converge within 480 seconds
2024-02-23 14:54:56,436 DEBUG  , Thread-1 (run), runner.py:267, [trial: 62, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:46:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:46:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T21:54:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1870', 'uid': 'd901fca8-f075-436a-9924-c2731bdcca04'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T21:54:32Z', 'phase': ''}}}
2024-02-23 14:54:56,458 DEBUG  , Thread-1 (run), runner.py:296, [trial: 62, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-glkx2
2024-02-23 14:54:56,691 ERROR  , Thread-1 (run), runner.py:368, [trial: 62, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-96frv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c7a30279-238e-4d3a-9650-7b2695e51eba', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 21:54:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-96frv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 14:54:56,743 INFO   , Thread-1 (run), result.py:170, [trial: 62, gen: 0] No stderr, continue
2024-02-23 14:54:56,777 ERROR  , Thread-1 (run), health.py:155, [trial: 62, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 14:54:56,801 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,801 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line time="2024-02-23T21:46:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line time="2024-02-23T21:46:31Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 21:46:31.821914177 +0000 UTC m=+0.016979731]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line time="2024-02-23T21:46:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line time="2024-02-23T21:46:31Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,802 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line time="2024-02-23T21:46:31Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:56,871 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 62, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 14:54:57,177 INFO   , Thread-1 (run), consistency.py:496, [trial: 62, gen: 0] All input deltas are matched
2024-02-23 14:54:57,180 INFO   , Thread-1 (run), engine.py:554, [trial: 62, gen: 0] Error result, running recovery
2024-02-23 14:54:57,180 DEBUG  , Thread-1 (run), engine.py:698, [trial: 62, gen: 0] Running recovery
2024-02-23 14:54:57,995 DEBUG  , Thread-1 (run), runner.py:123, [trial: 62, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 14:54:57,995 DEBUG  , Thread-1 (run), runner.py:124, [trial: 62, gen: 0] STDERR: 
2024-02-23 14:54:57,996 INFO   , Thread-1 (run), runner.py:437, [trial: 62, gen: 0] Waiting for system to converge... 
2024-02-23 14:55:58,148 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:56:58,253 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:58:02,077 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 14:59:02,184 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:00:02,261 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:01:02,321 INFO   , Thread-1 (run), runner.py:508, [trial: 62, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:02:58,006 ERROR  , Thread-1 (run), runner.py:586, [trial: 62, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:02:58,285 DEBUG  , Thread-1 (run), runner.py:267, [trial: 62, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T21:46:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T21:46:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:02:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2872', 'uid': 'd901fca8-f075-436a-9924-c2731bdcca04'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:02:32Z', 'phase': ''}}}
2024-02-23 15:02:58,306 DEBUG  , Thread-1 (run), runner.py:296, [trial: 62, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-glkx2
2024-02-23 15:02:58,589 ERROR  , Thread-1 (run), runner.py:368, [trial: 62, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-96frv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'cc750b84-bcb7-49d4-9dcc-6c4b454ef2bf', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:02:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-96frv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:02:58,651 DEBUG  , Thread-1 (run), engine.py:207, [trial: 62, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 15:02:58,656 INFO   , Thread-1 (run), engine.py:333, Trial 62 finished, completed in 00:18:02
2024-02-23 15:02:58,656 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 15:02:58,656 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 15:02:58,656 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 15:02:58,656 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 15:02:58,694 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-glkx2
2024-02-23 15:03:12,172 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 15:04:04,029 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 15:04:04,056 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 15:04:11,073 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:16,218 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:16,218 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:16,466 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:21,603 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:21,603 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:21,904 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:27,047 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:27,048 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:27,165 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:32,277 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:32,277 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:32,514 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:37,653 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:37,653 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:37,903 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:43,051 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:43,051 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:04:43,124 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 62, gen: 0] Waiting for all pods to be ready
2024-02-23 15:04:48,258 INFO   , Thread-1 (run), deploy.py:32, [trial: 62, gen: 0] Operator ready
2024-02-23 15:04:48,258 INFO   , Thread-1 (run), deploy.py:36, [trial: 62, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:05:08,301 WARNING, Thread-1 (run), object.py:155, [trial: 63, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 15:05:08,302 WARNING, Thread-1 (run), object.py:155, [trial: 63, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 15:05:08,302 WARNING, Thread-1 (run), object.py:155, [trial: 63, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 15:05:08,303 DEBUG  , Thread-1 (run), engine.py:652, [trial: 63, gen: 0] Run and check
2024-02-23 15:05:08,451 DEBUG  , Thread-1 (run), runner.py:123, [trial: 63, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 15:05:08,451 DEBUG  , Thread-1 (run), runner.py:124, [trial: 63, gen: 0] STDERR: 
2024-02-23 15:05:08,451 INFO   , Thread-1 (run), runner.py:437, [trial: 63, gen: 0] Waiting for system to converge... 
2024-02-23 15:08:14,370 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:09:14,456 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:11:17,189 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:12:17,297 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:13:08,477 ERROR  , Thread-1 (run), runner.py:586, [trial: 63, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:13:08,745 DEBUG  , Thread-1 (run), runner.py:267, [trial: 63, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:05:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:05:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:12:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '1524601b-6a7d-4320-9095-0ab7da90a5d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:12:44Z', 'phase': ''}}}
2024-02-23 15:13:08,766 DEBUG  , Thread-1 (run), runner.py:296, [trial: 63, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-svk9r
2024-02-23 15:13:08,988 ERROR  , Thread-1 (run), runner.py:368, [trial: 63, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rnfb8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e418c9cb-90e9-4520-9de1-0e4cbad8fe51', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:13:08 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rnfb8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:13:09,021 INFO   , Thread-1 (run), result.py:170, [trial: 63, gen: 0] No stderr, continue
2024-02-23 15:13:09,054 ERROR  , Thread-1 (run), health.py:155, [trial: 63, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line time="2024-02-23T22:04:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line time="2024-02-23T22:04:44Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 22:04:44.061995226 +0000 UTC m=+0.018975188]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line time="2024-02-23T22:04:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line time="2024-02-23T22:04:44Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,188 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line time="2024-02-23T22:04:44Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,239 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 63, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:13:09,401 INFO   , Thread-1 (run), consistency.py:496, [trial: 63, gen: 0] All input deltas are matched
2024-02-23 15:13:09,403 INFO   , Thread-1 (run), engine.py:554, [trial: 63, gen: 0] Error result, running recovery
2024-02-23 15:13:09,404 DEBUG  , Thread-1 (run), engine.py:698, [trial: 63, gen: 0] Running recovery
2024-02-23 15:13:10,267 DEBUG  , Thread-1 (run), runner.py:123, [trial: 63, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 15:13:10,267 DEBUG  , Thread-1 (run), runner.py:124, [trial: 63, gen: 0] STDERR: 
2024-02-23 15:13:10,267 INFO   , Thread-1 (run), runner.py:437, [trial: 63, gen: 0] Waiting for system to converge... 
2024-02-23 15:14:10,443 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:15:10,514 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:16:22,151 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:17:22,258 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:18:22,365 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:19:22,473 INFO   , Thread-1 (run), runner.py:508, [trial: 63, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:21:10,275 ERROR  , Thread-1 (run), runner.py:586, [trial: 63, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:21:10,569 DEBUG  , Thread-1 (run), runner.py:267, [trial: 63, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:05:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:05:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:20:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': '1524601b-6a7d-4320-9095-0ab7da90a5d1'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:20:44Z', 'phase': ''}}}
2024-02-23 15:21:10,591 DEBUG  , Thread-1 (run), runner.py:296, [trial: 63, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-svk9r
2024-02-23 15:21:10,839 ERROR  , Thread-1 (run), runner.py:368, [trial: 63, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rnfb8
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e55b0da9-4806-4b1f-b4ce-a955e4a2ad9d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:21:10 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rnfb8\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:21:10,883 DEBUG  , Thread-1 (run), engine.py:207, [trial: 63, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 15:21:10,888 INFO   , Thread-1 (run), engine.py:333, Trial 63 finished, completed in 00:18:02
2024-02-23 15:21:10,888 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 15:21:10,888 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 15:21:10,888 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 15:21:10,888 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 15:21:10,925 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-svk9r
2024-02-23 15:21:24,444 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 15:22:15,991 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 15:22:16,003 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 15:22:22,874 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:28,018 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:28,019 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:28,223 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:33,361 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:33,361 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:33,655 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:38,798 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:38,799 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:38,928 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:44,056 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:44,056 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:44,289 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:49,415 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:49,415 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:49,626 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:54,754 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:54,754 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:22:54,824 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 63, gen: 0] Waiting for all pods to be ready
2024-02-23 15:22:59,971 INFO   , Thread-1 (run), deploy.py:32, [trial: 63, gen: 0] Operator ready
2024-02-23 15:22:59,971 INFO   , Thread-1 (run), deploy.py:36, [trial: 63, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:23:20,034 WARNING, Thread-1 (run), object.py:155, [trial: 64, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 15:23:20,034 WARNING, Thread-1 (run), object.py:155, [trial: 64, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 15:23:20,035 WARNING, Thread-1 (run), object.py:155, [trial: 64, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 15:23:20,036 DEBUG  , Thread-1 (run), engine.py:652, [trial: 64, gen: 0] Run and check
2024-02-23 15:23:20,182 DEBUG  , Thread-1 (run), runner.py:123, [trial: 64, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 15:23:20,182 DEBUG  , Thread-1 (run), runner.py:124, [trial: 64, gen: 0] STDERR: 
2024-02-23 15:23:20,182 INFO   , Thread-1 (run), runner.py:437, [trial: 64, gen: 0] Waiting for system to converge... 
2024-02-23 15:26:23,212 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:27:23,318 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:28:23,368 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:29:26,015 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:30:26,123 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:31:20,212 ERROR  , Thread-1 (run), runner.py:586, [trial: 64, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:31:20,480 DEBUG  , Thread-1 (run), runner.py:267, [trial: 64, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:23:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:23:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:30:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': '87b33f6e-1133-4a11-8dfe-06c2f3e6b7ee'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:30:55Z', 'phase': ''}}}
2024-02-23 15:31:20,501 DEBUG  , Thread-1 (run), runner.py:296, [trial: 64, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lw2nn
2024-02-23 15:31:20,723 ERROR  , Thread-1 (run), runner.py:368, [trial: 64, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-m2247
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9cdbe65c-8566-4c0b-98d2-483890851eae', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:31:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-m2247\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:31:20,759 INFO   , Thread-1 (run), result.py:170, [trial: 64, gen: 0] No stderr, continue
2024-02-23 15:31:20,901 ERROR  , Thread-1 (run), health.py:155, [trial: 64, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 15:31:20,926 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,926 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line time="2024-02-23T22:22:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,926 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line time="2024-02-23T22:22:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 22:22:55.762449727 +0000 UTC m=+0.011489296]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,926 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line time="2024-02-23T22:22:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,927 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line time="2024-02-23T22:22:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,927 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line time="2024-02-23T22:22:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:20,982 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 64, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:31:21,142 INFO   , Thread-1 (run), consistency.py:496, [trial: 64, gen: 0] All input deltas are matched
2024-02-23 15:31:21,145 INFO   , Thread-1 (run), engine.py:554, [trial: 64, gen: 0] Error result, running recovery
2024-02-23 15:31:21,145 DEBUG  , Thread-1 (run), engine.py:698, [trial: 64, gen: 0] Running recovery
2024-02-23 15:31:21,961 DEBUG  , Thread-1 (run), runner.py:123, [trial: 64, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 15:31:21,961 DEBUG  , Thread-1 (run), runner.py:124, [trial: 64, gen: 0] STDERR: 
2024-02-23 15:31:21,961 INFO   , Thread-1 (run), runner.py:437, [trial: 64, gen: 0] Waiting for system to converge... 
2024-02-23 15:32:22,128 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:33:22,217 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:34:26,003 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:35:26,071 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:36:26,177 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:37:26,275 INFO   , Thread-1 (run), runner.py:508, [trial: 64, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:39:21,971 ERROR  , Thread-1 (run), runner.py:586, [trial: 64, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:39:22,270 DEBUG  , Thread-1 (run), runner.py:267, [trial: 64, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:23:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:23:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:38:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': '87b33f6e-1133-4a11-8dfe-06c2f3e6b7ee'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:38:55Z', 'phase': ''}}}
2024-02-23 15:39:22,291 DEBUG  , Thread-1 (run), runner.py:296, [trial: 64, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lw2nn
2024-02-23 15:39:22,546 ERROR  , Thread-1 (run), runner.py:368, [trial: 64, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-m2247
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b22296a2-6c0d-49cd-8761-dea0739d107b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:39:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-m2247\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:39:22,608 DEBUG  , Thread-1 (run), engine.py:207, [trial: 64, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 15:39:22,612 INFO   , Thread-1 (run), engine.py:333, Trial 64 finished, completed in 00:18:01
2024-02-23 15:39:22,612 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 15:39:22,612 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 15:39:22,612 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 15:39:22,612 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 15:39:22,650 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-lw2nn
2024-02-23 15:39:36,254 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 15:40:29,593 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 15:40:29,619 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 15:40:35,616 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:40:40,758 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:40:40,758 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:40:41,019 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:40:46,139 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:40:46,139 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:40:46,459 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:40:51,600 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:40:51,600 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:40:51,788 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:40:57,036 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:40:57,036 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:40:57,285 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:41:02,414 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:41:02,414 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:41:02,588 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:41:07,733 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:41:07,733 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:41:07,810 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 64, gen: 0] Waiting for all pods to be ready
2024-02-23 15:41:12,949 INFO   , Thread-1 (run), deploy.py:32, [trial: 64, gen: 0] Operator ready
2024-02-23 15:41:12,949 INFO   , Thread-1 (run), deploy.py:36, [trial: 64, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:41:33,025 WARNING, Thread-1 (run), object.py:155, [trial: 65, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 15:41:33,025 WARNING, Thread-1 (run), object.py:155, [trial: 65, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 15:41:33,026 WARNING, Thread-1 (run), object.py:155, [trial: 65, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 15:41:33,027 DEBUG  , Thread-1 (run), engine.py:652, [trial: 65, gen: 0] Run and check
2024-02-23 15:41:33,195 DEBUG  , Thread-1 (run), runner.py:123, [trial: 65, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 15:41:33,195 DEBUG  , Thread-1 (run), runner.py:124, [trial: 65, gen: 0] STDERR: 
2024-02-23 15:41:33,196 INFO   , Thread-1 (run), runner.py:437, [trial: 65, gen: 0] Waiting for system to converge... 
2024-02-23 15:44:33,492 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:45:33,562 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:46:33,630 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:47:39,029 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:48:39,139 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:49:33,224 ERROR  , Thread-1 (run), runner.py:586, [trial: 65, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:49:33,499 DEBUG  , Thread-1 (run), runner.py:267, [trial: 65, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:41:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:41:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:49:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1871', 'uid': '69fc8ecb-ef8c-4f36-a01c-d4790de7b8b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:49:09Z', 'phase': ''}}}
2024-02-23 15:49:33,521 DEBUG  , Thread-1 (run), runner.py:296, [trial: 65, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vr5ks
2024-02-23 15:49:33,757 ERROR  , Thread-1 (run), runner.py:368, [trial: 65, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dn7w5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3785d102-9423-4acf-bcdd-7d4df105ff07', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:49:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dn7w5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:49:33,806 INFO   , Thread-1 (run), result.py:170, [trial: 65, gen: 0] No stderr, continue
2024-02-23 15:49:33,843 ERROR  , Thread-1 (run), health.py:155, [trial: 65, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 15:49:33,870 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,870 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line time="2024-02-23T22:41:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,870 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line time="2024-02-23T22:41:08Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 22:41:08.781316796 +0000 UTC m=+0.021947063]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,870 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line time="2024-02-23T22:41:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,870 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line time="2024-02-23T22:41:08Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,871 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line time="2024-02-23T22:41:08Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:33,936 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 65, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 15:49:34,158 INFO   , Thread-1 (run), consistency.py:496, [trial: 65, gen: 0] All input deltas are matched
2024-02-23 15:49:34,161 INFO   , Thread-1 (run), engine.py:554, [trial: 65, gen: 0] Error result, running recovery
2024-02-23 15:49:34,161 DEBUG  , Thread-1 (run), engine.py:698, [trial: 65, gen: 0] Running recovery
2024-02-23 15:49:34,938 DEBUG  , Thread-1 (run), runner.py:123, [trial: 65, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 15:49:34,939 DEBUG  , Thread-1 (run), runner.py:124, [trial: 65, gen: 0] STDERR: 
2024-02-23 15:49:34,939 INFO   , Thread-1 (run), runner.py:437, [trial: 65, gen: 0] Waiting for system to converge... 
2024-02-23 15:50:35,118 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:51:35,227 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:52:39,040 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:53:39,147 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:54:39,257 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:55:39,362 INFO   , Thread-1 (run), runner.py:508, [trial: 65, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 15:57:34,949 ERROR  , Thread-1 (run), runner.py:586, [trial: 65, gen: 0] System failed to converge within 480 seconds
2024-02-23 15:57:35,245 DEBUG  , Thread-1 (run), runner.py:267, [trial: 65, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:41:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:41:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T22:57:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2862', 'uid': '69fc8ecb-ef8c-4f36-a01c-d4790de7b8b7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T22:57:09Z', 'phase': ''}}}
2024-02-23 15:57:35,266 DEBUG  , Thread-1 (run), runner.py:296, [trial: 65, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vr5ks
2024-02-23 15:57:35,648 ERROR  , Thread-1 (run), runner.py:368, [trial: 65, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dn7w5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8c3888b1-0e8a-4357-8e66-992ef27518be', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 22:57:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dn7w5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 15:57:35,680 DEBUG  , Thread-1 (run), engine.py:207, [trial: 65, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 15:57:35,683 INFO   , Thread-1 (run), engine.py:333, Trial 65 finished, completed in 00:18:02
2024-02-23 15:57:35,683 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 15:57:35,683 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 15:57:35,684 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 15:57:35,684 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 15:57:35,724 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-vr5ks
2024-02-23 15:57:49,236 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 15:58:40,302 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 15:58:40,316 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 15:58:45,915 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:58:51,059 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:58:51,060 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:58:51,316 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:58:56,451 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:58:56,452 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:58:56,746 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:59:01,887 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:59:01,888 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:59:02,034 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:59:07,173 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:59:07,173 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:59:07,414 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:59:12,557 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:59:12,557 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:59:12,818 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:59:17,947 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:59:17,948 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:59:18,011 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 65, gen: 0] Waiting for all pods to be ready
2024-02-23 15:59:23,127 INFO   , Thread-1 (run), deploy.py:32, [trial: 65, gen: 0] Operator ready
2024-02-23 15:59:23,127 INFO   , Thread-1 (run), deploy.py:36, [trial: 65, gen: 0] All pods took 0 seconds to get ready
2024-02-23 15:59:43,179 WARNING, Thread-1 (run), object.py:155, [trial: 66, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 15:59:43,180 WARNING, Thread-1 (run), object.py:155, [trial: 66, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 15:59:43,180 WARNING, Thread-1 (run), object.py:155, [trial: 66, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 15:59:43,180 DEBUG  , Thread-1 (run), engine.py:652, [trial: 66, gen: 0] Run and check
2024-02-23 15:59:43,328 DEBUG  , Thread-1 (run), runner.py:123, [trial: 66, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 15:59:43,328 DEBUG  , Thread-1 (run), runner.py:124, [trial: 66, gen: 0] STDERR: 
2024-02-23 15:59:43,328 INFO   , Thread-1 (run), runner.py:437, [trial: 66, gen: 0] Waiting for system to converge... 
2024-02-23 16:02:49,254 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:03:49,314 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:05:52,020 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:06:52,127 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:07:43,373 ERROR  , Thread-1 (run), runner.py:586, [trial: 66, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:07:43,643 DEBUG  , Thread-1 (run), runner.py:267, [trial: 66, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:59:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:59:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:07:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': '18a39426-b78d-4ab8-9efa-9ef327be6461'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:07:19Z', 'phase': ''}}}
2024-02-23 16:07:43,664 DEBUG  , Thread-1 (run), runner.py:296, [trial: 66, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4hp8s
2024-02-23 16:07:43,880 ERROR  , Thread-1 (run), runner.py:368, [trial: 66, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cb5tq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7fd2465c-d608-4d22-9075-bab851ab7bd0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:07:43 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cb5tq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:07:43,913 INFO   , Thread-1 (run), result.py:170, [trial: 66, gen: 0] No stderr, continue
2024-02-23 16:07:43,948 ERROR  , Thread-1 (run), health.py:155, [trial: 66, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 16:07:44,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line time="2024-02-23T22:59:18Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line time="2024-02-23T22:59:18Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 22:59:18.966124469 +0000 UTC m=+0.016663802]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line time="2024-02-23T22:59:18Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,087 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line time="2024-02-23T22:59:18Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,087 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line time="2024-02-23T22:59:18Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,163 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 66, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:07:44,332 INFO   , Thread-1 (run), consistency.py:496, [trial: 66, gen: 0] All input deltas are matched
2024-02-23 16:07:44,335 INFO   , Thread-1 (run), engine.py:554, [trial: 66, gen: 0] Error result, running recovery
2024-02-23 16:07:44,335 DEBUG  , Thread-1 (run), engine.py:698, [trial: 66, gen: 0] Running recovery
2024-02-23 16:07:45,158 DEBUG  , Thread-1 (run), runner.py:123, [trial: 66, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 16:07:45,158 DEBUG  , Thread-1 (run), runner.py:124, [trial: 66, gen: 0] STDERR: 
2024-02-23 16:07:45,158 INFO   , Thread-1 (run), runner.py:437, [trial: 66, gen: 0] Waiting for system to converge... 
2024-02-23 16:08:45,333 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:09:45,418 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:10:50,954 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:11:51,063 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:12:51,146 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:13:51,254 INFO   , Thread-1 (run), runner.py:508, [trial: 66, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:15:45,169 ERROR  , Thread-1 (run), runner.py:586, [trial: 66, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:15:45,477 DEBUG  , Thread-1 (run), runner.py:267, [trial: 66, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T22:59:43Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T22:59:43Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:15:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': '18a39426-b78d-4ab8-9efa-9ef327be6461'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:15:19Z', 'phase': ''}}}
2024-02-23 16:15:45,499 DEBUG  , Thread-1 (run), runner.py:296, [trial: 66, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4hp8s
2024-02-23 16:15:45,746 ERROR  , Thread-1 (run), runner.py:368, [trial: 66, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cb5tq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd0fc5158-aae0-4b4c-909b-d7482ec52fff', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:15:45 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cb5tq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:15:45,789 DEBUG  , Thread-1 (run), engine.py:207, [trial: 66, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 16:15:45,793 INFO   , Thread-1 (run), engine.py:333, Trial 66 finished, completed in 00:18:00
2024-02-23 16:15:45,794 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 16:15:45,794 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 16:15:45,794 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 16:15:45,794 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 16:15:45,833 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4hp8s
2024-02-23 16:15:59,580 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 16:16:52,556 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 16:16:52,597 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 16:16:58,982 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:04,110 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:04,110 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:04,368 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:09,505 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:09,505 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:09,773 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:14,923 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:14,923 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:15,048 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:20,170 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:20,170 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:20,382 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:25,521 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:25,521 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:25,715 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:30,856 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:30,856 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:30,933 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 66, gen: 0] Waiting for all pods to be ready
2024-02-23 16:17:36,071 INFO   , Thread-1 (run), deploy.py:32, [trial: 66, gen: 0] Operator ready
2024-02-23 16:17:36,071 INFO   , Thread-1 (run), deploy.py:36, [trial: 66, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:17:56,123 WARNING, Thread-1 (run), object.py:155, [trial: 67, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 16:17:56,124 WARNING, Thread-1 (run), object.py:155, [trial: 67, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 16:17:56,124 WARNING, Thread-1 (run), object.py:155, [trial: 67, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 16:17:56,124 DEBUG  , Thread-1 (run), engine.py:652, [trial: 67, gen: 0] Run and check
2024-02-23 16:17:56,266 DEBUG  , Thread-1 (run), runner.py:123, [trial: 67, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 16:17:56,266 DEBUG  , Thread-1 (run), runner.py:124, [trial: 67, gen: 0] STDERR: 
2024-02-23 16:17:56,266 INFO   , Thread-1 (run), runner.py:437, [trial: 67, gen: 0] Waiting for system to converge... 
2024-02-23 16:20:48,968 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:21:49,083 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:22:49,187 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:24:05,908 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:25:06,014 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:25:56,295 ERROR  , Thread-1 (run), runner.py:586, [trial: 67, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:25:56,555 DEBUG  , Thread-1 (run), runner.py:267, [trial: 67, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:17:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:17:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:25:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1867', 'uid': '3c3df488-83cd-46e6-8c0c-526bf4bc4b00'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:25:32Z', 'phase': ''}}}
2024-02-23 16:25:56,576 DEBUG  , Thread-1 (run), runner.py:296, [trial: 67, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vqn8l
2024-02-23 16:25:56,816 ERROR  , Thread-1 (run), runner.py:368, [trial: 67, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mczfq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7abb61be-974c-42ec-9324-6dafbd81f416', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:25:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mczfq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:25:56,866 INFO   , Thread-1 (run), result.py:170, [trial: 67, gen: 0] No stderr, continue
2024-02-23 16:25:57,014 ERROR  , Thread-1 (run), health.py:155, [trial: 67, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 16:25:57,037 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,038 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line time="2024-02-23T23:17:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,038 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line time="2024-02-23T23:17:31Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 23:17:31.856692608 +0000 UTC m=+0.010062270]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,038 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line time="2024-02-23T23:17:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,038 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line time="2024-02-23T23:17:31Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,038 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line time="2024-02-23T23:17:31Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,105 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 67, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:25:57,261 INFO   , Thread-1 (run), consistency.py:496, [trial: 67, gen: 0] All input deltas are matched
2024-02-23 16:25:57,264 INFO   , Thread-1 (run), engine.py:554, [trial: 67, gen: 0] Error result, running recovery
2024-02-23 16:25:57,264 DEBUG  , Thread-1 (run), engine.py:698, [trial: 67, gen: 0] Running recovery
2024-02-23 16:25:58,068 DEBUG  , Thread-1 (run), runner.py:123, [trial: 67, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 16:25:58,068 DEBUG  , Thread-1 (run), runner.py:124, [trial: 67, gen: 0] STDERR: 
2024-02-23 16:25:58,068 INFO   , Thread-1 (run), runner.py:437, [trial: 67, gen: 0] Waiting for system to converge... 
2024-02-23 16:26:58,235 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:27:58,347 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:29:02,095 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:30:02,201 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:31:02,306 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:32:02,415 INFO   , Thread-1 (run), runner.py:508, [trial: 67, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:33:58,076 ERROR  , Thread-1 (run), runner.py:586, [trial: 67, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:33:58,356 DEBUG  , Thread-1 (run), runner.py:267, [trial: 67, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:17:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:17:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:33:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2872', 'uid': '3c3df488-83cd-46e6-8c0c-526bf4bc4b00'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:33:32Z', 'phase': ''}}}
2024-02-23 16:33:58,378 DEBUG  , Thread-1 (run), runner.py:296, [trial: 67, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vqn8l
2024-02-23 16:33:58,659 ERROR  , Thread-1 (run), runner.py:368, [trial: 67, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mczfq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8e042d2b-81ca-408f-9234-331a7fd4261e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:33:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mczfq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:33:58,704 DEBUG  , Thread-1 (run), engine.py:207, [trial: 67, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 16:33:58,708 INFO   , Thread-1 (run), engine.py:333, Trial 67 finished, completed in 00:18:02
2024-02-23 16:33:58,708 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 16:33:58,708 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 16:33:58,708 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 16:33:58,708 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 16:33:58,734 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-vqn8l
2024-02-23 16:34:12,277 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 16:35:01,288 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 16:35:01,318 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 16:35:08,175 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:13,322 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:13,322 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:13,567 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:18,705 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:18,705 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:18,971 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:24,097 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:24,097 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:24,230 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:29,493 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:29,493 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:29,698 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:34,832 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:34,833 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:35,006 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:40,147 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:40,147 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:35:40,216 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 67, gen: 0] Waiting for all pods to be ready
2024-02-23 16:35:45,359 INFO   , Thread-1 (run), deploy.py:32, [trial: 67, gen: 0] Operator ready
2024-02-23 16:35:45,360 INFO   , Thread-1 (run), deploy.py:36, [trial: 67, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:36:05,441 WARNING, Thread-1 (run), object.py:155, [trial: 68, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 16:36:05,441 WARNING, Thread-1 (run), object.py:155, [trial: 68, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 16:36:05,442 WARNING, Thread-1 (run), object.py:155, [trial: 68, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 16:36:05,443 DEBUG  , Thread-1 (run), engine.py:652, [trial: 68, gen: 0] Run and check
2024-02-23 16:36:05,598 DEBUG  , Thread-1 (run), runner.py:123, [trial: 68, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 16:36:05,598 DEBUG  , Thread-1 (run), runner.py:124, [trial: 68, gen: 0] STDERR: 
2024-02-23 16:36:05,599 INFO   , Thread-1 (run), runner.py:437, [trial: 68, gen: 0] Waiting for system to converge... 
2024-02-23 16:39:11,514 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:40:11,623 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:42:17,479 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:43:17,549 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:44:05,627 ERROR  , Thread-1 (run), runner.py:586, [trial: 68, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:44:05,896 DEBUG  , Thread-1 (run), runner.py:267, [trial: 68, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:36:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:36:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:43:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1798', 'uid': 'd4169957-8880-4821-85b8-63ed04919acc'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:43:41Z', 'phase': ''}}}
2024-02-23 16:44:05,918 DEBUG  , Thread-1 (run), runner.py:296, [trial: 68, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4jtwb
2024-02-23 16:44:06,138 ERROR  , Thread-1 (run), runner.py:368, [trial: 68, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7wflh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd4dc0cb7-1a87-42bd-a70d-8a31d5e22e69', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:44:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7wflh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:44:06,188 INFO   , Thread-1 (run), result.py:170, [trial: 68, gen: 0] No stderr, continue
2024-02-23 16:44:06,227 ERROR  , Thread-1 (run), health.py:155, [trial: 68, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 16:44:06,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line time="2024-02-23T23:35:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line time="2024-02-23T23:35:41Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 23:35:41.118953879 +0000 UTC m=+0.010145890]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line time="2024-02-23T23:35:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line time="2024-02-23T23:35:41Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,254 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line time="2024-02-23T23:35:41Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,305 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 68, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 16:44:06,462 INFO   , Thread-1 (run), consistency.py:496, [trial: 68, gen: 0] All input deltas are matched
2024-02-23 16:44:06,465 INFO   , Thread-1 (run), engine.py:554, [trial: 68, gen: 0] Error result, running recovery
2024-02-23 16:44:06,465 DEBUG  , Thread-1 (run), engine.py:698, [trial: 68, gen: 0] Running recovery
2024-02-23 16:44:07,295 DEBUG  , Thread-1 (run), runner.py:123, [trial: 68, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 16:44:07,296 DEBUG  , Thread-1 (run), runner.py:124, [trial: 68, gen: 0] STDERR: 
2024-02-23 16:44:07,296 INFO   , Thread-1 (run), runner.py:437, [trial: 68, gen: 0] Waiting for system to converge... 
2024-02-23 16:45:07,473 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:46:07,584 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:47:17,444 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:48:17,530 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:49:17,639 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:50:17,739 INFO   , Thread-1 (run), runner.py:508, [trial: 68, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:52:07,306 ERROR  , Thread-1 (run), runner.py:586, [trial: 68, gen: 0] System failed to converge within 480 seconds
2024-02-23 16:52:07,592 DEBUG  , Thread-1 (run), runner.py:267, [trial: 68, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:36:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:36:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-23T23:51:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2718', 'uid': 'd4169957-8880-4821-85b8-63ed04919acc'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-23T23:51:41Z', 'phase': ''}}}
2024-02-23 16:52:07,614 DEBUG  , Thread-1 (run), runner.py:296, [trial: 68, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4jtwb
2024-02-23 16:52:07,863 ERROR  , Thread-1 (run), runner.py:368, [trial: 68, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7wflh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '70d23d05-11d8-46a3-a6ce-2987d62f7946', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Fri, 23 Feb 2024 23:52:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7wflh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 16:52:07,923 DEBUG  , Thread-1 (run), engine.py:207, [trial: 68, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 16:52:07,928 INFO   , Thread-1 (run), engine.py:333, Trial 68 finished, completed in 00:17:59
2024-02-23 16:52:07,928 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 16:52:07,928 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 16:52:07,928 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 16:52:07,928 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 16:52:07,965 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4jtwb
2024-02-23 16:52:21,561 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 16:53:18,576 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 16:53:18,586 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 16:53:23,380 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:28,633 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:28,633 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:28,863 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:33,996 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:33,996 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:34,306 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:39,437 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:39,438 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:39,594 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:44,729 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:44,730 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:44,988 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:50,124 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:50,125 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:50,306 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:53:55,447 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:53:55,448 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:53:55,522 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 68, gen: 0] Waiting for all pods to be ready
2024-02-23 16:54:00,644 INFO   , Thread-1 (run), deploy.py:32, [trial: 68, gen: 0] Operator ready
2024-02-23 16:54:00,644 INFO   , Thread-1 (run), deploy.py:36, [trial: 68, gen: 0] All pods took 0 seconds to get ready
2024-02-23 16:54:20,695 WARNING, Thread-1 (run), object.py:155, [trial: 69, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 16:54:20,695 WARNING, Thread-1 (run), object.py:155, [trial: 69, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 16:54:20,695 WARNING, Thread-1 (run), object.py:155, [trial: 69, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 16:54:20,696 DEBUG  , Thread-1 (run), engine.py:652, [trial: 69, gen: 0] Run and check
2024-02-23 16:54:20,844 DEBUG  , Thread-1 (run), runner.py:123, [trial: 69, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 16:54:20,845 DEBUG  , Thread-1 (run), runner.py:124, [trial: 69, gen: 0] STDERR: 
2024-02-23 16:54:20,845 INFO   , Thread-1 (run), runner.py:437, [trial: 69, gen: 0] Waiting for system to converge... 
2024-02-23 16:57:28,428 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 16:58:28,512 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:00:26,867 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:01:26,953 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:02:20,876 ERROR  , Thread-1 (run), runner.py:586, [trial: 69, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:02:21,149 DEBUG  , Thread-1 (run), runner.py:267, [trial: 69, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:54:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:54:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:01:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': 'a0e57736-96a6-41c4-9bd7-d019166b19af'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:01:56Z', 'phase': ''}}}
2024-02-23 17:02:21,175 DEBUG  , Thread-1 (run), runner.py:296, [trial: 69, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7npg2
2024-02-23 17:02:21,402 ERROR  , Thread-1 (run), runner.py:368, [trial: 69, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vx6tj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2e8278b7-7f60-4bb0-973f-6e37c920bccf', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:02:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vx6tj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:02:21,438 INFO   , Thread-1 (run), result.py:170, [trial: 69, gen: 0] No stderr, continue
2024-02-23 17:02:21,475 ERROR  , Thread-1 (run), health.py:155, [trial: 69, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line time="2024-02-23T23:53:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line time="2024-02-23T23:53:56Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-23 23:53:56.511035577 +0000 UTC m=+0.021993965]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line time="2024-02-23T23:53:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line time="2024-02-23T23:53:56Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,615 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line time="2024-02-23T23:53:56Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,667 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 69, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:02:21,827 INFO   , Thread-1 (run), consistency.py:496, [trial: 69, gen: 0] All input deltas are matched
2024-02-23 17:02:21,829 INFO   , Thread-1 (run), engine.py:554, [trial: 69, gen: 0] Error result, running recovery
2024-02-23 17:02:21,829 DEBUG  , Thread-1 (run), engine.py:698, [trial: 69, gen: 0] Running recovery
2024-02-23 17:02:22,697 DEBUG  , Thread-1 (run), runner.py:123, [trial: 69, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 17:02:22,697 DEBUG  , Thread-1 (run), runner.py:124, [trial: 69, gen: 0] STDERR: 
2024-02-23 17:02:22,698 INFO   , Thread-1 (run), runner.py:437, [trial: 69, gen: 0] Waiting for system to converge... 
2024-02-23 17:03:22,873 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:04:22,979 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:05:28,386 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:06:28,499 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:07:28,574 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:08:28,681 INFO   , Thread-1 (run), runner.py:508, [trial: 69, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:10:22,708 ERROR  , Thread-1 (run), runner.py:586, [trial: 69, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:10:23,001 DEBUG  , Thread-1 (run), runner.py:267, [trial: 69, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-23T23:54:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-23T23:54:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:09:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'a0e57736-96a6-41c4-9bd7-d019166b19af'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:09:56Z', 'phase': ''}}}
2024-02-23 17:10:23,024 DEBUG  , Thread-1 (run), runner.py:296, [trial: 69, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7npg2
2024-02-23 17:10:23,273 ERROR  , Thread-1 (run), runner.py:368, [trial: 69, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vx6tj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'bca56aa6-1c18-4148-917e-6fdff39a05bb', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:10:23 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vx6tj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:10:23,317 DEBUG  , Thread-1 (run), engine.py:207, [trial: 69, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 17:10:23,321 INFO   , Thread-1 (run), engine.py:333, Trial 69 finished, completed in 00:18:05
2024-02-23 17:10:23,321 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-23 17:10:23,321 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 17:10:23,321 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 17:10:23,322 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 17:10:23,360 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7npg2
2024-02-23 17:10:36,855 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 17:11:29,405 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 17:11:29,415 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 17:11:35,837 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:11:40,981 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:11:40,981 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:11:41,241 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:11:46,379 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:11:46,379 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:11:46,665 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:11:51,805 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:11:51,805 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:11:51,947 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:11:57,095 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:11:57,095 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:11:57,325 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:12:02,464 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:12:02,464 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:12:02,642 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:12:07,784 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:12:07,784 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:12:07,863 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 69, gen: 0] Waiting for all pods to be ready
2024-02-23 17:12:13,002 INFO   , Thread-1 (run), deploy.py:32, [trial: 69, gen: 0] Operator ready
2024-02-23 17:12:13,002 INFO   , Thread-1 (run), deploy.py:36, [trial: 69, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:12:33,055 WARNING, Thread-1 (run), object.py:155, [trial: 70, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 17:12:33,055 WARNING, Thread-1 (run), object.py:155, [trial: 70, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 17:12:33,055 WARNING, Thread-1 (run), object.py:155, [trial: 70, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 17:12:33,056 DEBUG  , Thread-1 (run), engine.py:652, [trial: 70, gen: 0] Run and check
2024-02-23 17:12:33,217 DEBUG  , Thread-1 (run), runner.py:123, [trial: 70, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 17:12:33,217 DEBUG  , Thread-1 (run), runner.py:124, [trial: 70, gen: 0] STDERR: 
2024-02-23 17:12:33,218 INFO   , Thread-1 (run), runner.py:437, [trial: 70, gen: 0] Waiting for system to converge... 
2024-02-23 17:15:41,004 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:16:41,114 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:18:39,168 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:19:39,251 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:20:33,244 ERROR  , Thread-1 (run), runner.py:586, [trial: 70, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:20:33,514 DEBUG  , Thread-1 (run), runner.py:267, [trial: 70, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:12:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:12:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:20:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1798', 'uid': '5cd207fd-d161-40b2-b0f1-2b36b744ff6b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:20:09Z', 'phase': ''}}}
2024-02-23 17:20:33,536 DEBUG  , Thread-1 (run), runner.py:296, [trial: 70, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-v4qkr
2024-02-23 17:20:33,758 ERROR  , Thread-1 (run), runner.py:368, [trial: 70, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wcjn5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b96ad485-c363-433c-8abc-12d2dc6d8ba6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:20:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wcjn5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:20:33,789 INFO   , Thread-1 (run), result.py:170, [trial: 70, gen: 0] No stderr, continue
2024-02-23 17:20:33,933 ERROR  , Thread-1 (run), health.py:155, [trial: 70, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 17:20:33,957 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:33,958 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line time="2024-02-24T00:12:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:33,958 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line time="2024-02-24T00:12:08Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 00:12:08.89583251 +0000 UTC m=+0.022002881]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:33,958 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line time="2024-02-24T00:12:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:33,958 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line time="2024-02-24T00:12:08Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:33,958 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line time="2024-02-24T00:12:08Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:34,010 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 70, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:20:34,169 INFO   , Thread-1 (run), consistency.py:496, [trial: 70, gen: 0] All input deltas are matched
2024-02-23 17:20:34,171 INFO   , Thread-1 (run), engine.py:554, [trial: 70, gen: 0] Error result, running recovery
2024-02-23 17:20:34,172 DEBUG  , Thread-1 (run), engine.py:698, [trial: 70, gen: 0] Running recovery
2024-02-23 17:20:35,019 DEBUG  , Thread-1 (run), runner.py:123, [trial: 70, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 17:20:35,019 DEBUG  , Thread-1 (run), runner.py:124, [trial: 70, gen: 0] STDERR: 
2024-02-23 17:20:35,020 INFO   , Thread-1 (run), runner.py:437, [trial: 70, gen: 0] Waiting for system to converge... 
2024-02-23 17:21:35,149 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:22:35,258 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:23:43,955 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:24:44,061 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:25:44,169 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:26:44,217 INFO   , Thread-1 (run), runner.py:508, [trial: 70, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:28:35,030 ERROR  , Thread-1 (run), runner.py:586, [trial: 70, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:28:35,337 DEBUG  , Thread-1 (run), runner.py:267, [trial: 70, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:12:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:12:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:28:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2718', 'uid': '5cd207fd-d161-40b2-b0f1-2b36b744ff6b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:28:09Z', 'phase': ''}}}
2024-02-23 17:28:35,358 DEBUG  , Thread-1 (run), runner.py:296, [trial: 70, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-v4qkr
2024-02-23 17:28:35,612 ERROR  , Thread-1 (run), runner.py:368, [trial: 70, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wcjn5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4cb33ca7-129d-42b5-b849-e9a03f918c7f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:28:35 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wcjn5\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 17:28:35,660 DEBUG  , Thread-1 (run), engine.py:207, [trial: 70, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 17:28:35,664 INFO   , Thread-1 (run), engine.py:333, Trial 70 finished, completed in 00:18:02
2024-02-23 17:28:35,664 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 17:28:35,664 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 17:28:35,664 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 17:28:35,664 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 17:28:35,702 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-v4qkr
2024-02-23 17:28:49,587 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 17:29:40,246 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 17:29:40,284 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 17:29:46,944 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:29:52,090 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:29:52,090 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:29:52,302 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:29:57,428 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:29:57,428 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:29:57,720 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:30:02,866 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:30:02,867 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:30:03,000 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:30:08,270 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:30:08,270 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:30:08,535 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:30:13,664 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:30:13,664 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:30:13,875 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:30:19,016 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:30:19,016 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:30:19,089 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 70, gen: 0] Waiting for all pods to be ready
2024-02-23 17:30:24,222 INFO   , Thread-1 (run), deploy.py:32, [trial: 70, gen: 0] Operator ready
2024-02-23 17:30:24,223 INFO   , Thread-1 (run), deploy.py:36, [trial: 70, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:30:44,275 WARNING, Thread-1 (run), object.py:155, [trial: 71, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 17:30:44,275 WARNING, Thread-1 (run), object.py:155, [trial: 71, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 17:30:44,275 WARNING, Thread-1 (run), object.py:155, [trial: 71, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 17:30:44,275 DEBUG  , Thread-1 (run), engine.py:652, [trial: 71, gen: 0] Run and check
2024-02-23 17:30:44,433 DEBUG  , Thread-1 (run), runner.py:123, [trial: 71, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 17:30:44,433 DEBUG  , Thread-1 (run), runner.py:124, [trial: 71, gen: 0] STDERR: 
2024-02-23 17:30:44,433 INFO   , Thread-1 (run), runner.py:437, [trial: 71, gen: 0] Waiting for system to converge... 
2024-02-23 17:33:50,433 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:34:50,526 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:36:53,421 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:37:53,527 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:38:44,468 ERROR  , Thread-1 (run), runner.py:586, [trial: 71, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:38:44,718 DEBUG  , Thread-1 (run), runner.py:267, [trial: 71, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:30:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:30:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:38:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '32b1873c-1ddb-440c-920d-ad0694be6b5d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:38:20Z', 'phase': ''}}}
2024-02-23 17:38:44,741 DEBUG  , Thread-1 (run), runner.py:296, [trial: 71, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jfkpv
2024-02-23 17:38:44,969 ERROR  , Thread-1 (run), runner.py:368, [trial: 71, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zt8tl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a77b4c25-902d-4fbf-9e5b-648a7e6b612b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:38:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zt8tl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:38:45,018 INFO   , Thread-1 (run), result.py:170, [trial: 71, gen: 0] No stderr, continue
2024-02-23 17:38:45,056 ERROR  , Thread-1 (run), health.py:155, [trial: 71, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 17:38:45,082 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,082 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line time="2024-02-24T00:30:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,082 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line time="2024-02-24T00:30:20Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 00:30:20.035475575 +0000 UTC m=+0.011882533]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,083 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line time="2024-02-24T00:30:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,083 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line time="2024-02-24T00:30:20Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,083 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line time="2024-02-24T00:30:20Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,133 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 71, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:38:45,292 INFO   , Thread-1 (run), consistency.py:496, [trial: 71, gen: 0] All input deltas are matched
2024-02-23 17:38:45,295 INFO   , Thread-1 (run), engine.py:554, [trial: 71, gen: 0] Error result, running recovery
2024-02-23 17:38:45,295 DEBUG  , Thread-1 (run), engine.py:698, [trial: 71, gen: 0] Running recovery
2024-02-23 17:38:46,032 DEBUG  , Thread-1 (run), runner.py:123, [trial: 71, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 17:38:46,032 DEBUG  , Thread-1 (run), runner.py:124, [trial: 71, gen: 0] STDERR: 
2024-02-23 17:38:46,032 INFO   , Thread-1 (run), runner.py:437, [trial: 71, gen: 0] Waiting for system to converge... 
2024-02-23 17:39:46,159 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:40:46,238 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:41:53,336 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:42:53,414 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:43:53,489 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:44:53,589 INFO   , Thread-1 (run), runner.py:508, [trial: 71, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:46:46,043 ERROR  , Thread-1 (run), runner.py:586, [trial: 71, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:46:46,330 DEBUG  , Thread-1 (run), runner.py:267, [trial: 71, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:30:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:30:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:46:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '32b1873c-1ddb-440c-920d-ad0694be6b5d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:46:20Z', 'phase': ''}}}
2024-02-23 17:46:46,352 DEBUG  , Thread-1 (run), runner.py:296, [trial: 71, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-jfkpv
2024-02-23 17:46:46,710 ERROR  , Thread-1 (run), runner.py:368, [trial: 71, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zt8tl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8cb973e1-a30d-434d-b6cd-ef0ded828592', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:46:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zt8tl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:46:46,737 DEBUG  , Thread-1 (run), engine.py:207, [trial: 71, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 17:46:46,740 INFO   , Thread-1 (run), engine.py:333, Trial 71 finished, completed in 00:18:00
2024-02-23 17:46:46,740 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 17:46:46,740 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 17:46:46,740 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 17:46:46,740 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 17:46:46,781 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-jfkpv
2024-02-23 17:47:00,540 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 17:47:49,685 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 17:47:49,716 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 17:47:56,990 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:02,136 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:02,136 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:02,374 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:07,501 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:07,501 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:07,838 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:12,991 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:12,991 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:13,169 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:18,308 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:18,308 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:18,548 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:23,674 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:23,674 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:23,860 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:29,012 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:29,012 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:29,077 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 71, gen: 0] Waiting for all pods to be ready
2024-02-23 17:48:34,217 INFO   , Thread-1 (run), deploy.py:32, [trial: 71, gen: 0] Operator ready
2024-02-23 17:48:34,217 INFO   , Thread-1 (run), deploy.py:36, [trial: 71, gen: 0] All pods took 0 seconds to get ready
2024-02-23 17:48:54,267 WARNING, Thread-1 (run), object.py:155, [trial: 72, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 17:48:54,268 WARNING, Thread-1 (run), object.py:155, [trial: 72, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 17:48:54,268 WARNING, Thread-1 (run), object.py:155, [trial: 72, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 17:48:54,269 DEBUG  , Thread-1 (run), engine.py:652, [trial: 72, gen: 0] Run and check
2024-02-23 17:48:54,438 DEBUG  , Thread-1 (run), runner.py:123, [trial: 72, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 17:48:54,438 DEBUG  , Thread-1 (run), runner.py:124, [trial: 72, gen: 0] STDERR: 
2024-02-23 17:48:54,438 INFO   , Thread-1 (run), runner.py:437, [trial: 72, gen: 0] Waiting for system to converge... 
2024-02-23 17:52:00,241 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:53:00,350 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:55:03,645 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:56:03,753 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:56:54,463 ERROR  , Thread-1 (run), runner.py:586, [trial: 72, gen: 0] System failed to converge within 480 seconds
2024-02-23 17:56:54,727 DEBUG  , Thread-1 (run), runner.py:267, [trial: 72, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:48:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:48:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T00:56:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': '7cc21ab1-9cc1-4c38-b8db-899f155ecd09'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T00:56:30Z', 'phase': ''}}}
2024-02-23 17:56:54,749 DEBUG  , Thread-1 (run), runner.py:296, [trial: 72, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6mv62
2024-02-23 17:56:54,964 ERROR  , Thread-1 (run), runner.py:368, [trial: 72, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-gmw58
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1a8e0fa0-12ca-41a3-bb5d-0859aca584a8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 00:56:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-gmw58\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 17:56:54,996 INFO   , Thread-1 (run), result.py:170, [trial: 72, gen: 0] No stderr, continue
2024-02-23 17:56:55,028 ERROR  , Thread-1 (run), health.py:155, [trial: 72, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 17:56:55,165 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,165 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line time="2024-02-24T00:48:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,165 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line time="2024-02-24T00:48:29Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 00:48:29.962629893 +0000 UTC m=+0.009998941]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,165 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line time="2024-02-24T00:48:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,166 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line time="2024-02-24T00:48:29Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,166 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line time="2024-02-24T00:48:29Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,216 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 72, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 17:56:55,373 INFO   , Thread-1 (run), consistency.py:496, [trial: 72, gen: 0] All input deltas are matched
2024-02-23 17:56:55,376 INFO   , Thread-1 (run), engine.py:554, [trial: 72, gen: 0] Error result, running recovery
2024-02-23 17:56:55,376 DEBUG  , Thread-1 (run), engine.py:698, [trial: 72, gen: 0] Running recovery
2024-02-23 17:56:56,252 DEBUG  , Thread-1 (run), runner.py:123, [trial: 72, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 17:56:56,252 DEBUG  , Thread-1 (run), runner.py:124, [trial: 72, gen: 0] STDERR: 
2024-02-23 17:56:56,252 INFO   , Thread-1 (run), runner.py:437, [trial: 72, gen: 0] Waiting for system to converge... 
2024-02-23 17:57:56,427 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 17:58:56,536 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:00:00,187 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:01:00,295 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:02:00,402 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:03:00,490 INFO   , Thread-1 (run), runner.py:508, [trial: 72, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:04:56,262 ERROR  , Thread-1 (run), runner.py:586, [trial: 72, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:04:56,554 DEBUG  , Thread-1 (run), runner.py:267, [trial: 72, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T00:48:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T00:48:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:04:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '7cc21ab1-9cc1-4c38-b8db-899f155ecd09'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:04:30Z', 'phase': ''}}}
2024-02-23 18:04:56,576 DEBUG  , Thread-1 (run), runner.py:296, [trial: 72, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6mv62
2024-02-23 18:04:56,831 ERROR  , Thread-1 (run), runner.py:368, [trial: 72, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-gmw58
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '20d4b72f-7f06-4b8e-9919-b89ca6e49846', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:04:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-gmw58\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:04:56,877 DEBUG  , Thread-1 (run), engine.py:207, [trial: 72, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 18:04:56,881 INFO   , Thread-1 (run), engine.py:333, Trial 72 finished, completed in 00:18:00
2024-02-23 18:04:56,881 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 18:04:56,881 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 18:04:56,881 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 18:04:56,881 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 18:04:56,909 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6mv62
2024-02-23 18:05:10,474 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 18:06:01,869 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 18:06:01,883 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 18:06:08,284 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:13,429 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:13,429 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:13,653 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:18,794 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:18,794 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:19,089 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:24,224 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:24,225 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:24,349 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:29,489 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:29,489 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:29,675 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:34,935 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:34,935 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:35,139 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:40,259 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:40,259 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:06:40,326 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 72, gen: 0] Waiting for all pods to be ready
2024-02-23 18:06:45,472 INFO   , Thread-1 (run), deploy.py:32, [trial: 72, gen: 0] Operator ready
2024-02-23 18:06:45,472 INFO   , Thread-1 (run), deploy.py:36, [trial: 72, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:07:05,522 WARNING, Thread-1 (run), object.py:155, [trial: 73, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 18:07:05,522 WARNING, Thread-1 (run), object.py:155, [trial: 73, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 18:07:05,522 WARNING, Thread-1 (run), object.py:155, [trial: 73, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 18:07:05,523 DEBUG  , Thread-1 (run), engine.py:652, [trial: 73, gen: 0] Run and check
2024-02-23 18:07:05,676 DEBUG  , Thread-1 (run), runner.py:123, [trial: 73, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 18:07:05,676 DEBUG  , Thread-1 (run), runner.py:124, [trial: 73, gen: 0] STDERR: 
2024-02-23 18:07:05,676 INFO   , Thread-1 (run), runner.py:437, [trial: 73, gen: 0] Waiting for system to converge... 
2024-02-23 18:10:11,571 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:11:11,679 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:13:13,943 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:14:14,055 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:15:05,700 ERROR  , Thread-1 (run), runner.py:586, [trial: 73, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:15:05,967 DEBUG  , Thread-1 (run), runner.py:267, [trial: 73, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:07:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:07:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:14:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1792', 'uid': '2f25e003-0c33-4157-9728-05b1ef5ecd51'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:14:41Z', 'phase': ''}}}
2024-02-23 18:15:05,989 DEBUG  , Thread-1 (run), runner.py:296, [trial: 73, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-g4jxc
2024-02-23 18:15:06,206 ERROR  , Thread-1 (run), runner.py:368, [trial: 73, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rkg7v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'eb08227f-2aa8-4570-89d9-b306aef53aef', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:15:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rkg7v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:15:06,252 INFO   , Thread-1 (run), result.py:170, [trial: 73, gen: 0] No stderr, continue
2024-02-23 18:15:06,287 ERROR  , Thread-1 (run), health.py:155, [trial: 73, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line time="2024-02-24T01:06:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line time="2024-02-24T01:06:41Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 01:06:41.292612995 +0000 UTC m=+0.011879613]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line time="2024-02-24T01:06:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line time="2024-02-24T01:06:41Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,313 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line time="2024-02-24T01:06:41Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,372 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 73, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:15:06,551 INFO   , Thread-1 (run), consistency.py:496, [trial: 73, gen: 0] All input deltas are matched
2024-02-23 18:15:06,554 INFO   , Thread-1 (run), engine.py:554, [trial: 73, gen: 0] Error result, running recovery
2024-02-23 18:15:06,554 DEBUG  , Thread-1 (run), engine.py:698, [trial: 73, gen: 0] Running recovery
2024-02-23 18:15:07,354 DEBUG  , Thread-1 (run), runner.py:123, [trial: 73, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 18:15:07,355 DEBUG  , Thread-1 (run), runner.py:124, [trial: 73, gen: 0] STDERR: 
2024-02-23 18:15:07,355 INFO   , Thread-1 (run), runner.py:437, [trial: 73, gen: 0] Waiting for system to converge... 
2024-02-23 18:16:07,534 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:17:07,632 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:18:11,544 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:19:11,650 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:20:11,718 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:21:11,798 INFO   , Thread-1 (run), runner.py:508, [trial: 73, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:23:07,367 ERROR  , Thread-1 (run), runner.py:586, [trial: 73, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:23:07,645 DEBUG  , Thread-1 (run), runner.py:267, [trial: 73, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:07:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:07:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:22:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2712', 'uid': '2f25e003-0c33-4157-9728-05b1ef5ecd51'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:22:41Z', 'phase': ''}}}
2024-02-23 18:23:07,667 DEBUG  , Thread-1 (run), runner.py:296, [trial: 73, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-g4jxc
2024-02-23 18:23:07,916 ERROR  , Thread-1 (run), runner.py:368, [trial: 73, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rkg7v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '12bd4b68-7ab5-4343-b8ee-6f90a530de38', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:23:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rkg7v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:23:07,965 DEBUG  , Thread-1 (run), engine.py:207, [trial: 73, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 18:23:07,969 INFO   , Thread-1 (run), engine.py:333, Trial 73 finished, completed in 00:18:01
2024-02-23 18:23:07,969 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 18:23:07,969 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 18:23:07,969 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 18:23:07,969 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 18:23:08,006 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-g4jxc
2024-02-23 18:23:21,266 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 18:24:09,344 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 18:24:09,372 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 18:24:16,540 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:21,819 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:21,819 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:22,090 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:27,223 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:27,223 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:27,485 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:32,631 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:32,632 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:32,760 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:37,863 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:37,863 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:38,146 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:43,279 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:43,280 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:43,513 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:48,656 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:48,656 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:24:48,729 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 73, gen: 0] Waiting for all pods to be ready
2024-02-23 18:24:53,869 INFO   , Thread-1 (run), deploy.py:32, [trial: 73, gen: 0] Operator ready
2024-02-23 18:24:53,870 INFO   , Thread-1 (run), deploy.py:36, [trial: 73, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:25:13,905 WARNING, Thread-1 (run), object.py:155, [trial: 74, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 18:25:13,905 WARNING, Thread-1 (run), object.py:155, [trial: 74, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 18:25:13,905 WARNING, Thread-1 (run), object.py:155, [trial: 74, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 18:25:13,905 DEBUG  , Thread-1 (run), engine.py:652, [trial: 74, gen: 0] Run and check
2024-02-23 18:25:14,051 DEBUG  , Thread-1 (run), runner.py:123, [trial: 74, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 18:25:14,051 DEBUG  , Thread-1 (run), runner.py:124, [trial: 74, gen: 0] STDERR: 
2024-02-23 18:25:14,051 INFO   , Thread-1 (run), runner.py:437, [trial: 74, gen: 0] Waiting for system to converge... 
2024-02-23 18:28:07,962 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:29:08,071 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:30:08,179 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:31:19,913 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:32:19,990 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:33:14,079 ERROR  , Thread-1 (run), runner.py:586, [trial: 74, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:33:14,350 DEBUG  , Thread-1 (run), runner.py:267, [trial: 74, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:25:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:25:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:32:49Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1819', 'uid': '1c5dabb8-3972-4c37-9fa1-12a67a7beefe'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:32:49Z', 'phase': ''}}}
2024-02-23 18:33:14,371 DEBUG  , Thread-1 (run), runner.py:296, [trial: 74, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2zpz4
2024-02-23 18:33:14,597 ERROR  , Thread-1 (run), runner.py:368, [trial: 74, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vbkch
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '026642d6-b1e1-4964-ae3d-8391f82dbeca', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:33:14 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vbkch\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:33:14,634 INFO   , Thread-1 (run), result.py:170, [trial: 74, gen: 0] No stderr, continue
2024-02-23 18:33:14,667 ERROR  , Thread-1 (run), health.py:155, [trial: 74, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 18:33:14,809 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,809 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line time="2024-02-24T01:24:49Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,810 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line time="2024-02-24T01:24:49Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 01:24:49.670950684 +0000 UTC m=+0.011536283]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,810 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line time="2024-02-24T01:24:49Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,810 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line time="2024-02-24T01:24:49Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,810 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line time="2024-02-24T01:24:49Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:14,864 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 74, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:33:15,024 INFO   , Thread-1 (run), consistency.py:496, [trial: 74, gen: 0] All input deltas are matched
2024-02-23 18:33:15,027 INFO   , Thread-1 (run), engine.py:554, [trial: 74, gen: 0] Error result, running recovery
2024-02-23 18:33:15,027 DEBUG  , Thread-1 (run), engine.py:698, [trial: 74, gen: 0] Running recovery
2024-02-23 18:33:15,875 DEBUG  , Thread-1 (run), runner.py:123, [trial: 74, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 18:33:15,876 DEBUG  , Thread-1 (run), runner.py:124, [trial: 74, gen: 0] STDERR: 
2024-02-23 18:33:15,876 INFO   , Thread-1 (run), runner.py:437, [trial: 74, gen: 0] Waiting for system to converge... 
2024-02-23 18:34:16,060 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:35:16,170 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:36:23,922 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:37:23,991 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:38:24,098 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:39:24,205 INFO   , Thread-1 (run), runner.py:508, [trial: 74, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:41:15,886 ERROR  , Thread-1 (run), runner.py:586, [trial: 74, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:41:16,194 DEBUG  , Thread-1 (run), runner.py:267, [trial: 74, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:25:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:25:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:40:49Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2739', 'uid': '1c5dabb8-3972-4c37-9fa1-12a67a7beefe'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:40:49Z', 'phase': ''}}}
2024-02-23 18:41:16,216 DEBUG  , Thread-1 (run), runner.py:296, [trial: 74, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2zpz4
2024-02-23 18:41:16,479 ERROR  , Thread-1 (run), runner.py:368, [trial: 74, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vbkch
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1e8716af-cf7f-4fd3-907e-93f0edf87a60', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:41:16 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vbkch\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:41:16,538 DEBUG  , Thread-1 (run), engine.py:207, [trial: 74, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 18:41:16,543 INFO   , Thread-1 (run), engine.py:333, Trial 74 finished, completed in 00:17:58
2024-02-23 18:41:16,543 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 58
2024-02-23 18:41:16,543 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 18:41:16,543 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 18:41:16,543 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 18:41:16,581 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-2zpz4
2024-02-23 18:41:30,253 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 18:42:19,186 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 18:42:19,203 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 18:42:26,055 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:31,200 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:31,200 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:31,440 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:36,581 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:36,581 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:36,865 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:42,004 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:42,004 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:42,148 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:47,287 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:47,287 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:47,493 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:52,624 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:52,624 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:52,824 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:42:57,970 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:42:57,970 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:42:58,038 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 74, gen: 0] Waiting for all pods to be ready
2024-02-23 18:43:03,196 INFO   , Thread-1 (run), deploy.py:32, [trial: 74, gen: 0] Operator ready
2024-02-23 18:43:03,196 INFO   , Thread-1 (run), deploy.py:36, [trial: 74, gen: 0] All pods took 0 seconds to get ready
2024-02-23 18:43:23,248 WARNING, Thread-1 (run), object.py:155, [trial: 75, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 18:43:23,249 WARNING, Thread-1 (run), object.py:155, [trial: 75, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 18:43:23,249 WARNING, Thread-1 (run), object.py:155, [trial: 75, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 18:43:23,249 DEBUG  , Thread-1 (run), engine.py:652, [trial: 75, gen: 0] Run and check
2024-02-23 18:43:23,420 DEBUG  , Thread-1 (run), runner.py:123, [trial: 75, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 18:43:23,420 DEBUG  , Thread-1 (run), runner.py:124, [trial: 75, gen: 0] STDERR: 
2024-02-23 18:43:23,420 INFO   , Thread-1 (run), runner.py:437, [trial: 75, gen: 0] Waiting for system to converge... 
2024-02-23 18:46:29,222 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:47:29,280 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:49:30,122 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:50:30,230 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:51:23,453 ERROR  , Thread-1 (run), runner.py:586, [trial: 75, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:51:23,719 DEBUG  , Thread-1 (run), runner.py:267, [trial: 75, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:43:23Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:43:23Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:50:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1820', 'uid': '3b4ef386-2d5b-4580-9213-17b5d12142c2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:50:59Z', 'phase': ''}}}
2024-02-23 18:51:23,741 DEBUG  , Thread-1 (run), runner.py:296, [trial: 75, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wwr54
2024-02-23 18:51:23,970 ERROR  , Thread-1 (run), runner.py:368, [trial: 75, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rlhpb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '776de89d-2e99-4c41-b4fa-db2277844ecb', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:51:23 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rlhpb\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 18:51:24,008 INFO   , Thread-1 (run), result.py:170, [trial: 75, gen: 0] No stderr, continue
2024-02-23 18:51:24,160 ERROR  , Thread-1 (run), health.py:155, [trial: 75, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 18:51:24,184 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,184 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line time="2024-02-24T01:42:58Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,184 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line time="2024-02-24T01:42:58Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 01:42:58.954510705 +0000 UTC m=+0.012336246]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,184 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line time="2024-02-24T01:42:58Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,184 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line time="2024-02-24T01:42:58Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,185 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line time="2024-02-24T01:42:58Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,234 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 75, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 18:51:24,391 INFO   , Thread-1 (run), consistency.py:496, [trial: 75, gen: 0] All input deltas are matched
2024-02-23 18:51:24,394 INFO   , Thread-1 (run), engine.py:554, [trial: 75, gen: 0] Error result, running recovery
2024-02-23 18:51:24,394 DEBUG  , Thread-1 (run), engine.py:698, [trial: 75, gen: 0] Running recovery
2024-02-23 18:51:25,199 DEBUG  , Thread-1 (run), runner.py:123, [trial: 75, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 18:51:25,199 DEBUG  , Thread-1 (run), runner.py:124, [trial: 75, gen: 0] STDERR: 
2024-02-23 18:51:25,199 INFO   , Thread-1 (run), runner.py:437, [trial: 75, gen: 0] Waiting for system to converge... 
2024-02-23 18:52:25,363 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:53:25,465 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:54:29,177 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:55:29,285 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:56:29,340 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:57:29,447 INFO   , Thread-1 (run), runner.py:508, [trial: 75, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 18:59:25,210 ERROR  , Thread-1 (run), runner.py:586, [trial: 75, gen: 0] System failed to converge within 480 seconds
2024-02-23 18:59:25,488 DEBUG  , Thread-1 (run), runner.py:267, [trial: 75, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T01:43:23Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T01:43:23Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T01:58:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2741', 'uid': '3b4ef386-2d5b-4580-9213-17b5d12142c2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T01:58:59Z', 'phase': ''}}}
2024-02-23 18:59:25,509 DEBUG  , Thread-1 (run), runner.py:296, [trial: 75, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wwr54
2024-02-23 18:59:25,756 ERROR  , Thread-1 (run), runner.py:368, [trial: 75, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rlhpb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b1a808cc-3648-412e-ab48-b7935f8f4ed2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 01:59:25 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rlhpb\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 18:59:25,816 DEBUG  , Thread-1 (run), engine.py:207, [trial: 75, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 18:59:25,820 INFO   , Thread-1 (run), engine.py:333, Trial 75 finished, completed in 00:17:59
2024-02-23 18:59:25,820 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 18:59:25,820 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 18:59:25,820 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 18:59:25,820 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 18:59:25,857 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wwr54
2024-02-23 18:59:39,514 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 19:00:32,886 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 19:00:32,919 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 19:00:37,863 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:00:43,005 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:00:43,005 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:00:43,239 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:00:48,381 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:00:48,382 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:00:48,664 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:00:53,806 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:00:53,806 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:00:53,965 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:00:59,104 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:00:59,104 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:00:59,344 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:01:04,594 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:01:04,594 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:01:04,744 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:01:09,892 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:01:09,893 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:01:09,958 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 75, gen: 0] Waiting for all pods to be ready
2024-02-23 19:01:15,097 INFO   , Thread-1 (run), deploy.py:32, [trial: 75, gen: 0] Operator ready
2024-02-23 19:01:15,097 INFO   , Thread-1 (run), deploy.py:36, [trial: 75, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:01:35,165 WARNING, Thread-1 (run), object.py:155, [trial: 76, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 19:01:35,165 WARNING, Thread-1 (run), object.py:155, [trial: 76, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 19:01:35,166 WARNING, Thread-1 (run), object.py:155, [trial: 76, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 19:01:35,167 DEBUG  , Thread-1 (run), engine.py:652, [trial: 76, gen: 0] Run and check
2024-02-23 19:01:35,313 DEBUG  , Thread-1 (run), runner.py:123, [trial: 76, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 19:01:35,313 DEBUG  , Thread-1 (run), runner.py:124, [trial: 76, gen: 0] STDERR: 
2024-02-23 19:01:35,314 INFO   , Thread-1 (run), runner.py:437, [trial: 76, gen: 0] Waiting for system to converge... 
2024-02-23 19:04:41,232 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:05:41,292 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:07:44,203 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:08:44,301 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:09:35,338 ERROR  , Thread-1 (run), runner.py:586, [trial: 76, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:09:35,621 DEBUG  , Thread-1 (run), runner.py:267, [trial: 76, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:01:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:01:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:09:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': '8a717be2-f5de-4dab-93d1-95618b4461b0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:09:11Z', 'phase': ''}}}
2024-02-23 19:09:35,643 DEBUG  , Thread-1 (run), runner.py:296, [trial: 76, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hvhtg
2024-02-23 19:09:35,867 ERROR  , Thread-1 (run), runner.py:368, [trial: 76, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zqqhz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5e2d14fc-dca9-4923-8684-daa5e3d7328e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:09:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zqqhz\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 19:09:35,914 INFO   , Thread-1 (run), result.py:170, [trial: 76, gen: 0] No stderr, continue
2024-02-23 19:09:35,950 ERROR  , Thread-1 (run), health.py:155, [trial: 76, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 19:09:35,975 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:35,975 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line time="2024-02-24T02:01:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:35,975 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line time="2024-02-24T02:01:10Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 02:01:10.885746409 +0000 UTC m=+0.010726122]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:35,976 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line time="2024-02-24T02:01:10Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:35,976 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line time="2024-02-24T02:01:10Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:35,976 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line time="2024-02-24T02:01:10Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:36,043 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 76, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:09:36,225 INFO   , Thread-1 (run), consistency.py:496, [trial: 76, gen: 0] All input deltas are matched
2024-02-23 19:09:36,228 INFO   , Thread-1 (run), engine.py:554, [trial: 76, gen: 0] Error result, running recovery
2024-02-23 19:09:36,228 DEBUG  , Thread-1 (run), engine.py:698, [trial: 76, gen: 0] Running recovery
2024-02-23 19:09:37,063 DEBUG  , Thread-1 (run), runner.py:123, [trial: 76, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 19:09:37,063 DEBUG  , Thread-1 (run), runner.py:124, [trial: 76, gen: 0] STDERR: 
2024-02-23 19:09:37,063 INFO   , Thread-1 (run), runner.py:437, [trial: 76, gen: 0] Waiting for system to converge... 
2024-02-23 19:10:37,223 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:11:37,330 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:12:41,170 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:13:41,272 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:14:41,331 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:15:41,439 INFO   , Thread-1 (run), runner.py:508, [trial: 76, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:17:37,072 ERROR  , Thread-1 (run), runner.py:586, [trial: 76, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:17:37,367 DEBUG  , Thread-1 (run), runner.py:267, [trial: 76, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:01:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:01:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:17:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '8a717be2-f5de-4dab-93d1-95618b4461b0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:17:11Z', 'phase': ''}}}
2024-02-23 19:17:37,388 DEBUG  , Thread-1 (run), runner.py:296, [trial: 76, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hvhtg
2024-02-23 19:17:37,767 ERROR  , Thread-1 (run), runner.py:368, [trial: 76, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zqqhz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '91b053b7-dd64-4ad7-beee-8dc687d3ff41', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:17:37 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zqqhz\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 19:17:37,796 DEBUG  , Thread-1 (run), engine.py:207, [trial: 76, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 19:17:37,799 INFO   , Thread-1 (run), engine.py:333, Trial 76 finished, completed in 00:18:01
2024-02-23 19:17:37,800 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 19:17:37,800 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 19:17:37,800 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 19:17:37,800 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 19:17:37,835 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-hvhtg
2024-02-23 19:17:51,447 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 19:18:40,081 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 19:18:40,123 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 19:18:47,270 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:18:52,414 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:18:52,414 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:18:52,666 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:18:57,792 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:18:57,792 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:18:58,095 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:19:03,236 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:19:03,236 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:19:03,364 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:19:08,500 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:19:08,500 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:19:08,741 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:19:13,879 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:19:13,879 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:19:14,050 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:19:19,164 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:19:19,164 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:19:19,237 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 76, gen: 0] Waiting for all pods to be ready
2024-02-23 19:19:24,384 INFO   , Thread-1 (run), deploy.py:32, [trial: 76, gen: 0] Operator ready
2024-02-23 19:19:24,384 INFO   , Thread-1 (run), deploy.py:36, [trial: 76, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:19:44,433 WARNING, Thread-1 (run), object.py:155, [trial: 77, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 19:19:44,434 WARNING, Thread-1 (run), object.py:155, [trial: 77, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 19:19:44,434 WARNING, Thread-1 (run), object.py:155, [trial: 77, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 19:19:44,434 DEBUG  , Thread-1 (run), engine.py:652, [trial: 77, gen: 0] Run and check
2024-02-23 19:19:44,590 DEBUG  , Thread-1 (run), runner.py:123, [trial: 77, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 19:19:44,590 DEBUG  , Thread-1 (run), runner.py:124, [trial: 77, gen: 0] STDERR: 
2024-02-23 19:19:44,590 INFO   , Thread-1 (run), runner.py:437, [trial: 77, gen: 0] Waiting for system to converge... 
2024-02-23 19:22:51,053 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:23:51,113 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:26:00,047 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:27:00,155 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:27:44,618 ERROR  , Thread-1 (run), runner.py:586, [trial: 77, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:27:44,866 DEBUG  , Thread-1 (run), runner.py:267, [trial: 77, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:19:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:19:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:27:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1812', 'uid': '5f782091-71f9-4f40-a4a8-4e513a4bbd9e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:27:20Z', 'phase': ''}}}
2024-02-23 19:27:44,888 DEBUG  , Thread-1 (run), runner.py:296, [trial: 77, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6xq52
2024-02-23 19:27:45,111 ERROR  , Thread-1 (run), runner.py:368, [trial: 77, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2xlxt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7ac0a96e-8679-4442-8de5-bfa28c9f1083', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:27:45 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2xlxt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 19:27:45,161 INFO   , Thread-1 (run), result.py:170, [trial: 77, gen: 0] No stderr, continue
2024-02-23 19:27:45,198 ERROR  , Thread-1 (run), health.py:155, [trial: 77, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 02:19:20.185704681 +0000 UTC m=+0.010601913]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line time="2024-02-24T02:19:20Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,278 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 77, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:27:45,555 INFO   , Thread-1 (run), consistency.py:496, [trial: 77, gen: 0] All input deltas are matched
2024-02-23 19:27:45,557 INFO   , Thread-1 (run), engine.py:554, [trial: 77, gen: 0] Error result, running recovery
2024-02-23 19:27:45,557 DEBUG  , Thread-1 (run), engine.py:698, [trial: 77, gen: 0] Running recovery
2024-02-23 19:27:46,394 DEBUG  , Thread-1 (run), runner.py:123, [trial: 77, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 19:27:46,395 DEBUG  , Thread-1 (run), runner.py:124, [trial: 77, gen: 0] STDERR: 
2024-02-23 19:27:46,395 INFO   , Thread-1 (run), runner.py:437, [trial: 77, gen: 0] Waiting for system to converge... 
2024-02-23 19:28:46,573 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:29:46,681 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:30:51,009 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:31:51,106 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:32:51,214 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:33:51,286 INFO   , Thread-1 (run), runner.py:508, [trial: 77, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:35:46,404 ERROR  , Thread-1 (run), runner.py:586, [trial: 77, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:35:46,696 DEBUG  , Thread-1 (run), runner.py:267, [trial: 77, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:19:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:19:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:35:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2733', 'uid': '5f782091-71f9-4f40-a4a8-4e513a4bbd9e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:35:20Z', 'phase': ''}}}
2024-02-23 19:35:46,718 DEBUG  , Thread-1 (run), runner.py:296, [trial: 77, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6xq52
2024-02-23 19:35:46,973 ERROR  , Thread-1 (run), runner.py:368, [trial: 77, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-2xlxt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f15520a1-4a2a-4a97-9113-075ec301e63c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:35:46 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-2xlxt\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 19:35:47,034 DEBUG  , Thread-1 (run), engine.py:207, [trial: 77, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 19:35:47,038 INFO   , Thread-1 (run), engine.py:333, Trial 77 finished, completed in 00:17:59
2024-02-23 19:35:47,038 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 19:35:47,039 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 19:35:47,039 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 19:35:47,039 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 19:35:47,076 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6xq52
2024-02-23 19:36:00,669 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 19:36:58,266 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 19:36:58,287 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 19:37:02,709 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:07,861 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:07,861 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:08,122 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:13,243 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:13,243 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:13,522 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:18,663 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:18,663 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:18,810 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:23,948 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:23,948 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:24,210 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:29,351 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:29,352 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:29,523 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:34,660 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:34,661 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:37:34,727 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 77, gen: 0] Waiting for all pods to be ready
2024-02-23 19:37:39,981 INFO   , Thread-1 (run), deploy.py:32, [trial: 77, gen: 0] Operator ready
2024-02-23 19:37:39,981 INFO   , Thread-1 (run), deploy.py:36, [trial: 77, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:38:00,034 WARNING, Thread-1 (run), object.py:155, [trial: 78, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 19:38:00,034 WARNING, Thread-1 (run), object.py:155, [trial: 78, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 19:38:00,034 WARNING, Thread-1 (run), object.py:155, [trial: 78, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 19:38:00,035 DEBUG  , Thread-1 (run), engine.py:652, [trial: 78, gen: 0] Run and check
2024-02-23 19:38:00,165 DEBUG  , Thread-1 (run), runner.py:123, [trial: 78, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 19:38:00,165 DEBUG  , Thread-1 (run), runner.py:124, [trial: 78, gen: 0] STDERR: 
2024-02-23 19:38:00,165 INFO   , Thread-1 (run), runner.py:437, [trial: 78, gen: 0] Waiting for system to converge... 
2024-02-23 19:41:06,031 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:42:06,113 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:44:06,008 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:45:06,113 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:46:00,192 ERROR  , Thread-1 (run), runner.py:586, [trial: 78, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:46:00,465 DEBUG  , Thread-1 (run), runner.py:267, [trial: 78, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:38:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:38:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:45:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': '75efeaf3-ac00-415e-bd85-691fc34674da'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:45:35Z', 'phase': ''}}}
2024-02-23 19:46:00,486 DEBUG  , Thread-1 (run), runner.py:296, [trial: 78, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-pzzj8
2024-02-23 19:46:00,708 ERROR  , Thread-1 (run), runner.py:368, [trial: 78, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bn2gh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'baeb607d-4720-4583-b6b4-3b3ab011e87d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:46:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bn2gh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 19:46:00,746 INFO   , Thread-1 (run), result.py:170, [trial: 78, gen: 0] No stderr, continue
2024-02-23 19:46:00,778 ERROR  , Thread-1 (run), health.py:155, [trial: 78, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line time="2024-02-24T02:37:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line time="2024-02-24T02:37:35Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 02:37:35.726561656 +0000 UTC m=+0.022409706]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line time="2024-02-24T02:37:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line time="2024-02-24T02:37:35Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,804 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line time="2024-02-24T02:37:35Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:00,857 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 78, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 19:46:01,033 INFO   , Thread-1 (run), consistency.py:496, [trial: 78, gen: 0] All input deltas are matched
2024-02-23 19:46:01,036 INFO   , Thread-1 (run), engine.py:554, [trial: 78, gen: 0] Error result, running recovery
2024-02-23 19:46:01,036 DEBUG  , Thread-1 (run), engine.py:698, [trial: 78, gen: 0] Running recovery
2024-02-23 19:46:01,884 DEBUG  , Thread-1 (run), runner.py:123, [trial: 78, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 19:46:01,884 DEBUG  , Thread-1 (run), runner.py:124, [trial: 78, gen: 0] STDERR: 
2024-02-23 19:46:01,884 INFO   , Thread-1 (run), runner.py:437, [trial: 78, gen: 0] Waiting for system to converge... 
2024-02-23 19:47:02,017 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:48:02,100 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:49:11,559 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:50:11,666 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:51:11,748 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:52:11,851 INFO   , Thread-1 (run), runner.py:508, [trial: 78, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 19:54:01,894 ERROR  , Thread-1 (run), runner.py:586, [trial: 78, gen: 0] System failed to converge within 480 seconds
2024-02-23 19:54:02,183 DEBUG  , Thread-1 (run), runner.py:267, [trial: 78, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:38:00Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:38:00Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T02:53:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2713', 'uid': '75efeaf3-ac00-415e-bd85-691fc34674da'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T02:53:35Z', 'phase': ''}}}
2024-02-23 19:54:02,205 DEBUG  , Thread-1 (run), runner.py:296, [trial: 78, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-pzzj8
2024-02-23 19:54:02,454 ERROR  , Thread-1 (run), runner.py:368, [trial: 78, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bn2gh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6987101b-4c54-48ad-ad29-dd6dc87f72a2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 02:54:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bn2gh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 19:54:02,500 DEBUG  , Thread-1 (run), engine.py:207, [trial: 78, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 19:54:02,504 INFO   , Thread-1 (run), engine.py:333, Trial 78 finished, completed in 00:18:05
2024-02-23 19:54:02,504 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-23 19:54:02,504 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 19:54:02,505 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 19:54:02,505 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 19:54:02,542 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-pzzj8
2024-02-23 19:54:16,086 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 19:55:06,023 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 19:55:06,033 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 19:55:13,510 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:18,653 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:18,654 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:18,964 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:24,103 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:24,103 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:24,429 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:29,669 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:29,669 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:29,805 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:34,926 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:34,926 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:35,164 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:40,301 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:40,301 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:40,488 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:45,627 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:45,627 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:55:45,700 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 78, gen: 0] Waiting for all pods to be ready
2024-02-23 19:55:50,826 INFO   , Thread-1 (run), deploy.py:32, [trial: 78, gen: 0] Operator ready
2024-02-23 19:55:50,826 INFO   , Thread-1 (run), deploy.py:36, [trial: 78, gen: 0] All pods took 0 seconds to get ready
2024-02-23 19:56:10,879 WARNING, Thread-1 (run), object.py:155, [trial: 79, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 19:56:10,879 WARNING, Thread-1 (run), object.py:155, [trial: 79, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 19:56:10,880 WARNING, Thread-1 (run), object.py:155, [trial: 79, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 19:56:10,880 DEBUG  , Thread-1 (run), engine.py:652, [trial: 79, gen: 0] Run and check
2024-02-23 19:56:11,018 DEBUG  , Thread-1 (run), runner.py:123, [trial: 79, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 19:56:11,018 DEBUG  , Thread-1 (run), runner.py:124, [trial: 79, gen: 0] STDERR: 
2024-02-23 19:56:11,018 INFO   , Thread-1 (run), runner.py:437, [trial: 79, gen: 0] Waiting for system to converge... 
2024-02-23 19:59:14,731 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:00:14,840 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:01:14,897 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:02:16,876 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:03:16,962 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:04:11,045 ERROR  , Thread-1 (run), runner.py:586, [trial: 79, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:04:11,315 DEBUG  , Thread-1 (run), runner.py:267, [trial: 79, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:56:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:56:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:03:47Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1811', 'uid': 'b0969ce1-29d7-4e38-a697-8f5458821233'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:03:47Z', 'phase': ''}}}
2024-02-23 20:04:11,337 DEBUG  , Thread-1 (run), runner.py:296, [trial: 79, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qzfd6
2024-02-23 20:04:11,555 ERROR  , Thread-1 (run), runner.py:368, [trial: 79, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wq7jq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '88d0a959-7dc8-4fb0-ba3e-b38ed9e31047', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:04:11 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wq7jq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:04:11,604 INFO   , Thread-1 (run), result.py:170, [trial: 79, gen: 0] No stderr, continue
2024-02-23 20:04:11,640 ERROR  , Thread-1 (run), health.py:155, [trial: 79, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 20:04:11,668 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,668 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line time="2024-02-24T02:55:46Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,668 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line time="2024-02-24T02:55:46Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 02:55:46.652285643 +0000 UTC m=+0.012423253]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,668 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line time="2024-02-24T02:55:46Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,669 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line time="2024-02-24T02:55:46Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,669 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line time="2024-02-24T02:55:46Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:11,721 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 79, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:04:12,004 INFO   , Thread-1 (run), consistency.py:496, [trial: 79, gen: 0] All input deltas are matched
2024-02-23 20:04:12,007 INFO   , Thread-1 (run), engine.py:554, [trial: 79, gen: 0] Error result, running recovery
2024-02-23 20:04:12,007 DEBUG  , Thread-1 (run), engine.py:698, [trial: 79, gen: 0] Running recovery
2024-02-23 20:04:12,800 DEBUG  , Thread-1 (run), runner.py:123, [trial: 79, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 20:04:12,800 DEBUG  , Thread-1 (run), runner.py:124, [trial: 79, gen: 0] STDERR: 
2024-02-23 20:04:12,800 INFO   , Thread-1 (run), runner.py:437, [trial: 79, gen: 0] Waiting for system to converge... 
2024-02-23 20:05:12,976 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:06:13,084 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:07:18,691 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:08:18,799 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:09:18,874 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:10:18,949 INFO   , Thread-1 (run), runner.py:508, [trial: 79, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:12:12,810 ERROR  , Thread-1 (run), runner.py:586, [trial: 79, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:12:13,093 DEBUG  , Thread-1 (run), runner.py:267, [trial: 79, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T02:56:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T02:56:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:11:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2730', 'uid': 'b0969ce1-29d7-4e38-a697-8f5458821233'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:11:46Z', 'phase': ''}}}
2024-02-23 20:12:13,114 DEBUG  , Thread-1 (run), runner.py:296, [trial: 79, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qzfd6
2024-02-23 20:12:13,360 ERROR  , Thread-1 (run), runner.py:368, [trial: 79, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wq7jq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8735b49c-3394-42e9-b7c0-b1a16841d4a7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:12:13 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wq7jq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:12:13,405 DEBUG  , Thread-1 (run), engine.py:207, [trial: 79, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 20:12:13,410 INFO   , Thread-1 (run), engine.py:333, Trial 79 finished, completed in 00:18:00
2024-02-23 20:12:13,410 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 20:12:13,410 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 20:12:13,410 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 20:12:13,410 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 20:12:13,447 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-qzfd6
2024-02-23 20:12:26,891 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 20:13:18,762 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 20:13:18,786 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 20:13:25,135 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:30,239 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:30,240 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:30,470 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:35,605 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:35,605 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:35,911 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:41,047 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:41,047 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:41,190 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:46,328 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:46,328 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:46,574 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:51,713 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:51,713 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:51,887 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:13:57,032 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:13:57,032 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:13:57,099 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 79, gen: 0] Waiting for all pods to be ready
2024-02-23 20:14:02,246 INFO   , Thread-1 (run), deploy.py:32, [trial: 79, gen: 0] Operator ready
2024-02-23 20:14:02,246 INFO   , Thread-1 (run), deploy.py:36, [trial: 79, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:14:22,298 WARNING, Thread-1 (run), object.py:155, [trial: 80, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 20:14:22,298 WARNING, Thread-1 (run), object.py:155, [trial: 80, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 20:14:22,298 WARNING, Thread-1 (run), object.py:155, [trial: 80, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 20:14:22,299 DEBUG  , Thread-1 (run), engine.py:652, [trial: 80, gen: 0] Run and check
2024-02-23 20:14:22,451 DEBUG  , Thread-1 (run), runner.py:123, [trial: 80, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 20:14:22,451 DEBUG  , Thread-1 (run), runner.py:124, [trial: 80, gen: 0] STDERR: 
2024-02-23 20:14:22,451 INFO   , Thread-1 (run), runner.py:437, [trial: 80, gen: 0] Waiting for system to converge... 
2024-02-23 20:17:28,437 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:18:28,548 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:20:29,717 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:21:29,825 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:22:22,478 ERROR  , Thread-1 (run), runner.py:586, [trial: 80, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:22:22,757 DEBUG  , Thread-1 (run), runner.py:267, [trial: 80, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:14:22Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:14:22Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:21:58Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': '0d2a48c1-b255-4cab-8eb4-3a1497290525'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:21:58Z', 'phase': ''}}}
2024-02-23 20:22:22,779 DEBUG  , Thread-1 (run), runner.py:296, [trial: 80, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gvtrc
2024-02-23 20:22:22,996 ERROR  , Thread-1 (run), runner.py:368, [trial: 80, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-r2dfc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7989808f-0f2c-42f9-8da1-a1f8ded68e9e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:22:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-r2dfc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:22:23,043 INFO   , Thread-1 (run), result.py:170, [trial: 80, gen: 0] No stderr, continue
2024-02-23 20:22:23,077 ERROR  , Thread-1 (run), health.py:155, [trial: 80, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 20:22:23,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line time="2024-02-24T03:13:58Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,103 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line time="2024-02-24T03:13:58Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 03:13:58.139020012 +0000 UTC m=+0.011517862]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,103 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line time="2024-02-24T03:13:58Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,103 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line time="2024-02-24T03:13:58Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,103 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line time="2024-02-24T03:13:58Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,168 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 80, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:22:23,465 INFO   , Thread-1 (run), consistency.py:496, [trial: 80, gen: 0] All input deltas are matched
2024-02-23 20:22:23,467 INFO   , Thread-1 (run), engine.py:554, [trial: 80, gen: 0] Error result, running recovery
2024-02-23 20:22:23,468 DEBUG  , Thread-1 (run), engine.py:698, [trial: 80, gen: 0] Running recovery
2024-02-23 20:22:24,249 DEBUG  , Thread-1 (run), runner.py:123, [trial: 80, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 20:22:24,250 DEBUG  , Thread-1 (run), runner.py:124, [trial: 80, gen: 0] STDERR: 
2024-02-23 20:22:24,250 INFO   , Thread-1 (run), runner.py:437, [trial: 80, gen: 0] Waiting for system to converge... 
2024-02-23 20:23:24,404 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:24:24,514 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:25:29,668 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:26:29,767 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:27:29,855 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:28:29,959 INFO   , Thread-1 (run), runner.py:508, [trial: 80, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:30:24,261 ERROR  , Thread-1 (run), runner.py:586, [trial: 80, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:30:24,554 DEBUG  , Thread-1 (run), runner.py:267, [trial: 80, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:14:22Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:14:22Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:29:58Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': '0d2a48c1-b255-4cab-8eb4-3a1497290525'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:29:58Z', 'phase': ''}}}
2024-02-23 20:30:24,576 DEBUG  , Thread-1 (run), runner.py:296, [trial: 80, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gvtrc
2024-02-23 20:30:24,822 ERROR  , Thread-1 (run), runner.py:368, [trial: 80, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-r2dfc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '31d54b4a-84ba-4a65-b0ec-c98b885b6de9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:30:24 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-r2dfc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:30:24,872 DEBUG  , Thread-1 (run), engine.py:207, [trial: 80, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 20:30:24,876 INFO   , Thread-1 (run), engine.py:333, Trial 80 finished, completed in 00:18:01
2024-02-23 20:30:24,877 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 20:30:24,877 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 20:30:24,877 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 20:30:24,877 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 20:30:24,912 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-gvtrc
2024-02-23 20:30:38,774 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 20:31:29,557 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 20:31:29,591 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 20:31:36,092 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:31:41,233 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:31:41,233 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:31:41,487 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:31:46,623 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:31:46,623 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:31:46,943 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:31:52,084 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:31:52,085 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:31:52,206 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:31:57,346 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:31:57,346 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:31:57,583 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:32:02,727 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:32:02,727 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:32:02,893 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:32:08,038 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:32:08,038 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:32:08,110 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 80, gen: 0] Waiting for all pods to be ready
2024-02-23 20:32:13,253 INFO   , Thread-1 (run), deploy.py:32, [trial: 80, gen: 0] Operator ready
2024-02-23 20:32:13,253 INFO   , Thread-1 (run), deploy.py:36, [trial: 80, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:32:33,306 WARNING, Thread-1 (run), object.py:155, [trial: 81, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 20:32:33,306 WARNING, Thread-1 (run), object.py:155, [trial: 81, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 20:32:33,306 WARNING, Thread-1 (run), object.py:155, [trial: 81, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 20:32:33,307 DEBUG  , Thread-1 (run), engine.py:652, [trial: 81, gen: 0] Run and check
2024-02-23 20:32:33,467 DEBUG  , Thread-1 (run), runner.py:123, [trial: 81, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 20:32:33,467 DEBUG  , Thread-1 (run), runner.py:124, [trial: 81, gen: 0] STDERR: 
2024-02-23 20:32:33,467 INFO   , Thread-1 (run), runner.py:437, [trial: 81, gen: 0] Waiting for system to converge... 
2024-02-23 20:35:39,411 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:36:39,521 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:38:39,413 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:39:39,523 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:40:33,498 ERROR  , Thread-1 (run), runner.py:586, [trial: 81, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:40:33,765 DEBUG  , Thread-1 (run), runner.py:267, [trial: 81, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:32:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:32:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:40:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1814', 'uid': '0da061d9-18c3-471f-825c-a900601e8e28'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:40:09Z', 'phase': ''}}}
2024-02-23 20:40:33,787 DEBUG  , Thread-1 (run), runner.py:296, [trial: 81, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-szqp4
2024-02-23 20:40:34,008 ERROR  , Thread-1 (run), runner.py:368, [trial: 81, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-x7fhg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7b1fb338-c465-447c-b6a6-4171d780a7bd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:40:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-x7fhg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:40:34,042 INFO   , Thread-1 (run), result.py:170, [trial: 81, gen: 0] No stderr, continue
2024-02-23 20:40:34,076 ERROR  , Thread-1 (run), health.py:155, [trial: 81, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 20:40:34,101 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line time="2024-02-24T03:32:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line time="2024-02-24T03:32:09Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 03:32:09.142375176 +0000 UTC m=+0.011045730]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line time="2024-02-24T03:32:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line time="2024-02-24T03:32:09Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,103 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line time="2024-02-24T03:32:09Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,154 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 81, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:40:34,430 INFO   , Thread-1 (run), consistency.py:496, [trial: 81, gen: 0] All input deltas are matched
2024-02-23 20:40:34,432 INFO   , Thread-1 (run), engine.py:554, [trial: 81, gen: 0] Error result, running recovery
2024-02-23 20:40:34,432 DEBUG  , Thread-1 (run), engine.py:698, [trial: 81, gen: 0] Running recovery
2024-02-23 20:40:35,276 DEBUG  , Thread-1 (run), runner.py:123, [trial: 81, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 20:40:35,277 DEBUG  , Thread-1 (run), runner.py:124, [trial: 81, gen: 0] STDERR: 
2024-02-23 20:40:35,277 INFO   , Thread-1 (run), runner.py:437, [trial: 81, gen: 0] Waiting for system to converge... 
2024-02-23 20:41:35,452 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:42:35,562 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:43:43,148 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:44:43,257 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:45:43,361 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:46:43,418 INFO   , Thread-1 (run), runner.py:508, [trial: 81, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:48:35,287 ERROR  , Thread-1 (run), runner.py:586, [trial: 81, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:48:35,577 DEBUG  , Thread-1 (run), runner.py:267, [trial: 81, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:32:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:32:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:48:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2733', 'uid': '0da061d9-18c3-471f-825c-a900601e8e28'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:48:09Z', 'phase': ''}}}
2024-02-23 20:48:35,599 DEBUG  , Thread-1 (run), runner.py:296, [trial: 81, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-szqp4
2024-02-23 20:48:35,851 ERROR  , Thread-1 (run), runner.py:368, [trial: 81, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-x7fhg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e6ac5179-7823-44bb-90fb-bce3c63c5bc2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:48:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-x7fhg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:48:35,900 DEBUG  , Thread-1 (run), engine.py:207, [trial: 81, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 20:48:35,904 INFO   , Thread-1 (run), engine.py:333, Trial 81 finished, completed in 00:18:00
2024-02-23 20:48:35,904 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 20:48:35,904 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 20:48:35,904 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 20:48:35,904 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 20:48:35,941 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-szqp4
2024-02-23 20:48:49,589 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 20:49:46,474 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 20:49:46,508 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 20:49:52,202 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:49:57,351 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:49:57,351 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:49:57,608 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:02,746 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:02,746 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:03,047 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:08,185 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:08,185 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:08,374 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:13,503 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:13,503 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:13,776 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:18,912 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:18,912 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:19,088 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:24,231 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:24,231 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:24,300 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 81, gen: 0] Waiting for all pods to be ready
2024-02-23 20:50:29,433 INFO   , Thread-1 (run), deploy.py:32, [trial: 81, gen: 0] Operator ready
2024-02-23 20:50:29,433 INFO   , Thread-1 (run), deploy.py:36, [trial: 81, gen: 0] All pods took 0 seconds to get ready
2024-02-23 20:50:49,497 WARNING, Thread-1 (run), object.py:155, [trial: 82, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 20:50:49,498 WARNING, Thread-1 (run), object.py:155, [trial: 82, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 20:50:49,498 WARNING, Thread-1 (run), object.py:155, [trial: 82, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 20:50:49,498 DEBUG  , Thread-1 (run), engine.py:652, [trial: 82, gen: 0] Run and check
2024-02-23 20:50:49,646 DEBUG  , Thread-1 (run), runner.py:123, [trial: 82, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 20:50:49,646 DEBUG  , Thread-1 (run), runner.py:124, [trial: 82, gen: 0] STDERR: 
2024-02-23 20:50:49,646 INFO   , Thread-1 (run), runner.py:437, [trial: 82, gen: 0] Waiting for system to converge... 
2024-02-23 20:53:55,740 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:54:55,810 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:56:58,734 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:57:58,805 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 20:58:49,671 ERROR  , Thread-1 (run), runner.py:586, [trial: 82, gen: 0] System failed to converge within 480 seconds
2024-02-23 20:58:49,962 DEBUG  , Thread-1 (run), runner.py:267, [trial: 82, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:50:49Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:50:49Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T03:58:25Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': '044d780a-7872-42b7-acbb-efbd7ab71ccf'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T03:58:25Z', 'phase': ''}}}
2024-02-23 20:58:49,983 DEBUG  , Thread-1 (run), runner.py:296, [trial: 82, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-86dbj
2024-02-23 20:58:50,205 ERROR  , Thread-1 (run), runner.py:368, [trial: 82, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-fsjss
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8f65c056-09d1-43f3-9852-ff5145b7c569', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 03:58:50 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-fsjss\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 20:58:50,255 INFO   , Thread-1 (run), result.py:170, [trial: 82, gen: 0] No stderr, continue
2024-02-23 20:58:50,293 ERROR  , Thread-1 (run), health.py:155, [trial: 82, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 03:50:25.399413691 +0000 UTC m=+0.012182210]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,439 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,440 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line time="2024-02-24T03:50:25Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,493 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 82, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 20:58:50,655 INFO   , Thread-1 (run), consistency.py:496, [trial: 82, gen: 0] All input deltas are matched
2024-02-23 20:58:50,657 INFO   , Thread-1 (run), engine.py:554, [trial: 82, gen: 0] Error result, running recovery
2024-02-23 20:58:50,658 DEBUG  , Thread-1 (run), engine.py:698, [trial: 82, gen: 0] Running recovery
2024-02-23 20:58:51,504 DEBUG  , Thread-1 (run), runner.py:123, [trial: 82, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 20:58:51,504 DEBUG  , Thread-1 (run), runner.py:124, [trial: 82, gen: 0] STDERR: 
2024-02-23 20:58:51,504 INFO   , Thread-1 (run), runner.py:437, [trial: 82, gen: 0] Waiting for system to converge... 
2024-02-23 20:59:51,665 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:00:51,723 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:01:55,644 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:02:55,752 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:03:55,836 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:04:55,938 INFO   , Thread-1 (run), runner.py:508, [trial: 82, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:06:51,513 ERROR  , Thread-1 (run), runner.py:586, [trial: 82, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:06:51,768 DEBUG  , Thread-1 (run), runner.py:267, [trial: 82, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T03:50:49Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T03:50:49Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:06:25Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2722', 'uid': '044d780a-7872-42b7-acbb-efbd7ab71ccf'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:06:25Z', 'phase': ''}}}
2024-02-23 21:06:51,789 DEBUG  , Thread-1 (run), runner.py:296, [trial: 82, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-86dbj
2024-02-23 21:06:52,033 ERROR  , Thread-1 (run), runner.py:368, [trial: 82, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-fsjss
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9320239b-48dc-4e14-ad7a-817888f7e256', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:06:52 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-fsjss\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 21:06:52,080 DEBUG  , Thread-1 (run), engine.py:207, [trial: 82, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 21:06:52,084 INFO   , Thread-1 (run), engine.py:333, Trial 82 finished, completed in 00:18:06
2024-02-23 21:06:52,084 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-23 21:06:52,084 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 21:06:52,084 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 21:06:52,084 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 21:06:52,112 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-86dbj
2024-02-23 21:07:05,545 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 21:07:57,554 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 21:07:57,579 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 21:08:04,537 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:09,683 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:09,683 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:09,925 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:15,065 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:15,065 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:15,367 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:20,506 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:20,506 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:20,643 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:25,784 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:25,784 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:26,102 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:31,240 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:31,241 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:31,450 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:36,584 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:36,584 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:08:36,656 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 82, gen: 0] Waiting for all pods to be ready
2024-02-23 21:08:41,803 INFO   , Thread-1 (run), deploy.py:32, [trial: 82, gen: 0] Operator ready
2024-02-23 21:08:41,803 INFO   , Thread-1 (run), deploy.py:36, [trial: 82, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:09:01,846 WARNING, Thread-1 (run), object.py:155, [trial: 83, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 21:09:01,846 WARNING, Thread-1 (run), object.py:155, [trial: 83, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 21:09:01,847 WARNING, Thread-1 (run), object.py:155, [trial: 83, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 21:09:01,847 DEBUG  , Thread-1 (run), engine.py:652, [trial: 83, gen: 0] Run and check
2024-02-23 21:09:01,990 DEBUG  , Thread-1 (run), runner.py:123, [trial: 83, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 21:09:01,990 DEBUG  , Thread-1 (run), runner.py:124, [trial: 83, gen: 0] STDERR: 
2024-02-23 21:09:01,990 INFO   , Thread-1 (run), runner.py:437, [trial: 83, gen: 0] Waiting for system to converge... 
2024-02-23 21:12:03,430 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:13:03,516 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:14:03,601 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:15:07,849 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:16:07,959 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:17:02,013 ERROR  , Thread-1 (run), runner.py:586, [trial: 83, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:17:02,289 DEBUG  , Thread-1 (run), runner.py:267, [trial: 83, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:09:01Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:09:01Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:16:37Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': '45d9f8fe-736a-4229-a10a-3c6396366032'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:16:37Z', 'phase': ''}}}
2024-02-23 21:17:02,312 DEBUG  , Thread-1 (run), runner.py:296, [trial: 83, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-h5xxb
2024-02-23 21:17:02,540 ERROR  , Thread-1 (run), runner.py:368, [trial: 83, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hcfhg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'dd234e26-0fd8-45f8-80c9-c28cb08f5959', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:17:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hcfhg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 21:17:02,587 INFO   , Thread-1 (run), result.py:170, [trial: 83, gen: 0] No stderr, continue
2024-02-23 21:17:02,752 ERROR  , Thread-1 (run), health.py:155, [trial: 83, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 21:17:02,781 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,781 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line time="2024-02-24T04:08:37Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,781 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line time="2024-02-24T04:08:37Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 04:08:37.603944614 +0000 UTC m=+0.017059129]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line time="2024-02-24T04:08:37Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line time="2024-02-24T04:08:37Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line time="2024-02-24T04:08:37Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,838 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 83, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:17:02,994 INFO   , Thread-1 (run), consistency.py:496, [trial: 83, gen: 0] All input deltas are matched
2024-02-23 21:17:02,997 INFO   , Thread-1 (run), engine.py:554, [trial: 83, gen: 0] Error result, running recovery
2024-02-23 21:17:02,997 DEBUG  , Thread-1 (run), engine.py:698, [trial: 83, gen: 0] Running recovery
2024-02-23 21:17:03,800 DEBUG  , Thread-1 (run), runner.py:123, [trial: 83, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 21:17:03,800 DEBUG  , Thread-1 (run), runner.py:124, [trial: 83, gen: 0] STDERR: 
2024-02-23 21:17:03,800 INFO   , Thread-1 (run), runner.py:437, [trial: 83, gen: 0] Waiting for system to converge... 
2024-02-23 21:18:03,940 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:19:04,014 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:20:13,341 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:21:13,397 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:22:13,469 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:23:13,525 INFO   , Thread-1 (run), runner.py:508, [trial: 83, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:25:03,812 ERROR  , Thread-1 (run), runner.py:586, [trial: 83, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:25:04,094 DEBUG  , Thread-1 (run), runner.py:267, [trial: 83, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:09:01Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:09:01Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:24:37Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2734', 'uid': '45d9f8fe-736a-4229-a10a-3c6396366032'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:24:37Z', 'phase': ''}}}
2024-02-23 21:25:04,115 DEBUG  , Thread-1 (run), runner.py:296, [trial: 83, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-h5xxb
2024-02-23 21:25:04,368 ERROR  , Thread-1 (run), runner.py:368, [trial: 83, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hcfhg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '52181d46-839c-4918-938e-3e2cc179d6ab', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:25:04 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hcfhg\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-23 21:25:04,412 DEBUG  , Thread-1 (run), engine.py:207, [trial: 83, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 21:25:04,417 INFO   , Thread-1 (run), engine.py:333, Trial 83 finished, completed in 00:18:02
2024-02-23 21:25:04,417 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 21:25:04,417 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 21:25:04,417 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 21:25:04,417 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 21:25:04,454 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-h5xxb
2024-02-23 21:25:18,122 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 21:26:08,574 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 21:26:08,590 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 21:26:15,404 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:20,551 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:20,551 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:20,834 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:25,973 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:25,973 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:26,268 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:31,393 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:31,393 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:31,516 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:36,656 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:36,656 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:36,879 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:42,022 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:42,022 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:42,237 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:47,538 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:47,538 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:26:47,611 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 83, gen: 0] Waiting for all pods to be ready
2024-02-23 21:26:52,746 INFO   , Thread-1 (run), deploy.py:32, [trial: 83, gen: 0] Operator ready
2024-02-23 21:26:52,746 INFO   , Thread-1 (run), deploy.py:36, [trial: 83, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:27:12,828 WARNING, Thread-1 (run), object.py:155, [trial: 84, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 21:27:12,828 WARNING, Thread-1 (run), object.py:155, [trial: 84, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 21:27:12,828 WARNING, Thread-1 (run), object.py:155, [trial: 84, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 21:27:12,830 DEBUG  , Thread-1 (run), engine.py:652, [trial: 84, gen: 0] Run and check
2024-02-23 21:27:12,997 DEBUG  , Thread-1 (run), runner.py:123, [trial: 84, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 21:27:12,997 DEBUG  , Thread-1 (run), runner.py:124, [trial: 84, gen: 0] STDERR: 
2024-02-23 21:27:12,997 INFO   , Thread-1 (run), runner.py:437, [trial: 84, gen: 0] Waiting for system to converge... 
2024-02-23 21:30:19,017 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:31:19,126 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:33:19,962 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:34:20,065 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:35:13,026 ERROR  , Thread-1 (run), runner.py:586, [trial: 84, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:35:13,295 DEBUG  , Thread-1 (run), runner.py:267, [trial: 84, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:27:12Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:27:12Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:34:48Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1816', 'uid': '732fd68a-da10-4c3c-8bf6-7f47556be725'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:34:48Z', 'phase': ''}}}
2024-02-23 21:35:13,317 DEBUG  , Thread-1 (run), runner.py:296, [trial: 84, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-62m47
2024-02-23 21:35:13,539 ERROR  , Thread-1 (run), runner.py:368, [trial: 84, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-p6hw4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9ddd92d3-cfad-4f9f-98eb-612cafbf00f7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:35:13 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-p6hw4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 21:35:13,576 INFO   , Thread-1 (run), result.py:170, [trial: 84, gen: 0] No stderr, continue
2024-02-23 21:35:13,611 ERROR  , Thread-1 (run), health.py:155, [trial: 84, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 21:35:13,635 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 04:26:48.710800785 +0000 UTC m=+0.010866100]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line time="2024-02-24T04:26:48Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,692 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 84, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:35:13,852 INFO   , Thread-1 (run), consistency.py:496, [trial: 84, gen: 0] All input deltas are matched
2024-02-23 21:35:13,854 INFO   , Thread-1 (run), engine.py:554, [trial: 84, gen: 0] Error result, running recovery
2024-02-23 21:35:13,854 DEBUG  , Thread-1 (run), engine.py:698, [trial: 84, gen: 0] Running recovery
2024-02-23 21:35:14,660 DEBUG  , Thread-1 (run), runner.py:123, [trial: 84, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 21:35:14,660 DEBUG  , Thread-1 (run), runner.py:124, [trial: 84, gen: 0] STDERR: 
2024-02-23 21:35:14,660 INFO   , Thread-1 (run), runner.py:437, [trial: 84, gen: 0] Waiting for system to converge... 
2024-02-23 21:36:14,823 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:37:14,925 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:38:18,955 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:39:19,061 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:40:19,166 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:41:19,275 INFO   , Thread-1 (run), runner.py:508, [trial: 84, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:43:14,670 ERROR  , Thread-1 (run), runner.py:586, [trial: 84, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:43:14,965 DEBUG  , Thread-1 (run), runner.py:267, [trial: 84, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:27:12Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:27:12Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:42:48Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2736', 'uid': '732fd68a-da10-4c3c-8bf6-7f47556be725'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:42:48Z', 'phase': ''}}}
2024-02-23 21:43:14,988 DEBUG  , Thread-1 (run), runner.py:296, [trial: 84, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-62m47
2024-02-23 21:43:15,241 ERROR  , Thread-1 (run), runner.py:368, [trial: 84, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-p6hw4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '31028da7-19a3-4785-90a0-7a36205fd035', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:43:15 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-p6hw4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 21:43:15,299 DEBUG  , Thread-1 (run), engine.py:207, [trial: 84, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 21:43:15,303 INFO   , Thread-1 (run), engine.py:333, Trial 84 finished, completed in 00:18:00
2024-02-23 21:43:15,303 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 21:43:15,303 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 21:43:15,303 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 21:43:15,303 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 21:43:15,340 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-62m47
2024-02-23 21:43:28,714 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 21:44:21,245 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 21:44:21,276 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 21:44:27,805 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:32,951 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:32,951 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:33,185 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:38,447 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:38,448 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:38,757 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:43,890 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:43,890 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:44,008 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:49,126 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:49,126 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:49,385 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:54,522 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:54,522 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:54,705 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:44:59,839 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:44:59,839 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:44:59,911 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 84, gen: 0] Waiting for all pods to be ready
2024-02-23 21:45:05,042 INFO   , Thread-1 (run), deploy.py:32, [trial: 84, gen: 0] Operator ready
2024-02-23 21:45:05,042 INFO   , Thread-1 (run), deploy.py:36, [trial: 84, gen: 0] All pods took 0 seconds to get ready
2024-02-23 21:45:25,093 WARNING, Thread-1 (run), object.py:155, [trial: 85, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 21:45:25,093 WARNING, Thread-1 (run), object.py:155, [trial: 85, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 21:45:25,093 WARNING, Thread-1 (run), object.py:155, [trial: 85, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 21:45:25,094 DEBUG  , Thread-1 (run), engine.py:652, [trial: 85, gen: 0] Run and check
2024-02-23 21:45:25,235 DEBUG  , Thread-1 (run), runner.py:123, [trial: 85, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 21:45:25,235 DEBUG  , Thread-1 (run), runner.py:124, [trial: 85, gen: 0] STDERR: 
2024-02-23 21:45:25,235 INFO   , Thread-1 (run), runner.py:437, [trial: 85, gen: 0] Waiting for system to converge... 
2024-02-23 21:48:31,246 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:49:31,354 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:51:39,716 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:52:39,821 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:53:25,267 ERROR  , Thread-1 (run), runner.py:586, [trial: 85, gen: 0] System failed to converge within 480 seconds
2024-02-23 21:53:25,537 DEBUG  , Thread-1 (run), runner.py:267, [trial: 85, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:45:25Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:45:25Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T04:53:01Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': 'c6263780-8114-43bf-9dda-2d55c36c9eb3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T04:53:01Z', 'phase': ''}}}
2024-02-23 21:53:25,559 DEBUG  , Thread-1 (run), runner.py:296, [trial: 85, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cwxp5
2024-02-23 21:53:25,791 ERROR  , Thread-1 (run), runner.py:368, [trial: 85, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-s9rz6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '595e9c6a-627f-4126-ac09-8af0e607614d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 04:53:25 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-s9rz6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 21:53:25,827 INFO   , Thread-1 (run), result.py:170, [trial: 85, gen: 0] No stderr, continue
2024-02-23 21:53:25,864 ERROR  , Thread-1 (run), health.py:155, [trial: 85, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 21:53:25,888 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,888 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line time="2024-02-24T04:45:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,888 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line time="2024-02-24T04:45:00Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 04:45:00.958807122 +0000 UTC m=+0.014589499]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,888 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line time="2024-02-24T04:45:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,888 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line time="2024-02-24T04:45:00Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,889 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line time="2024-02-24T04:45:00Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:25,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 85, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 21:53:26,227 INFO   , Thread-1 (run), consistency.py:496, [trial: 85, gen: 0] All input deltas are matched
2024-02-23 21:53:26,229 INFO   , Thread-1 (run), engine.py:554, [trial: 85, gen: 0] Error result, running recovery
2024-02-23 21:53:26,229 DEBUG  , Thread-1 (run), engine.py:698, [trial: 85, gen: 0] Running recovery
2024-02-23 21:53:27,020 DEBUG  , Thread-1 (run), runner.py:123, [trial: 85, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 21:53:27,021 DEBUG  , Thread-1 (run), runner.py:124, [trial: 85, gen: 0] STDERR: 
2024-02-23 21:53:27,021 INFO   , Thread-1 (run), runner.py:437, [trial: 85, gen: 0] Waiting for system to converge... 
2024-02-23 21:54:27,197 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:55:27,306 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:56:38,729 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:57:38,823 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:58:38,929 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 21:59:39,033 INFO   , Thread-1 (run), runner.py:508, [trial: 85, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:01:27,031 ERROR  , Thread-1 (run), runner.py:586, [trial: 85, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:01:27,321 DEBUG  , Thread-1 (run), runner.py:267, [trial: 85, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T04:45:25Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T04:45:25Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:01:01Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2715', 'uid': 'c6263780-8114-43bf-9dda-2d55c36c9eb3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:01:01Z', 'phase': ''}}}
2024-02-23 22:01:27,342 DEBUG  , Thread-1 (run), runner.py:296, [trial: 85, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cwxp5
2024-02-23 22:01:27,591 ERROR  , Thread-1 (run), runner.py:368, [trial: 85, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-s9rz6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '833ab72a-66af-48c0-bd55-52736752f05f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:01:27 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-s9rz6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:01:27,646 DEBUG  , Thread-1 (run), engine.py:207, [trial: 85, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 22:01:27,650 INFO   , Thread-1 (run), engine.py:333, Trial 85 finished, completed in 00:18:02
2024-02-23 22:01:27,651 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 22:01:27,651 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 22:01:27,651 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 22:01:27,651 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 22:01:27,687 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-cwxp5
2024-02-23 22:01:41,387 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 22:02:30,903 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 22:02:30,929 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 22:02:38,188 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:02:43,331 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:02:43,331 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:02:43,572 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:02:48,718 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:02:48,719 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:02:48,999 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:02:54,140 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:02:54,141 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:02:54,266 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:02:59,406 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:02:59,406 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:02:59,661 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:03:04,799 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:03:04,799 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:03:04,965 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:03:10,111 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:03:10,111 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:03:10,186 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 85, gen: 0] Waiting for all pods to be ready
2024-02-23 22:03:15,327 INFO   , Thread-1 (run), deploy.py:32, [trial: 85, gen: 0] Operator ready
2024-02-23 22:03:15,327 INFO   , Thread-1 (run), deploy.py:36, [trial: 85, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:03:35,371 WARNING, Thread-1 (run), object.py:155, [trial: 86, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 22:03:35,371 WARNING, Thread-1 (run), object.py:155, [trial: 86, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 22:03:35,371 WARNING, Thread-1 (run), object.py:155, [trial: 86, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 22:03:35,371 DEBUG  , Thread-1 (run), engine.py:652, [trial: 86, gen: 0] Run and check
2024-02-23 22:03:35,519 DEBUG  , Thread-1 (run), runner.py:123, [trial: 86, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 22:03:35,520 DEBUG  , Thread-1 (run), runner.py:124, [trial: 86, gen: 0] STDERR: 
2024-02-23 22:03:35,520 INFO   , Thread-1 (run), runner.py:437, [trial: 86, gen: 0] Waiting for system to converge... 
2024-02-23 22:07:11,447 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:08:11,506 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:09:41,400 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:10:41,483 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:11:35,544 ERROR  , Thread-1 (run), runner.py:586, [trial: 86, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:11:35,777 DEBUG  , Thread-1 (run), runner.py:267, [trial: 86, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:03:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:03:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:11:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1787', 'uid': '093b78a2-f291-417b-bace-9a9cbd5d69f9'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:11:11Z', 'phase': ''}}}
2024-02-23 22:11:35,799 DEBUG  , Thread-1 (run), runner.py:296, [trial: 86, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cr7z9
2024-02-23 22:11:36,021 ERROR  , Thread-1 (run), runner.py:368, [trial: 86, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-pjbjv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b68a2128-689c-43bd-a2d4-a8dcb0d89be5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:11:36 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-pjbjv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:11:36,054 INFO   , Thread-1 (run), result.py:170, [trial: 86, gen: 0] No stderr, continue
2024-02-23 22:11:36,088 ERROR  , Thread-1 (run), health.py:155, [trial: 86, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 22:11:36,252 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,252 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line time="2024-02-24T05:03:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line time="2024-02-24T05:03:11Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 05:03:11.161630481 +0000 UTC m=+0.010553079]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line time="2024-02-24T05:03:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line time="2024-02-24T05:03:11Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,253 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line time="2024-02-24T05:03:11Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,339 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 86, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:11:36,524 INFO   , Thread-1 (run), consistency.py:496, [trial: 86, gen: 0] All input deltas are matched
2024-02-23 22:11:36,528 INFO   , Thread-1 (run), engine.py:554, [trial: 86, gen: 0] Error result, running recovery
2024-02-23 22:11:36,528 DEBUG  , Thread-1 (run), engine.py:698, [trial: 86, gen: 0] Running recovery
2024-02-23 22:11:37,353 DEBUG  , Thread-1 (run), runner.py:123, [trial: 86, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 22:11:37,353 DEBUG  , Thread-1 (run), runner.py:124, [trial: 86, gen: 0] STDERR: 
2024-02-23 22:11:37,353 INFO   , Thread-1 (run), runner.py:437, [trial: 86, gen: 0] Waiting for system to converge... 
2024-02-23 22:12:37,524 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:13:37,635 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:14:47,878 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:15:47,985 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:16:48,081 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:17:48,131 INFO   , Thread-1 (run), runner.py:508, [trial: 86, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:19:37,362 ERROR  , Thread-1 (run), runner.py:586, [trial: 86, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:19:37,661 DEBUG  , Thread-1 (run), runner.py:267, [trial: 86, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:03:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:03:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:19:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2707', 'uid': '093b78a2-f291-417b-bace-9a9cbd5d69f9'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:19:11Z', 'phase': ''}}}
2024-02-23 22:19:37,683 DEBUG  , Thread-1 (run), runner.py:296, [trial: 86, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-cr7z9
2024-02-23 22:19:37,933 ERROR  , Thread-1 (run), runner.py:368, [trial: 86, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-pjbjv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b7186568-f243-4248-87c7-9baaac968598', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:19:37 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-pjbjv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:19:37,993 DEBUG  , Thread-1 (run), engine.py:207, [trial: 86, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 22:19:37,997 INFO   , Thread-1 (run), engine.py:333, Trial 86 finished, completed in 00:18:00
2024-02-23 22:19:37,997 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 22:19:37,997 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 22:19:37,997 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 22:19:37,997 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 22:19:38,034 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-cr7z9
2024-02-23 22:19:51,449 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 22:20:46,305 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 22:20:46,330 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 22:20:50,433 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:20:55,579 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:20:55,579 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:20:55,822 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:00,945 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:00,945 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:01,241 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:06,376 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:06,376 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:06,521 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:11,658 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:11,658 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:11,907 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:17,044 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:17,044 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:17,236 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:22,379 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:22,379 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:22,456 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 86, gen: 0] Waiting for all pods to be ready
2024-02-23 22:21:27,578 INFO   , Thread-1 (run), deploy.py:32, [trial: 86, gen: 0] Operator ready
2024-02-23 22:21:27,578 INFO   , Thread-1 (run), deploy.py:36, [trial: 86, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:21:47,631 WARNING, Thread-1 (run), object.py:155, [trial: 87, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 22:21:47,631 WARNING, Thread-1 (run), object.py:155, [trial: 87, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 22:21:47,631 WARNING, Thread-1 (run), object.py:155, [trial: 87, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 22:21:47,632 DEBUG  , Thread-1 (run), engine.py:652, [trial: 87, gen: 0] Run and check
2024-02-23 22:21:47,792 DEBUG  , Thread-1 (run), runner.py:123, [trial: 87, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 22:21:47,792 DEBUG  , Thread-1 (run), runner.py:124, [trial: 87, gen: 0] STDERR: 
2024-02-23 22:21:47,792 INFO   , Thread-1 (run), runner.py:437, [trial: 87, gen: 0] Waiting for system to converge... 
2024-02-23 22:24:53,748 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:25:53,823 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:27:53,723 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:28:53,830 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:29:47,816 ERROR  , Thread-1 (run), runner.py:586, [trial: 87, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:29:48,091 DEBUG  , Thread-1 (run), runner.py:267, [trial: 87, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:21:47Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:21:47Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:29:23Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1817', 'uid': 'd38dae42-2c9c-4daa-b5df-677ea56e50c5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:29:23Z', 'phase': ''}}}
2024-02-23 22:29:48,113 DEBUG  , Thread-1 (run), runner.py:296, [trial: 87, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5sv6z
2024-02-23 22:29:48,333 ERROR  , Thread-1 (run), runner.py:368, [trial: 87, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bw759
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8e85ff57-3ea0-4a9d-b686-0774016d9501', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:29:48 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bw759\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:29:48,366 INFO   , Thread-1 (run), result.py:170, [trial: 87, gen: 0] No stderr, continue
2024-02-23 22:29:48,401 ERROR  , Thread-1 (run), health.py:155, [trial: 87, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 22:29:48,552 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,552 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line time="2024-02-24T05:21:23Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,552 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line time="2024-02-24T05:21:23Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 05:21:23.436759709 +0000 UTC m=+0.023018284]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,552 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line time="2024-02-24T05:21:23Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,552 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line time="2024-02-24T05:21:23Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,553 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line time="2024-02-24T05:21:23Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,603 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 87, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:29:48,761 INFO   , Thread-1 (run), consistency.py:496, [trial: 87, gen: 0] All input deltas are matched
2024-02-23 22:29:48,764 INFO   , Thread-1 (run), engine.py:554, [trial: 87, gen: 0] Error result, running recovery
2024-02-23 22:29:48,764 DEBUG  , Thread-1 (run), engine.py:698, [trial: 87, gen: 0] Running recovery
2024-02-23 22:29:49,620 DEBUG  , Thread-1 (run), runner.py:123, [trial: 87, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 22:29:49,620 DEBUG  , Thread-1 (run), runner.py:124, [trial: 87, gen: 0] STDERR: 
2024-02-23 22:29:49,620 INFO   , Thread-1 (run), runner.py:437, [trial: 87, gen: 0] Waiting for system to converge... 
2024-02-23 22:30:49,792 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:31:49,890 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:32:53,692 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:33:53,786 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:34:53,893 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:35:54,003 INFO   , Thread-1 (run), runner.py:508, [trial: 87, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:37:49,629 ERROR  , Thread-1 (run), runner.py:586, [trial: 87, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:37:49,929 DEBUG  , Thread-1 (run), runner.py:267, [trial: 87, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:21:47Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:21:47Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:37:23Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2737', 'uid': 'd38dae42-2c9c-4daa-b5df-677ea56e50c5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:37:23Z', 'phase': ''}}}
2024-02-23 22:37:49,951 DEBUG  , Thread-1 (run), runner.py:296, [trial: 87, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5sv6z
2024-02-23 22:37:50,201 ERROR  , Thread-1 (run), runner.py:368, [trial: 87, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bw759
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '351468bc-e65f-4bae-8fc1-1a6d2e673030', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:37:50 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bw759\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:37:50,248 DEBUG  , Thread-1 (run), engine.py:207, [trial: 87, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 22:37:50,252 INFO   , Thread-1 (run), engine.py:333, Trial 87 finished, completed in 00:18:02
2024-02-23 22:37:50,252 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-23 22:37:50,253 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 22:37:50,253 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 22:37:50,253 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 22:37:50,292 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5sv6z
2024-02-23 22:38:03,760 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 22:38:55,666 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 22:38:55,678 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 22:39:02,300 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:07,397 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:07,397 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:07,672 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:12,803 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:12,803 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:13,098 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:18,221 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:18,221 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:18,355 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:23,494 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:23,494 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:23,803 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:28,939 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:28,939 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:29,124 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:34,271 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:34,271 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:34,341 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 87, gen: 0] Waiting for all pods to be ready
2024-02-23 22:39:39,461 INFO   , Thread-1 (run), deploy.py:32, [trial: 87, gen: 0] Operator ready
2024-02-23 22:39:39,461 INFO   , Thread-1 (run), deploy.py:36, [trial: 87, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:39:59,512 WARNING, Thread-1 (run), object.py:155, [trial: 88, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 22:39:59,512 WARNING, Thread-1 (run), object.py:155, [trial: 88, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 22:39:59,512 WARNING, Thread-1 (run), object.py:155, [trial: 88, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 22:39:59,513 DEBUG  , Thread-1 (run), engine.py:652, [trial: 88, gen: 0] Run and check
2024-02-23 22:39:59,649 DEBUG  , Thread-1 (run), runner.py:123, [trial: 88, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 22:39:59,649 DEBUG  , Thread-1 (run), runner.py:124, [trial: 88, gen: 0] STDERR: 
2024-02-23 22:39:59,650 INFO   , Thread-1 (run), runner.py:437, [trial: 88, gen: 0] Waiting for system to converge... 
2024-02-23 22:43:35,627 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:44:35,694 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:46:05,575 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:47:05,682 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:47:59,691 ERROR  , Thread-1 (run), runner.py:586, [trial: 88, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:47:59,966 DEBUG  , Thread-1 (run), runner.py:267, [trial: 88, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:39:59Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:39:59Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:47:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': '66fbfd4b-903a-4b15-85b6-811f53ada214'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:47:35Z', 'phase': ''}}}
2024-02-23 22:47:59,990 DEBUG  , Thread-1 (run), runner.py:296, [trial: 88, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gnfjm
2024-02-23 22:48:00,222 ERROR  , Thread-1 (run), runner.py:368, [trial: 88, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rkk9g
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '06e7f797-7b85-41a3-bb08-82b48308a3ce', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:48:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rkk9g\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:48:00,255 INFO   , Thread-1 (run), result.py:170, [trial: 88, gen: 0] No stderr, continue
2024-02-23 22:48:00,415 ERROR  , Thread-1 (run), health.py:155, [trial: 88, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 22:48:00,437 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,438 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line time="2024-02-24T05:39:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,438 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line time="2024-02-24T05:39:35Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 05:39:35.327686633 +0000 UTC m=+0.012017408]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,438 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line time="2024-02-24T05:39:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,438 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line time="2024-02-24T05:39:35Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,438 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line time="2024-02-24T05:39:35Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,488 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 88, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 22:48:00,643 INFO   , Thread-1 (run), consistency.py:496, [trial: 88, gen: 0] All input deltas are matched
2024-02-23 22:48:00,646 INFO   , Thread-1 (run), engine.py:554, [trial: 88, gen: 0] Error result, running recovery
2024-02-23 22:48:00,646 DEBUG  , Thread-1 (run), engine.py:698, [trial: 88, gen: 0] Running recovery
2024-02-23 22:48:01,553 DEBUG  , Thread-1 (run), runner.py:123, [trial: 88, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 22:48:01,554 DEBUG  , Thread-1 (run), runner.py:124, [trial: 88, gen: 0] STDERR: 
2024-02-23 22:48:01,554 INFO   , Thread-1 (run), runner.py:437, [trial: 88, gen: 0] Waiting for system to converge... 
2024-02-23 22:49:01,732 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:50:01,841 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:51:14,344 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:52:14,450 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:53:14,505 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:54:14,614 INFO   , Thread-1 (run), runner.py:508, [trial: 88, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 22:56:01,565 ERROR  , Thread-1 (run), runner.py:586, [trial: 88, gen: 0] System failed to converge within 480 seconds
2024-02-23 22:56:01,859 DEBUG  , Thread-1 (run), runner.py:267, [trial: 88, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:39:59Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:39:59Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T05:55:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2716', 'uid': '66fbfd4b-903a-4b15-85b6-811f53ada214'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T05:55:35Z', 'phase': ''}}}
2024-02-23 22:56:01,882 DEBUG  , Thread-1 (run), runner.py:296, [trial: 88, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gnfjm
2024-02-23 22:56:02,127 ERROR  , Thread-1 (run), runner.py:368, [trial: 88, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rkk9g
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9d81f928-4194-4dc2-9b41-5b7b77875902', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 05:56:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rkk9g\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 22:56:02,183 DEBUG  , Thread-1 (run), engine.py:207, [trial: 88, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 22:56:02,188 INFO   , Thread-1 (run), engine.py:333, Trial 88 finished, completed in 00:18:01
2024-02-23 22:56:02,188 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-23 22:56:02,188 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 22:56:02,188 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 22:56:02,188 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 22:56:02,225 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-gnfjm
2024-02-23 22:56:15,745 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 22:57:06,599 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 22:57:06,611 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 22:57:12,697 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:17,841 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:17,841 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:18,196 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:23,332 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:23,332 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:23,607 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:28,755 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:28,756 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:28,901 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:34,039 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:34,039 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:34,279 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:39,427 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:39,427 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:39,669 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:44,803 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:44,803 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:57:44,867 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 88, gen: 0] Waiting for all pods to be ready
2024-02-23 22:57:50,003 INFO   , Thread-1 (run), deploy.py:32, [trial: 88, gen: 0] Operator ready
2024-02-23 22:57:50,003 INFO   , Thread-1 (run), deploy.py:36, [trial: 88, gen: 0] All pods took 0 seconds to get ready
2024-02-23 22:58:10,176 WARNING, Thread-1 (run), object.py:155, [trial: 89, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 22:58:10,176 WARNING, Thread-1 (run), object.py:155, [trial: 89, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 22:58:10,176 WARNING, Thread-1 (run), object.py:155, [trial: 89, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 22:58:10,177 DEBUG  , Thread-1 (run), engine.py:652, [trial: 89, gen: 0] Run and check
2024-02-23 22:58:10,333 DEBUG  , Thread-1 (run), runner.py:123, [trial: 89, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 22:58:10,333 DEBUG  , Thread-1 (run), runner.py:124, [trial: 89, gen: 0] STDERR: 
2024-02-23 22:58:10,334 INFO   , Thread-1 (run), runner.py:437, [trial: 89, gen: 0] Waiting for system to converge... 
2024-02-23 23:01:16,262 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:02:16,361 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:04:21,219 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:05:21,326 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:06:10,360 ERROR  , Thread-1 (run), runner.py:586, [trial: 89, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:06:10,638 DEBUG  , Thread-1 (run), runner.py:267, [trial: 89, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:58:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:58:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:05:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1829', 'uid': '48c5e4c9-ed58-43b1-8cfa-64cf72b87e2c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:05:46Z', 'phase': ''}}}
2024-02-23 23:06:10,659 DEBUG  , Thread-1 (run), runner.py:296, [trial: 89, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-v9cdz
2024-02-23 23:06:10,888 ERROR  , Thread-1 (run), runner.py:368, [trial: 89, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-fk84w
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9fac1b6d-4dc0-4760-92d5-eb9adce71e1b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:06:10 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-fk84w\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:06:10,937 INFO   , Thread-1 (run), result.py:170, [trial: 89, gen: 0] No stderr, continue
2024-02-23 23:06:10,974 ERROR  , Thread-1 (run), health.py:155, [trial: 89, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 23:06:11,000 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,001 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line time="2024-02-24T05:57:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,001 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line time="2024-02-24T05:57:45Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 05:57:45.898571994 +0000 UTC m=+0.019812882]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,001 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line time="2024-02-24T05:57:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,001 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line time="2024-02-24T05:57:45Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,001 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line time="2024-02-24T05:57:45Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,054 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 89, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:06:11,269 INFO   , Thread-1 (run), consistency.py:496, [trial: 89, gen: 0] All input deltas are matched
2024-02-23 23:06:11,272 INFO   , Thread-1 (run), engine.py:554, [trial: 89, gen: 0] Error result, running recovery
2024-02-23 23:06:11,272 DEBUG  , Thread-1 (run), engine.py:698, [trial: 89, gen: 0] Running recovery
2024-02-23 23:06:12,082 DEBUG  , Thread-1 (run), runner.py:123, [trial: 89, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 23:06:12,083 DEBUG  , Thread-1 (run), runner.py:124, [trial: 89, gen: 0] STDERR: 
2024-02-23 23:06:12,083 INFO   , Thread-1 (run), runner.py:437, [trial: 89, gen: 0] Waiting for system to converge... 
2024-02-23 23:07:12,238 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:09:16,145 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:10:16,221 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:11:16,286 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:12:16,394 INFO   , Thread-1 (run), runner.py:508, [trial: 89, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:14:12,093 ERROR  , Thread-1 (run), runner.py:586, [trial: 89, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:14:12,394 DEBUG  , Thread-1 (run), runner.py:267, [trial: 89, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T05:58:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T05:58:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:13:46Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2749', 'uid': '48c5e4c9-ed58-43b1-8cfa-64cf72b87e2c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:13:46Z', 'phase': ''}}}
2024-02-23 23:14:12,416 DEBUG  , Thread-1 (run), runner.py:296, [trial: 89, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-v9cdz
2024-02-23 23:14:12,674 ERROR  , Thread-1 (run), runner.py:368, [trial: 89, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-fk84w
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b03e9bd7-82f4-415a-b99b-8eb116cf26ee', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:14:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-fk84w\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:14:12,741 DEBUG  , Thread-1 (run), engine.py:207, [trial: 89, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 23:14:12,745 INFO   , Thread-1 (run), engine.py:333, Trial 89 finished, completed in 00:18:00
2024-02-23 23:14:12,746 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 23:14:12,746 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 23:14:12,746 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 23:14:12,746 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 23:14:12,783 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-v9cdz
2024-02-23 23:14:26,267 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 23:15:17,026 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 23:15:17,040 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 23:15:22,709 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:27,856 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:27,856 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:28,075 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:33,209 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:33,209 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:33,521 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:38,664 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:38,664 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:38,780 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:43,911 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:43,911 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:44,140 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:49,277 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:49,277 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:49,459 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:54,725 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:54,725 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:15:54,810 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 89, gen: 0] Waiting for all pods to be ready
2024-02-23 23:15:59,956 INFO   , Thread-1 (run), deploy.py:32, [trial: 89, gen: 0] Operator ready
2024-02-23 23:15:59,956 INFO   , Thread-1 (run), deploy.py:36, [trial: 89, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:16:20,021 WARNING, Thread-1 (run), object.py:155, [trial: 90, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 23:16:20,021 WARNING, Thread-1 (run), object.py:155, [trial: 90, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 23:16:20,022 WARNING, Thread-1 (run), object.py:155, [trial: 90, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 23:16:20,023 DEBUG  , Thread-1 (run), engine.py:652, [trial: 90, gen: 0] Run and check
2024-02-23 23:16:20,174 DEBUG  , Thread-1 (run), runner.py:123, [trial: 90, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 23:16:20,174 DEBUG  , Thread-1 (run), runner.py:124, [trial: 90, gen: 0] STDERR: 
2024-02-23 23:16:20,174 INFO   , Thread-1 (run), runner.py:437, [trial: 90, gen: 0] Waiting for system to converge... 
2024-02-23 23:19:20,465 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:20:20,589 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:21:20,686 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:22:31,393 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:23:31,498 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:24:20,199 ERROR  , Thread-1 (run), runner.py:586, [trial: 90, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:24:20,470 DEBUG  , Thread-1 (run), runner.py:267, [trial: 90, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:16:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:16:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:23:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1891', 'uid': 'a531110b-b0bf-4ac1-98b2-25e7e761290e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:23:56Z', 'phase': ''}}}
2024-02-23 23:24:20,493 DEBUG  , Thread-1 (run), runner.py:296, [trial: 90, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9v7xs
2024-02-23 23:24:20,729 ERROR  , Thread-1 (run), runner.py:368, [trial: 90, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-d6hds
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2ee21cd2-9ac8-45ff-880c-88ae87932c41', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:24:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-d6hds\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:24:20,778 INFO   , Thread-1 (run), result.py:170, [trial: 90, gen: 0] No stderr, continue
2024-02-23 23:24:20,817 ERROR  , Thread-1 (run), health.py:155, [trial: 90, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 23:24:20,842 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,842 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line time="2024-02-24T06:15:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,842 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line time="2024-02-24T06:15:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 06:15:55.799262531 +0000 UTC m=+0.011493841]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,842 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line time="2024-02-24T06:15:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,842 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line time="2024-02-24T06:15:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,843 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line time="2024-02-24T06:15:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:20,910 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 90, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:24:21,068 INFO   , Thread-1 (run), consistency.py:496, [trial: 90, gen: 0] All input deltas are matched
2024-02-23 23:24:21,070 INFO   , Thread-1 (run), engine.py:554, [trial: 90, gen: 0] Error result, running recovery
2024-02-23 23:24:21,070 DEBUG  , Thread-1 (run), engine.py:698, [trial: 90, gen: 0] Running recovery
2024-02-23 23:24:21,902 DEBUG  , Thread-1 (run), runner.py:123, [trial: 90, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 23:24:21,902 DEBUG  , Thread-1 (run), runner.py:124, [trial: 90, gen: 0] STDERR: 
2024-02-23 23:24:21,902 INFO   , Thread-1 (run), runner.py:437, [trial: 90, gen: 0] Waiting for system to converge... 
2024-02-23 23:25:22,034 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:26:22,101 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:27:27,410 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:28:27,518 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:29:27,624 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:30:27,730 INFO   , Thread-1 (run), runner.py:508, [trial: 90, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:32:21,912 ERROR  , Thread-1 (run), runner.py:586, [trial: 90, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:32:22,217 DEBUG  , Thread-1 (run), runner.py:267, [trial: 90, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:16:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:16:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:31:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2883', 'uid': 'a531110b-b0bf-4ac1-98b2-25e7e761290e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:31:56Z', 'phase': ''}}}
2024-02-23 23:32:22,239 DEBUG  , Thread-1 (run), runner.py:296, [trial: 90, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9v7xs
2024-02-23 23:32:22,517 ERROR  , Thread-1 (run), runner.py:368, [trial: 90, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-d6hds
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'fbd6905b-5c7c-4a0d-8dce-54f9b11f8c38', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:32:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-d6hds\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:32:22,563 DEBUG  , Thread-1 (run), engine.py:207, [trial: 90, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 23:32:22,567 INFO   , Thread-1 (run), engine.py:333, Trial 90 finished, completed in 00:17:59
2024-02-23 23:32:22,567 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-23 23:32:22,568 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 23:32:22,568 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 23:32:22,568 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 23:32:22,605 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-9v7xs
2024-02-23 23:32:36,192 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 23:33:27,503 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 23:33:27,538 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 23:33:33,406 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:33:38,549 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:33:38,549 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:33:38,785 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:33:43,926 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:33:43,926 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:33:44,216 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:33:49,477 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:33:49,477 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:33:49,610 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:33:54,723 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:33:54,723 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:33:54,968 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:34:00,105 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:34:00,105 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:34:00,300 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:34:05,453 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:34:05,453 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:34:05,525 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 90, gen: 0] Waiting for all pods to be ready
2024-02-23 23:34:10,665 INFO   , Thread-1 (run), deploy.py:32, [trial: 90, gen: 0] Operator ready
2024-02-23 23:34:10,665 INFO   , Thread-1 (run), deploy.py:36, [trial: 90, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:34:30,747 WARNING, Thread-1 (run), object.py:155, [trial: 91, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 23:34:30,747 WARNING, Thread-1 (run), object.py:155, [trial: 91, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 23:34:30,747 WARNING, Thread-1 (run), object.py:155, [trial: 91, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 23:34:30,749 DEBUG  , Thread-1 (run), engine.py:652, [trial: 91, gen: 0] Run and check
2024-02-23 23:34:30,896 DEBUG  , Thread-1 (run), runner.py:123, [trial: 91, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 23:34:30,896 DEBUG  , Thread-1 (run), runner.py:124, [trial: 91, gen: 0] STDERR: 
2024-02-23 23:34:30,897 INFO   , Thread-1 (run), runner.py:437, [trial: 91, gen: 0] Waiting for system to converge... 
2024-02-23 23:37:36,742 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:38:36,801 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:40:36,727 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:41:36,834 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:42:30,922 ERROR  , Thread-1 (run), runner.py:586, [trial: 91, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:42:31,186 DEBUG  , Thread-1 (run), runner.py:267, [trial: 91, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:34:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:34:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:42:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': 'e1b3ffea-4d2e-496e-94b8-03b6ca0a5cc5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:42:06Z', 'phase': ''}}}
2024-02-23 23:42:31,208 DEBUG  , Thread-1 (run), runner.py:296, [trial: 91, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xnz55
2024-02-23 23:42:31,444 ERROR  , Thread-1 (run), runner.py:368, [trial: 91, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v6hq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1a6c6878-c126-4168-aa2a-2edb663ec6a8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:42:31 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v6hq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:42:31,493 INFO   , Thread-1 (run), result.py:170, [trial: 91, gen: 0] No stderr, continue
2024-02-23 23:42:31,548 ERROR  , Thread-1 (run), health.py:155, [trial: 91, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-23 23:42:31,574 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,574 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line time="2024-02-24T06:34:06Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,574 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line time="2024-02-24T06:34:06Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 06:34:06.439427748 +0000 UTC m=+0.011636011]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,574 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line time="2024-02-24T06:34:06Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,574 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line time="2024-02-24T06:34:06Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,575 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line time="2024-02-24T06:34:06Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,625 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 91, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-23 23:42:31,781 INFO   , Thread-1 (run), consistency.py:496, [trial: 91, gen: 0] All input deltas are matched
2024-02-23 23:42:31,783 INFO   , Thread-1 (run), engine.py:554, [trial: 91, gen: 0] Error result, running recovery
2024-02-23 23:42:31,784 DEBUG  , Thread-1 (run), engine.py:698, [trial: 91, gen: 0] Running recovery
2024-02-23 23:42:32,565 DEBUG  , Thread-1 (run), runner.py:123, [trial: 91, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-23 23:42:32,566 DEBUG  , Thread-1 (run), runner.py:124, [trial: 91, gen: 0] STDERR: 
2024-02-23 23:42:32,566 INFO   , Thread-1 (run), runner.py:437, [trial: 91, gen: 0] Waiting for system to converge... 
2024-02-23 23:43:32,726 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:44:32,835 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:45:36,684 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:46:36,745 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:47:36,853 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:48:36,957 INFO   , Thread-1 (run), runner.py:508, [trial: 91, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:50:32,577 ERROR  , Thread-1 (run), runner.py:586, [trial: 91, gen: 0] System failed to converge within 480 seconds
2024-02-23 23:50:32,871 DEBUG  , Thread-1 (run), runner.py:267, [trial: 91, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:34:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:34:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T06:50:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': 'e1b3ffea-4d2e-496e-94b8-03b6ca0a5cc5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T06:50:06Z', 'phase': ''}}}
2024-02-23 23:50:32,893 DEBUG  , Thread-1 (run), runner.py:296, [trial: 91, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xnz55
2024-02-23 23:50:33,143 ERROR  , Thread-1 (run), runner.py:368, [trial: 91, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v6hq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'ffea5075-e0b9-4ada-b539-6295765da647', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 06:50:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v6hq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-23 23:50:33,190 DEBUG  , Thread-1 (run), engine.py:207, [trial: 91, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-23 23:50:33,194 INFO   , Thread-1 (run), engine.py:333, Trial 91 finished, completed in 00:18:00
2024-02-23 23:50:33,194 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-23 23:50:33,194 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-23 23:50:33,194 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-23 23:50:33,194 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-23 23:50:33,235 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-xnz55
2024-02-23 23:50:46,964 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-23 23:51:41,297 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-23 23:51:41,315 INFO   , root, kind.py  :145, Loading preload images
2024-02-23 23:51:46,520 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:51:51,786 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:51:51,787 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:51:52,023 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:51:57,138 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:51:57,138 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:51:57,505 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:52:02,648 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:52:02,649 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:52:02,828 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:52:07,954 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:52:07,954 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:52:08,183 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:52:13,310 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:52:13,310 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:52:13,484 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:52:18,630 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:52:18,631 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:52:18,693 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 91, gen: 0] Waiting for all pods to be ready
2024-02-23 23:52:23,833 INFO   , Thread-1 (run), deploy.py:32, [trial: 91, gen: 0] Operator ready
2024-02-23 23:52:23,833 INFO   , Thread-1 (run), deploy.py:36, [trial: 91, gen: 0] All pods took 0 seconds to get ready
2024-02-23 23:52:43,882 WARNING, Thread-1 (run), object.py:155, [trial: 92, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-23 23:52:43,882 WARNING, Thread-1 (run), object.py:155, [trial: 92, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-23 23:52:43,882 WARNING, Thread-1 (run), object.py:155, [trial: 92, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-23 23:52:43,883 DEBUG  , Thread-1 (run), engine.py:652, [trial: 92, gen: 0] Run and check
2024-02-23 23:52:44,109 DEBUG  , Thread-1 (run), runner.py:123, [trial: 92, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-23 23:52:44,109 DEBUG  , Thread-1 (run), runner.py:124, [trial: 92, gen: 0] STDERR: 
2024-02-23 23:52:44,110 INFO   , Thread-1 (run), runner.py:437, [trial: 92, gen: 0] Waiting for system to converge... 
2024-02-23 23:55:49,932 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:56:49,994 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:58:49,912 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-23 23:59:49,992 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:00:44,140 ERROR  , Thread-1 (run), runner.py:586, [trial: 92, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:00:44,422 DEBUG  , Thread-1 (run), runner.py:267, [trial: 92, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:52:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:52:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:00:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': '9bb5e00b-f327-4be0-a87e-05dfff795244'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:00:19Z', 'phase': ''}}}
2024-02-24 00:00:44,444 DEBUG  , Thread-1 (run), runner.py:296, [trial: 92, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6xhm6
2024-02-24 00:00:44,664 ERROR  , Thread-1 (run), runner.py:368, [trial: 92, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rlrqn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '91e29834-0dff-4722-88c1-1fcc26cc84d7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:00:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rlrqn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:00:44,714 INFO   , Thread-1 (run), result.py:170, [trial: 92, gen: 0] No stderr, continue
2024-02-24 00:00:44,752 ERROR  , Thread-1 (run), health.py:155, [trial: 92, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 00:00:44,776 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,776 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line time="2024-02-24T06:52:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line time="2024-02-24T06:52:19Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 06:52:19.644333388 +0000 UTC m=+0.015631454]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line time="2024-02-24T06:52:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line time="2024-02-24T06:52:19Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,777 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line time="2024-02-24T06:52:19Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:44,829 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 92, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:00:45,116 INFO   , Thread-1 (run), consistency.py:496, [trial: 92, gen: 0] All input deltas are matched
2024-02-24 00:00:45,119 INFO   , Thread-1 (run), engine.py:554, [trial: 92, gen: 0] Error result, running recovery
2024-02-24 00:00:45,119 DEBUG  , Thread-1 (run), engine.py:698, [trial: 92, gen: 0] Running recovery
2024-02-24 00:00:45,913 DEBUG  , Thread-1 (run), runner.py:123, [trial: 92, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 00:00:45,913 DEBUG  , Thread-1 (run), runner.py:124, [trial: 92, gen: 0] STDERR: 
2024-02-24 00:00:45,913 INFO   , Thread-1 (run), runner.py:437, [trial: 92, gen: 0] Waiting for system to converge... 
2024-02-24 00:01:46,091 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:02:46,195 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:03:54,616 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:04:54,723 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:05:54,830 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:06:54,939 INFO   , Thread-1 (run), runner.py:508, [trial: 92, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:08:45,924 ERROR  , Thread-1 (run), runner.py:586, [trial: 92, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:08:46,208 DEBUG  , Thread-1 (run), runner.py:267, [trial: 92, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T06:52:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T06:52:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:08:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2719', 'uid': '9bb5e00b-f327-4be0-a87e-05dfff795244'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:08:19Z', 'phase': ''}}}
2024-02-24 00:08:46,230 DEBUG  , Thread-1 (run), runner.py:296, [trial: 92, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6xhm6
2024-02-24 00:08:46,477 ERROR  , Thread-1 (run), runner.py:368, [trial: 92, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rlrqn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '21fa32d4-5483-4e8d-a4ac-4e6d638f3ce5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:08:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rlrqn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:08:46,520 DEBUG  , Thread-1 (run), engine.py:207, [trial: 92, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 00:08:46,524 INFO   , Thread-1 (run), engine.py:333, Trial 92 finished, completed in 00:18:03
2024-02-24 00:08:46,524 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 00:08:46,524 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 00:08:46,524 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 00:08:46,524 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 00:08:46,560 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6xhm6
2024-02-24 00:08:59,785 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 00:09:51,667 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 00:09:51,688 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 00:09:56,949 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:02,094 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:02,095 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:02,360 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:07,500 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:07,500 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:07,784 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:12,926 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:12,926 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:13,050 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:18,191 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:18,191 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:18,429 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:23,557 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:23,557 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:23,747 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:28,894 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:28,894 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:28,964 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 92, gen: 0] Waiting for all pods to be ready
2024-02-24 00:10:34,106 INFO   , Thread-1 (run), deploy.py:32, [trial: 92, gen: 0] Operator ready
2024-02-24 00:10:34,106 INFO   , Thread-1 (run), deploy.py:36, [trial: 92, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:10:54,168 WARNING, Thread-1 (run), object.py:155, [trial: 93, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 00:10:54,168 WARNING, Thread-1 (run), object.py:155, [trial: 93, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 00:10:54,169 WARNING, Thread-1 (run), object.py:155, [trial: 93, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 00:10:54,169 DEBUG  , Thread-1 (run), engine.py:652, [trial: 93, gen: 0] Run and check
2024-02-24 00:10:54,317 DEBUG  , Thread-1 (run), runner.py:123, [trial: 93, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 00:10:54,317 DEBUG  , Thread-1 (run), runner.py:124, [trial: 93, gen: 0] STDERR: 
2024-02-24 00:10:54,317 INFO   , Thread-1 (run), runner.py:437, [trial: 93, gen: 0] Waiting for system to converge... 
2024-02-24 00:14:00,287 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:15:00,355 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:17:00,185 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:18:00,297 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:18:54,341 ERROR  , Thread-1 (run), runner.py:586, [trial: 93, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:18:54,614 DEBUG  , Thread-1 (run), runner.py:267, [trial: 93, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:10:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:10:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:18:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': '1c39bbb2-f544-429c-8a95-e3b4b08dbb14'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:18:30Z', 'phase': ''}}}
2024-02-24 00:18:54,636 DEBUG  , Thread-1 (run), runner.py:296, [trial: 93, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wgz2w
2024-02-24 00:18:54,860 ERROR  , Thread-1 (run), runner.py:368, [trial: 93, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bwzrc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9c1a070d-5e31-4418-a8ac-ab1d2456b0b6', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:18:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bwzrc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:18:54,906 INFO   , Thread-1 (run), result.py:170, [trial: 93, gen: 0] No stderr, continue
2024-02-24 00:18:54,941 ERROR  , Thread-1 (run), health.py:155, [trial: 93, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line time="2024-02-24T07:10:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line time="2024-02-24T07:10:29Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 07:10:29.909024796 +0000 UTC m=+0.012144648]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line time="2024-02-24T07:10:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line time="2024-02-24T07:10:29Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:54,965 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line time="2024-02-24T07:10:29Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:55,023 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 93, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:18:55,324 INFO   , Thread-1 (run), consistency.py:496, [trial: 93, gen: 0] All input deltas are matched
2024-02-24 00:18:55,326 INFO   , Thread-1 (run), engine.py:554, [trial: 93, gen: 0] Error result, running recovery
2024-02-24 00:18:55,326 DEBUG  , Thread-1 (run), engine.py:698, [trial: 93, gen: 0] Running recovery
2024-02-24 00:18:56,202 DEBUG  , Thread-1 (run), runner.py:123, [trial: 93, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 00:18:56,202 DEBUG  , Thread-1 (run), runner.py:124, [trial: 93, gen: 0] STDERR: 
2024-02-24 00:18:56,203 INFO   , Thread-1 (run), runner.py:437, [trial: 93, gen: 0] Waiting for system to converge... 
2024-02-24 00:19:56,379 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:22:00,188 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:23:00,297 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:24:00,402 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:25:00,511 INFO   , Thread-1 (run), runner.py:508, [trial: 93, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:26:56,212 ERROR  , Thread-1 (run), runner.py:586, [trial: 93, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:26:56,509 DEBUG  , Thread-1 (run), runner.py:267, [trial: 93, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:10:54Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:10:54Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:26:30Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '1c39bbb2-f544-429c-8a95-e3b4b08dbb14'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:26:30Z', 'phase': ''}}}
2024-02-24 00:26:56,532 DEBUG  , Thread-1 (run), runner.py:296, [trial: 93, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wgz2w
2024-02-24 00:26:56,792 ERROR  , Thread-1 (run), runner.py:368, [trial: 93, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bwzrc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '499bc879-bdbb-4c4a-abac-69e44dc3cba5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:26:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bwzrc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:26:56,839 DEBUG  , Thread-1 (run), engine.py:207, [trial: 93, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 00:26:56,843 INFO   , Thread-1 (run), engine.py:333, Trial 93 finished, completed in 00:18:00
2024-02-24 00:26:56,843 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 00:26:56,843 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 00:26:56,844 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 00:26:56,844 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 00:26:56,891 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wgz2w
2024-02-24 00:27:10,569 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 00:28:01,682 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 00:28:01,693 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 00:28:08,056 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:13,205 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:13,205 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:13,478 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:18,621 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:18,621 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:18,945 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:24,084 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:24,084 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:24,203 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:29,342 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:29,342 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:29,645 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:34,768 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:34,768 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:34,965 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:40,111 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:40,111 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:28:40,178 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 93, gen: 0] Waiting for all pods to be ready
2024-02-24 00:28:45,316 INFO   , Thread-1 (run), deploy.py:32, [trial: 93, gen: 0] Operator ready
2024-02-24 00:28:45,316 INFO   , Thread-1 (run), deploy.py:36, [trial: 93, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:29:05,386 WARNING, Thread-1 (run), object.py:155, [trial: 94, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 00:29:05,386 WARNING, Thread-1 (run), object.py:155, [trial: 94, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 00:29:05,387 WARNING, Thread-1 (run), object.py:155, [trial: 94, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 00:29:05,388 DEBUG  , Thread-1 (run), engine.py:652, [trial: 94, gen: 0] Run and check
2024-02-24 00:29:05,539 DEBUG  , Thread-1 (run), runner.py:123, [trial: 94, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 00:29:05,540 DEBUG  , Thread-1 (run), runner.py:124, [trial: 94, gen: 0] STDERR: 
2024-02-24 00:29:05,540 INFO   , Thread-1 (run), runner.py:437, [trial: 94, gen: 0] Waiting for system to converge... 
2024-02-24 00:32:41,453 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:33:41,562 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:35:11,388 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:36:11,496 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:37:05,564 ERROR  , Thread-1 (run), runner.py:586, [trial: 94, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:37:05,832 DEBUG  , Thread-1 (run), runner.py:267, [trial: 94, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:29:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:29:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:36:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': '1ec9754a-0b67-432e-b8b1-93a8f066c564'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:36:41Z', 'phase': ''}}}
2024-02-24 00:37:05,854 DEBUG  , Thread-1 (run), runner.py:296, [trial: 94, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d6mfr
2024-02-24 00:37:06,073 ERROR  , Thread-1 (run), runner.py:368, [trial: 94, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-84mjx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e9ef8d86-47c0-4edc-8654-8aed2e7fd907', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:37:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-84mjx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:37:06,106 INFO   , Thread-1 (run), result.py:170, [trial: 94, gen: 0] No stderr, continue
2024-02-24 00:37:06,137 ERROR  , Thread-1 (run), health.py:155, [trial: 94, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 00:37:06,290 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,290 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,291 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 07:28:41.16543124 +0000 UTC m=+0.010358512]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,291 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,291 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,291 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,291 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line time="2024-02-24T07:28:41Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,343 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 94, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:37:06,500 INFO   , Thread-1 (run), consistency.py:496, [trial: 94, gen: 0] All input deltas are matched
2024-02-24 00:37:06,503 INFO   , Thread-1 (run), engine.py:554, [trial: 94, gen: 0] Error result, running recovery
2024-02-24 00:37:06,503 DEBUG  , Thread-1 (run), engine.py:698, [trial: 94, gen: 0] Running recovery
2024-02-24 00:37:07,340 DEBUG  , Thread-1 (run), runner.py:123, [trial: 94, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 00:37:07,341 DEBUG  , Thread-1 (run), runner.py:124, [trial: 94, gen: 0] STDERR: 
2024-02-24 00:37:07,341 INFO   , Thread-1 (run), runner.py:437, [trial: 94, gen: 0] Waiting for system to converge... 
2024-02-24 00:38:07,527 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:39:07,584 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:40:11,400 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:41:11,501 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:42:11,577 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:43:11,676 INFO   , Thread-1 (run), runner.py:508, [trial: 94, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:45:07,353 ERROR  , Thread-1 (run), runner.py:586, [trial: 94, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:45:07,645 DEBUG  , Thread-1 (run), runner.py:267, [trial: 94, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:29:05Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:29:05Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:44:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '1ec9754a-0b67-432e-b8b1-93a8f066c564'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:44:41Z', 'phase': ''}}}
2024-02-24 00:45:07,666 DEBUG  , Thread-1 (run), runner.py:296, [trial: 94, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d6mfr
2024-02-24 00:45:07,919 ERROR  , Thread-1 (run), runner.py:368, [trial: 94, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-84mjx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c982ee09-7f9b-4b85-8fcb-8db9efad95a0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:45:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-84mjx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:45:07,965 DEBUG  , Thread-1 (run), engine.py:207, [trial: 94, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 00:45:07,969 INFO   , Thread-1 (run), engine.py:333, Trial 94 finished, completed in 00:18:01
2024-02-24 00:45:07,969 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 00:45:07,969 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 00:45:07,969 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 00:45:07,969 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 00:45:08,006 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-d6mfr
2024-02-24 00:45:22,021 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 00:46:18,297 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 00:46:18,310 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 00:46:23,671 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:28,811 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:28,811 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:29,038 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:34,180 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:34,180 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:34,466 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:39,602 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:39,603 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:39,736 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:44,862 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:44,862 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:45,120 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:50,244 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:50,245 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:50,399 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:46:55,540 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:46:55,540 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:46:55,612 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 94, gen: 0] Waiting for all pods to be ready
2024-02-24 00:47:00,875 INFO   , Thread-1 (run), deploy.py:32, [trial: 94, gen: 0] Operator ready
2024-02-24 00:47:00,876 INFO   , Thread-1 (run), deploy.py:36, [trial: 94, gen: 0] All pods took 0 seconds to get ready
2024-02-24 00:47:20,929 WARNING, Thread-1 (run), object.py:155, [trial: 95, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 00:47:20,929 WARNING, Thread-1 (run), object.py:155, [trial: 95, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 00:47:20,929 WARNING, Thread-1 (run), object.py:155, [trial: 95, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 00:47:20,930 DEBUG  , Thread-1 (run), engine.py:652, [trial: 95, gen: 0] Run and check
2024-02-24 00:47:21,143 DEBUG  , Thread-1 (run), runner.py:123, [trial: 95, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 00:47:21,143 DEBUG  , Thread-1 (run), runner.py:124, [trial: 95, gen: 0] STDERR: 
2024-02-24 00:47:21,143 INFO   , Thread-1 (run), runner.py:437, [trial: 95, gen: 0] Waiting for system to converge... 
2024-02-24 00:50:26,919 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:51:27,027 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:53:34,761 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:54:34,825 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:55:21,168 ERROR  , Thread-1 (run), runner.py:586, [trial: 95, gen: 0] System failed to converge within 480 seconds
2024-02-24 00:55:21,437 DEBUG  , Thread-1 (run), runner.py:267, [trial: 95, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:47:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:47:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T07:54:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1806', 'uid': 'ae1b4982-bbcf-4b9d-91bb-9d16ab125d27'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T07:54:56Z', 'phase': ''}}}
2024-02-24 00:55:21,460 DEBUG  , Thread-1 (run), runner.py:296, [trial: 95, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ch8kt
2024-02-24 00:55:21,679 ERROR  , Thread-1 (run), runner.py:368, [trial: 95, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ngmp5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2e8aca66-9e6e-4108-89b7-786c4e2d4081', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 07:55:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ngmp5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 00:55:21,726 INFO   , Thread-1 (run), result.py:170, [trial: 95, gen: 0] No stderr, continue
2024-02-24 00:55:21,761 ERROR  , Thread-1 (run), health.py:155, [trial: 95, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 00:55:21,786 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,786 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line time="2024-02-24T07:46:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,786 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line time="2024-02-24T07:46:56Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 07:46:56.620473522 +0000 UTC m=+0.025757928]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,786 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line time="2024-02-24T07:46:56Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line time="2024-02-24T07:46:56Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line time="2024-02-24T07:46:56Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:21,848 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 95, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 00:55:22,029 INFO   , Thread-1 (run), consistency.py:496, [trial: 95, gen: 0] All input deltas are matched
2024-02-24 00:55:22,032 INFO   , Thread-1 (run), engine.py:554, [trial: 95, gen: 0] Error result, running recovery
2024-02-24 00:55:22,032 DEBUG  , Thread-1 (run), engine.py:698, [trial: 95, gen: 0] Running recovery
2024-02-24 00:55:22,846 DEBUG  , Thread-1 (run), runner.py:123, [trial: 95, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 00:55:22,847 DEBUG  , Thread-1 (run), runner.py:124, [trial: 95, gen: 0] STDERR: 
2024-02-24 00:55:22,847 INFO   , Thread-1 (run), runner.py:437, [trial: 95, gen: 0] Waiting for system to converge... 
2024-02-24 00:56:23,027 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:57:23,129 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:58:26,853 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 00:59:26,958 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:00:27,089 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:01:27,199 INFO   , Thread-1 (run), runner.py:508, [trial: 95, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:03:22,859 ERROR  , Thread-1 (run), runner.py:586, [trial: 95, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:03:23,159 DEBUG  , Thread-1 (run), runner.py:267, [trial: 95, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T07:47:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T07:47:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:02:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2731', 'uid': 'ae1b4982-bbcf-4b9d-91bb-9d16ab125d27'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:02:56Z', 'phase': ''}}}
2024-02-24 01:03:23,182 DEBUG  , Thread-1 (run), runner.py:296, [trial: 95, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ch8kt
2024-02-24 01:03:23,434 ERROR  , Thread-1 (run), runner.py:368, [trial: 95, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ngmp5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e66e068e-72a7-4d2b-b670-d9ea3aeda902', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:03:23 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ngmp5\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 01:03:23,478 DEBUG  , Thread-1 (run), engine.py:207, [trial: 95, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 01:03:23,482 INFO   , Thread-1 (run), engine.py:333, Trial 95 finished, completed in 00:18:05
2024-02-24 01:03:23,482 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-24 01:03:23,482 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 01:03:23,482 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 01:03:23,482 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 01:03:23,518 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-ch8kt
2024-02-24 01:03:37,208 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 01:04:29,930 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 01:04:29,944 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 01:04:35,865 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:04:41,009 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:04:41,009 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:04:41,272 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:04:46,414 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:04:46,414 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:04:46,759 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:04:51,900 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:04:51,900 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:04:52,108 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:04:57,377 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:04:57,377 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:04:57,704 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:05:02,833 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:05:02,833 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:05:03,042 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:05:08,170 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:05:08,170 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:05:08,237 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 95, gen: 0] Waiting for all pods to be ready
2024-02-24 01:05:13,374 INFO   , Thread-1 (run), deploy.py:32, [trial: 95, gen: 0] Operator ready
2024-02-24 01:05:13,374 INFO   , Thread-1 (run), deploy.py:36, [trial: 95, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:05:33,433 WARNING, Thread-1 (run), object.py:155, [trial: 96, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 01:05:33,433 WARNING, Thread-1 (run), object.py:155, [trial: 96, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 01:05:33,433 WARNING, Thread-1 (run), object.py:155, [trial: 96, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 01:05:33,435 DEBUG  , Thread-1 (run), engine.py:652, [trial: 96, gen: 0] Run and check
2024-02-24 01:05:33,596 DEBUG  , Thread-1 (run), runner.py:123, [trial: 96, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 01:05:33,596 DEBUG  , Thread-1 (run), runner.py:124, [trial: 96, gen: 0] STDERR: 
2024-02-24 01:05:33,597 INFO   , Thread-1 (run), runner.py:437, [trial: 96, gen: 0] Waiting for system to converge... 
2024-02-24 01:08:39,485 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:09:39,580 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:11:39,536 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:12:39,644 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:13:33,628 ERROR  , Thread-1 (run), runner.py:586, [trial: 96, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:13:33,888 DEBUG  , Thread-1 (run), runner.py:267, [trial: 96, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:05:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:05:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:13:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1806', 'uid': '8f133138-957e-438d-a143-5de45339e940'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:13:09Z', 'phase': ''}}}
2024-02-24 01:13:33,909 DEBUG  , Thread-1 (run), runner.py:296, [trial: 96, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-89w8w
2024-02-24 01:13:34,125 ERROR  , Thread-1 (run), runner.py:368, [trial: 96, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bw6j7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4e050cad-2e27-43a6-ae3d-c43ef52cb1b9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:13:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bw6j7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:13:34,163 INFO   , Thread-1 (run), result.py:170, [trial: 96, gen: 0] No stderr, continue
2024-02-24 01:13:34,196 ERROR  , Thread-1 (run), health.py:155, [trial: 96, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line time="2024-02-24T08:05:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line time="2024-02-24T08:05:09Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 08:05:09.195443386 +0000 UTC m=+0.022353234]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line time="2024-02-24T08:05:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line time="2024-02-24T08:05:09Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,222 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line time="2024-02-24T08:05:09Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,275 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 96, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:13:34,443 INFO   , Thread-1 (run), consistency.py:496, [trial: 96, gen: 0] All input deltas are matched
2024-02-24 01:13:34,446 INFO   , Thread-1 (run), engine.py:554, [trial: 96, gen: 0] Error result, running recovery
2024-02-24 01:13:34,446 DEBUG  , Thread-1 (run), engine.py:698, [trial: 96, gen: 0] Running recovery
2024-02-24 01:13:35,283 DEBUG  , Thread-1 (run), runner.py:123, [trial: 96, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 01:13:35,283 DEBUG  , Thread-1 (run), runner.py:124, [trial: 96, gen: 0] STDERR: 
2024-02-24 01:13:35,283 INFO   , Thread-1 (run), runner.py:437, [trial: 96, gen: 0] Waiting for system to converge... 
2024-02-24 01:14:35,465 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:15:35,565 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:16:44,449 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:17:44,560 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:18:44,669 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:19:44,778 INFO   , Thread-1 (run), runner.py:508, [trial: 96, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:21:35,295 ERROR  , Thread-1 (run), runner.py:586, [trial: 96, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:21:35,541 DEBUG  , Thread-1 (run), runner.py:267, [trial: 96, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:05:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:05:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:21:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': '8f133138-957e-438d-a143-5de45339e940'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:21:09Z', 'phase': ''}}}
2024-02-24 01:21:35,563 DEBUG  , Thread-1 (run), runner.py:296, [trial: 96, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-89w8w
2024-02-24 01:21:35,822 ERROR  , Thread-1 (run), runner.py:368, [trial: 96, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bw6j7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7824787e-c3bd-4bc7-9f85-4e6c87bfabda', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:21:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bw6j7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:21:35,884 DEBUG  , Thread-1 (run), engine.py:207, [trial: 96, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 01:21:35,888 INFO   , Thread-1 (run), engine.py:333, Trial 96 finished, completed in 00:18:02
2024-02-24 01:21:35,888 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 01:21:35,889 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 01:21:35,889 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 01:21:35,889 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 01:21:35,929 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-89w8w
2024-02-24 01:21:49,489 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 01:22:39,959 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 01:22:39,985 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 01:22:46,949 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:22:52,224 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:22:52,225 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:22:52,431 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:22:57,563 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:22:57,563 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:22:57,869 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:23:03,008 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:23:03,008 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:23:03,129 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:23:08,279 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:23:08,279 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:23:08,506 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:23:13,643 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:23:13,643 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:23:13,819 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:23:18,963 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:23:18,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:23:19,033 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 96, gen: 0] Waiting for all pods to be ready
2024-02-24 01:23:24,166 INFO   , Thread-1 (run), deploy.py:32, [trial: 96, gen: 0] Operator ready
2024-02-24 01:23:24,166 INFO   , Thread-1 (run), deploy.py:36, [trial: 96, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:23:44,218 WARNING, Thread-1 (run), object.py:155, [trial: 97, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 01:23:44,218 WARNING, Thread-1 (run), object.py:155, [trial: 97, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 01:23:44,219 WARNING, Thread-1 (run), object.py:155, [trial: 97, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 01:23:44,219 DEBUG  , Thread-1 (run), engine.py:652, [trial: 97, gen: 0] Run and check
2024-02-24 01:23:44,400 DEBUG  , Thread-1 (run), runner.py:123, [trial: 97, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 01:23:44,400 DEBUG  , Thread-1 (run), runner.py:124, [trial: 97, gen: 0] STDERR: 
2024-02-24 01:23:44,400 INFO   , Thread-1 (run), runner.py:437, [trial: 97, gen: 0] Waiting for system to converge... 
2024-02-24 01:26:50,291 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:27:50,359 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:29:57,018 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:30:57,126 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:31:44,448 ERROR  , Thread-1 (run), runner.py:586, [trial: 97, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:31:44,713 DEBUG  , Thread-1 (run), runner.py:267, [trial: 97, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:23:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:23:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:31:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1797', 'uid': '8fcb1d9b-e145-474b-9182-59ec71836391'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:31:20Z', 'phase': ''}}}
2024-02-24 01:31:44,736 DEBUG  , Thread-1 (run), runner.py:296, [trial: 97, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-czghl
2024-02-24 01:31:44,962 ERROR  , Thread-1 (run), runner.py:368, [trial: 97, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-gh7dv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '937260b6-331f-4af2-9dd7-79f7b57182af', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:31:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-gh7dv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:31:44,995 INFO   , Thread-1 (run), result.py:170, [trial: 97, gen: 0] No stderr, continue
2024-02-24 01:31:45,030 ERROR  , Thread-1 (run), health.py:155, [trial: 97, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line time="2024-02-24T08:23:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line time="2024-02-24T08:23:19Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 08:23:19.98781048 +0000 UTC m=+0.015841190]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line time="2024-02-24T08:23:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line time="2024-02-24T08:23:19Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,055 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line time="2024-02-24T08:23:19Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,106 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 97, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:31:45,399 INFO   , Thread-1 (run), consistency.py:496, [trial: 97, gen: 0] All input deltas are matched
2024-02-24 01:31:45,401 INFO   , Thread-1 (run), engine.py:554, [trial: 97, gen: 0] Error result, running recovery
2024-02-24 01:31:45,401 DEBUG  , Thread-1 (run), engine.py:698, [trial: 97, gen: 0] Running recovery
2024-02-24 01:31:46,185 DEBUG  , Thread-1 (run), runner.py:123, [trial: 97, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 01:31:46,185 DEBUG  , Thread-1 (run), runner.py:124, [trial: 97, gen: 0] STDERR: 
2024-02-24 01:31:46,186 INFO   , Thread-1 (run), runner.py:437, [trial: 97, gen: 0] Waiting for system to converge... 
2024-02-24 01:32:46,364 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:33:46,463 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:34:50,238 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:35:50,337 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:36:50,441 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:37:50,544 INFO   , Thread-1 (run), runner.py:508, [trial: 97, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:39:46,194 ERROR  , Thread-1 (run), runner.py:586, [trial: 97, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:39:46,493 DEBUG  , Thread-1 (run), runner.py:267, [trial: 97, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:23:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:23:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:39:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2717', 'uid': '8fcb1d9b-e145-474b-9182-59ec71836391'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:39:20Z', 'phase': ''}}}
2024-02-24 01:39:46,515 DEBUG  , Thread-1 (run), runner.py:296, [trial: 97, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-czghl
2024-02-24 01:39:46,763 ERROR  , Thread-1 (run), runner.py:368, [trial: 97, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-gh7dv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '291b949b-e58e-411b-bd2a-aeb4c118ba35', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:39:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-gh7dv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:39:46,824 DEBUG  , Thread-1 (run), engine.py:207, [trial: 97, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 01:39:46,828 INFO   , Thread-1 (run), engine.py:333, Trial 97 finished, completed in 00:18:00
2024-02-24 01:39:46,828 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 01:39:46,829 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 01:39:46,829 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 01:39:46,829 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 01:39:46,871 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-czghl
2024-02-24 01:40:00,470 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 01:40:51,477 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 01:40:51,501 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 01:40:58,062 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:03,204 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:03,204 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:03,478 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:08,628 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:08,628 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:08,932 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:14,068 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:14,068 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:14,214 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:19,349 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:19,349 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:19,551 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:24,689 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:24,689 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:24,885 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:30,033 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:30,033 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:30,115 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 97, gen: 0] Waiting for all pods to be ready
2024-02-24 01:41:35,255 INFO   , Thread-1 (run), deploy.py:32, [trial: 97, gen: 0] Operator ready
2024-02-24 01:41:35,255 INFO   , Thread-1 (run), deploy.py:36, [trial: 97, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:41:55,307 WARNING, Thread-1 (run), object.py:155, [trial: 98, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 01:41:55,307 WARNING, Thread-1 (run), object.py:155, [trial: 98, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 01:41:55,307 WARNING, Thread-1 (run), object.py:155, [trial: 98, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 01:41:55,308 DEBUG  , Thread-1 (run), engine.py:652, [trial: 98, gen: 0] Run and check
2024-02-24 01:41:55,486 DEBUG  , Thread-1 (run), runner.py:123, [trial: 98, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 01:41:55,486 DEBUG  , Thread-1 (run), runner.py:124, [trial: 98, gen: 0] STDERR: 
2024-02-24 01:41:55,487 INFO   , Thread-1 (run), runner.py:437, [trial: 98, gen: 0] Waiting for system to converge... 
2024-02-24 01:45:01,391 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:46:01,496 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:48:05,674 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:49:05,771 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:49:55,522 ERROR  , Thread-1 (run), runner.py:586, [trial: 98, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:49:55,789 DEBUG  , Thread-1 (run), runner.py:267, [trial: 98, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:41:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:41:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:49:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': '5278f989-4a9e-4b03-b847-125e24315536'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:49:31Z', 'phase': ''}}}
2024-02-24 01:49:55,810 DEBUG  , Thread-1 (run), runner.py:296, [trial: 98, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r7wtb
2024-02-24 01:49:56,036 ERROR  , Thread-1 (run), runner.py:368, [trial: 98, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-t67t5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'fb44952b-6610-4629-9b91-9ac2be45baa0', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:49:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-t67t5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:49:56,070 INFO   , Thread-1 (run), result.py:170, [trial: 98, gen: 0] No stderr, continue
2024-02-24 01:49:56,106 ERROR  , Thread-1 (run), health.py:155, [trial: 98, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line time="2024-02-24T08:41:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line time="2024-02-24T08:41:31Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 08:41:31.090785718 +0000 UTC m=+0.011763827]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line time="2024-02-24T08:41:31Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line time="2024-02-24T08:41:31Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,130 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line time="2024-02-24T08:41:31Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,181 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 98, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 01:49:56,469 INFO   , Thread-1 (run), consistency.py:496, [trial: 98, gen: 0] All input deltas are matched
2024-02-24 01:49:56,472 INFO   , Thread-1 (run), engine.py:554, [trial: 98, gen: 0] Error result, running recovery
2024-02-24 01:49:56,472 DEBUG  , Thread-1 (run), engine.py:698, [trial: 98, gen: 0] Running recovery
2024-02-24 01:49:57,330 DEBUG  , Thread-1 (run), runner.py:123, [trial: 98, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 01:49:57,330 DEBUG  , Thread-1 (run), runner.py:124, [trial: 98, gen: 0] STDERR: 
2024-02-24 01:49:57,330 INFO   , Thread-1 (run), runner.py:437, [trial: 98, gen: 0] Waiting for system to converge... 
2024-02-24 01:50:57,511 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:51:57,610 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:53:01,333 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:54:01,441 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:55:01,551 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:56:01,632 INFO   , Thread-1 (run), runner.py:508, [trial: 98, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 01:57:57,341 ERROR  , Thread-1 (run), runner.py:586, [trial: 98, gen: 0] System failed to converge within 480 seconds
2024-02-24 01:57:57,637 DEBUG  , Thread-1 (run), runner.py:267, [trial: 98, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T08:41:55Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T08:41:55Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T08:57:31Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2714', 'uid': '5278f989-4a9e-4b03-b847-125e24315536'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T08:57:31Z', 'phase': ''}}}
2024-02-24 01:57:57,658 DEBUG  , Thread-1 (run), runner.py:296, [trial: 98, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r7wtb
2024-02-24 01:57:57,918 ERROR  , Thread-1 (run), runner.py:368, [trial: 98, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-t67t5
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '17990103-a691-4dd4-ba8c-6274906475ff', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 08:57:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-t67t5\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 01:57:57,957 DEBUG  , Thread-1 (run), engine.py:207, [trial: 98, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 01:57:57,961 INFO   , Thread-1 (run), engine.py:333, Trial 98 finished, completed in 00:18:01
2024-02-24 01:57:57,962 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 01:57:57,962 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 01:57:57,962 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 01:57:57,962 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 01:57:57,998 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-r7wtb
2024-02-24 01:58:11,569 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 01:59:05,793 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 01:59:05,813 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 01:59:11,818 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:16,964 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:16,964 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:17,206 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:22,343 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:22,343 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:22,665 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:27,810 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:27,810 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:27,986 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:33,125 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:33,125 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:33,384 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:38,519 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:38,520 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:38,750 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:43,882 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:43,882 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 01:59:43,953 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 98, gen: 0] Waiting for all pods to be ready
2024-02-24 01:59:49,089 INFO   , Thread-1 (run), deploy.py:32, [trial: 98, gen: 0] Operator ready
2024-02-24 01:59:49,089 INFO   , Thread-1 (run), deploy.py:36, [trial: 98, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:00:09,136 WARNING, Thread-1 (run), object.py:155, [trial: 99, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 02:00:09,136 WARNING, Thread-1 (run), object.py:155, [trial: 99, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 02:00:09,136 WARNING, Thread-1 (run), object.py:155, [trial: 99, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 02:00:09,136 DEBUG  , Thread-1 (run), engine.py:652, [trial: 99, gen: 0] Run and check
2024-02-24 02:00:09,290 DEBUG  , Thread-1 (run), runner.py:123, [trial: 99, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 02:00:09,291 DEBUG  , Thread-1 (run), runner.py:124, [trial: 99, gen: 0] STDERR: 
2024-02-24 02:00:09,291 INFO   , Thread-1 (run), runner.py:437, [trial: 99, gen: 0] Waiting for system to converge... 
2024-02-24 02:03:15,793 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:04:15,859 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:06:19,783 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:07:19,872 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:08:09,317 ERROR  , Thread-1 (run), runner.py:586, [trial: 99, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:08:09,558 DEBUG  , Thread-1 (run), runner.py:267, [trial: 99, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:00:09Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:00:09Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:07:45Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': '21b5baa2-6281-434f-b3a5-8ef9b887070e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:07:45Z', 'phase': ''}}}
2024-02-24 02:08:09,578 DEBUG  , Thread-1 (run), runner.py:296, [trial: 99, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7xkhz
2024-02-24 02:08:09,807 ERROR  , Thread-1 (run), runner.py:368, [trial: 99, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sgh29
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e2647bcf-aaff-4f62-99cb-30185404b624', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:08:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sgh29\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:08:09,856 INFO   , Thread-1 (run), result.py:170, [trial: 99, gen: 0] No stderr, continue
2024-02-24 02:08:09,894 ERROR  , Thread-1 (run), health.py:155, [trial: 99, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 02:08:09,918 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,918 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line time="2024-02-24T08:59:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,918 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line time="2024-02-24T08:59:44Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 08:59:44.931628095 +0000 UTC m=+0.011887550]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,918 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line time="2024-02-24T08:59:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,919 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line time="2024-02-24T08:59:44Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,919 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line time="2024-02-24T08:59:44Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:09,983 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 99, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:08:10,289 INFO   , Thread-1 (run), consistency.py:496, [trial: 99, gen: 0] All input deltas are matched
2024-02-24 02:08:10,292 INFO   , Thread-1 (run), engine.py:554, [trial: 99, gen: 0] Error result, running recovery
2024-02-24 02:08:10,292 DEBUG  , Thread-1 (run), engine.py:698, [trial: 99, gen: 0] Running recovery
2024-02-24 02:08:11,176 DEBUG  , Thread-1 (run), runner.py:123, [trial: 99, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 02:08:11,176 DEBUG  , Thread-1 (run), runner.py:124, [trial: 99, gen: 0] STDERR: 
2024-02-24 02:08:11,176 INFO   , Thread-1 (run), runner.py:437, [trial: 99, gen: 0] Waiting for system to converge... 
2024-02-24 02:09:11,294 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:10:11,407 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:11:22,751 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:12:22,842 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:13:22,951 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:14:23,048 INFO   , Thread-1 (run), runner.py:508, [trial: 99, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:16:11,187 ERROR  , Thread-1 (run), runner.py:586, [trial: 99, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:16:11,476 DEBUG  , Thread-1 (run), runner.py:267, [trial: 99, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:00:09Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:00:09Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:15:45Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': '21b5baa2-6281-434f-b3a5-8ef9b887070e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:15:45Z', 'phase': ''}}}
2024-02-24 02:16:11,498 DEBUG  , Thread-1 (run), runner.py:296, [trial: 99, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7xkhz
2024-02-24 02:16:11,747 ERROR  , Thread-1 (run), runner.py:368, [trial: 99, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sgh29
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '57bbf9fe-ac05-4721-89bf-258628499a30', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:16:11 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sgh29\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:16:11,791 DEBUG  , Thread-1 (run), engine.py:207, [trial: 99, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 02:16:11,795 INFO   , Thread-1 (run), engine.py:333, Trial 99 finished, completed in 00:18:03
2024-02-24 02:16:11,795 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-24 02:16:11,795 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 02:16:11,795 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 02:16:11,795 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 02:16:11,834 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7xkhz
2024-02-24 02:16:25,456 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 02:17:16,130 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 02:17:16,146 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 02:17:22,755 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:27,902 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:27,902 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:28,176 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:33,287 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:33,287 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:33,598 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:38,741 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:38,742 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:38,871 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:44,007 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:44,007 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:44,225 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:49,363 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:49,363 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:49,601 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:54,722 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:54,722 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:17:54,784 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 99, gen: 0] Waiting for all pods to be ready
2024-02-24 02:17:59,917 INFO   , Thread-1 (run), deploy.py:32, [trial: 99, gen: 0] Operator ready
2024-02-24 02:17:59,917 INFO   , Thread-1 (run), deploy.py:36, [trial: 99, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:18:19,971 WARNING, Thread-1 (run), object.py:155, [trial: 100, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 02:18:19,971 WARNING, Thread-1 (run), object.py:155, [trial: 100, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 02:18:19,971 WARNING, Thread-1 (run), object.py:155, [trial: 100, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 02:18:19,972 DEBUG  , Thread-1 (run), engine.py:652, [trial: 100, gen: 0] Run and check
2024-02-24 02:18:20,127 DEBUG  , Thread-1 (run), runner.py:123, [trial: 100, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 02:18:20,127 DEBUG  , Thread-1 (run), runner.py:124, [trial: 100, gen: 0] STDERR: 
2024-02-24 02:18:20,127 INFO   , Thread-1 (run), runner.py:437, [trial: 100, gen: 0] Waiting for system to converge... 
2024-02-24 02:21:15,282 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:22:15,400 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:23:15,508 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:24:26,021 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:25:26,121 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:26:20,162 ERROR  , Thread-1 (run), runner.py:586, [trial: 100, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:26:20,436 DEBUG  , Thread-1 (run), runner.py:267, [trial: 100, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:18:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:18:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:25:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1841', 'uid': '2ecbf0fa-83ff-4d4d-80a5-6db0da8fc6c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:25:56Z', 'phase': ''}}}
2024-02-24 02:26:20,458 DEBUG  , Thread-1 (run), runner.py:296, [trial: 100, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-t5k69
2024-02-24 02:26:20,684 ERROR  , Thread-1 (run), runner.py:368, [trial: 100, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cvc67
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2998f52a-fdc0-4036-ba29-3fe01b0c24fd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:26:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cvc67\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:26:20,718 INFO   , Thread-1 (run), result.py:170, [trial: 100, gen: 0] No stderr, continue
2024-02-24 02:26:20,752 ERROR  , Thread-1 (run), health.py:155, [trial: 100, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 02:26:20,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line time="2024-02-24T09:17:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line time="2024-02-24T09:17:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 09:17:55.772845357 +0000 UTC m=+0.013439467]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line time="2024-02-24T09:17:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line time="2024-02-24T09:17:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,913 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line time="2024-02-24T09:17:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:20,974 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 100, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:26:21,131 INFO   , Thread-1 (run), consistency.py:496, [trial: 100, gen: 0] All input deltas are matched
2024-02-24 02:26:21,133 INFO   , Thread-1 (run), engine.py:554, [trial: 100, gen: 0] Error result, running recovery
2024-02-24 02:26:21,133 DEBUG  , Thread-1 (run), engine.py:698, [trial: 100, gen: 0] Running recovery
2024-02-24 02:26:21,903 DEBUG  , Thread-1 (run), runner.py:123, [trial: 100, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 02:26:21,903 DEBUG  , Thread-1 (run), runner.py:124, [trial: 100, gen: 0] STDERR: 
2024-02-24 02:26:21,904 INFO   , Thread-1 (run), runner.py:437, [trial: 100, gen: 0] Waiting for system to converge... 
2024-02-24 02:27:22,079 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:28:22,146 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:29:26,032 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:30:26,119 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:31:26,228 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:32:26,335 INFO   , Thread-1 (run), runner.py:508, [trial: 100, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:34:21,914 ERROR  , Thread-1 (run), runner.py:586, [trial: 100, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:34:22,207 DEBUG  , Thread-1 (run), runner.py:267, [trial: 100, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:18:20Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:18:20Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:33:56Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2806', 'uid': '2ecbf0fa-83ff-4d4d-80a5-6db0da8fc6c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:33:56Z', 'phase': ''}}}
2024-02-24 02:34:22,229 DEBUG  , Thread-1 (run), runner.py:296, [trial: 100, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-t5k69
2024-02-24 02:34:22,492 ERROR  , Thread-1 (run), runner.py:368, [trial: 100, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cvc67
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '50fce89e-7e21-417c-a208-30e0d5c43cbc', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:34:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cvc67\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:34:22,540 DEBUG  , Thread-1 (run), engine.py:207, [trial: 100, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 02:34:22,544 INFO   , Thread-1 (run), engine.py:333, Trial 100 finished, completed in 00:18:00
2024-02-24 02:34:22,544 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 02:34:22,544 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 02:34:22,544 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 02:34:22,544 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 02:34:22,580 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-t5k69
2024-02-24 02:34:36,000 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 02:35:25,487 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 02:35:25,502 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 02:35:32,465 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:35:37,610 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:35:37,610 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:35:37,844 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:35:42,983 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:35:42,983 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:35:43,298 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:35:48,418 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:35:48,418 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:35:48,551 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:35:53,683 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:35:53,683 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:35:53,937 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:35:59,079 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:35:59,079 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:35:59,284 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:36:04,423 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:36:04,423 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:36:04,486 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 100, gen: 0] Waiting for all pods to be ready
2024-02-24 02:36:09,632 INFO   , Thread-1 (run), deploy.py:32, [trial: 100, gen: 0] Operator ready
2024-02-24 02:36:09,632 INFO   , Thread-1 (run), deploy.py:36, [trial: 100, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:36:29,686 WARNING, Thread-1 (run), object.py:155, [trial: 101, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 02:36:29,686 WARNING, Thread-1 (run), object.py:155, [trial: 101, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 02:36:29,686 WARNING, Thread-1 (run), object.py:155, [trial: 101, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 02:36:29,686 DEBUG  , Thread-1 (run), engine.py:652, [trial: 101, gen: 0] Run and check
2024-02-24 02:36:29,846 DEBUG  , Thread-1 (run), runner.py:123, [trial: 101, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 02:36:29,846 DEBUG  , Thread-1 (run), runner.py:124, [trial: 101, gen: 0] STDERR: 
2024-02-24 02:36:29,846 INFO   , Thread-1 (run), runner.py:437, [trial: 101, gen: 0] Waiting for system to converge... 
2024-02-24 02:39:35,733 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:40:35,784 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:42:39,404 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:43:39,458 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:44:29,868 ERROR  , Thread-1 (run), runner.py:586, [trial: 101, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:44:30,136 DEBUG  , Thread-1 (run), runner.py:267, [trial: 101, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:36:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:36:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:44:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': '2fed0f92-1e33-4e0b-ae48-07064379996c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:44:05Z', 'phase': ''}}}
2024-02-24 02:44:30,157 DEBUG  , Thread-1 (run), runner.py:296, [trial: 101, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lnftj
2024-02-24 02:44:30,373 ERROR  , Thread-1 (run), runner.py:368, [trial: 101, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wjttd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '163aa693-40ee-4732-a2eb-a857f5795383', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:44:30 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wjttd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:44:30,422 INFO   , Thread-1 (run), result.py:170, [trial: 101, gen: 0] No stderr, continue
2024-02-24 02:44:30,459 ERROR  , Thread-1 (run), health.py:155, [trial: 101, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 02:44:30,623 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 09:36:05.439445146 +0000 UTC m=+0.015487054]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,624 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line time="2024-02-24T09:36:05Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,701 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 101, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 02:44:30,877 INFO   , Thread-1 (run), consistency.py:496, [trial: 101, gen: 0] All input deltas are matched
2024-02-24 02:44:30,880 INFO   , Thread-1 (run), engine.py:554, [trial: 101, gen: 0] Error result, running recovery
2024-02-24 02:44:30,880 DEBUG  , Thread-1 (run), engine.py:698, [trial: 101, gen: 0] Running recovery
2024-02-24 02:44:31,703 DEBUG  , Thread-1 (run), runner.py:123, [trial: 101, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 02:44:31,703 DEBUG  , Thread-1 (run), runner.py:124, [trial: 101, gen: 0] STDERR: 
2024-02-24 02:44:31,703 INFO   , Thread-1 (run), runner.py:437, [trial: 101, gen: 0] Waiting for system to converge... 
2024-02-24 02:45:31,839 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:47:35,715 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:48:35,823 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:49:35,873 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:50:35,980 INFO   , Thread-1 (run), runner.py:508, [trial: 101, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:52:31,714 ERROR  , Thread-1 (run), runner.py:586, [trial: 101, gen: 0] System failed to converge within 480 seconds
2024-02-24 02:52:32,011 DEBUG  , Thread-1 (run), runner.py:267, [trial: 101, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:36:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:36:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T09:52:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2714', 'uid': '2fed0f92-1e33-4e0b-ae48-07064379996c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T09:52:05Z', 'phase': ''}}}
2024-02-24 02:52:32,033 DEBUG  , Thread-1 (run), runner.py:296, [trial: 101, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lnftj
2024-02-24 02:52:32,283 ERROR  , Thread-1 (run), runner.py:368, [trial: 101, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-wjttd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7f45a275-40a4-44c9-b870-05a29f49e5dc', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 09:52:32 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-wjttd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 02:52:32,344 DEBUG  , Thread-1 (run), engine.py:207, [trial: 101, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 02:52:32,348 INFO   , Thread-1 (run), engine.py:333, Trial 101 finished, completed in 00:17:59
2024-02-24 02:52:32,348 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-24 02:52:32,348 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 02:52:32,349 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 02:52:32,349 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 02:52:32,393 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-lnftj
2024-02-24 02:52:45,832 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 02:53:37,332 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 02:53:37,343 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 02:53:44,007 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:53:49,153 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:53:49,153 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:53:49,393 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:53:54,533 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:53:54,533 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:53:54,841 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:53:59,982 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:53:59,982 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:54:00,096 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:54:05,230 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:54:05,231 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:54:05,465 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:54:10,597 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:54:10,597 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:54:10,810 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:54:15,953 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:54:15,954 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:54:16,034 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 101, gen: 0] Waiting for all pods to be ready
2024-02-24 02:54:21,292 INFO   , Thread-1 (run), deploy.py:32, [trial: 101, gen: 0] Operator ready
2024-02-24 02:54:21,293 INFO   , Thread-1 (run), deploy.py:36, [trial: 101, gen: 0] All pods took 0 seconds to get ready
2024-02-24 02:54:41,343 WARNING, Thread-1 (run), object.py:155, [trial: 102, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 02:54:41,343 WARNING, Thread-1 (run), object.py:155, [trial: 102, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 02:54:41,343 WARNING, Thread-1 (run), object.py:155, [trial: 102, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 02:54:41,344 DEBUG  , Thread-1 (run), engine.py:652, [trial: 102, gen: 0] Run and check
2024-02-24 02:54:41,567 DEBUG  , Thread-1 (run), runner.py:123, [trial: 102, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 02:54:41,567 DEBUG  , Thread-1 (run), runner.py:124, [trial: 102, gen: 0] STDERR: 
2024-02-24 02:54:41,567 INFO   , Thread-1 (run), runner.py:437, [trial: 102, gen: 0] Waiting for system to converge... 
2024-02-24 02:58:17,363 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 02:59:17,472 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:00:47,215 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:01:47,320 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:02:41,592 ERROR  , Thread-1 (run), runner.py:586, [trial: 102, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:02:41,859 DEBUG  , Thread-1 (run), runner.py:267, [trial: 102, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:54:41Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:54:41Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:02:17Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': '52846874-2cbc-4989-a3d2-5a0b5eec9ec7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:02:17Z', 'phase': ''}}}
2024-02-24 03:02:41,881 DEBUG  , Thread-1 (run), runner.py:296, [trial: 102, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-nlxdz
2024-02-24 03:02:42,101 ERROR  , Thread-1 (run), runner.py:368, [trial: 102, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kvh55
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '96801423-598b-46ff-aaeb-fafab6f9869f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:02:42 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kvh55\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:02:42,150 INFO   , Thread-1 (run), result.py:170, [trial: 102, gen: 0] No stderr, continue
2024-02-24 03:02:42,187 ERROR  , Thread-1 (run), health.py:155, [trial: 102, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 03:02:42,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line time="2024-02-24T09:54:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line time="2024-02-24T09:54:16Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 09:54:16.9637315 +0000 UTC m=+0.012121361]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line time="2024-02-24T09:54:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,212 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line time="2024-02-24T09:54:16Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,213 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line time="2024-02-24T09:54:16Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,266 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 102, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:02:42,425 INFO   , Thread-1 (run), consistency.py:496, [trial: 102, gen: 0] All input deltas are matched
2024-02-24 03:02:42,427 INFO   , Thread-1 (run), engine.py:554, [trial: 102, gen: 0] Error result, running recovery
2024-02-24 03:02:42,427 DEBUG  , Thread-1 (run), engine.py:698, [trial: 102, gen: 0] Running recovery
2024-02-24 03:02:43,251 DEBUG  , Thread-1 (run), runner.py:123, [trial: 102, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 03:02:43,252 DEBUG  , Thread-1 (run), runner.py:124, [trial: 102, gen: 0] STDERR: 
2024-02-24 03:02:43,252 INFO   , Thread-1 (run), runner.py:437, [trial: 102, gen: 0] Waiting for system to converge... 
2024-02-24 03:03:43,432 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:04:43,538 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:05:47,208 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:06:47,313 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:07:47,413 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:08:47,521 INFO   , Thread-1 (run), runner.py:508, [trial: 102, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:10:43,262 ERROR  , Thread-1 (run), runner.py:586, [trial: 102, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:10:43,527 DEBUG  , Thread-1 (run), runner.py:267, [trial: 102, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T09:54:41Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T09:54:41Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:10:17Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2714', 'uid': '52846874-2cbc-4989-a3d2-5a0b5eec9ec7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:10:17Z', 'phase': ''}}}
2024-02-24 03:10:43,548 DEBUG  , Thread-1 (run), runner.py:296, [trial: 102, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-nlxdz
2024-02-24 03:10:43,801 ERROR  , Thread-1 (run), runner.py:368, [trial: 102, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kvh55
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '571af622-290d-4372-8f5e-7b648ffb0ec7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:10:43 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kvh55\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:10:43,847 DEBUG  , Thread-1 (run), engine.py:207, [trial: 102, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 03:10:43,851 INFO   , Thread-1 (run), engine.py:333, Trial 102 finished, completed in 00:18:01
2024-02-24 03:10:43,851 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 03:10:43,851 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 03:10:43,851 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 03:10:43,851 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 03:10:43,897 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-nlxdz
2024-02-24 03:10:57,264 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 03:11:48,092 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 03:11:48,135 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 03:11:54,215 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:11:59,359 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:11:59,359 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:11:59,602 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:04,744 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:04,744 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:04,996 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:10,139 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:10,139 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:10,272 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:15,410 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:15,411 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:15,683 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:20,959 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:20,959 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:21,170 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:26,323 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:26,323 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:26,399 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 102, gen: 0] Waiting for all pods to be ready
2024-02-24 03:12:31,537 INFO   , Thread-1 (run), deploy.py:32, [trial: 102, gen: 0] Operator ready
2024-02-24 03:12:31,537 INFO   , Thread-1 (run), deploy.py:36, [trial: 102, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:12:51,598 WARNING, Thread-1 (run), object.py:155, [trial: 103, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 03:12:51,598 WARNING, Thread-1 (run), object.py:155, [trial: 103, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 03:12:51,598 WARNING, Thread-1 (run), object.py:155, [trial: 103, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 03:12:51,599 DEBUG  , Thread-1 (run), engine.py:652, [trial: 103, gen: 0] Run and check
2024-02-24 03:12:51,754 DEBUG  , Thread-1 (run), runner.py:123, [trial: 103, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 03:12:51,754 DEBUG  , Thread-1 (run), runner.py:124, [trial: 103, gen: 0] STDERR: 
2024-02-24 03:12:51,755 INFO   , Thread-1 (run), runner.py:437, [trial: 103, gen: 0] Waiting for system to converge... 
2024-02-24 03:15:45,993 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:16:46,101 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:17:46,207 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:18:57,557 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:19:57,642 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:20:51,796 ERROR  , Thread-1 (run), runner.py:586, [trial: 103, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:20:52,069 DEBUG  , Thread-1 (run), runner.py:267, [trial: 103, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:12:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:12:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:20:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': 'd8b6adcf-1d99-4e7c-bebb-62fd02191296'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:20:27Z', 'phase': ''}}}
2024-02-24 03:20:52,093 DEBUG  , Thread-1 (run), runner.py:296, [trial: 103, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vm7p2
2024-02-24 03:20:52,317 ERROR  , Thread-1 (run), runner.py:368, [trial: 103, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-djk8v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '66aa5042-2ce4-4cf7-a7f5-0a39482fa70a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:20:52 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-djk8v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:20:52,366 INFO   , Thread-1 (run), result.py:170, [trial: 103, gen: 0] No stderr, continue
2024-02-24 03:20:52,400 ERROR  , Thread-1 (run), health.py:155, [trial: 103, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 03:20:52,425 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,425 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line time="2024-02-24T10:12:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,425 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line time="2024-02-24T10:12:27Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 10:12:27.307266413 +0000 UTC m=+0.011163024]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,425 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line time="2024-02-24T10:12:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,426 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line time="2024-02-24T10:12:27Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,426 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line time="2024-02-24T10:12:27Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,497 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 103, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:20:52,678 INFO   , Thread-1 (run), consistency.py:496, [trial: 103, gen: 0] All input deltas are matched
2024-02-24 03:20:52,681 INFO   , Thread-1 (run), engine.py:554, [trial: 103, gen: 0] Error result, running recovery
2024-02-24 03:20:52,681 DEBUG  , Thread-1 (run), engine.py:698, [trial: 103, gen: 0] Running recovery
2024-02-24 03:20:53,531 DEBUG  , Thread-1 (run), runner.py:123, [trial: 103, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 03:20:53,531 DEBUG  , Thread-1 (run), runner.py:124, [trial: 103, gen: 0] STDERR: 
2024-02-24 03:20:53,531 INFO   , Thread-1 (run), runner.py:437, [trial: 103, gen: 0] Waiting for system to converge... 
2024-02-24 03:21:53,710 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:22:53,810 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:23:57,568 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:24:57,675 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:25:57,764 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:26:57,837 INFO   , Thread-1 (run), runner.py:508, [trial: 103, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:28:53,542 ERROR  , Thread-1 (run), runner.py:586, [trial: 103, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:28:53,836 DEBUG  , Thread-1 (run), runner.py:267, [trial: 103, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:12:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:12:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:28:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2732', 'uid': 'd8b6adcf-1d99-4e7c-bebb-62fd02191296'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:28:27Z', 'phase': ''}}}
2024-02-24 03:28:53,859 DEBUG  , Thread-1 (run), runner.py:296, [trial: 103, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vm7p2
2024-02-24 03:28:54,122 ERROR  , Thread-1 (run), runner.py:368, [trial: 103, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-djk8v
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '341b9498-634e-4715-ae8f-7a77a4965a56', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:28:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-djk8v\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:28:54,168 DEBUG  , Thread-1 (run), engine.py:207, [trial: 103, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 03:28:54,172 INFO   , Thread-1 (run), engine.py:333, Trial 103 finished, completed in 00:18:00
2024-02-24 03:28:54,172 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-24 03:28:54,172 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 03:28:54,172 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 03:28:54,172 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 03:28:54,211 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-vm7p2
2024-02-24 03:29:07,701 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 03:29:56,599 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 03:29:56,624 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 03:30:02,412 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:07,689 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:07,689 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:07,907 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:13,026 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:13,026 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:13,334 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:18,476 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:18,476 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:18,597 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:23,723 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:23,723 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:23,978 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:29,094 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:29,094 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:29,293 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:34,435 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:34,435 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:34,499 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 103, gen: 0] Waiting for all pods to be ready
2024-02-24 03:30:39,640 INFO   , Thread-1 (run), deploy.py:32, [trial: 103, gen: 0] Operator ready
2024-02-24 03:30:39,641 INFO   , Thread-1 (run), deploy.py:36, [trial: 103, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:30:59,703 WARNING, Thread-1 (run), object.py:155, [trial: 104, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 03:30:59,703 WARNING, Thread-1 (run), object.py:155, [trial: 104, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 03:30:59,704 WARNING, Thread-1 (run), object.py:155, [trial: 104, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 03:30:59,705 DEBUG  , Thread-1 (run), engine.py:652, [trial: 104, gen: 0] Run and check
2024-02-24 03:30:59,867 DEBUG  , Thread-1 (run), runner.py:123, [trial: 104, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 03:30:59,867 DEBUG  , Thread-1 (run), runner.py:124, [trial: 104, gen: 0] STDERR: 
2024-02-24 03:30:59,867 INFO   , Thread-1 (run), runner.py:437, [trial: 104, gen: 0] Waiting for system to converge... 
2024-02-24 03:34:05,780 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:35:05,876 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:37:06,939 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:38:07,032 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:38:59,895 ERROR  , Thread-1 (run), runner.py:586, [trial: 104, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:39:00,162 DEBUG  , Thread-1 (run), runner.py:267, [trial: 104, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:30:59Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:30:59Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:38:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': 'f30c2180-36e8-44c6-83ae-1f2aef906d07'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:38:35Z', 'phase': ''}}}
2024-02-24 03:39:00,184 DEBUG  , Thread-1 (run), runner.py:296, [trial: 104, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2wxj2
2024-02-24 03:39:00,409 ERROR  , Thread-1 (run), runner.py:368, [trial: 104, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n27hq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'ba53068d-70cb-44fe-9975-2d62d3fdf8d4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:39:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n27hq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:39:00,460 INFO   , Thread-1 (run), result.py:170, [trial: 104, gen: 0] No stderr, continue
2024-02-24 03:39:00,495 ERROR  , Thread-1 (run), health.py:155, [trial: 104, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line time="2024-02-24T10:30:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line time="2024-02-24T10:30:35Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 10:30:35.498191888 +0000 UTC m=+0.011599055]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line time="2024-02-24T10:30:35Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line time="2024-02-24T10:30:35Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,521 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line time="2024-02-24T10:30:35Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,591 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 104, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:39:00,934 INFO   , Thread-1 (run), consistency.py:496, [trial: 104, gen: 0] All input deltas are matched
2024-02-24 03:39:00,936 INFO   , Thread-1 (run), engine.py:554, [trial: 104, gen: 0] Error result, running recovery
2024-02-24 03:39:00,936 DEBUG  , Thread-1 (run), engine.py:698, [trial: 104, gen: 0] Running recovery
2024-02-24 03:39:01,767 DEBUG  , Thread-1 (run), runner.py:123, [trial: 104, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 03:39:01,767 DEBUG  , Thread-1 (run), runner.py:124, [trial: 104, gen: 0] STDERR: 
2024-02-24 03:39:01,767 INFO   , Thread-1 (run), runner.py:437, [trial: 104, gen: 0] Waiting for system to converge... 
2024-02-24 03:40:01,942 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:41:02,047 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:42:06,907 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:43:07,016 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:44:07,075 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:45:07,186 INFO   , Thread-1 (run), runner.py:508, [trial: 104, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:47:01,777 ERROR  , Thread-1 (run), runner.py:586, [trial: 104, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:47:02,082 DEBUG  , Thread-1 (run), runner.py:267, [trial: 104, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:30:59Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:30:59Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:46:35Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2717', 'uid': 'f30c2180-36e8-44c6-83ae-1f2aef906d07'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:46:35Z', 'phase': ''}}}
2024-02-24 03:47:02,104 DEBUG  , Thread-1 (run), runner.py:296, [trial: 104, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-2wxj2
2024-02-24 03:47:02,356 ERROR  , Thread-1 (run), runner.py:368, [trial: 104, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n27hq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3a6165b7-7b9b-464a-80de-9fad812d1649', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:47:02 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n27hq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:47:02,401 DEBUG  , Thread-1 (run), engine.py:207, [trial: 104, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 03:47:02,405 INFO   , Thread-1 (run), engine.py:333, Trial 104 finished, completed in 00:17:58
2024-02-24 03:47:02,405 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 57
2024-02-24 03:47:02,405 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 03:47:02,405 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 03:47:02,406 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 03:47:02,442 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-2wxj2
2024-02-24 03:47:15,817 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 03:48:07,721 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 03:48:07,733 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 03:48:12,795 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:17,939 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:17,939 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:18,211 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:23,346 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:23,346 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:23,616 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:28,757 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:28,758 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:28,888 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:34,027 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:34,027 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:34,286 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:39,408 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:39,408 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:39,568 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:44,710 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:44,710 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:48:44,776 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 104, gen: 0] Waiting for all pods to be ready
2024-02-24 03:48:49,915 INFO   , Thread-1 (run), deploy.py:32, [trial: 104, gen: 0] Operator ready
2024-02-24 03:48:49,915 INFO   , Thread-1 (run), deploy.py:36, [trial: 104, gen: 0] All pods took 0 seconds to get ready
2024-02-24 03:49:09,968 WARNING, Thread-1 (run), object.py:155, [trial: 105, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 03:49:09,968 WARNING, Thread-1 (run), object.py:155, [trial: 105, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 03:49:09,968 WARNING, Thread-1 (run), object.py:155, [trial: 105, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 03:49:09,968 DEBUG  , Thread-1 (run), engine.py:652, [trial: 105, gen: 0] Run and check
2024-02-24 03:49:10,151 DEBUG  , Thread-1 (run), runner.py:123, [trial: 105, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 03:49:10,152 DEBUG  , Thread-1 (run), runner.py:124, [trial: 105, gen: 0] STDERR: 
2024-02-24 03:49:10,152 INFO   , Thread-1 (run), runner.py:437, [trial: 105, gen: 0] Waiting for system to converge... 
2024-02-24 03:52:15,960 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:53:16,066 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:55:21,474 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:56:21,562 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:57:10,180 ERROR  , Thread-1 (run), runner.py:586, [trial: 105, gen: 0] System failed to converge within 480 seconds
2024-02-24 03:57:10,449 DEBUG  , Thread-1 (run), runner.py:267, [trial: 105, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:49:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:49:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T10:56:45Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1789', 'uid': '2fbab582-dcf9-4f4b-8cdf-83496f09622e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T10:56:45Z', 'phase': ''}}}
2024-02-24 03:57:10,471 DEBUG  , Thread-1 (run), runner.py:296, [trial: 105, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6zmw7
2024-02-24 03:57:10,694 ERROR  , Thread-1 (run), runner.py:368, [trial: 105, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-6k942
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c76bc169-54cf-49a6-a4b7-ad478662c8ec', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 10:57:10 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-6k942\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 03:57:10,743 INFO   , Thread-1 (run), result.py:170, [trial: 105, gen: 0] No stderr, continue
2024-02-24 03:57:10,779 ERROR  , Thread-1 (run), health.py:155, [trial: 105, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 03:57:10,938 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,938 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line time="2024-02-24T10:48:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line time="2024-02-24T10:48:45Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 10:48:45.701048845 +0000 UTC m=+0.010265238]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line time="2024-02-24T10:48:45Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line time="2024-02-24T10:48:45Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line time="2024-02-24T10:48:45Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:10,989 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 105, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 03:57:11,146 INFO   , Thread-1 (run), consistency.py:496, [trial: 105, gen: 0] All input deltas are matched
2024-02-24 03:57:11,148 INFO   , Thread-1 (run), engine.py:554, [trial: 105, gen: 0] Error result, running recovery
2024-02-24 03:57:11,148 DEBUG  , Thread-1 (run), engine.py:698, [trial: 105, gen: 0] Running recovery
2024-02-24 03:57:12,017 DEBUG  , Thread-1 (run), runner.py:123, [trial: 105, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 03:57:12,017 DEBUG  , Thread-1 (run), runner.py:124, [trial: 105, gen: 0] STDERR: 
2024-02-24 03:57:12,017 INFO   , Thread-1 (run), runner.py:437, [trial: 105, gen: 0] Waiting for system to converge... 
2024-02-24 03:58:12,139 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 03:59:12,227 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:00:19,490 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:01:19,599 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:02:19,704 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:03:19,809 INFO   , Thread-1 (run), runner.py:508, [trial: 105, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:05:12,027 ERROR  , Thread-1 (run), runner.py:586, [trial: 105, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:05:12,299 DEBUG  , Thread-1 (run), runner.py:267, [trial: 105, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T10:49:10Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T10:49:10Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:04:45Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2713', 'uid': '2fbab582-dcf9-4f4b-8cdf-83496f09622e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:04:45Z', 'phase': ''}}}
2024-02-24 04:05:12,322 DEBUG  , Thread-1 (run), runner.py:296, [trial: 105, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6zmw7
2024-02-24 04:05:12,567 ERROR  , Thread-1 (run), runner.py:368, [trial: 105, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-6k942
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '375c0eb4-906b-4755-937d-6de7ed002911', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:05:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-6k942\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:05:12,611 DEBUG  , Thread-1 (run), engine.py:207, [trial: 105, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 04:05:12,616 INFO   , Thread-1 (run), engine.py:333, Trial 105 finished, completed in 00:18:00
2024-02-24 04:05:12,616 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 04:05:12,617 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 04:05:12,617 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 04:05:12,617 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 04:05:12,654 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6zmw7
2024-02-24 04:05:26,112 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 04:06:17,833 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 04:06:17,859 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 04:06:24,236 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:29,383 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:29,383 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:29,636 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:34,774 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:34,774 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:35,081 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:40,222 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:40,222 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:40,341 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:45,482 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:45,482 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:45,777 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:50,917 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:50,917 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:51,099 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:06:56,212 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:06:56,212 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:06:56,264 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 105, gen: 0] Waiting for all pods to be ready
2024-02-24 04:07:01,396 INFO   , Thread-1 (run), deploy.py:32, [trial: 105, gen: 0] Operator ready
2024-02-24 04:07:01,397 INFO   , Thread-1 (run), deploy.py:36, [trial: 105, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:07:21,450 WARNING, Thread-1 (run), object.py:155, [trial: 106, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 04:07:21,450 WARNING, Thread-1 (run), object.py:155, [trial: 106, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 04:07:21,450 WARNING, Thread-1 (run), object.py:155, [trial: 106, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 04:07:21,450 DEBUG  , Thread-1 (run), engine.py:652, [trial: 106, gen: 0] Run and check
2024-02-24 04:07:21,610 DEBUG  , Thread-1 (run), runner.py:123, [trial: 106, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 04:07:21,610 DEBUG  , Thread-1 (run), runner.py:124, [trial: 106, gen: 0] STDERR: 
2024-02-24 04:07:21,610 INFO   , Thread-1 (run), runner.py:437, [trial: 106, gen: 0] Waiting for system to converge... 
2024-02-24 04:10:27,526 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:11:27,605 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:13:30,686 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:14:30,742 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:15:21,654 ERROR  , Thread-1 (run), runner.py:586, [trial: 106, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:15:21,923 DEBUG  , Thread-1 (run), runner.py:267, [trial: 106, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:07:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:07:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:14:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': '8525b52b-4bf8-4fa8-9a6c-bb275e9f081a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:14:57Z', 'phase': ''}}}
2024-02-24 04:15:21,945 DEBUG  , Thread-1 (run), runner.py:296, [trial: 106, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-z46cm
2024-02-24 04:15:22,161 ERROR  , Thread-1 (run), runner.py:368, [trial: 106, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-qkh8b
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd0fe203b-b29a-4251-901f-fdb57a38445d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:15:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-qkh8b\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:15:22,193 INFO   , Thread-1 (run), result.py:170, [trial: 106, gen: 0] No stderr, continue
2024-02-24 04:15:22,229 ERROR  , Thread-1 (run), health.py:155, [trial: 106, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 04:15:22,389 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,389 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line time="2024-02-24T11:06:57Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,390 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line time="2024-02-24T11:06:57Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 11:06:57.144017635 +0000 UTC m=+0.011734526]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,390 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line time="2024-02-24T11:06:57Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,390 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line time="2024-02-24T11:06:57Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,390 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line time="2024-02-24T11:06:57Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,441 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 106, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:15:22,599 INFO   , Thread-1 (run), consistency.py:496, [trial: 106, gen: 0] All input deltas are matched
2024-02-24 04:15:22,602 INFO   , Thread-1 (run), engine.py:554, [trial: 106, gen: 0] Error result, running recovery
2024-02-24 04:15:22,602 DEBUG  , Thread-1 (run), engine.py:698, [trial: 106, gen: 0] Running recovery
2024-02-24 04:15:23,371 DEBUG  , Thread-1 (run), runner.py:123, [trial: 106, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 04:15:23,371 DEBUG  , Thread-1 (run), runner.py:124, [trial: 106, gen: 0] STDERR: 
2024-02-24 04:15:23,372 INFO   , Thread-1 (run), runner.py:437, [trial: 106, gen: 0] Waiting for system to converge... 
2024-02-24 04:16:23,517 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:17:23,570 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:18:30,700 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:19:30,778 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:20:30,841 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:21:30,938 INFO   , Thread-1 (run), runner.py:508, [trial: 106, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:23:23,382 ERROR  , Thread-1 (run), runner.py:586, [trial: 106, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:23:23,672 DEBUG  , Thread-1 (run), runner.py:267, [trial: 106, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:07:21Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:07:21Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:22:57Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': '8525b52b-4bf8-4fa8-9a6c-bb275e9f081a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:22:57Z', 'phase': ''}}}
2024-02-24 04:23:23,697 DEBUG  , Thread-1 (run), runner.py:296, [trial: 106, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-z46cm
2024-02-24 04:23:23,944 ERROR  , Thread-1 (run), runner.py:368, [trial: 106, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-qkh8b
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '542472f1-692f-4f20-98e5-c4be33cef7a5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:23:23 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-qkh8b\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:23:23,999 DEBUG  , Thread-1 (run), engine.py:207, [trial: 106, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 04:23:24,003 INFO   , Thread-1 (run), engine.py:333, Trial 106 finished, completed in 00:18:01
2024-02-24 04:23:24,003 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 04:23:24,003 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 04:23:24,003 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 04:23:24,003 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 04:23:24,040 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-z46cm
2024-02-24 04:23:37,705 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 04:24:29,214 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 04:24:29,250 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 04:24:36,070 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:24:41,217 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:24:41,217 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:24:41,474 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:24:46,611 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:24:46,611 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:24:46,906 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:24:52,045 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:24:52,045 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:24:52,173 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:24:57,315 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:24:57,315 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:24:57,546 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:25:02,682 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:25:02,682 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:25:02,874 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:25:08,008 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:25:08,008 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:25:08,079 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 106, gen: 0] Waiting for all pods to be ready
2024-02-24 04:25:13,214 INFO   , Thread-1 (run), deploy.py:32, [trial: 106, gen: 0] Operator ready
2024-02-24 04:25:13,214 INFO   , Thread-1 (run), deploy.py:36, [trial: 106, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:25:33,249 WARNING, Thread-1 (run), object.py:155, [trial: 107, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 04:25:33,249 WARNING, Thread-1 (run), object.py:155, [trial: 107, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 04:25:33,249 WARNING, Thread-1 (run), object.py:155, [trial: 107, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 04:25:33,249 DEBUG  , Thread-1 (run), engine.py:652, [trial: 107, gen: 0] Run and check
2024-02-24 04:25:33,388 DEBUG  , Thread-1 (run), runner.py:123, [trial: 107, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 04:25:33,388 DEBUG  , Thread-1 (run), runner.py:124, [trial: 107, gen: 0] STDERR: 
2024-02-24 04:25:33,388 INFO   , Thread-1 (run), runner.py:437, [trial: 107, gen: 0] Waiting for system to converge... 
2024-02-24 04:28:39,300 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:29:39,407 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:31:39,285 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:32:39,393 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:33:33,412 ERROR  , Thread-1 (run), runner.py:586, [trial: 107, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:33:33,679 DEBUG  , Thread-1 (run), runner.py:267, [trial: 107, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:25:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:25:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:33:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': '839677cd-1a2a-4365-a48c-6647a0a2d539'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:33:09Z', 'phase': ''}}}
2024-02-24 04:33:33,701 DEBUG  , Thread-1 (run), runner.py:296, [trial: 107, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lg8nk
2024-02-24 04:33:33,917 ERROR  , Thread-1 (run), runner.py:368, [trial: 107, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ngwwd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'dab809cb-b40c-4e40-ae0e-36d30e105546', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:33:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ngwwd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:33:33,952 INFO   , Thread-1 (run), result.py:170, [trial: 107, gen: 0] No stderr, continue
2024-02-24 04:33:33,990 ERROR  , Thread-1 (run), health.py:155, [trial: 107, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 04:33:34,156 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,157 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line time="2024-02-24T11:25:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,157 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line time="2024-02-24T11:25:09Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 11:25:09.013528649 +0000 UTC m=+0.011197932]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,157 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line time="2024-02-24T11:25:09Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,157 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line time="2024-02-24T11:25:09Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,157 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line time="2024-02-24T11:25:09Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,211 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 107, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:33:34,369 INFO   , Thread-1 (run), consistency.py:496, [trial: 107, gen: 0] All input deltas are matched
2024-02-24 04:33:34,372 INFO   , Thread-1 (run), engine.py:554, [trial: 107, gen: 0] Error result, running recovery
2024-02-24 04:33:34,372 DEBUG  , Thread-1 (run), engine.py:698, [trial: 107, gen: 0] Running recovery
2024-02-24 04:33:35,125 DEBUG  , Thread-1 (run), runner.py:123, [trial: 107, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 04:33:35,126 DEBUG  , Thread-1 (run), runner.py:124, [trial: 107, gen: 0] STDERR: 
2024-02-24 04:33:35,126 INFO   , Thread-1 (run), runner.py:437, [trial: 107, gen: 0] Waiting for system to converge... 
2024-02-24 04:34:35,281 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:35:35,387 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:36:42,646 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:37:42,755 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:38:42,865 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:39:42,921 INFO   , Thread-1 (run), runner.py:508, [trial: 107, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:41:35,134 ERROR  , Thread-1 (run), runner.py:586, [trial: 107, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:41:35,423 DEBUG  , Thread-1 (run), runner.py:267, [trial: 107, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:25:33Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:25:33Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:41:09Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '839677cd-1a2a-4365-a48c-6647a0a2d539'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:41:09Z', 'phase': ''}}}
2024-02-24 04:41:35,445 DEBUG  , Thread-1 (run), runner.py:296, [trial: 107, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lg8nk
2024-02-24 04:41:35,697 ERROR  , Thread-1 (run), runner.py:368, [trial: 107, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-ngwwd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b51d4a70-f19e-4d85-9d10-9654bf468652', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:41:35 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-ngwwd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:41:35,758 DEBUG  , Thread-1 (run), engine.py:207, [trial: 107, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 04:41:35,763 INFO   , Thread-1 (run), engine.py:333, Trial 107 finished, completed in 00:18:01
2024-02-24 04:41:35,763 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 04:41:35,763 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 04:41:35,763 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 04:41:35,763 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 04:41:35,801 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-lg8nk
2024-02-24 04:41:49,385 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 04:42:38,722 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 04:42:38,734 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 04:42:46,745 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:42:51,890 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:42:51,890 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:42:52,141 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:42:57,275 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:42:57,276 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:42:57,564 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:43:02,692 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:43:02,692 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:43:02,827 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:43:07,962 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:43:07,963 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:43:08,209 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:43:13,334 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:43:13,334 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:43:13,526 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:43:18,672 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:43:18,672 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:43:18,749 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 107, gen: 0] Waiting for all pods to be ready
2024-02-24 04:43:23,888 INFO   , Thread-1 (run), deploy.py:32, [trial: 107, gen: 0] Operator ready
2024-02-24 04:43:23,888 INFO   , Thread-1 (run), deploy.py:36, [trial: 107, gen: 0] All pods took 0 seconds to get ready
2024-02-24 04:43:43,964 WARNING, Thread-1 (run), object.py:155, [trial: 108, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 04:43:43,964 WARNING, Thread-1 (run), object.py:155, [trial: 108, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 04:43:43,964 WARNING, Thread-1 (run), object.py:155, [trial: 108, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 04:43:43,966 DEBUG  , Thread-1 (run), engine.py:652, [trial: 108, gen: 0] Run and check
2024-02-24 04:43:44,117 DEBUG  , Thread-1 (run), runner.py:123, [trial: 108, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 04:43:44,117 DEBUG  , Thread-1 (run), runner.py:124, [trial: 108, gen: 0] STDERR: 
2024-02-24 04:43:44,117 INFO   , Thread-1 (run), runner.py:437, [trial: 108, gen: 0] Waiting for system to converge... 
2024-02-24 04:46:50,064 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:47:50,179 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:49:53,181 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:50:53,289 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:51:44,140 ERROR  , Thread-1 (run), runner.py:586, [trial: 108, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:51:44,406 DEBUG  , Thread-1 (run), runner.py:267, [trial: 108, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:43:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:43:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:51:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': 'c7b70c5b-e0c4-4ff6-b5c1-6a87d1bc8b3a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:51:19Z', 'phase': ''}}}
2024-02-24 04:51:44,428 DEBUG  , Thread-1 (run), runner.py:296, [trial: 108, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ms6j9
2024-02-24 04:51:44,651 ERROR  , Thread-1 (run), runner.py:368, [trial: 108, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-msclt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a3fb5bea-bbbd-4faf-8082-1da0fc9b30b2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:51:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-msclt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:51:44,697 INFO   , Thread-1 (run), result.py:170, [trial: 108, gen: 0] No stderr, continue
2024-02-24 04:51:44,734 ERROR  , Thread-1 (run), health.py:155, [trial: 108, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 04:51:44,911 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,911 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line time="2024-02-24T11:43:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line time="2024-02-24T11:43:19Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 11:43:19.696696768 +0000 UTC m=+0.021836386]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line time="2024-02-24T11:43:19Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line time="2024-02-24T11:43:19Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,912 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line time="2024-02-24T11:43:19Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:44,961 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 108, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 04:51:45,121 INFO   , Thread-1 (run), consistency.py:496, [trial: 108, gen: 0] All input deltas are matched
2024-02-24 04:51:45,123 INFO   , Thread-1 (run), engine.py:554, [trial: 108, gen: 0] Error result, running recovery
2024-02-24 04:51:45,123 DEBUG  , Thread-1 (run), engine.py:698, [trial: 108, gen: 0] Running recovery
2024-02-24 04:51:45,894 DEBUG  , Thread-1 (run), runner.py:123, [trial: 108, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 04:51:45,894 DEBUG  , Thread-1 (run), runner.py:124, [trial: 108, gen: 0] STDERR: 
2024-02-24 04:51:45,894 INFO   , Thread-1 (run), runner.py:437, [trial: 108, gen: 0] Waiting for system to converge... 
2024-02-24 04:52:46,054 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:53:46,163 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:54:57,170 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:55:57,277 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:56:57,366 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:57:57,462 INFO   , Thread-1 (run), runner.py:508, [trial: 108, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 04:59:45,904 ERROR  , Thread-1 (run), runner.py:586, [trial: 108, gen: 0] System failed to converge within 480 seconds
2024-02-24 04:59:46,210 DEBUG  , Thread-1 (run), runner.py:267, [trial: 108, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T11:43:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T11:43:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T11:59:19Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2735', 'uid': 'c7b70c5b-e0c4-4ff6-b5c1-6a87d1bc8b3a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T11:59:19Z', 'phase': ''}}}
2024-02-24 04:59:46,232 DEBUG  , Thread-1 (run), runner.py:296, [trial: 108, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ms6j9
2024-02-24 04:59:46,477 ERROR  , Thread-1 (run), runner.py:368, [trial: 108, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-msclt
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '39b36baa-ee16-4cb4-aa7d-1f894d8a9734', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 11:59:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-msclt\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 04:59:46,516 DEBUG  , Thread-1 (run), engine.py:207, [trial: 108, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 04:59:46,520 INFO   , Thread-1 (run), engine.py:333, Trial 108 finished, completed in 00:18:00
2024-02-24 04:59:46,520 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 04:59:46,521 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 04:59:46,521 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 04:59:46,521 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 04:59:46,561 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-ms6j9
2024-02-24 05:00:00,072 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 05:00:53,638 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 05:00:53,656 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 05:00:59,910 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:05,053 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:05,053 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:05,284 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:10,413 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:10,413 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:10,705 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:15,843 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:15,844 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:15,974 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:21,116 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:21,116 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:21,317 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:26,438 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:26,438 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:26,677 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:31,807 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:31,807 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:31,871 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 108, gen: 0] Waiting for all pods to be ready
2024-02-24 05:01:37,019 INFO   , Thread-1 (run), deploy.py:32, [trial: 108, gen: 0] Operator ready
2024-02-24 05:01:37,019 INFO   , Thread-1 (run), deploy.py:36, [trial: 108, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:01:57,072 WARNING, Thread-1 (run), object.py:155, [trial: 109, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 05:01:57,073 WARNING, Thread-1 (run), object.py:155, [trial: 109, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 05:01:57,073 WARNING, Thread-1 (run), object.py:155, [trial: 109, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 05:01:57,073 DEBUG  , Thread-1 (run), engine.py:652, [trial: 109, gen: 0] Run and check
2024-02-24 05:01:57,218 DEBUG  , Thread-1 (run), runner.py:123, [trial: 109, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 05:01:57,218 DEBUG  , Thread-1 (run), runner.py:124, [trial: 109, gen: 0] STDERR: 
2024-02-24 05:01:57,218 INFO   , Thread-1 (run), runner.py:437, [trial: 109, gen: 0] Waiting for system to converge... 
2024-02-24 05:05:00,714 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:06:00,822 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:07:00,876 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:08:05,678 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:09:05,767 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:09:57,241 ERROR  , Thread-1 (run), runner.py:586, [trial: 109, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:09:57,512 DEBUG  , Thread-1 (run), runner.py:267, [trial: 109, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:01:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:01:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:09:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1871', 'uid': 'cd260b70-c79e-45f8-8b51-a393d4660683'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:09:33Z', 'phase': ''}}}
2024-02-24 05:09:57,534 DEBUG  , Thread-1 (run), runner.py:296, [trial: 109, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lld6d
2024-02-24 05:09:57,759 ERROR  , Thread-1 (run), runner.py:368, [trial: 109, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7qfz6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6d0c99c9-9b20-4259-a1a6-bf4042bd2214', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:09:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7qfz6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:09:57,796 INFO   , Thread-1 (run), result.py:170, [trial: 109, gen: 0] No stderr, continue
2024-02-24 05:09:57,977 ERROR  , Thread-1 (run), health.py:155, [trial: 109, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line time="2024-02-24T12:01:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line time="2024-02-24T12:01:32Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 12:01:32.85584794 +0000 UTC m=+0.012366802]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line time="2024-02-24T12:01:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line time="2024-02-24T12:01:32Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,008 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line time="2024-02-24T12:01:32Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,075 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 109, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:09:58,231 INFO   , Thread-1 (run), consistency.py:496, [trial: 109, gen: 0] All input deltas are matched
2024-02-24 05:09:58,233 INFO   , Thread-1 (run), engine.py:554, [trial: 109, gen: 0] Error result, running recovery
2024-02-24 05:09:58,234 DEBUG  , Thread-1 (run), engine.py:698, [trial: 109, gen: 0] Running recovery
2024-02-24 05:09:59,070 DEBUG  , Thread-1 (run), runner.py:123, [trial: 109, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 05:09:59,071 DEBUG  , Thread-1 (run), runner.py:124, [trial: 109, gen: 0] STDERR: 
2024-02-24 05:09:59,071 INFO   , Thread-1 (run), runner.py:437, [trial: 109, gen: 0] Waiting for system to converge... 
2024-02-24 05:10:59,205 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:11:59,305 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:13:03,674 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:14:03,782 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:15:03,891 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:16:04,000 INFO   , Thread-1 (run), runner.py:508, [trial: 109, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:17:59,081 ERROR  , Thread-1 (run), runner.py:586, [trial: 109, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:17:59,392 DEBUG  , Thread-1 (run), runner.py:267, [trial: 109, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:01:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:01:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:17:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2867', 'uid': 'cd260b70-c79e-45f8-8b51-a393d4660683'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:17:33Z', 'phase': ''}}}
2024-02-24 05:17:59,413 DEBUG  , Thread-1 (run), runner.py:296, [trial: 109, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lld6d
2024-02-24 05:17:59,684 ERROR  , Thread-1 (run), runner.py:368, [trial: 109, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7qfz6
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '241969d5-50d3-41ec-95cd-a285f1213abe', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:17:59 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7qfz6\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:17:59,726 DEBUG  , Thread-1 (run), engine.py:207, [trial: 109, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 05:17:59,730 INFO   , Thread-1 (run), engine.py:333, Trial 109 finished, completed in 00:18:03
2024-02-24 05:17:59,730 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-24 05:17:59,730 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 05:17:59,730 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 05:17:59,730 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 05:17:59,775 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-lld6d
2024-02-24 05:18:13,492 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 05:19:06,986 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 05:19:07,011 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 05:19:14,636 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:19,779 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:19,779 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:20,040 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:25,172 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:25,172 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:25,495 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:30,627 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:30,628 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:30,739 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:35,880 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:35,880 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:36,096 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:41,371 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:41,371 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:41,550 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:46,685 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:46,685 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:19:46,761 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 109, gen: 0] Waiting for all pods to be ready
2024-02-24 05:19:51,898 INFO   , Thread-1 (run), deploy.py:32, [trial: 109, gen: 0] Operator ready
2024-02-24 05:19:51,899 INFO   , Thread-1 (run), deploy.py:36, [trial: 109, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:20:11,951 WARNING, Thread-1 (run), object.py:155, [trial: 110, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 05:20:11,951 WARNING, Thread-1 (run), object.py:155, [trial: 110, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 05:20:11,951 WARNING, Thread-1 (run), object.py:155, [trial: 110, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 05:20:11,951 DEBUG  , Thread-1 (run), engine.py:652, [trial: 110, gen: 0] Run and check
2024-02-24 05:20:12,125 DEBUG  , Thread-1 (run), runner.py:123, [trial: 110, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 05:20:12,125 DEBUG  , Thread-1 (run), runner.py:124, [trial: 110, gen: 0] STDERR: 
2024-02-24 05:20:12,126 INFO   , Thread-1 (run), runner.py:437, [trial: 110, gen: 0] Waiting for system to converge... 
2024-02-24 05:23:07,662 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:24:07,773 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:25:07,880 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:26:18,008 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:27:18,115 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:28:12,178 ERROR  , Thread-1 (run), runner.py:586, [trial: 110, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:28:12,437 DEBUG  , Thread-1 (run), runner.py:267, [trial: 110, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:20:12Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:20:12Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:27:48Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1881', 'uid': '0c79fbd8-05f3-4600-933d-39c902c25825'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:27:48Z', 'phase': ''}}}
2024-02-24 05:28:12,462 DEBUG  , Thread-1 (run), runner.py:296, [trial: 110, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7csxw
2024-02-24 05:28:12,692 ERROR  , Thread-1 (run), runner.py:368, [trial: 110, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8kv7j
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4c60a965-12c0-4452-b6ea-8f18114a0557', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:28:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8kv7j\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:28:12,725 INFO   , Thread-1 (run), result.py:170, [trial: 110, gen: 0] No stderr, continue
2024-02-24 05:28:12,763 ERROR  , Thread-1 (run), health.py:155, [trial: 110, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 12:19:47.786240077 +0000 UTC m=+0.022449955]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,787 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line time="2024-02-24T12:19:47Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:12,854 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 110, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:28:13,019 INFO   , Thread-1 (run), consistency.py:496, [trial: 110, gen: 0] All input deltas are matched
2024-02-24 05:28:13,022 INFO   , Thread-1 (run), engine.py:554, [trial: 110, gen: 0] Error result, running recovery
2024-02-24 05:28:13,022 DEBUG  , Thread-1 (run), engine.py:698, [trial: 110, gen: 0] Running recovery
2024-02-24 05:28:13,832 DEBUG  , Thread-1 (run), runner.py:123, [trial: 110, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 05:28:13,832 DEBUG  , Thread-1 (run), runner.py:124, [trial: 110, gen: 0] STDERR: 
2024-02-24 05:28:13,832 INFO   , Thread-1 (run), runner.py:437, [trial: 110, gen: 0] Waiting for system to converge... 
2024-02-24 05:29:14,006 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:30:14,114 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:31:25,605 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:32:25,663 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:33:25,762 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:34:25,870 INFO   , Thread-1 (run), runner.py:508, [trial: 110, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:36:13,843 ERROR  , Thread-1 (run), runner.py:586, [trial: 110, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:36:14,141 DEBUG  , Thread-1 (run), runner.py:267, [trial: 110, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:20:12Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:20:12Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:35:48Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2872', 'uid': '0c79fbd8-05f3-4600-933d-39c902c25825'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:35:48Z', 'phase': ''}}}
2024-02-24 05:36:14,162 DEBUG  , Thread-1 (run), runner.py:296, [trial: 110, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7csxw
2024-02-24 05:36:14,435 ERROR  , Thread-1 (run), runner.py:368, [trial: 110, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8kv7j
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b678bb0b-9ff5-4bcf-aa31-1cfe1c16da36', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:36:14 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8kv7j\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:36:14,485 DEBUG  , Thread-1 (run), engine.py:207, [trial: 110, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 05:36:14,489 INFO   , Thread-1 (run), engine.py:333, Trial 110 finished, completed in 00:18:04
2024-02-24 05:36:14,489 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-24 05:36:14,489 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 05:36:14,489 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 05:36:14,489 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 05:36:14,517 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7csxw
2024-02-24 05:36:28,220 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 05:37:21,261 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 05:37:21,286 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 05:37:27,119 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:32,261 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:32,261 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:32,512 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:37,637 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:37,638 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:37,917 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:43,059 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:43,059 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:43,186 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:48,480 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:48,480 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:48,690 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:53,808 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:53,809 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:54,038 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:37:59,182 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:37:59,182 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:37:59,249 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 110, gen: 0] Waiting for all pods to be ready
2024-02-24 05:38:04,385 INFO   , Thread-1 (run), deploy.py:32, [trial: 110, gen: 0] Operator ready
2024-02-24 05:38:04,385 INFO   , Thread-1 (run), deploy.py:36, [trial: 110, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:38:24,437 WARNING, Thread-1 (run), object.py:155, [trial: 111, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 05:38:24,437 WARNING, Thread-1 (run), object.py:155, [trial: 111, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 05:38:24,437 WARNING, Thread-1 (run), object.py:155, [trial: 111, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 05:38:24,437 DEBUG  , Thread-1 (run), engine.py:652, [trial: 111, gen: 0] Run and check
2024-02-24 05:38:24,640 DEBUG  , Thread-1 (run), runner.py:123, [trial: 111, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 05:38:24,641 DEBUG  , Thread-1 (run), runner.py:124, [trial: 111, gen: 0] STDERR: 
2024-02-24 05:38:24,641 INFO   , Thread-1 (run), runner.py:437, [trial: 111, gen: 0] Waiting for system to converge... 
2024-02-24 05:41:30,416 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:42:30,526 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:44:31,731 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:45:31,829 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:46:24,672 ERROR  , Thread-1 (run), runner.py:586, [trial: 111, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:46:24,939 DEBUG  , Thread-1 (run), runner.py:267, [trial: 111, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:38:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:38:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:46:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'd9f3e5ca-5756-4ceb-8d76-a4c0409cc7b0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:46:00Z', 'phase': ''}}}
2024-02-24 05:46:24,961 DEBUG  , Thread-1 (run), runner.py:296, [trial: 111, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5l66x
2024-02-24 05:46:25,184 ERROR  , Thread-1 (run), runner.py:368, [trial: 111, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hpflx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2c244dde-4257-427e-abb4-32e87e8db801', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:46:25 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hpflx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:46:25,228 INFO   , Thread-1 (run), result.py:170, [trial: 111, gen: 0] No stderr, continue
2024-02-24 05:46:25,264 ERROR  , Thread-1 (run), health.py:155, [trial: 111, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 05:46:25,288 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,288 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line time="2024-02-24T12:38:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,289 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line time="2024-02-24T12:38:00Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 12:38:00.134144249 +0000 UTC m=+0.010249271]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,289 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line time="2024-02-24T12:38:00Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,289 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line time="2024-02-24T12:38:00Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,289 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line time="2024-02-24T12:38:00Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,345 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 111, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 05:46:25,526 INFO   , Thread-1 (run), consistency.py:496, [trial: 111, gen: 0] All input deltas are matched
2024-02-24 05:46:25,528 INFO   , Thread-1 (run), engine.py:554, [trial: 111, gen: 0] Error result, running recovery
2024-02-24 05:46:25,528 DEBUG  , Thread-1 (run), engine.py:698, [trial: 111, gen: 0] Running recovery
2024-02-24 05:46:26,398 DEBUG  , Thread-1 (run), runner.py:123, [trial: 111, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 05:46:26,399 DEBUG  , Thread-1 (run), runner.py:124, [trial: 111, gen: 0] STDERR: 
2024-02-24 05:46:26,399 INFO   , Thread-1 (run), runner.py:437, [trial: 111, gen: 0] Waiting for system to converge... 
2024-02-24 05:47:26,537 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:48:26,643 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:49:38,702 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:50:38,809 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:51:38,917 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:52:39,033 INFO   , Thread-1 (run), runner.py:508, [trial: 111, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 05:54:26,409 ERROR  , Thread-1 (run), runner.py:586, [trial: 111, gen: 0] System failed to converge within 480 seconds
2024-02-24 05:54:26,705 DEBUG  , Thread-1 (run), runner.py:267, [trial: 111, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:38:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:38:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T12:54:00Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': 'd9f3e5ca-5756-4ceb-8d76-a4c0409cc7b0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T12:54:00Z', 'phase': ''}}}
2024-02-24 05:54:26,728 DEBUG  , Thread-1 (run), runner.py:296, [trial: 111, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-5l66x
2024-02-24 05:54:26,976 ERROR  , Thread-1 (run), runner.py:368, [trial: 111, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hpflx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4db08584-76d5-43ad-9124-30a13343394f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 12:54:26 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hpflx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 05:54:27,038 DEBUG  , Thread-1 (run), engine.py:207, [trial: 111, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 05:54:27,042 INFO   , Thread-1 (run), engine.py:333, Trial 111 finished, completed in 00:18:02
2024-02-24 05:54:27,042 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 05:54:27,042 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 05:54:27,042 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 05:54:27,042 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 05:54:27,090 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-5l66x
2024-02-24 05:54:40,535 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 05:55:34,511 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 05:55:34,536 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 05:55:42,076 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:55:47,221 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:55:47,221 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:55:47,446 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:55:52,583 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:55:52,584 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:55:52,867 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:55:58,147 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:55:58,148 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:55:58,281 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:56:03,435 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:56:03,435 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:56:03,689 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:56:08,826 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:56:08,827 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:56:09,012 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:56:14,148 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:56:14,148 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:56:14,209 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 111, gen: 0] Waiting for all pods to be ready
2024-02-24 05:56:19,346 INFO   , Thread-1 (run), deploy.py:32, [trial: 111, gen: 0] Operator ready
2024-02-24 05:56:19,347 INFO   , Thread-1 (run), deploy.py:36, [trial: 111, gen: 0] All pods took 0 seconds to get ready
2024-02-24 05:56:39,397 WARNING, Thread-1 (run), object.py:155, [trial: 112, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 05:56:39,397 WARNING, Thread-1 (run), object.py:155, [trial: 112, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 05:56:39,397 WARNING, Thread-1 (run), object.py:155, [trial: 112, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 05:56:39,398 DEBUG  , Thread-1 (run), engine.py:652, [trial: 112, gen: 0] Run and check
2024-02-24 05:56:39,526 DEBUG  , Thread-1 (run), runner.py:123, [trial: 112, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 05:56:39,526 DEBUG  , Thread-1 (run), runner.py:124, [trial: 112, gen: 0] STDERR: 
2024-02-24 05:56:39,527 INFO   , Thread-1 (run), runner.py:437, [trial: 112, gen: 0] Waiting for system to converge... 
2024-02-24 06:00:15,464 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:01:15,575 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:02:45,944 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:03:46,051 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:04:39,550 ERROR  , Thread-1 (run), runner.py:586, [trial: 112, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:04:39,837 DEBUG  , Thread-1 (run), runner.py:267, [trial: 112, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:56:39Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:56:39Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:04:15Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1811', 'uid': 'a4ec1676-7386-4052-b8eb-9240931a54da'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:04:15Z', 'phase': ''}}}
2024-02-24 06:04:39,859 DEBUG  , Thread-1 (run), runner.py:296, [trial: 112, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ld6ch
2024-02-24 06:04:40,073 ERROR  , Thread-1 (run), runner.py:368, [trial: 112, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jc5zn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2ed991f6-cb53-463f-a1c0-aa4e0154f04e', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:04:40 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jc5zn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:04:40,109 INFO   , Thread-1 (run), result.py:170, [trial: 112, gen: 0] No stderr, continue
2024-02-24 06:04:40,145 ERROR  , Thread-1 (run), health.py:155, [trial: 112, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 06:04:40,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line time="2024-02-24T12:56:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line time="2024-02-24T12:56:15Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 12:56:15.178989531 +0000 UTC m=+0.011567904]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line time="2024-02-24T12:56:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line time="2024-02-24T12:56:15Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line time="2024-02-24T12:56:15Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,220 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 112, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:04:40,376 INFO   , Thread-1 (run), consistency.py:496, [trial: 112, gen: 0] All input deltas are matched
2024-02-24 06:04:40,379 INFO   , Thread-1 (run), engine.py:554, [trial: 112, gen: 0] Error result, running recovery
2024-02-24 06:04:40,379 DEBUG  , Thread-1 (run), engine.py:698, [trial: 112, gen: 0] Running recovery
2024-02-24 06:04:41,240 DEBUG  , Thread-1 (run), runner.py:123, [trial: 112, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 06:04:41,241 DEBUG  , Thread-1 (run), runner.py:124, [trial: 112, gen: 0] STDERR: 
2024-02-24 06:04:41,241 INFO   , Thread-1 (run), runner.py:437, [trial: 112, gen: 0] Waiting for system to converge... 
2024-02-24 06:05:41,414 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:06:41,521 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:07:46,914 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:08:47,022 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:09:47,092 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:10:47,198 INFO   , Thread-1 (run), runner.py:508, [trial: 112, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:12:41,250 ERROR  , Thread-1 (run), runner.py:586, [trial: 112, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:12:41,550 DEBUG  , Thread-1 (run), runner.py:267, [trial: 112, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T12:56:39Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T12:56:39Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:12:15Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2732', 'uid': 'a4ec1676-7386-4052-b8eb-9240931a54da'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:12:15Z', 'phase': ''}}}
2024-02-24 06:12:41,572 DEBUG  , Thread-1 (run), runner.py:296, [trial: 112, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ld6ch
2024-02-24 06:12:41,826 ERROR  , Thread-1 (run), runner.py:368, [trial: 112, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jc5zn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '979345dc-ae97-4f87-8809-ec69594a194a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:12:41 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jc5zn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:12:41,890 DEBUG  , Thread-1 (run), engine.py:207, [trial: 112, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 06:12:41,894 INFO   , Thread-1 (run), engine.py:333, Trial 112 finished, completed in 00:18:04
2024-02-24 06:12:41,895 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-24 06:12:41,895 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 06:12:41,895 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 06:12:41,895 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 06:12:41,932 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-ld6ch
2024-02-24 06:12:55,409 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 06:13:51,172 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 06:13:51,193 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 06:13:56,021 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:01,298 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:01,298 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:01,535 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:06,659 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:06,659 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:06,988 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:12,129 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:12,130 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:12,290 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:17,433 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:17,433 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:17,726 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:22,864 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:22,864 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:23,054 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:28,198 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:28,198 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:28,254 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 112, gen: 0] Waiting for all pods to be ready
2024-02-24 06:14:33,392 INFO   , Thread-1 (run), deploy.py:32, [trial: 112, gen: 0] Operator ready
2024-02-24 06:14:33,392 INFO   , Thread-1 (run), deploy.py:36, [trial: 112, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:14:53,444 WARNING, Thread-1 (run), object.py:155, [trial: 113, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 06:14:53,444 WARNING, Thread-1 (run), object.py:155, [trial: 113, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 06:14:53,444 WARNING, Thread-1 (run), object.py:155, [trial: 113, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 06:14:53,444 DEBUG  , Thread-1 (run), engine.py:652, [trial: 113, gen: 0] Run and check
2024-02-24 06:14:53,594 DEBUG  , Thread-1 (run), runner.py:123, [trial: 113, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 06:14:53,595 DEBUG  , Thread-1 (run), runner.py:124, [trial: 113, gen: 0] STDERR: 
2024-02-24 06:14:53,595 INFO   , Thread-1 (run), runner.py:437, [trial: 113, gen: 0] Waiting for system to converge... 
2024-02-24 06:17:59,627 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:18:59,739 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:20:59,456 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:21:59,522 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:22:53,620 ERROR  , Thread-1 (run), runner.py:586, [trial: 113, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:22:53,894 DEBUG  , Thread-1 (run), runner.py:267, [trial: 113, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:14:53Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:14:53Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:22:29Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1815', 'uid': '471c0e02-a284-474a-ab31-94e24a7100c5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:22:29Z', 'phase': ''}}}
2024-02-24 06:22:53,916 DEBUG  , Thread-1 (run), runner.py:296, [trial: 113, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-s7wrl
2024-02-24 06:22:54,138 ERROR  , Thread-1 (run), runner.py:368, [trial: 113, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kxmlg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1e4d2a82-a83b-4cdd-a2c2-576c161693b7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:22:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kxmlg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:22:54,171 INFO   , Thread-1 (run), result.py:170, [trial: 113, gen: 0] No stderr, continue
2024-02-24 06:22:54,205 ERROR  , Thread-1 (run), health.py:155, [trial: 113, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line time="2024-02-24T13:14:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line time="2024-02-24T13:14:29Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 13:14:29.173363843 +0000 UTC m=+0.011786551]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line time="2024-02-24T13:14:29Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line time="2024-02-24T13:14:29Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line time="2024-02-24T13:14:29Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,285 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 113, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:22:54,600 INFO   , Thread-1 (run), consistency.py:496, [trial: 113, gen: 0] All input deltas are matched
2024-02-24 06:22:54,602 INFO   , Thread-1 (run), engine.py:554, [trial: 113, gen: 0] Error result, running recovery
2024-02-24 06:22:54,602 DEBUG  , Thread-1 (run), engine.py:698, [trial: 113, gen: 0] Running recovery
2024-02-24 06:22:55,457 DEBUG  , Thread-1 (run), runner.py:123, [trial: 113, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 06:22:55,457 DEBUG  , Thread-1 (run), runner.py:124, [trial: 113, gen: 0] STDERR: 
2024-02-24 06:22:55,458 INFO   , Thread-1 (run), runner.py:437, [trial: 113, gen: 0] Waiting for system to converge... 
2024-02-24 06:23:55,582 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:24:55,678 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:26:07,429 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:27:07,536 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:28:07,613 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:29:07,665 INFO   , Thread-1 (run), runner.py:508, [trial: 113, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:30:55,468 ERROR  , Thread-1 (run), runner.py:586, [trial: 113, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:30:55,763 DEBUG  , Thread-1 (run), runner.py:267, [trial: 113, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:14:53Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:14:53Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:30:29Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2735', 'uid': '471c0e02-a284-474a-ab31-94e24a7100c5'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:30:29Z', 'phase': ''}}}
2024-02-24 06:30:55,784 DEBUG  , Thread-1 (run), runner.py:296, [trial: 113, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-s7wrl
2024-02-24 06:30:56,046 ERROR  , Thread-1 (run), runner.py:368, [trial: 113, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-kxmlg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c46af8e5-7a4a-480e-842f-5cac5c4183bd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:30:56 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-kxmlg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:30:56,109 DEBUG  , Thread-1 (run), engine.py:207, [trial: 113, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 06:30:56,113 INFO   , Thread-1 (run), engine.py:333, Trial 113 finished, completed in 00:18:04
2024-02-24 06:30:56,113 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-24 06:30:56,113 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 06:30:56,113 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 06:30:56,113 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 06:30:56,158 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-s7wrl
2024-02-24 06:31:09,562 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 06:32:02,417 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 06:32:02,433 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 06:32:09,142 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:14,285 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:14,285 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:14,529 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:19,670 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:19,670 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:19,977 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:25,119 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:25,120 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:25,253 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:30,396 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:30,396 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:30,595 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:35,736 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:35,736 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:35,936 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:41,078 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:41,078 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:32:41,154 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 113, gen: 0] Waiting for all pods to be ready
2024-02-24 06:32:46,290 INFO   , Thread-1 (run), deploy.py:32, [trial: 113, gen: 0] Operator ready
2024-02-24 06:32:46,290 INFO   , Thread-1 (run), deploy.py:36, [trial: 113, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:33:06,343 WARNING, Thread-1 (run), object.py:155, [trial: 114, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 06:33:06,343 WARNING, Thread-1 (run), object.py:155, [trial: 114, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 06:33:06,343 WARNING, Thread-1 (run), object.py:155, [trial: 114, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 06:33:06,343 DEBUG  , Thread-1 (run), engine.py:652, [trial: 114, gen: 0] Run and check
2024-02-24 06:33:06,492 DEBUG  , Thread-1 (run), runner.py:123, [trial: 114, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 06:33:06,492 DEBUG  , Thread-1 (run), runner.py:124, [trial: 114, gen: 0] STDERR: 
2024-02-24 06:33:06,492 INFO   , Thread-1 (run), runner.py:437, [trial: 114, gen: 0] Waiting for system to converge... 
2024-02-24 06:36:12,528 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:37:12,624 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:39:18,010 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:40:18,071 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:41:06,539 ERROR  , Thread-1 (run), runner.py:586, [trial: 114, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:41:06,812 DEBUG  , Thread-1 (run), runner.py:267, [trial: 114, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:33:06Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:33:06Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:40:42Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1810', 'uid': '156ec22b-97c7-4faf-bf13-d7ba2da31a6d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:40:42Z', 'phase': ''}}}
2024-02-24 06:41:06,834 DEBUG  , Thread-1 (run), runner.py:296, [trial: 114, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6m8px
2024-02-24 06:41:07,058 ERROR  , Thread-1 (run), runner.py:368, [trial: 114, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rwn47
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6097f5ff-9756-4db6-901d-42f7e4fe62c4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:41:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rwn47\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:41:07,092 INFO   , Thread-1 (run), result.py:170, [trial: 114, gen: 0] No stderr, continue
2024-02-24 06:41:07,126 ERROR  , Thread-1 (run), health.py:155, [trial: 114, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 06:41:07,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line time="2024-02-24T13:32:42Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,152 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line time="2024-02-24T13:32:42Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 13:32:42.097353305 +0000 UTC m=+0.010412300]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,153 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line time="2024-02-24T13:32:42Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,153 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line time="2024-02-24T13:32:42Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,153 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line time="2024-02-24T13:32:42Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,206 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 114, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:41:07,366 INFO   , Thread-1 (run), consistency.py:496, [trial: 114, gen: 0] All input deltas are matched
2024-02-24 06:41:07,368 INFO   , Thread-1 (run), engine.py:554, [trial: 114, gen: 0] Error result, running recovery
2024-02-24 06:41:07,369 DEBUG  , Thread-1 (run), engine.py:698, [trial: 114, gen: 0] Running recovery
2024-02-24 06:41:08,174 DEBUG  , Thread-1 (run), runner.py:123, [trial: 114, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 06:41:08,175 DEBUG  , Thread-1 (run), runner.py:124, [trial: 114, gen: 0] STDERR: 
2024-02-24 06:41:08,175 INFO   , Thread-1 (run), runner.py:437, [trial: 114, gen: 0] Waiting for system to converge... 
2024-02-24 06:42:08,346 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:43:08,455 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:44:12,334 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:45:12,431 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:46:12,506 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:47:12,613 INFO   , Thread-1 (run), runner.py:508, [trial: 114, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:49:08,186 ERROR  , Thread-1 (run), runner.py:586, [trial: 114, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:49:08,469 DEBUG  , Thread-1 (run), runner.py:267, [trial: 114, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:33:06Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:33:06Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:48:42Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2731', 'uid': '156ec22b-97c7-4faf-bf13-d7ba2da31a6d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:48:42Z', 'phase': ''}}}
2024-02-24 06:49:08,491 DEBUG  , Thread-1 (run), runner.py:296, [trial: 114, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6m8px
2024-02-24 06:49:08,739 ERROR  , Thread-1 (run), runner.py:368, [trial: 114, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rwn47
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '960c98ee-55f8-44db-bc86-f8b7d40f31d8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:49:08 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rwn47\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:49:08,785 DEBUG  , Thread-1 (run), engine.py:207, [trial: 114, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 06:49:08,790 INFO   , Thread-1 (run), engine.py:333, Trial 114 finished, completed in 00:18:02
2024-02-24 06:49:08,790 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 06:49:08,790 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 06:49:08,790 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 06:49:08,790 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 06:49:08,827 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6m8px
2024-02-24 06:49:22,352 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 06:50:14,709 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 06:50:14,725 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 06:50:20,633 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:25,779 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:25,779 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:26,030 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:31,287 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:31,288 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:31,589 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:36,726 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:36,726 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:36,859 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:41,989 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:41,989 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:42,222 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:47,347 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:47,347 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:47,538 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:52,678 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:52,678 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:50:52,748 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 114, gen: 0] Waiting for all pods to be ready
2024-02-24 06:50:57,887 INFO   , Thread-1 (run), deploy.py:32, [trial: 114, gen: 0] Operator ready
2024-02-24 06:50:57,887 INFO   , Thread-1 (run), deploy.py:36, [trial: 114, gen: 0] All pods took 0 seconds to get ready
2024-02-24 06:51:17,921 WARNING, Thread-1 (run), object.py:155, [trial: 115, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 06:51:17,922 WARNING, Thread-1 (run), object.py:155, [trial: 115, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 06:51:17,922 WARNING, Thread-1 (run), object.py:155, [trial: 115, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 06:51:17,922 DEBUG  , Thread-1 (run), engine.py:652, [trial: 115, gen: 0] Run and check
2024-02-24 06:51:18,104 DEBUG  , Thread-1 (run), runner.py:123, [trial: 115, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 06:51:18,104 DEBUG  , Thread-1 (run), runner.py:124, [trial: 115, gen: 0] STDERR: 
2024-02-24 06:51:18,104 INFO   , Thread-1 (run), runner.py:437, [trial: 115, gen: 0] Waiting for system to converge... 
2024-02-24 06:54:24,057 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:55:24,162 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:57:29,954 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:58:30,022 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 06:59:18,150 ERROR  , Thread-1 (run), runner.py:586, [trial: 115, gen: 0] System failed to converge within 480 seconds
2024-02-24 06:59:18,403 DEBUG  , Thread-1 (run), runner.py:267, [trial: 115, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:51:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:51:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T13:58:53Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': '5681cda8-593e-458d-8cd3-228de3c79f48'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T13:58:53Z', 'phase': ''}}}
2024-02-24 06:59:18,425 DEBUG  , Thread-1 (run), runner.py:296, [trial: 115, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vnwks
2024-02-24 06:59:18,649 ERROR  , Thread-1 (run), runner.py:368, [trial: 115, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cz4jl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '513a1ad5-a289-4e19-b733-1840ba7b3b86', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 13:59:18 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cz4jl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 06:59:18,683 INFO   , Thread-1 (run), result.py:170, [trial: 115, gen: 0] No stderr, continue
2024-02-24 06:59:18,720 ERROR  , Thread-1 (run), health.py:155, [trial: 115, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 06:59:18,744 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,744 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,745 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 13:50:53.750318467 +0000 UTC m=+0.022609178]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,745 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,745 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,745 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,745 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line time="2024-02-24T13:50:53Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,795 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 115, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 06:59:18,952 INFO   , Thread-1 (run), consistency.py:496, [trial: 115, gen: 0] All input deltas are matched
2024-02-24 06:59:18,954 INFO   , Thread-1 (run), engine.py:554, [trial: 115, gen: 0] Error result, running recovery
2024-02-24 06:59:18,954 DEBUG  , Thread-1 (run), engine.py:698, [trial: 115, gen: 0] Running recovery
2024-02-24 06:59:19,780 DEBUG  , Thread-1 (run), runner.py:123, [trial: 115, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 06:59:19,780 DEBUG  , Thread-1 (run), runner.py:124, [trial: 115, gen: 0] STDERR: 
2024-02-24 06:59:19,780 INFO   , Thread-1 (run), runner.py:437, [trial: 115, gen: 0] Waiting for system to converge... 
2024-02-24 07:00:19,960 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:02:24,028 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:03:24,086 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:04:24,194 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:05:24,302 INFO   , Thread-1 (run), runner.py:508, [trial: 115, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:07:19,791 ERROR  , Thread-1 (run), runner.py:586, [trial: 115, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:07:20,085 DEBUG  , Thread-1 (run), runner.py:267, [trial: 115, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T13:51:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T13:51:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:06:53Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2715', 'uid': '5681cda8-593e-458d-8cd3-228de3c79f48'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:06:53Z', 'phase': ''}}}
2024-02-24 07:07:20,107 DEBUG  , Thread-1 (run), runner.py:296, [trial: 115, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-vnwks
2024-02-24 07:07:20,319 ERROR  , Thread-1 (run), runner.py:368, [trial: 115, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cz4jl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'bafd38e1-9775-4542-b496-b59a1df41ede', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:07:20 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cz4jl\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 07:07:20,354 DEBUG  , Thread-1 (run), engine.py:207, [trial: 115, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 07:07:20,357 INFO   , Thread-1 (run), engine.py:333, Trial 115 finished, completed in 00:18:01
2024-02-24 07:07:20,357 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 07:07:20,357 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 07:07:20,357 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 07:07:20,357 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 07:07:20,392 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-vnwks
2024-02-24 07:07:34,010 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 07:08:23,100 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 07:08:23,113 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 07:08:29,901 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:08:35,204 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:08:35,204 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:08:35,486 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:08:40,605 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:08:40,605 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:08:40,900 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:08:46,036 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:08:46,036 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:08:46,169 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:08:51,296 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:08:51,296 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:08:51,553 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:08:56,677 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:08:56,677 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:08:56,854 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:09:02,000 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:09:02,000 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:09:02,069 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 115, gen: 0] Waiting for all pods to be ready
2024-02-24 07:09:07,207 INFO   , Thread-1 (run), deploy.py:32, [trial: 115, gen: 0] Operator ready
2024-02-24 07:09:07,207 INFO   , Thread-1 (run), deploy.py:36, [trial: 115, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:09:27,258 WARNING, Thread-1 (run), object.py:155, [trial: 116, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 07:09:27,258 WARNING, Thread-1 (run), object.py:155, [trial: 116, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 07:09:27,258 WARNING, Thread-1 (run), object.py:155, [trial: 116, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 07:09:27,259 DEBUG  , Thread-1 (run), engine.py:652, [trial: 116, gen: 0] Run and check
2024-02-24 07:09:27,455 DEBUG  , Thread-1 (run), runner.py:123, [trial: 116, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 07:09:27,455 DEBUG  , Thread-1 (run), runner.py:124, [trial: 116, gen: 0] STDERR: 
2024-02-24 07:09:27,456 INFO   , Thread-1 (run), runner.py:437, [trial: 116, gen: 0] Waiting for system to converge... 
2024-02-24 07:13:03,349 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:14:03,455 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:15:33,307 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:16:33,379 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:17:27,486 ERROR  , Thread-1 (run), runner.py:586, [trial: 116, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:17:27,750 DEBUG  , Thread-1 (run), runner.py:267, [trial: 116, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:09:27Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:09:27Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:17:03Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '5240eff6-ca0b-4cf8-8603-727c1910a5a3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:17:03Z', 'phase': ''}}}
2024-02-24 07:17:27,772 DEBUG  , Thread-1 (run), runner.py:296, [trial: 116, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bmdrb
2024-02-24 07:17:27,992 ERROR  , Thread-1 (run), runner.py:368, [trial: 116, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-msj44
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'c13d1495-fa1b-49fd-bcaf-3ddd64d7dc5c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:17:27 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-msj44\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 07:17:28,025 INFO   , Thread-1 (run), result.py:170, [trial: 116, gen: 0] No stderr, continue
2024-02-24 07:17:28,062 ERROR  , Thread-1 (run), health.py:155, [trial: 116, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line time="2024-02-24T14:09:03Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line time="2024-02-24T14:09:03Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 14:09:03.058968929 +0000 UTC m=+0.011795075]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line time="2024-02-24T14:09:03Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line time="2024-02-24T14:09:03Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,086 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line time="2024-02-24T14:09:03Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,138 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 116, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:17:28,302 INFO   , Thread-1 (run), consistency.py:496, [trial: 116, gen: 0] All input deltas are matched
2024-02-24 07:17:28,304 INFO   , Thread-1 (run), engine.py:554, [trial: 116, gen: 0] Error result, running recovery
2024-02-24 07:17:28,305 DEBUG  , Thread-1 (run), engine.py:698, [trial: 116, gen: 0] Running recovery
2024-02-24 07:17:29,067 DEBUG  , Thread-1 (run), runner.py:123, [trial: 116, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 07:17:29,067 DEBUG  , Thread-1 (run), runner.py:124, [trial: 116, gen: 0] STDERR: 
2024-02-24 07:17:29,067 INFO   , Thread-1 (run), runner.py:437, [trial: 116, gen: 0] Waiting for system to converge... 
2024-02-24 07:18:29,192 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:19:29,298 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:20:33,510 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:21:33,618 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:22:33,725 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:23:33,834 INFO   , Thread-1 (run), runner.py:508, [trial: 116, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:25:29,075 ERROR  , Thread-1 (run), runner.py:586, [trial: 116, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:25:29,361 DEBUG  , Thread-1 (run), runner.py:267, [trial: 116, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:09:27Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:09:27Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:25:03Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '5240eff6-ca0b-4cf8-8603-727c1910a5a3'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:25:03Z', 'phase': ''}}}
2024-02-24 07:25:29,383 DEBUG  , Thread-1 (run), runner.py:296, [trial: 116, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-bmdrb
2024-02-24 07:25:29,626 ERROR  , Thread-1 (run), runner.py:368, [trial: 116, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-msj44
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f398bcc3-2d9e-448c-be63-73918c76a4ea', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:25:29 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-msj44\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 07:25:29,671 DEBUG  , Thread-1 (run), engine.py:207, [trial: 116, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 07:25:29,675 INFO   , Thread-1 (run), engine.py:333, Trial 116 finished, completed in 00:17:59
2024-02-24 07:25:29,675 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-24 07:25:29,675 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 07:25:29,676 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 07:25:29,676 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 07:25:29,713 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-bmdrb
2024-02-24 07:25:43,302 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 07:26:37,814 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 07:26:37,838 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 07:26:44,818 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:26:50,108 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:26:50,108 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:26:50,366 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:26:55,506 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:26:55,506 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:26:55,808 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:27:00,948 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:27:00,949 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:27:01,080 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:27:06,219 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:27:06,220 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:27:06,481 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:27:11,616 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:27:11,616 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:27:11,827 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:27:16,958 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:27:16,958 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:27:17,029 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 116, gen: 0] Waiting for all pods to be ready
2024-02-24 07:27:22,171 INFO   , Thread-1 (run), deploy.py:32, [trial: 116, gen: 0] Operator ready
2024-02-24 07:27:22,172 INFO   , Thread-1 (run), deploy.py:36, [trial: 116, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:27:42,212 WARNING, Thread-1 (run), object.py:155, [trial: 117, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 07:27:42,212 WARNING, Thread-1 (run), object.py:155, [trial: 117, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 07:27:42,212 WARNING, Thread-1 (run), object.py:155, [trial: 117, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 07:27:42,212 DEBUG  , Thread-1 (run), engine.py:652, [trial: 117, gen: 0] Run and check
2024-02-24 07:27:42,355 DEBUG  , Thread-1 (run), runner.py:123, [trial: 117, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 07:27:42,355 DEBUG  , Thread-1 (run), runner.py:124, [trial: 117, gen: 0] STDERR: 
2024-02-24 07:27:42,355 INFO   , Thread-1 (run), runner.py:437, [trial: 117, gen: 0] Waiting for system to converge... 
2024-02-24 07:30:48,208 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:31:48,273 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:33:48,193 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:34:48,299 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:35:42,381 ERROR  , Thread-1 (run), runner.py:586, [trial: 117, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:35:42,658 DEBUG  , Thread-1 (run), runner.py:267, [trial: 117, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:27:42Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:27:42Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:35:18Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1801', 'uid': '75c7f980-3c4e-40d1-9c41-db925141bc8f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:35:18Z', 'phase': ''}}}
2024-02-24 07:35:42,682 DEBUG  , Thread-1 (run), runner.py:296, [trial: 117, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-mdxw4
2024-02-24 07:35:42,912 ERROR  , Thread-1 (run), runner.py:368, [trial: 117, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tkckq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a65e0fdf-f057-4b15-a1fb-2d848e28163a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:35:42 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tkckq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 07:35:42,961 INFO   , Thread-1 (run), result.py:170, [trial: 117, gen: 0] No stderr, continue
2024-02-24 07:35:42,994 ERROR  , Thread-1 (run), health.py:155, [trial: 117, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 07:35:43,018 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,019 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line time="2024-02-24T14:27:17Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,019 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line time="2024-02-24T14:27:17Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 14:27:17.902822827 +0000 UTC m=+0.011443953]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,019 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line time="2024-02-24T14:27:17Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,019 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line time="2024-02-24T14:27:17Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,019 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line time="2024-02-24T14:27:17Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,071 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 117, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:35:43,229 INFO   , Thread-1 (run), consistency.py:496, [trial: 117, gen: 0] All input deltas are matched
2024-02-24 07:35:43,231 INFO   , Thread-1 (run), engine.py:554, [trial: 117, gen: 0] Error result, running recovery
2024-02-24 07:35:43,231 DEBUG  , Thread-1 (run), engine.py:698, [trial: 117, gen: 0] Running recovery
2024-02-24 07:35:44,050 DEBUG  , Thread-1 (run), runner.py:123, [trial: 117, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 07:35:44,050 DEBUG  , Thread-1 (run), runner.py:124, [trial: 117, gen: 0] STDERR: 
2024-02-24 07:35:44,050 INFO   , Thread-1 (run), runner.py:437, [trial: 117, gen: 0] Waiting for system to converge... 
2024-02-24 07:36:44,227 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:37:44,334 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:38:52,174 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:39:52,275 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:40:52,376 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:41:52,482 INFO   , Thread-1 (run), runner.py:508, [trial: 117, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:43:44,061 ERROR  , Thread-1 (run), runner.py:586, [trial: 117, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:43:44,345 DEBUG  , Thread-1 (run), runner.py:267, [trial: 117, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:27:42Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:27:42Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:43:18Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '75c7f980-3c4e-40d1-9c41-db925141bc8f'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:43:18Z', 'phase': ''}}}
2024-02-24 07:43:44,367 DEBUG  , Thread-1 (run), runner.py:296, [trial: 117, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-mdxw4
2024-02-24 07:43:44,621 ERROR  , Thread-1 (run), runner.py:368, [trial: 117, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-tkckq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '4902dc43-0352-4869-889a-27fe55b9c9a8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:43:44 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-tkckq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 07:43:44,679 DEBUG  , Thread-1 (run), engine.py:207, [trial: 117, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 07:43:44,683 INFO   , Thread-1 (run), engine.py:333, Trial 117 finished, completed in 00:18:04
2024-02-24 07:43:44,683 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-24 07:43:44,684 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 07:43:44,684 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 07:43:44,684 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 07:43:44,721 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-mdxw4
2024-02-24 07:43:58,240 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 07:44:49,489 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 07:44:49,506 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 07:44:55,694 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:00,983 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:00,983 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:01,192 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:06,313 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:06,313 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:06,614 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:11,755 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:11,755 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:11,885 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:17,009 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:17,010 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:17,259 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:22,385 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:22,386 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:22,595 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:27,738 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:27,738 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:27,808 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 117, gen: 0] Waiting for all pods to be ready
2024-02-24 07:45:32,946 INFO   , Thread-1 (run), deploy.py:32, [trial: 117, gen: 0] Operator ready
2024-02-24 07:45:32,946 INFO   , Thread-1 (run), deploy.py:36, [trial: 117, gen: 0] All pods took 0 seconds to get ready
2024-02-24 07:45:52,998 WARNING, Thread-1 (run), object.py:155, [trial: 118, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 07:45:52,998 WARNING, Thread-1 (run), object.py:155, [trial: 118, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 07:45:52,998 WARNING, Thread-1 (run), object.py:155, [trial: 118, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 07:45:52,999 DEBUG  , Thread-1 (run), engine.py:652, [trial: 118, gen: 0] Run and check
2024-02-24 07:45:53,133 DEBUG  , Thread-1 (run), runner.py:123, [trial: 118, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 07:45:53,134 DEBUG  , Thread-1 (run), runner.py:124, [trial: 118, gen: 0] STDERR: 
2024-02-24 07:45:53,134 INFO   , Thread-1 (run), runner.py:437, [trial: 118, gen: 0] Waiting for system to converge... 
2024-02-24 07:48:51,434 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:49:51,539 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:50:51,601 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:52:05,384 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:53:05,449 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:53:53,174 ERROR  , Thread-1 (run), runner.py:586, [trial: 118, gen: 0] System failed to converge within 480 seconds
2024-02-24 07:53:53,422 DEBUG  , Thread-1 (run), runner.py:267, [trial: 118, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:45:53Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:45:53Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T14:53:29Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1890', 'uid': '97d0b058-5a3f-4405-8826-747f1334a214'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T14:53:29Z', 'phase': ''}}}
2024-02-24 07:53:53,443 DEBUG  , Thread-1 (run), runner.py:296, [trial: 118, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hzgmc
2024-02-24 07:53:53,686 ERROR  , Thread-1 (run), runner.py:368, [trial: 118, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v9n79
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '35008ec8-487e-44f1-8c4a-4dceb3c978b8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 14:53:53 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v9n79\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 07:53:53,721 INFO   , Thread-1 (run), result.py:170, [trial: 118, gen: 0] No stderr, continue
2024-02-24 07:53:53,755 ERROR  , Thread-1 (run), health.py:155, [trial: 118, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line time="2024-02-24T14:45:28Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line time="2024-02-24T14:45:28Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 14:45:28.813779178 +0000 UTC m=+0.017798855]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line time="2024-02-24T14:45:28Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line time="2024-02-24T14:45:28Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,779 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line time="2024-02-24T14:45:28Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:53,850 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 118, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 07:53:54,007 INFO   , Thread-1 (run), consistency.py:496, [trial: 118, gen: 0] All input deltas are matched
2024-02-24 07:53:54,009 INFO   , Thread-1 (run), engine.py:554, [trial: 118, gen: 0] Error result, running recovery
2024-02-24 07:53:54,009 DEBUG  , Thread-1 (run), engine.py:698, [trial: 118, gen: 0] Running recovery
2024-02-24 07:53:54,796 DEBUG  , Thread-1 (run), runner.py:123, [trial: 118, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 07:53:54,796 DEBUG  , Thread-1 (run), runner.py:124, [trial: 118, gen: 0] STDERR: 
2024-02-24 07:53:54,797 INFO   , Thread-1 (run), runner.py:437, [trial: 118, gen: 0] Waiting for system to converge... 
2024-02-24 07:54:54,922 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:55:55,036 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:57:00,361 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:58:00,414 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 07:59:00,523 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:00:00,629 INFO   , Thread-1 (run), runner.py:508, [trial: 118, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:01:54,807 ERROR  , Thread-1 (run), runner.py:586, [trial: 118, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:01:55,096 DEBUG  , Thread-1 (run), runner.py:267, [trial: 118, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T14:45:53Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T14:45:53Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:01:29Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2891', 'uid': '97d0b058-5a3f-4405-8826-747f1334a214'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:01:29Z', 'phase': ''}}}
2024-02-24 08:01:55,118 DEBUG  , Thread-1 (run), runner.py:296, [trial: 118, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hzgmc
2024-02-24 08:01:55,400 ERROR  , Thread-1 (run), runner.py:368, [trial: 118, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v9n79
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '941e8d33-9d2a-4b69-b9ed-5486d9cf28c3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:01:55 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v9n79\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 08:01:55,465 DEBUG  , Thread-1 (run), engine.py:207, [trial: 118, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 08:01:55,469 INFO   , Thread-1 (run), engine.py:333, Trial 118 finished, completed in 00:18:00
2024-02-24 08:01:55,469 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 08:01:55,469 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 08:01:55,469 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 08:01:55,469 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 08:01:55,514 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-hzgmc
2024-02-24 08:02:09,012 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 08:03:02,667 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 08:03:02,684 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 08:03:08,458 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:13,601 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:13,602 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:13,878 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:19,137 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:19,138 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:19,423 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:24,562 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:24,562 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:24,681 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:29,821 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:29,821 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:30,068 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:35,209 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:35,209 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:35,423 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:40,565 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:40,565 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:03:40,629 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 118, gen: 0] Waiting for all pods to be ready
2024-02-24 08:03:45,769 INFO   , Thread-1 (run), deploy.py:32, [trial: 118, gen: 0] Operator ready
2024-02-24 08:03:45,769 INFO   , Thread-1 (run), deploy.py:36, [trial: 118, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:04:05,823 WARNING, Thread-1 (run), object.py:155, [trial: 119, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 08:04:05,823 WARNING, Thread-1 (run), object.py:155, [trial: 119, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 08:04:05,823 WARNING, Thread-1 (run), object.py:155, [trial: 119, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 08:04:05,824 DEBUG  , Thread-1 (run), engine.py:652, [trial: 119, gen: 0] Run and check
2024-02-24 08:04:06,029 DEBUG  , Thread-1 (run), runner.py:123, [trial: 119, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 08:04:06,029 DEBUG  , Thread-1 (run), runner.py:124, [trial: 119, gen: 0] STDERR: 
2024-02-24 08:04:06,029 INFO   , Thread-1 (run), runner.py:437, [trial: 119, gen: 0] Waiting for system to converge... 
2024-02-24 08:07:04,412 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:08:04,516 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:09:04,579 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:10:13,414 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:11:13,526 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:12:06,057 ERROR  , Thread-1 (run), runner.py:586, [trial: 119, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:12:06,340 DEBUG  , Thread-1 (run), runner.py:267, [trial: 119, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:04:06Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:04:06Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:11:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': '8838b1ab-7bea-4d6e-86ba-ea9b80dd6a95'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:11:41Z', 'phase': ''}}}
2024-02-24 08:12:06,362 DEBUG  , Thread-1 (run), runner.py:296, [trial: 119, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hfftr
2024-02-24 08:12:06,575 ERROR  , Thread-1 (run), runner.py:368, [trial: 119, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v2cgh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '490482f2-da2b-48fe-9e73-bc3c6e0330f9', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:12:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v2cgh\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 08:12:06,620 INFO   , Thread-1 (run), result.py:170, [trial: 119, gen: 0] No stderr, continue
2024-02-24 08:12:06,655 ERROR  , Thread-1 (run), health.py:155, [trial: 119, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line time="2024-02-24T15:03:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line time="2024-02-24T15:03:41Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 15:03:41.586097255 +0000 UTC m=+0.017371932]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line time="2024-02-24T15:03:41Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line time="2024-02-24T15:03:41Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,680 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line time="2024-02-24T15:03:41Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:06,738 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 119, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:12:07,059 INFO   , Thread-1 (run), consistency.py:496, [trial: 119, gen: 0] All input deltas are matched
2024-02-24 08:12:07,061 INFO   , Thread-1 (run), engine.py:554, [trial: 119, gen: 0] Error result, running recovery
2024-02-24 08:12:07,061 DEBUG  , Thread-1 (run), engine.py:698, [trial: 119, gen: 0] Running recovery
2024-02-24 08:12:07,818 DEBUG  , Thread-1 (run), runner.py:123, [trial: 119, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 08:12:07,818 DEBUG  , Thread-1 (run), runner.py:124, [trial: 119, gen: 0] STDERR: 
2024-02-24 08:12:07,819 INFO   , Thread-1 (run), runner.py:437, [trial: 119, gen: 0] Waiting for system to converge... 
2024-02-24 08:13:07,977 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:14:08,086 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:15:11,842 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:16:11,949 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:17:12,057 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:18:12,304 INFO   , Thread-1 (run), runner.py:508, [trial: 119, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:20:07,829 ERROR  , Thread-1 (run), runner.py:586, [trial: 119, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:20:08,129 DEBUG  , Thread-1 (run), runner.py:267, [trial: 119, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:04:06Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:04:06Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:19:41Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2734', 'uid': '8838b1ab-7bea-4d6e-86ba-ea9b80dd6a95'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:19:41Z', 'phase': ''}}}
2024-02-24 08:20:08,150 DEBUG  , Thread-1 (run), runner.py:296, [trial: 119, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-hfftr
2024-02-24 08:20:08,399 ERROR  , Thread-1 (run), runner.py:368, [trial: 119, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-v2cgh
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '95c299cc-3063-49ec-871b-0bda4feebbf3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:20:08 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-v2cgh\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 08:20:08,443 DEBUG  , Thread-1 (run), engine.py:207, [trial: 119, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 08:20:08,448 INFO   , Thread-1 (run), engine.py:333, Trial 119 finished, completed in 00:18:02
2024-02-24 08:20:08,448 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 08:20:08,448 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 08:20:08,448 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 08:20:08,448 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 08:20:08,487 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-hfftr
2024-02-24 08:20:22,205 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 08:21:11,490 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 08:21:11,509 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 08:21:17,482 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:22,627 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:22,627 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:22,875 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:28,013 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:28,013 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:28,293 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:33,432 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:33,432 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:33,564 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:38,701 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:38,701 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:38,923 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:44,064 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:44,064 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:44,248 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:49,379 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:49,379 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:21:49,458 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 119, gen: 0] Waiting for all pods to be ready
2024-02-24 08:21:54,591 INFO   , Thread-1 (run), deploy.py:32, [trial: 119, gen: 0] Operator ready
2024-02-24 08:21:54,591 INFO   , Thread-1 (run), deploy.py:36, [trial: 119, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:22:14,644 WARNING, Thread-1 (run), object.py:155, [trial: 120, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 08:22:14,644 WARNING, Thread-1 (run), object.py:155, [trial: 120, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 08:22:14,644 WARNING, Thread-1 (run), object.py:155, [trial: 120, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 08:22:14,644 DEBUG  , Thread-1 (run), engine.py:652, [trial: 120, gen: 0] Run and check
2024-02-24 08:22:14,798 DEBUG  , Thread-1 (run), runner.py:123, [trial: 120, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 08:22:14,798 DEBUG  , Thread-1 (run), runner.py:124, [trial: 120, gen: 0] STDERR: 
2024-02-24 08:22:14,798 INFO   , Thread-1 (run), runner.py:437, [trial: 120, gen: 0] Waiting for system to converge... 
2024-02-24 08:25:24,227 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:26:24,336 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:28:20,758 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:29:20,867 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:30:14,822 ERROR  , Thread-1 (run), runner.py:586, [trial: 120, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:30:15,088 DEBUG  , Thread-1 (run), runner.py:267, [trial: 120, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:22:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:22:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:29:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': '48d00c84-b06d-4c3e-8a80-5c788e003c1c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:29:50Z', 'phase': ''}}}
2024-02-24 08:30:15,110 DEBUG  , Thread-1 (run), runner.py:296, [trial: 120, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-st9t5
2024-02-24 08:30:15,333 ERROR  , Thread-1 (run), runner.py:368, [trial: 120, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n4lzx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '415e8ab9-498b-4e08-bf1d-cc8da2aeee57', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:30:15 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n4lzx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 08:30:15,384 INFO   , Thread-1 (run), result.py:170, [trial: 120, gen: 0] No stderr, continue
2024-02-24 08:30:15,422 ERROR  , Thread-1 (run), health.py:155, [trial: 120, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 08:30:15,448 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,448 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line time="2024-02-24T15:21:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,449 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line time="2024-02-24T15:21:50Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 15:21:50.467765962 +0000 UTC m=+0.022849291]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,449 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line time="2024-02-24T15:21:50Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,449 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line time="2024-02-24T15:21:50Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,449 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line time="2024-02-24T15:21:50Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,500 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 120, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:30:15,657 INFO   , Thread-1 (run), consistency.py:496, [trial: 120, gen: 0] All input deltas are matched
2024-02-24 08:30:15,659 INFO   , Thread-1 (run), engine.py:554, [trial: 120, gen: 0] Error result, running recovery
2024-02-24 08:30:15,660 DEBUG  , Thread-1 (run), engine.py:698, [trial: 120, gen: 0] Running recovery
2024-02-24 08:30:16,503 DEBUG  , Thread-1 (run), runner.py:123, [trial: 120, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 08:30:16,503 DEBUG  , Thread-1 (run), runner.py:124, [trial: 120, gen: 0] STDERR: 
2024-02-24 08:30:16,503 INFO   , Thread-1 (run), runner.py:437, [trial: 120, gen: 0] Waiting for system to converge... 
2024-02-24 08:31:16,645 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:32:16,753 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:33:20,723 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:34:20,790 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:35:20,900 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:36:20,961 INFO   , Thread-1 (run), runner.py:508, [trial: 120, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:38:16,514 ERROR  , Thread-1 (run), runner.py:586, [trial: 120, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:38:16,805 DEBUG  , Thread-1 (run), runner.py:267, [trial: 120, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:22:14Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:22:14Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:37:50Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2716', 'uid': '48d00c84-b06d-4c3e-8a80-5c788e003c1c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:37:50Z', 'phase': ''}}}
2024-02-24 08:38:16,826 DEBUG  , Thread-1 (run), runner.py:296, [trial: 120, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-st9t5
2024-02-24 08:38:17,074 ERROR  , Thread-1 (run), runner.py:368, [trial: 120, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n4lzx
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5a948164-2605-45e9-abda-80ff05f9b421', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:38:17 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n4lzx\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 08:38:17,118 DEBUG  , Thread-1 (run), engine.py:207, [trial: 120, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 08:38:17,122 INFO   , Thread-1 (run), engine.py:333, Trial 120 finished, completed in 00:17:58
2024-02-24 08:38:17,122 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 58
2024-02-24 08:38:17,122 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 08:38:17,122 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 08:38:17,122 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 08:38:17,159 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-st9t5
2024-02-24 08:38:30,936 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 08:39:25,938 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 08:39:25,965 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 08:39:32,427 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:39:37,571 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:39:37,571 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:39:37,837 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:39:42,975 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:39:42,975 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:39:43,287 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:39:48,411 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:39:48,411 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:39:48,548 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:39:53,670 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:39:53,670 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:39:53,921 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:39:59,090 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:39:59,090 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:39:59,258 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:40:04,400 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:40:04,400 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:40:04,476 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 120, gen: 0] Waiting for all pods to be ready
2024-02-24 08:40:09,613 INFO   , Thread-1 (run), deploy.py:32, [trial: 120, gen: 0] Operator ready
2024-02-24 08:40:09,613 INFO   , Thread-1 (run), deploy.py:36, [trial: 120, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:40:29,671 WARNING, Thread-1 (run), object.py:155, [trial: 121, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 08:40:29,671 WARNING, Thread-1 (run), object.py:155, [trial: 121, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 08:40:29,671 WARNING, Thread-1 (run), object.py:155, [trial: 121, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 08:40:29,673 DEBUG  , Thread-1 (run), engine.py:652, [trial: 121, gen: 0] Run and check
2024-02-24 08:40:29,830 DEBUG  , Thread-1 (run), runner.py:123, [trial: 121, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 08:40:29,830 DEBUG  , Thread-1 (run), runner.py:124, [trial: 121, gen: 0] STDERR: 
2024-02-24 08:40:29,830 INFO   , Thread-1 (run), runner.py:437, [trial: 121, gen: 0] Waiting for system to converge... 
2024-02-24 08:43:35,750 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:44:35,857 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:46:35,740 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:47:35,846 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:48:29,862 ERROR  , Thread-1 (run), runner.py:586, [trial: 121, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:48:30,136 DEBUG  , Thread-1 (run), runner.py:267, [trial: 121, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:40:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:40:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:48:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1792', 'uid': '83b5684a-df77-439b-a029-c1fc28dd6544'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:48:05Z', 'phase': ''}}}
2024-02-24 08:48:30,158 DEBUG  , Thread-1 (run), runner.py:296, [trial: 121, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7tp6s
2024-02-24 08:48:30,377 ERROR  , Thread-1 (run), runner.py:368, [trial: 121, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7h4j9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9241bdee-5f82-4b00-bd6b-81f8162bb5ab', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:48:30 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7h4j9\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 08:48:30,409 INFO   , Thread-1 (run), result.py:170, [trial: 121, gen: 0] No stderr, continue
2024-02-24 08:48:30,440 ERROR  , Thread-1 (run), health.py:155, [trial: 121, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line time="2024-02-24T15:40:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line time="2024-02-24T15:40:05Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 15:40:05.443660684 +0000 UTC m=+0.022830729]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line time="2024-02-24T15:40:05Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line time="2024-02-24T15:40:05Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,464 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line time="2024-02-24T15:40:05Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,515 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 121, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 08:48:30,819 INFO   , Thread-1 (run), consistency.py:496, [trial: 121, gen: 0] All input deltas are matched
2024-02-24 08:48:30,821 INFO   , Thread-1 (run), engine.py:554, [trial: 121, gen: 0] Error result, running recovery
2024-02-24 08:48:30,821 DEBUG  , Thread-1 (run), engine.py:698, [trial: 121, gen: 0] Running recovery
2024-02-24 08:48:31,674 DEBUG  , Thread-1 (run), runner.py:123, [trial: 121, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 08:48:31,674 DEBUG  , Thread-1 (run), runner.py:124, [trial: 121, gen: 0] STDERR: 
2024-02-24 08:48:31,674 INFO   , Thread-1 (run), runner.py:437, [trial: 121, gen: 0] Waiting for system to converge... 
2024-02-24 08:49:31,852 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:50:31,958 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:51:35,707 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:52:35,811 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:53:35,919 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:54:36,029 INFO   , Thread-1 (run), runner.py:508, [trial: 121, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 08:56:31,684 ERROR  , Thread-1 (run), runner.py:586, [trial: 121, gen: 0] System failed to converge within 480 seconds
2024-02-24 08:56:31,967 DEBUG  , Thread-1 (run), runner.py:267, [trial: 121, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:40:29Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:40:29Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T15:56:05Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2712', 'uid': '83b5684a-df77-439b-a029-c1fc28dd6544'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T15:56:05Z', 'phase': ''}}}
2024-02-24 08:56:31,989 DEBUG  , Thread-1 (run), runner.py:296, [trial: 121, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7tp6s
2024-02-24 08:56:32,236 ERROR  , Thread-1 (run), runner.py:368, [trial: 121, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7h4j9
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7dfad1de-e4de-4b6b-9523-8bbbc66d8321', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 15:56:32 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7h4j9\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 08:56:32,279 DEBUG  , Thread-1 (run), engine.py:207, [trial: 121, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 08:56:32,283 INFO   , Thread-1 (run), engine.py:333, Trial 121 finished, completed in 00:18:04
2024-02-24 08:56:32,283 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-24 08:56:32,283 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 08:56:32,283 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 08:56:32,283 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 08:56:32,319 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7tp6s
2024-02-24 08:56:45,790 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 08:57:41,237 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 08:57:41,272 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 08:57:47,573 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:57:52,718 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:57:52,719 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:57:52,947 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:57:58,083 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:57:58,083 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:57:58,391 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:58:03,530 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:58:03,530 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:58:03,664 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:58:08,804 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:58:08,804 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:58:09,040 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:58:14,168 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:58:14,168 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:58:14,377 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:58:19,519 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:58:19,519 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:58:19,611 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 121, gen: 0] Waiting for all pods to be ready
2024-02-24 08:58:24,761 INFO   , Thread-1 (run), deploy.py:32, [trial: 121, gen: 0] Operator ready
2024-02-24 08:58:24,761 INFO   , Thread-1 (run), deploy.py:36, [trial: 121, gen: 0] All pods took 0 seconds to get ready
2024-02-24 08:58:44,804 WARNING, Thread-1 (run), object.py:155, [trial: 122, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 08:58:44,804 WARNING, Thread-1 (run), object.py:155, [trial: 122, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 08:58:44,804 WARNING, Thread-1 (run), object.py:155, [trial: 122, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 08:58:44,805 DEBUG  , Thread-1 (run), engine.py:652, [trial: 122, gen: 0] Run and check
2024-02-24 08:58:44,947 DEBUG  , Thread-1 (run), runner.py:123, [trial: 122, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 08:58:44,948 DEBUG  , Thread-1 (run), runner.py:124, [trial: 122, gen: 0] STDERR: 
2024-02-24 08:58:44,948 INFO   , Thread-1 (run), runner.py:437, [trial: 122, gen: 0] Waiting for system to converge... 
2024-02-24 09:01:50,847 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:02:50,957 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:04:50,841 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:05:50,913 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:06:44,979 ERROR  , Thread-1 (run), runner.py:586, [trial: 122, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:06:45,251 DEBUG  , Thread-1 (run), runner.py:267, [trial: 122, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:58:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:58:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:06:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1793', 'uid': '99faeaf4-5a09-4c0b-bd36-97946188798a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:06:20Z', 'phase': ''}}}
2024-02-24 09:06:45,272 DEBUG  , Thread-1 (run), runner.py:296, [trial: 122, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7ghmr
2024-02-24 09:06:45,494 ERROR  , Thread-1 (run), runner.py:368, [trial: 122, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rcllg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3ff67a45-a368-4334-b3c2-c9f02c928e58', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:06:45 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rcllg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:06:45,541 INFO   , Thread-1 (run), result.py:170, [trial: 122, gen: 0] No stderr, continue
2024-02-24 09:06:45,575 ERROR  , Thread-1 (run), health.py:155, [trial: 122, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 09:06:45,599 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,600 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line time="2024-02-24T15:58:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,600 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line time="2024-02-24T15:58:20Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 15:58:20.554474124 +0000 UTC m=+0.022338140]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,600 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line time="2024-02-24T15:58:20Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,600 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line time="2024-02-24T15:58:20Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,600 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line time="2024-02-24T15:58:20Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:45,667 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 122, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:06:46,012 INFO   , Thread-1 (run), consistency.py:496, [trial: 122, gen: 0] All input deltas are matched
2024-02-24 09:06:46,015 INFO   , Thread-1 (run), engine.py:554, [trial: 122, gen: 0] Error result, running recovery
2024-02-24 09:06:46,015 DEBUG  , Thread-1 (run), engine.py:698, [trial: 122, gen: 0] Running recovery
2024-02-24 09:06:46,861 DEBUG  , Thread-1 (run), runner.py:123, [trial: 122, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 09:06:46,862 DEBUG  , Thread-1 (run), runner.py:124, [trial: 122, gen: 0] STDERR: 
2024-02-24 09:06:46,862 INFO   , Thread-1 (run), runner.py:437, [trial: 122, gen: 0] Waiting for system to converge... 
2024-02-24 09:07:47,035 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:08:47,145 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:09:59,267 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:10:59,375 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:11:59,455 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:12:59,555 INFO   , Thread-1 (run), runner.py:508, [trial: 122, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:14:46,873 ERROR  , Thread-1 (run), runner.py:586, [trial: 122, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:14:47,181 DEBUG  , Thread-1 (run), runner.py:267, [trial: 122, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T15:58:44Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T15:58:44Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:14:20Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2713', 'uid': '99faeaf4-5a09-4c0b-bd36-97946188798a'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:14:20Z', 'phase': ''}}}
2024-02-24 09:14:47,204 DEBUG  , Thread-1 (run), runner.py:296, [trial: 122, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-7ghmr
2024-02-24 09:14:47,426 ERROR  , Thread-1 (run), runner.py:368, [trial: 122, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rcllg
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '83af7ca3-cbae-40fd-8049-227115643e29', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:14:47 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rcllg\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:14:47,467 DEBUG  , Thread-1 (run), engine.py:207, [trial: 122, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 09:14:47,471 INFO   , Thread-1 (run), engine.py:333, Trial 122 finished, completed in 00:18:05
2024-02-24 09:14:47,471 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 64
2024-02-24 09:14:47,471 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 09:14:47,471 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 09:14:47,471 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 09:14:47,515 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-7ghmr
2024-02-24 09:15:01,130 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 09:15:54,542 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 09:15:54,553 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 09:16:00,589 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:05,733 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:05,733 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:05,973 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:11,111 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:11,111 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:11,422 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:16,560 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:16,560 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:16,684 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:21,814 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:21,815 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:22,107 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:27,233 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:27,233 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:27,406 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:32,534 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:32,534 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:32,603 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 122, gen: 0] Waiting for all pods to be ready
2024-02-24 09:16:37,725 INFO   , Thread-1 (run), deploy.py:32, [trial: 122, gen: 0] Operator ready
2024-02-24 09:16:37,725 INFO   , Thread-1 (run), deploy.py:36, [trial: 122, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:16:57,779 WARNING, Thread-1 (run), object.py:155, [trial: 123, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 09:16:57,779 WARNING, Thread-1 (run), object.py:155, [trial: 123, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 09:16:57,779 WARNING, Thread-1 (run), object.py:155, [trial: 123, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 09:16:57,780 DEBUG  , Thread-1 (run), engine.py:652, [trial: 123, gen: 0] Run and check
2024-02-24 09:16:57,932 DEBUG  , Thread-1 (run), runner.py:123, [trial: 123, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 09:16:57,932 DEBUG  , Thread-1 (run), runner.py:124, [trial: 123, gen: 0] STDERR: 
2024-02-24 09:16:57,932 INFO   , Thread-1 (run), runner.py:437, [trial: 123, gen: 0] Waiting for system to converge... 
2024-02-24 09:20:03,822 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:21:03,897 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:23:03,806 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:24:03,920 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:24:57,956 ERROR  , Thread-1 (run), runner.py:586, [trial: 123, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:24:58,220 DEBUG  , Thread-1 (run), runner.py:267, [trial: 123, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:16:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:16:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:24:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1795', 'uid': '0ac99d75-d06c-4362-9aa7-26d55ee7f6ca'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:24:33Z', 'phase': ''}}}
2024-02-24 09:24:58,242 DEBUG  , Thread-1 (run), runner.py:296, [trial: 123, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d54pk
2024-02-24 09:24:58,457 ERROR  , Thread-1 (run), runner.py:368, [trial: 123, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mq4kd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '251f608e-1a7a-4717-990a-8dcdc28f32a7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:24:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mq4kd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:24:58,499 INFO   , Thread-1 (run), result.py:170, [trial: 123, gen: 0] No stderr, continue
2024-02-24 09:24:58,533 ERROR  , Thread-1 (run), health.py:155, [trial: 123, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 09:24:58,557 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,557 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line time="2024-02-24T16:16:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,557 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line time="2024-02-24T16:16:33Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 16:16:33.535823791 +0000 UTC m=+0.012060963]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,558 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line time="2024-02-24T16:16:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,558 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line time="2024-02-24T16:16:33Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,558 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line time="2024-02-24T16:16:33Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,611 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 123, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:24:58,933 INFO   , Thread-1 (run), consistency.py:496, [trial: 123, gen: 0] All input deltas are matched
2024-02-24 09:24:58,936 INFO   , Thread-1 (run), engine.py:554, [trial: 123, gen: 0] Error result, running recovery
2024-02-24 09:24:58,936 DEBUG  , Thread-1 (run), engine.py:698, [trial: 123, gen: 0] Running recovery
2024-02-24 09:24:59,732 DEBUG  , Thread-1 (run), runner.py:123, [trial: 123, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 09:24:59,732 DEBUG  , Thread-1 (run), runner.py:124, [trial: 123, gen: 0] STDERR: 
2024-02-24 09:24:59,732 INFO   , Thread-1 (run), runner.py:437, [trial: 123, gen: 0] Waiting for system to converge... 
2024-02-24 09:25:59,906 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:27:00,015 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:28:03,779 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:29:03,893 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:30:03,970 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:31:04,065 INFO   , Thread-1 (run), runner.py:508, [trial: 123, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:32:59,740 ERROR  , Thread-1 (run), runner.py:586, [trial: 123, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:33:00,001 DEBUG  , Thread-1 (run), runner.py:267, [trial: 123, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:16:57Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:16:57Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:32:33Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2715', 'uid': '0ac99d75-d06c-4362-9aa7-26d55ee7f6ca'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:32:33Z', 'phase': ''}}}
2024-02-24 09:33:00,023 DEBUG  , Thread-1 (run), runner.py:296, [trial: 123, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-d54pk
2024-02-24 09:33:00,271 ERROR  , Thread-1 (run), runner.py:368, [trial: 123, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mq4kd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1b6d1d13-1507-4b06-bc87-ecfd89ad8b3d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:33:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mq4kd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:33:00,315 DEBUG  , Thread-1 (run), engine.py:207, [trial: 123, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 09:33:00,319 INFO   , Thread-1 (run), engine.py:333, Trial 123 finished, completed in 00:18:02
2024-02-24 09:33:00,319 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 09:33:00,319 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 09:33:00,319 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 09:33:00,319 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 09:33:00,357 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-d54pk
2024-02-24 09:33:14,404 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 09:34:02,747 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 09:34:02,760 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 09:34:11,143 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:16,285 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:16,285 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:16,547 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:21,683 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:21,684 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:21,994 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:27,128 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:27,129 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:27,261 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:32,401 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:32,401 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:32,656 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:37,796 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:37,796 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:38,012 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:43,156 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:43,156 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:34:43,229 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 123, gen: 0] Waiting for all pods to be ready
2024-02-24 09:34:48,369 INFO   , Thread-1 (run), deploy.py:32, [trial: 123, gen: 0] Operator ready
2024-02-24 09:34:48,369 INFO   , Thread-1 (run), deploy.py:36, [trial: 123, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:35:08,421 WARNING, Thread-1 (run), object.py:155, [trial: 124, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 09:35:08,422 WARNING, Thread-1 (run), object.py:155, [trial: 124, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 09:35:08,422 WARNING, Thread-1 (run), object.py:155, [trial: 124, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 09:35:08,422 DEBUG  , Thread-1 (run), engine.py:652, [trial: 124, gen: 0] Run and check
2024-02-24 09:35:08,579 DEBUG  , Thread-1 (run), runner.py:123, [trial: 124, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 09:35:08,579 DEBUG  , Thread-1 (run), runner.py:124, [trial: 124, gen: 0] STDERR: 
2024-02-24 09:35:08,579 INFO   , Thread-1 (run), runner.py:437, [trial: 124, gen: 0] Waiting for system to converge... 
2024-02-24 09:38:14,569 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:39:14,643 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:41:14,471 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:42:14,580 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:43:08,615 ERROR  , Thread-1 (run), runner.py:586, [trial: 124, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:43:08,882 DEBUG  , Thread-1 (run), runner.py:267, [trial: 124, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:35:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:35:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:42:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': '3754decd-1f01-4d75-ad2e-526f6f3a0663'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:42:44Z', 'phase': ''}}}
2024-02-24 09:43:08,904 DEBUG  , Thread-1 (run), runner.py:296, [trial: 124, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r69vx
2024-02-24 09:43:09,132 ERROR  , Thread-1 (run), runner.py:368, [trial: 124, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mbq4h
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e0c15596-09ec-4496-96bf-76b715e71631', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:43:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mbq4h\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:43:09,168 INFO   , Thread-1 (run), result.py:170, [trial: 124, gen: 0] No stderr, continue
2024-02-24 09:43:09,204 ERROR  , Thread-1 (run), health.py:155, [trial: 124, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 09:43:09,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,229 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line time="2024-02-24T16:34:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,230 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line time="2024-02-24T16:34:44Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 16:34:44.193169839 +0000 UTC m=+0.010321228]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,230 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line time="2024-02-24T16:34:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,230 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line time="2024-02-24T16:34:44Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,230 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line time="2024-02-24T16:34:44Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,282 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 124, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 09:43:09,445 INFO   , Thread-1 (run), consistency.py:496, [trial: 124, gen: 0] All input deltas are matched
2024-02-24 09:43:09,448 INFO   , Thread-1 (run), engine.py:554, [trial: 124, gen: 0] Error result, running recovery
2024-02-24 09:43:09,448 DEBUG  , Thread-1 (run), engine.py:698, [trial: 124, gen: 0] Running recovery
2024-02-24 09:43:10,258 DEBUG  , Thread-1 (run), runner.py:123, [trial: 124, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 09:43:10,259 DEBUG  , Thread-1 (run), runner.py:124, [trial: 124, gen: 0] STDERR: 
2024-02-24 09:43:10,259 INFO   , Thread-1 (run), runner.py:437, [trial: 124, gen: 0] Waiting for system to converge... 
2024-02-24 09:44:10,615 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:45:10,720 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:46:14,435 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:47:14,535 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:48:14,593 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:49:14,658 INFO   , Thread-1 (run), runner.py:508, [trial: 124, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:51:10,269 ERROR  , Thread-1 (run), runner.py:586, [trial: 124, gen: 0] System failed to converge within 480 seconds
2024-02-24 09:51:10,565 DEBUG  , Thread-1 (run), runner.py:267, [trial: 124, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:35:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:35:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T16:50:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': '3754decd-1f01-4d75-ad2e-526f6f3a0663'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T16:50:44Z', 'phase': ''}}}
2024-02-24 09:51:10,586 DEBUG  , Thread-1 (run), runner.py:296, [trial: 124, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-r69vx
2024-02-24 09:51:10,838 ERROR  , Thread-1 (run), runner.py:368, [trial: 124, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-mbq4h
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f8df02ac-8311-4960-bdf8-1fc28aee24c4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 16:51:10 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-mbq4h\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 09:51:10,899 DEBUG  , Thread-1 (run), engine.py:207, [trial: 124, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 09:51:10,903 INFO   , Thread-1 (run), engine.py:333, Trial 124 finished, completed in 00:18:00
2024-02-24 09:51:10,903 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 09:51:10,903 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 09:51:10,903 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 09:51:10,903 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 09:51:10,948 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-r69vx
2024-02-24 09:51:24,468 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 09:52:16,328 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 09:52:16,358 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 09:52:22,428 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:27,567 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:27,567 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:27,787 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:32,935 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:32,935 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:33,217 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:38,360 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:38,361 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:38,482 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:43,601 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:43,601 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:43,814 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:48,954 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:48,954 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:49,144 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:54,286 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:54,286 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:52:54,362 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 124, gen: 0] Waiting for all pods to be ready
2024-02-24 09:52:59,506 INFO   , Thread-1 (run), deploy.py:32, [trial: 124, gen: 0] Operator ready
2024-02-24 09:52:59,506 INFO   , Thread-1 (run), deploy.py:36, [trial: 124, gen: 0] All pods took 0 seconds to get ready
2024-02-24 09:53:19,542 WARNING, Thread-1 (run), object.py:155, [trial: 125, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 09:53:19,542 WARNING, Thread-1 (run), object.py:155, [trial: 125, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 09:53:19,542 WARNING, Thread-1 (run), object.py:155, [trial: 125, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 09:53:19,542 DEBUG  , Thread-1 (run), engine.py:652, [trial: 125, gen: 0] Run and check
2024-02-24 09:53:19,731 DEBUG  , Thread-1 (run), runner.py:123, [trial: 125, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 09:53:19,731 DEBUG  , Thread-1 (run), runner.py:124, [trial: 125, gen: 0] STDERR: 
2024-02-24 09:53:19,731 INFO   , Thread-1 (run), runner.py:437, [trial: 125, gen: 0] Waiting for system to converge... 
2024-02-24 09:56:27,292 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:57:27,400 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 09:59:25,608 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:00:25,711 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:01:19,759 ERROR  , Thread-1 (run), runner.py:586, [trial: 125, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:01:20,027 DEBUG  , Thread-1 (run), runner.py:267, [trial: 125, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:53:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:53:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:00:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': 'a1b60a63-b129-4488-9498-82f092e0fd42'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:00:55Z', 'phase': ''}}}
2024-02-24 10:01:20,049 DEBUG  , Thread-1 (run), runner.py:296, [trial: 125, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-brl2r
2024-02-24 10:01:20,262 ERROR  , Thread-1 (run), runner.py:368, [trial: 125, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8k5td
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '986bd713-9859-4082-a423-3a7febdbf082', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:01:20 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8k5td\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:01:20,298 INFO   , Thread-1 (run), result.py:170, [trial: 125, gen: 0] No stderr, continue
2024-02-24 10:01:20,331 ERROR  , Thread-1 (run), health.py:155, [trial: 125, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 10:01:20,355 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,355 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line time="2024-02-24T16:52:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,356 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line time="2024-02-24T16:52:55Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 16:52:55.32604688 +0000 UTC m=+0.022419957]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,356 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line time="2024-02-24T16:52:55Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,356 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line time="2024-02-24T16:52:55Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,356 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line time="2024-02-24T16:52:55Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,407 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 125, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:01:20,717 INFO   , Thread-1 (run), consistency.py:496, [trial: 125, gen: 0] All input deltas are matched
2024-02-24 10:01:20,719 INFO   , Thread-1 (run), engine.py:554, [trial: 125, gen: 0] Error result, running recovery
2024-02-24 10:01:20,720 DEBUG  , Thread-1 (run), engine.py:698, [trial: 125, gen: 0] Running recovery
2024-02-24 10:01:21,443 DEBUG  , Thread-1 (run), runner.py:123, [trial: 125, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 10:01:21,444 DEBUG  , Thread-1 (run), runner.py:124, [trial: 125, gen: 0] STDERR: 
2024-02-24 10:01:21,444 INFO   , Thread-1 (run), runner.py:437, [trial: 125, gen: 0] Waiting for system to converge... 
2024-02-24 10:02:21,620 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:04:25,596 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:05:25,703 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:06:25,811 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:07:25,920 INFO   , Thread-1 (run), runner.py:508, [trial: 125, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:09:21,452 ERROR  , Thread-1 (run), runner.py:586, [trial: 125, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:09:21,741 DEBUG  , Thread-1 (run), runner.py:267, [trial: 125, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T16:53:19Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T16:53:19Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:08:55Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': 'a1b60a63-b129-4488-9498-82f092e0fd42'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:08:55Z', 'phase': ''}}}
2024-02-24 10:09:21,763 DEBUG  , Thread-1 (run), runner.py:296, [trial: 125, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-brl2r
2024-02-24 10:09:22,007 ERROR  , Thread-1 (run), runner.py:368, [trial: 125, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8k5td
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1bfc8d9a-936f-4146-8712-f2430bf5b4b1', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:09:22 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8k5td\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:09:22,062 DEBUG  , Thread-1 (run), engine.py:207, [trial: 125, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 10:09:22,066 INFO   , Thread-1 (run), engine.py:333, Trial 125 finished, completed in 00:18:01
2024-02-24 10:09:22,066 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 10:09:22,067 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 10:09:22,067 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 10:09:22,067 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 10:09:22,103 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-brl2r
2024-02-24 10:09:35,459 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 10:10:25,511 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 10:10:25,533 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 10:10:33,588 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:10:38,729 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:10:38,729 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:10:39,021 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:10:44,146 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:10:44,146 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:10:44,440 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:10:49,579 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:10:49,579 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:10:49,708 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:10:54,828 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:10:54,828 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:10:55,082 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:11:00,219 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:11:00,219 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:11:00,421 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:11:05,572 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:11:05,573 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:11:05,640 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 125, gen: 0] Waiting for all pods to be ready
2024-02-24 10:11:10,781 INFO   , Thread-1 (run), deploy.py:32, [trial: 125, gen: 0] Operator ready
2024-02-24 10:11:10,781 INFO   , Thread-1 (run), deploy.py:36, [trial: 125, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:11:30,833 WARNING, Thread-1 (run), object.py:155, [trial: 126, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 10:11:30,834 WARNING, Thread-1 (run), object.py:155, [trial: 126, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 10:11:30,834 WARNING, Thread-1 (run), object.py:155, [trial: 126, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 10:11:30,834 DEBUG  , Thread-1 (run), engine.py:652, [trial: 126, gen: 0] Run and check
2024-02-24 10:11:30,982 DEBUG  , Thread-1 (run), runner.py:123, [trial: 126, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 10:11:30,982 DEBUG  , Thread-1 (run), runner.py:124, [trial: 126, gen: 0] STDERR: 
2024-02-24 10:11:30,982 INFO   , Thread-1 (run), runner.py:437, [trial: 126, gen: 0] Waiting for system to converge... 
2024-02-24 10:14:36,867 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:15:36,974 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:17:37,446 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:18:37,554 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:19:31,012 ERROR  , Thread-1 (run), runner.py:586, [trial: 126, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:19:31,284 DEBUG  , Thread-1 (run), runner.py:267, [trial: 126, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:11:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:11:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:19:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1816', 'uid': '614e0a9d-e286-4c14-a3d6-0387a796bc30'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:19:06Z', 'phase': ''}}}
2024-02-24 10:19:31,306 DEBUG  , Thread-1 (run), runner.py:296, [trial: 126, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tv2w6
2024-02-24 10:19:31,529 ERROR  , Thread-1 (run), runner.py:368, [trial: 126, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rt75n
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '84f7eee0-4cf7-4ade-813c-64124a7c353f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:19:31 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rt75n\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:19:31,578 INFO   , Thread-1 (run), result.py:170, [trial: 126, gen: 0] No stderr, continue
2024-02-24 10:19:31,612 ERROR  , Thread-1 (run), health.py:155, [trial: 126, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 10:19:31,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line time="2024-02-24T17:11:06Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,636 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line time="2024-02-24T17:11:06Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 17:11:06.57134184 +0000 UTC m=+0.021811270]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,637 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line time="2024-02-24T17:11:06Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,637 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line time="2024-02-24T17:11:06Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,637 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line time="2024-02-24T17:11:06Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,688 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 126, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:19:31,993 INFO   , Thread-1 (run), consistency.py:496, [trial: 126, gen: 0] All input deltas are matched
2024-02-24 10:19:31,996 INFO   , Thread-1 (run), engine.py:554, [trial: 126, gen: 0] Error result, running recovery
2024-02-24 10:19:31,996 DEBUG  , Thread-1 (run), engine.py:698, [trial: 126, gen: 0] Running recovery
2024-02-24 10:19:32,815 DEBUG  , Thread-1 (run), runner.py:123, [trial: 126, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 10:19:32,815 DEBUG  , Thread-1 (run), runner.py:124, [trial: 126, gen: 0] STDERR: 
2024-02-24 10:19:32,815 INFO   , Thread-1 (run), runner.py:437, [trial: 126, gen: 0] Waiting for system to converge... 
2024-02-24 10:20:32,992 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:21:33,058 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:22:38,377 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:23:38,484 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:24:38,544 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:25:38,653 INFO   , Thread-1 (run), runner.py:508, [trial: 126, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:27:32,826 ERROR  , Thread-1 (run), runner.py:586, [trial: 126, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:27:33,116 DEBUG  , Thread-1 (run), runner.py:267, [trial: 126, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:11:30Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:11:30Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:27:06Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2736', 'uid': '614e0a9d-e286-4c14-a3d6-0387a796bc30'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:27:06Z', 'phase': ''}}}
2024-02-24 10:27:33,139 DEBUG  , Thread-1 (run), runner.py:296, [trial: 126, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tv2w6
2024-02-24 10:27:33,392 ERROR  , Thread-1 (run), runner.py:368, [trial: 126, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rt75n
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'ca0e3c20-196b-4159-8b35-d844fa18050f', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:27:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rt75n\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:27:33,440 DEBUG  , Thread-1 (run), engine.py:207, [trial: 126, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 10:27:33,445 INFO   , Thread-1 (run), engine.py:333, Trial 126 finished, completed in 00:18:01
2024-02-24 10:27:33,445 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 10:27:33,445 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 10:27:33,445 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 10:27:33,445 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 10:27:33,473 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-tv2w6
2024-02-24 10:27:47,005 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 10:28:37,917 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 10:28:37,937 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 10:28:43,854 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:28:49,002 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:28:49,002 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:28:49,234 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:28:54,358 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:28:54,359 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:28:54,672 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:28:59,797 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:28:59,797 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:28:59,929 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:29:05,052 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:29:05,052 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:29:05,257 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:29:10,394 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:29:10,394 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:29:10,589 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:29:15,735 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:29:15,736 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:29:15,814 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 126, gen: 0] Waiting for all pods to be ready
2024-02-24 10:29:20,944 INFO   , Thread-1 (run), deploy.py:32, [trial: 126, gen: 0] Operator ready
2024-02-24 10:29:20,944 INFO   , Thread-1 (run), deploy.py:36, [trial: 126, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:29:40,997 WARNING, Thread-1 (run), object.py:155, [trial: 127, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 10:29:40,997 WARNING, Thread-1 (run), object.py:155, [trial: 127, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 10:29:40,997 WARNING, Thread-1 (run), object.py:155, [trial: 127, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 10:29:40,999 DEBUG  , Thread-1 (run), engine.py:652, [trial: 127, gen: 0] Run and check
2024-02-24 10:29:41,146 DEBUG  , Thread-1 (run), runner.py:123, [trial: 127, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 10:29:41,146 DEBUG  , Thread-1 (run), runner.py:124, [trial: 127, gen: 0] STDERR: 
2024-02-24 10:29:41,146 INFO   , Thread-1 (run), runner.py:437, [trial: 127, gen: 0] Waiting for system to converge... 
2024-02-24 10:32:45,950 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:33:46,058 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:34:46,167 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:35:52,915 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:36:52,966 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:37:41,200 ERROR  , Thread-1 (run), runner.py:586, [trial: 127, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:37:41,471 DEBUG  , Thread-1 (run), runner.py:267, [trial: 127, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:29:41Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:29:41Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:37:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': 'f7f15ac6-d7b9-4c5b-95f3-6ef1fb13a3c2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:37:16Z', 'phase': ''}}}
2024-02-24 10:37:41,493 DEBUG  , Thread-1 (run), runner.py:296, [trial: 127, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-p9zwg
2024-02-24 10:37:41,720 ERROR  , Thread-1 (run), runner.py:368, [trial: 127, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-57dvj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9ce8b2b0-4cd6-4643-99c8-125136fe6a8c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:37:41 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-57dvj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:37:41,766 INFO   , Thread-1 (run), result.py:170, [trial: 127, gen: 0] No stderr, continue
2024-02-24 10:37:41,803 ERROR  , Thread-1 (run), health.py:155, [trial: 127, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 10:37:41,827 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,827 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line time="2024-02-24T17:29:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,828 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line time="2024-02-24T17:29:16Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 17:29:16.766543133 +0000 UTC m=+0.022827569]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,828 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line time="2024-02-24T17:29:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,828 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line time="2024-02-24T17:29:16Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,828 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line time="2024-02-24T17:29:16Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:41,889 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 127, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:37:42,213 INFO   , Thread-1 (run), consistency.py:496, [trial: 127, gen: 0] All input deltas are matched
2024-02-24 10:37:42,215 INFO   , Thread-1 (run), engine.py:554, [trial: 127, gen: 0] Error result, running recovery
2024-02-24 10:37:42,216 DEBUG  , Thread-1 (run), engine.py:698, [trial: 127, gen: 0] Running recovery
2024-02-24 10:37:43,069 DEBUG  , Thread-1 (run), runner.py:123, [trial: 127, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 10:37:43,070 DEBUG  , Thread-1 (run), runner.py:124, [trial: 127, gen: 0] STDERR: 
2024-02-24 10:37:43,070 INFO   , Thread-1 (run), runner.py:437, [trial: 127, gen: 0] Waiting for system to converge... 
2024-02-24 10:38:43,245 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:39:43,354 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:40:53,943 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:41:54,016 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:42:54,124 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:43:54,232 INFO   , Thread-1 (run), runner.py:508, [trial: 127, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:45:43,080 ERROR  , Thread-1 (run), runner.py:586, [trial: 127, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:45:43,388 DEBUG  , Thread-1 (run), runner.py:267, [trial: 127, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:29:41Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:29:41Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:45:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2736', 'uid': 'f7f15ac6-d7b9-4c5b-95f3-6ef1fb13a3c2'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:45:16Z', 'phase': ''}}}
2024-02-24 10:45:43,410 DEBUG  , Thread-1 (run), runner.py:296, [trial: 127, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-p9zwg
2024-02-24 10:45:43,663 ERROR  , Thread-1 (run), runner.py:368, [trial: 127, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-57dvj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a575766b-e1a6-441a-b7fe-483a685372e7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:45:43 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-57dvj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:45:43,710 DEBUG  , Thread-1 (run), engine.py:207, [trial: 127, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 10:45:43,714 INFO   , Thread-1 (run), engine.py:333, Trial 127 finished, completed in 00:18:00
2024-02-24 10:45:43,714 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 10:45:43,714 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 10:45:43,714 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 10:45:43,714 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 10:45:43,755 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-p9zwg
2024-02-24 10:45:57,347 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 10:46:46,778 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 10:46:46,798 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 10:46:53,691 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:46:58,837 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:46:58,837 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:46:59,139 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:04,274 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:04,275 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:04,554 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:09,695 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:09,695 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:09,908 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:15,032 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:15,032 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:15,287 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:20,426 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:20,426 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:20,597 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:25,735 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:25,735 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:25,805 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 127, gen: 0] Waiting for all pods to be ready
2024-02-24 10:47:30,952 INFO   , Thread-1 (run), deploy.py:32, [trial: 127, gen: 0] Operator ready
2024-02-24 10:47:30,952 INFO   , Thread-1 (run), deploy.py:36, [trial: 127, gen: 0] All pods took 0 seconds to get ready
2024-02-24 10:47:50,997 WARNING, Thread-1 (run), object.py:155, [trial: 128, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 10:47:50,997 WARNING, Thread-1 (run), object.py:155, [trial: 128, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 10:47:50,997 WARNING, Thread-1 (run), object.py:155, [trial: 128, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 10:47:50,998 DEBUG  , Thread-1 (run), engine.py:652, [trial: 128, gen: 0] Run and check
2024-02-24 10:47:51,139 DEBUG  , Thread-1 (run), runner.py:123, [trial: 128, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 10:47:51,140 DEBUG  , Thread-1 (run), runner.py:124, [trial: 128, gen: 0] STDERR: 
2024-02-24 10:47:51,140 INFO   , Thread-1 (run), runner.py:437, [trial: 128, gen: 0] Waiting for system to converge... 
2024-02-24 10:50:58,040 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:51:58,148 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:54:00,964 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:55:01,070 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:55:51,167 ERROR  , Thread-1 (run), runner.py:586, [trial: 128, gen: 0] System failed to converge within 480 seconds
2024-02-24 10:55:51,438 DEBUG  , Thread-1 (run), runner.py:267, [trial: 128, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:47:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:47:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T17:55:26Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1825', 'uid': '01efc6f3-cc22-4bb6-a83a-d4141561e20b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T17:55:26Z', 'phase': ''}}}
2024-02-24 10:55:51,461 DEBUG  , Thread-1 (run), runner.py:296, [trial: 128, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-k6jfm
2024-02-24 10:55:51,685 ERROR  , Thread-1 (run), runner.py:368, [trial: 128, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bpx6p
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5d1ef7b7-1bc6-41bb-a755-ab0e243ca1b1', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 17:55:51 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bpx6p\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 10:55:51,730 INFO   , Thread-1 (run), result.py:170, [trial: 128, gen: 0] No stderr, continue
2024-02-24 10:55:51,765 ERROR  , Thread-1 (run), health.py:155, [trial: 128, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line time="2024-02-24T17:47:26Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line time="2024-02-24T17:47:26Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 17:47:26.751860133 +0000 UTC m=+0.010765714]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line time="2024-02-24T17:47:26Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line time="2024-02-24T17:47:26Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,790 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line time="2024-02-24T17:47:26Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:51,851 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 128, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 10:55:52,185 INFO   , Thread-1 (run), consistency.py:496, [trial: 128, gen: 0] All input deltas are matched
2024-02-24 10:55:52,188 INFO   , Thread-1 (run), engine.py:554, [trial: 128, gen: 0] Error result, running recovery
2024-02-24 10:55:52,188 DEBUG  , Thread-1 (run), engine.py:698, [trial: 128, gen: 0] Running recovery
2024-02-24 10:55:53,035 DEBUG  , Thread-1 (run), runner.py:123, [trial: 128, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 10:55:53,036 DEBUG  , Thread-1 (run), runner.py:124, [trial: 128, gen: 0] STDERR: 
2024-02-24 10:55:53,036 INFO   , Thread-1 (run), runner.py:437, [trial: 128, gen: 0] Waiting for system to converge... 
2024-02-24 10:56:53,164 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:57:53,273 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:58:58,987 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 10:59:59,095 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:00:59,159 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:01:59,213 INFO   , Thread-1 (run), runner.py:508, [trial: 128, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:03:53,046 ERROR  , Thread-1 (run), runner.py:586, [trial: 128, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:03:53,344 DEBUG  , Thread-1 (run), runner.py:267, [trial: 128, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T17:47:51Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T17:47:51Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:03:26Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2744', 'uid': '01efc6f3-cc22-4bb6-a83a-d4141561e20b'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:03:26Z', 'phase': ''}}}
2024-02-24 11:03:53,367 DEBUG  , Thread-1 (run), runner.py:296, [trial: 128, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-k6jfm
2024-02-24 11:03:53,627 ERROR  , Thread-1 (run), runner.py:368, [trial: 128, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-bpx6p
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f2ef344e-17c3-4e8a-b9fe-39c78d3b57b2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:03:53 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-bpx6p\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:03:53,693 DEBUG  , Thread-1 (run), engine.py:207, [trial: 128, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 11:03:53,698 INFO   , Thread-1 (run), engine.py:333, Trial 128 finished, completed in 00:17:59
2024-02-24 11:03:53,698 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 59
2024-02-24 11:03:53,699 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 11:03:53,699 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 11:03:53,699 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 11:03:53,732 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-k6jfm
2024-02-24 11:04:07,068 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 11:04:59,219 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 11:04:59,251 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 11:05:06,724 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:11,876 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:11,876 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:12,135 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:17,295 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:17,295 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:17,601 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:22,744 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:22,744 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:22,872 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:28,005 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:28,005 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:28,247 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:33,381 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:33,381 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:33,577 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:38,723 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:38,723 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:05:38,793 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 128, gen: 0] Waiting for all pods to be ready
2024-02-24 11:05:43,929 INFO   , Thread-1 (run), deploy.py:32, [trial: 128, gen: 0] Operator ready
2024-02-24 11:05:43,929 INFO   , Thread-1 (run), deploy.py:36, [trial: 128, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:06:03,983 WARNING, Thread-1 (run), object.py:155, [trial: 129, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 11:06:03,983 WARNING, Thread-1 (run), object.py:155, [trial: 129, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 11:06:03,983 WARNING, Thread-1 (run), object.py:155, [trial: 129, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 11:06:03,983 DEBUG  , Thread-1 (run), engine.py:652, [trial: 129, gen: 0] Run and check
2024-02-24 11:06:04,132 DEBUG  , Thread-1 (run), runner.py:123, [trial: 129, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 11:06:04,132 DEBUG  , Thread-1 (run), runner.py:124, [trial: 129, gen: 0] STDERR: 
2024-02-24 11:06:04,132 INFO   , Thread-1 (run), runner.py:437, [trial: 129, gen: 0] Waiting for system to converge... 
2024-02-24 11:09:11,758 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:10:11,859 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:12:11,753 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:13:11,857 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:14:04,160 ERROR  , Thread-1 (run), runner.py:586, [trial: 129, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:14:04,431 DEBUG  , Thread-1 (run), runner.py:267, [trial: 129, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:06:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:06:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:13:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': '068345d9-787c-4d99-b573-5d47e41fca89'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:13:39Z', 'phase': ''}}}
2024-02-24 11:14:04,453 DEBUG  , Thread-1 (run), runner.py:296, [trial: 129, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-h24cv
2024-02-24 11:14:04,689 ERROR  , Thread-1 (run), runner.py:368, [trial: 129, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xcvxz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'af04c63c-c6af-405d-8f7a-4bb68f3a3e2a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:14:04 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xcvxz\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:14:04,722 INFO   , Thread-1 (run), result.py:170, [trial: 129, gen: 0] No stderr, continue
2024-02-24 11:14:04,757 ERROR  , Thread-1 (run), health.py:155, [trial: 129, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line time="2024-02-24T18:05:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line time="2024-02-24T18:05:39Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 18:05:39.699411711 +0000 UTC m=+0.020143610]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line time="2024-02-24T18:05:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line time="2024-02-24T18:05:39Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,782 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line time="2024-02-24T18:05:39Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,834 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 129, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:14:04,994 INFO   , Thread-1 (run), consistency.py:496, [trial: 129, gen: 0] All input deltas are matched
2024-02-24 11:14:04,996 INFO   , Thread-1 (run), engine.py:554, [trial: 129, gen: 0] Error result, running recovery
2024-02-24 11:14:04,996 DEBUG  , Thread-1 (run), engine.py:698, [trial: 129, gen: 0] Running recovery
2024-02-24 11:14:05,807 DEBUG  , Thread-1 (run), runner.py:123, [trial: 129, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 11:14:05,807 DEBUG  , Thread-1 (run), runner.py:124, [trial: 129, gen: 0] STDERR: 
2024-02-24 11:14:05,807 INFO   , Thread-1 (run), runner.py:437, [trial: 129, gen: 0] Waiting for system to converge... 
2024-02-24 11:15:06,147 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:16:06,232 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:17:09,950 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:18:10,059 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:19:10,164 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:20:10,272 INFO   , Thread-1 (run), runner.py:508, [trial: 129, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:22:05,815 ERROR  , Thread-1 (run), runner.py:586, [trial: 129, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:22:06,104 DEBUG  , Thread-1 (run), runner.py:267, [trial: 129, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:06:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:06:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:21:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': '068345d9-787c-4d99-b573-5d47e41fca89'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:21:39Z', 'phase': ''}}}
2024-02-24 11:22:06,126 DEBUG  , Thread-1 (run), runner.py:296, [trial: 129, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-h24cv
2024-02-24 11:22:06,378 ERROR  , Thread-1 (run), runner.py:368, [trial: 129, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-xcvxz
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '80195b58-1060-4e9a-bc0a-425875bed545', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:22:06 GMT', 'Content-Length': '235'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-xcvxz\" is waiting to start: image can't be pulled","reason":"BadRequest","code":400}


2024-02-24 11:22:06,424 DEBUG  , Thread-1 (run), engine.py:207, [trial: 129, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 11:22:06,428 INFO   , Thread-1 (run), engine.py:333, Trial 129 finished, completed in 00:18:02
2024-02-24 11:22:06,428 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 11:22:06,428 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 11:22:06,428 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 11:22:06,428 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 11:22:06,468 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-h24cv
2024-02-24 11:22:19,908 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 11:23:12,879 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 11:23:12,908 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 11:23:18,332 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:23,478 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:23,478 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:23,710 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:28,852 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:28,852 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:29,099 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:34,239 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:34,239 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:34,356 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:39,493 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:39,493 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:39,766 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:44,902 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:44,902 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:45,079 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:50,221 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:50,221 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:23:50,287 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 129, gen: 0] Waiting for all pods to be ready
2024-02-24 11:23:55,428 INFO   , Thread-1 (run), deploy.py:32, [trial: 129, gen: 0] Operator ready
2024-02-24 11:23:55,428 INFO   , Thread-1 (run), deploy.py:36, [trial: 129, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:24:15,480 WARNING, Thread-1 (run), object.py:155, [trial: 130, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 11:24:15,480 WARNING, Thread-1 (run), object.py:155, [trial: 130, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 11:24:15,480 WARNING, Thread-1 (run), object.py:155, [trial: 130, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 11:24:15,481 DEBUG  , Thread-1 (run), engine.py:652, [trial: 130, gen: 0] Run and check
2024-02-24 11:24:15,641 DEBUG  , Thread-1 (run), runner.py:123, [trial: 130, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 11:24:15,642 DEBUG  , Thread-1 (run), runner.py:124, [trial: 130, gen: 0] STDERR: 
2024-02-24 11:24:15,642 INFO   , Thread-1 (run), runner.py:437, [trial: 130, gen: 0] Waiting for system to converge... 
2024-02-24 11:27:21,574 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:28:21,659 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:30:21,484 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:31:21,593 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:32:15,678 ERROR  , Thread-1 (run), runner.py:586, [trial: 130, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:32:15,925 DEBUG  , Thread-1 (run), runner.py:267, [trial: 130, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:24:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:24:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:31:51Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': '56af181f-4c33-413b-84aa-c922d0e6f6df'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:31:51Z', 'phase': ''}}}
2024-02-24 11:32:15,947 DEBUG  , Thread-1 (run), runner.py:296, [trial: 130, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qcpcf
2024-02-24 11:32:16,171 ERROR  , Thread-1 (run), runner.py:368, [trial: 130, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-r9fz7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '62a43cfb-4eab-4259-a02c-5c45491c47e5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:32:16 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-r9fz7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:32:16,204 INFO   , Thread-1 (run), result.py:170, [trial: 130, gen: 0] No stderr, continue
2024-02-24 11:32:16,238 ERROR  , Thread-1 (run), health.py:155, [trial: 130, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line time="2024-02-24T18:23:51Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line time="2024-02-24T18:23:51Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 18:23:51.201650274 +0000 UTC m=+0.010398983]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line time="2024-02-24T18:23:51Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line time="2024-02-24T18:23:51Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,264 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line time="2024-02-24T18:23:51Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,316 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 130, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:32:16,624 INFO   , Thread-1 (run), consistency.py:496, [trial: 130, gen: 0] All input deltas are matched
2024-02-24 11:32:16,626 INFO   , Thread-1 (run), engine.py:554, [trial: 130, gen: 0] Error result, running recovery
2024-02-24 11:32:16,626 DEBUG  , Thread-1 (run), engine.py:698, [trial: 130, gen: 0] Running recovery
2024-02-24 11:32:17,448 DEBUG  , Thread-1 (run), runner.py:123, [trial: 130, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 11:32:17,448 DEBUG  , Thread-1 (run), runner.py:124, [trial: 130, gen: 0] STDERR: 
2024-02-24 11:32:17,449 INFO   , Thread-1 (run), runner.py:437, [trial: 130, gen: 0] Waiting for system to converge... 
2024-02-24 11:33:17,615 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:34:17,722 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:35:26,910 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:36:27,022 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:37:27,071 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:38:27,178 INFO   , Thread-1 (run), runner.py:508, [trial: 130, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:40:17,460 ERROR  , Thread-1 (run), runner.py:586, [trial: 130, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:40:17,744 DEBUG  , Thread-1 (run), runner.py:267, [trial: 130, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:24:15Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:24:15Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:39:51Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '56af181f-4c33-413b-84aa-c922d0e6f6df'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:39:51Z', 'phase': ''}}}
2024-02-24 11:40:17,766 DEBUG  , Thread-1 (run), runner.py:296, [trial: 130, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-qcpcf
2024-02-24 11:40:18,014 ERROR  , Thread-1 (run), runner.py:368, [trial: 130, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-r9fz7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6f353679-da7f-4457-889a-b19d7156b7a3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:40:18 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-r9fz7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:40:18,073 DEBUG  , Thread-1 (run), engine.py:207, [trial: 130, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 11:40:18,079 INFO   , Thread-1 (run), engine.py:333, Trial 130 finished, completed in 00:18:01
2024-02-24 11:40:18,079 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 11:40:18,079 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 11:40:18,079 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 11:40:18,079 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 11:40:18,116 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-qcpcf
2024-02-24 11:40:31,712 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 11:41:23,032 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 11:41:23,049 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 11:41:31,136 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:41:36,276 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:41:36,276 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:41:36,481 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:41:41,613 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:41:41,613 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:41:41,910 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:41:47,054 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:41:47,054 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:41:47,180 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:41:52,313 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:41:52,313 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:41:52,561 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:41:57,695 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:41:57,695 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:41:57,909 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:42:03,041 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:42:03,041 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:42:03,118 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 130, gen: 0] Waiting for all pods to be ready
2024-02-24 11:42:08,239 INFO   , Thread-1 (run), deploy.py:32, [trial: 130, gen: 0] Operator ready
2024-02-24 11:42:08,239 INFO   , Thread-1 (run), deploy.py:36, [trial: 130, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:42:28,290 WARNING, Thread-1 (run), object.py:155, [trial: 131, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 11:42:28,291 WARNING, Thread-1 (run), object.py:155, [trial: 131, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 11:42:28,291 WARNING, Thread-1 (run), object.py:155, [trial: 131, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 11:42:28,291 DEBUG  , Thread-1 (run), engine.py:652, [trial: 131, gen: 0] Run and check
2024-02-24 11:42:28,454 DEBUG  , Thread-1 (run), runner.py:123, [trial: 131, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 11:42:28,455 DEBUG  , Thread-1 (run), runner.py:124, [trial: 131, gen: 0] STDERR: 
2024-02-24 11:42:28,455 INFO   , Thread-1 (run), runner.py:437, [trial: 131, gen: 0] Waiting for system to converge... 
2024-02-24 11:45:34,439 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:46:34,548 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:48:34,403 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:49:34,542 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:50:28,483 ERROR  , Thread-1 (run), runner.py:586, [trial: 131, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:50:28,762 DEBUG  , Thread-1 (run), runner.py:267, [trial: 131, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:42:28Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:42:28Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:50:04Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1815', 'uid': 'b070fc3c-f849-42cb-a4e9-17c6e65f5586'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:50:04Z', 'phase': ''}}}
2024-02-24 11:50:28,784 DEBUG  , Thread-1 (run), runner.py:296, [trial: 131, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lp2ls
2024-02-24 11:50:28,974 ERROR  , Thread-1 (run), runner.py:368, [trial: 131, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5zqkc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '8ce9a78c-0004-47a0-ae3a-d98f66d1824a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:50:28 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5zqkc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:50:29,024 INFO   , Thread-1 (run), result.py:170, [trial: 131, gen: 0] No stderr, continue
2024-02-24 11:50:29,058 ERROR  , Thread-1 (run), health.py:155, [trial: 131, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 11:50:29,083 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,083 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line time="2024-02-24T18:42:04Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,084 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line time="2024-02-24T18:42:04Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 18:42:04.112061733 +0000 UTC m=+0.012434614]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,084 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line time="2024-02-24T18:42:04Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,084 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line time="2024-02-24T18:42:04Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,084 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line time="2024-02-24T18:42:04Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,145 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 131, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 11:50:29,326 INFO   , Thread-1 (run), consistency.py:496, [trial: 131, gen: 0] All input deltas are matched
2024-02-24 11:50:29,329 INFO   , Thread-1 (run), engine.py:554, [trial: 131, gen: 0] Error result, running recovery
2024-02-24 11:50:29,329 DEBUG  , Thread-1 (run), engine.py:698, [trial: 131, gen: 0] Running recovery
2024-02-24 11:50:30,108 DEBUG  , Thread-1 (run), runner.py:123, [trial: 131, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 11:50:30,108 DEBUG  , Thread-1 (run), runner.py:124, [trial: 131, gen: 0] STDERR: 
2024-02-24 11:50:30,109 INFO   , Thread-1 (run), runner.py:437, [trial: 131, gen: 0] Waiting for system to converge... 
2024-02-24 11:51:30,241 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:52:30,346 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:53:34,356 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:54:34,451 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:55:34,511 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:56:34,614 INFO   , Thread-1 (run), runner.py:508, [trial: 131, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 11:58:30,119 ERROR  , Thread-1 (run), runner.py:586, [trial: 131, gen: 0] System failed to converge within 480 seconds
2024-02-24 11:58:30,374 DEBUG  , Thread-1 (run), runner.py:267, [trial: 131, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T18:42:28Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T18:42:28Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T18:58:04Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2736', 'uid': 'b070fc3c-f849-42cb-a4e9-17c6e65f5586'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T18:58:04Z', 'phase': ''}}}
2024-02-24 11:58:30,395 DEBUG  , Thread-1 (run), runner.py:296, [trial: 131, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-lp2ls
2024-02-24 11:58:30,645 ERROR  , Thread-1 (run), runner.py:368, [trial: 131, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-5zqkc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd39e5474-0e3f-4637-8979-2647f7ff73be', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 18:58:30 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-5zqkc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 11:58:30,712 DEBUG  , Thread-1 (run), engine.py:207, [trial: 131, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 11:58:30,717 INFO   , Thread-1 (run), engine.py:333, Trial 131 finished, completed in 00:18:02
2024-02-24 11:58:30,717 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 11:58:30,717 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 11:58:30,718 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 11:58:30,718 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 11:58:30,757 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-lp2ls
2024-02-24 11:58:44,459 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 11:59:36,641 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 11:59:36,670 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 11:59:42,121 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 11:59:47,413 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 11:59:47,413 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:59:47,661 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 11:59:52,792 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 11:59:52,792 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:59:53,051 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 11:59:58,196 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 11:59:58,196 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 11:59:58,411 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 12:00:03,551 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 12:00:03,551 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:00:03,774 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 12:00:08,911 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 12:00:08,911 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:00:09,077 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 12:00:14,270 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 12:00:14,270 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:00:14,340 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 131, gen: 0] Waiting for all pods to be ready
2024-02-24 12:00:19,481 INFO   , Thread-1 (run), deploy.py:32, [trial: 131, gen: 0] Operator ready
2024-02-24 12:00:19,481 INFO   , Thread-1 (run), deploy.py:36, [trial: 131, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:00:39,533 WARNING, Thread-1 (run), object.py:155, [trial: 132, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 12:00:39,533 WARNING, Thread-1 (run), object.py:155, [trial: 132, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 12:00:39,533 WARNING, Thread-1 (run), object.py:155, [trial: 132, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 12:00:39,534 DEBUG  , Thread-1 (run), engine.py:652, [trial: 132, gen: 0] Run and check
2024-02-24 12:00:39,671 DEBUG  , Thread-1 (run), runner.py:123, [trial: 132, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 12:00:39,671 DEBUG  , Thread-1 (run), runner.py:124, [trial: 132, gen: 0] STDERR: 
2024-02-24 12:00:39,671 INFO   , Thread-1 (run), runner.py:437, [trial: 132, gen: 0] Waiting for system to converge... 
2024-02-24 12:03:45,574 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:04:45,685 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:06:45,599 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:07:45,701 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:08:39,696 ERROR  , Thread-1 (run), runner.py:586, [trial: 132, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:08:39,990 DEBUG  , Thread-1 (run), runner.py:267, [trial: 132, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:00:39Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:00:39Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:08:15Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1810', 'uid': 'e4033339-117a-4521-93ae-16e315826c04'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:08:15Z', 'phase': ''}}}
2024-02-24 12:08:40,012 DEBUG  , Thread-1 (run), runner.py:296, [trial: 132, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q56mr
2024-02-24 12:08:40,234 ERROR  , Thread-1 (run), runner.py:368, [trial: 132, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sklwn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3c1acc72-b4a0-4084-a8dc-99ecd6a85ade', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:08:40 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sklwn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:08:40,287 INFO   , Thread-1 (run), result.py:170, [trial: 132, gen: 0] No stderr, continue
2024-02-24 12:08:40,322 ERROR  , Thread-1 (run), health.py:155, [trial: 132, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 12:08:40,346 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,346 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,346 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 19:00:15.280314149 +0000 UTC m=+0.012660929]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,346 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,347 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,347 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,347 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line time="2024-02-24T19:00:15Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,399 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 132, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:08:40,556 INFO   , Thread-1 (run), consistency.py:496, [trial: 132, gen: 0] All input deltas are matched
2024-02-24 12:08:40,559 INFO   , Thread-1 (run), engine.py:554, [trial: 132, gen: 0] Error result, running recovery
2024-02-24 12:08:40,559 DEBUG  , Thread-1 (run), engine.py:698, [trial: 132, gen: 0] Running recovery
2024-02-24 12:08:41,378 DEBUG  , Thread-1 (run), runner.py:123, [trial: 132, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 12:08:41,378 DEBUG  , Thread-1 (run), runner.py:124, [trial: 132, gen: 0] STDERR: 
2024-02-24 12:08:41,378 INFO   , Thread-1 (run), runner.py:437, [trial: 132, gen: 0] Waiting for system to converge... 
2024-02-24 12:09:41,532 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:10:41,640 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:11:45,520 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:12:45,612 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:13:45,719 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:14:45,828 INFO   , Thread-1 (run), runner.py:508, [trial: 132, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:16:41,386 ERROR  , Thread-1 (run), runner.py:586, [trial: 132, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:16:41,671 DEBUG  , Thread-1 (run), runner.py:267, [trial: 132, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:00:39Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:00:39Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:16:15Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2735', 'uid': 'e4033339-117a-4521-93ae-16e315826c04'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:16:15Z', 'phase': ''}}}
2024-02-24 12:16:41,693 DEBUG  , Thread-1 (run), runner.py:296, [trial: 132, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q56mr
2024-02-24 12:16:41,946 ERROR  , Thread-1 (run), runner.py:368, [trial: 132, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-sklwn
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'd97f0e79-7a49-4dd8-9a40-36dd8a3da808', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:16:41 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-sklwn\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:16:41,993 DEBUG  , Thread-1 (run), engine.py:207, [trial: 132, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 12:16:41,997 INFO   , Thread-1 (run), engine.py:333, Trial 132 finished, completed in 00:18:01
2024-02-24 12:16:41,997 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 12:16:41,997 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 12:16:41,997 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 12:16:41,997 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 12:16:42,034 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-q56mr
2024-02-24 12:16:55,550 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 12:17:47,167 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 12:17:47,177 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 12:17:54,659 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:17:59,953 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:17:59,953 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:00,210 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:05,336 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:05,336 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:05,629 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:10,772 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:10,772 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:10,897 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:16,040 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:16,040 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:16,246 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:21,384 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:21,385 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:21,581 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:26,726 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:26,726 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:26,798 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 132, gen: 0] Waiting for all pods to be ready
2024-02-24 12:18:31,955 INFO   , Thread-1 (run), deploy.py:32, [trial: 132, gen: 0] Operator ready
2024-02-24 12:18:31,956 INFO   , Thread-1 (run), deploy.py:36, [trial: 132, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:18:52,008 WARNING, Thread-1 (run), object.py:155, [trial: 133, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 12:18:52,008 WARNING, Thread-1 (run), object.py:155, [trial: 133, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 12:18:52,008 WARNING, Thread-1 (run), object.py:155, [trial: 133, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 12:18:52,009 DEBUG  , Thread-1 (run), engine.py:652, [trial: 133, gen: 0] Run and check
2024-02-24 12:18:52,156 DEBUG  , Thread-1 (run), runner.py:123, [trial: 133, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 12:18:52,156 DEBUG  , Thread-1 (run), runner.py:124, [trial: 133, gen: 0] STDERR: 
2024-02-24 12:18:52,156 INFO   , Thread-1 (run), runner.py:437, [trial: 133, gen: 0] Waiting for system to converge... 
2024-02-24 12:21:58,151 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:22:58,253 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:24:58,038 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:25:58,106 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:26:52,181 ERROR  , Thread-1 (run), runner.py:586, [trial: 133, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:26:52,449 DEBUG  , Thread-1 (run), runner.py:267, [trial: 133, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:18:52Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:18:52Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:26:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1809', 'uid': '7b22bb29-ac69-4616-b5ce-7ed9bba2e92d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:26:27Z', 'phase': ''}}}
2024-02-24 12:26:52,472 DEBUG  , Thread-1 (run), runner.py:296, [trial: 133, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-db9r2
2024-02-24 12:26:52,697 ERROR  , Thread-1 (run), runner.py:368, [trial: 133, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-h5fq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '87eccbf3-85ee-448b-bfdf-d1bfd306a55b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:26:52 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-h5fq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:26:52,745 INFO   , Thread-1 (run), result.py:170, [trial: 133, gen: 0] No stderr, continue
2024-02-24 12:26:52,782 ERROR  , Thread-1 (run), health.py:155, [trial: 133, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 12:26:52,806 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,806 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line time="2024-02-24T19:18:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,806 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line time="2024-02-24T19:18:27Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 19:18:27.770694062 +0000 UTC m=+0.011660186]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,806 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line time="2024-02-24T19:18:27Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,806 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line time="2024-02-24T19:18:27Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,807 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line time="2024-02-24T19:18:27Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:52,862 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 133, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:26:53,024 INFO   , Thread-1 (run), consistency.py:496, [trial: 133, gen: 0] All input deltas are matched
2024-02-24 12:26:53,027 INFO   , Thread-1 (run), engine.py:554, [trial: 133, gen: 0] Error result, running recovery
2024-02-24 12:26:53,027 DEBUG  , Thread-1 (run), engine.py:698, [trial: 133, gen: 0] Running recovery
2024-02-24 12:26:53,841 DEBUG  , Thread-1 (run), runner.py:123, [trial: 133, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 12:26:53,841 DEBUG  , Thread-1 (run), runner.py:124, [trial: 133, gen: 0] STDERR: 
2024-02-24 12:26:53,841 INFO   , Thread-1 (run), runner.py:437, [trial: 133, gen: 0] Waiting for system to converge... 
2024-02-24 12:27:54,017 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:28:54,123 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:29:59,648 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:30:59,726 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:31:59,805 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:32:59,875 INFO   , Thread-1 (run), runner.py:508, [trial: 133, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:34:53,852 ERROR  , Thread-1 (run), runner.py:586, [trial: 133, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:34:54,117 DEBUG  , Thread-1 (run), runner.py:267, [trial: 133, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:18:52Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:18:52Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:34:27Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2734', 'uid': '7b22bb29-ac69-4616-b5ce-7ed9bba2e92d'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:34:27Z', 'phase': ''}}}
2024-02-24 12:34:54,139 DEBUG  , Thread-1 (run), runner.py:296, [trial: 133, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-db9r2
2024-02-24 12:34:54,391 ERROR  , Thread-1 (run), runner.py:368, [trial: 133, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-h5fq7
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2d39ffbb-063c-43a3-9a16-2c315d77fef2', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:34:54 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-h5fq7\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:34:54,458 DEBUG  , Thread-1 (run), engine.py:207, [trial: 133, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 12:34:54,464 INFO   , Thread-1 (run), engine.py:333, Trial 133 finished, completed in 00:18:02
2024-02-24 12:34:54,465 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 12:34:54,465 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 12:34:54,465 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 12:34:54,465 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 12:34:54,517 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-db9r2
2024-02-24 12:35:08,100 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 12:35:59,270 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 12:35:59,294 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 12:36:06,562 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:11,863 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:11,863 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:12,146 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:17,254 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:17,254 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:17,551 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:22,683 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:22,683 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:22,832 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:27,967 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:27,967 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:28,189 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:33,330 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:33,330 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:33,536 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:38,663 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:38,663 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:36:38,725 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 133, gen: 0] Waiting for all pods to be ready
2024-02-24 12:36:43,867 INFO   , Thread-1 (run), deploy.py:32, [trial: 133, gen: 0] Operator ready
2024-02-24 12:36:43,867 INFO   , Thread-1 (run), deploy.py:36, [trial: 133, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:37:03,932 WARNING, Thread-1 (run), object.py:155, [trial: 134, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 12:37:03,932 WARNING, Thread-1 (run), object.py:155, [trial: 134, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 12:37:03,932 WARNING, Thread-1 (run), object.py:155, [trial: 134, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 12:37:03,933 DEBUG  , Thread-1 (run), engine.py:652, [trial: 134, gen: 0] Run and check
2024-02-24 12:37:04,090 DEBUG  , Thread-1 (run), runner.py:123, [trial: 134, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 12:37:04,090 DEBUG  , Thread-1 (run), runner.py:124, [trial: 134, gen: 0] STDERR: 
2024-02-24 12:37:04,091 INFO   , Thread-1 (run), runner.py:437, [trial: 134, gen: 0] Waiting for system to converge... 
2024-02-24 12:40:10,070 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:41:10,126 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:43:12,707 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:44:12,800 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:45:04,116 ERROR  , Thread-1 (run), runner.py:586, [trial: 134, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:45:04,385 DEBUG  , Thread-1 (run), runner.py:267, [trial: 134, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:37:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:37:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:44:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1808', 'uid': 'f84233e1-7b47-41b8-afd5-645ee5a97b65'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:44:39Z', 'phase': ''}}}
2024-02-24 12:45:04,406 DEBUG  , Thread-1 (run), runner.py:296, [trial: 134, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-n7s9w
2024-02-24 12:45:04,631 ERROR  , Thread-1 (run), runner.py:368, [trial: 134, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8v4dp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'f15be5d6-9884-4c83-849c-1db7633ee5dd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:45:04 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8v4dp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:45:04,680 INFO   , Thread-1 (run), result.py:170, [trial: 134, gen: 0] No stderr, continue
2024-02-24 12:45:04,717 ERROR  , Thread-1 (run), health.py:155, [trial: 134, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line time="2024-02-24T19:36:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line time="2024-02-24T19:36:39Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 19:36:39.677205043 +0000 UTC m=+0.025010012]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line time="2024-02-24T19:36:39Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line time="2024-02-24T19:36:39Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,742 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line time="2024-02-24T19:36:39Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,797 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 134, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 12:45:04,953 INFO   , Thread-1 (run), consistency.py:496, [trial: 134, gen: 0] All input deltas are matched
2024-02-24 12:45:04,955 INFO   , Thread-1 (run), engine.py:554, [trial: 134, gen: 0] Error result, running recovery
2024-02-24 12:45:04,955 DEBUG  , Thread-1 (run), engine.py:698, [trial: 134, gen: 0] Running recovery
2024-02-24 12:45:05,812 DEBUG  , Thread-1 (run), runner.py:123, [trial: 134, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 12:45:05,812 DEBUG  , Thread-1 (run), runner.py:124, [trial: 134, gen: 0] STDERR: 
2024-02-24 12:45:05,813 INFO   , Thread-1 (run), runner.py:437, [trial: 134, gen: 0] Waiting for system to converge... 
2024-02-24 12:46:05,975 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:47:06,059 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:48:09,924 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:49:10,027 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:50:10,111 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:51:10,167 INFO   , Thread-1 (run), runner.py:508, [trial: 134, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:53:05,823 ERROR  , Thread-1 (run), runner.py:586, [trial: 134, gen: 0] System failed to converge within 480 seconds
2024-02-24 12:53:06,120 DEBUG  , Thread-1 (run), runner.py:267, [trial: 134, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:37:04Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:37:04Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T19:52:39Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': 'f84233e1-7b47-41b8-afd5-645ee5a97b65'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T19:52:39Z', 'phase': ''}}}
2024-02-24 12:53:06,142 DEBUG  , Thread-1 (run), runner.py:296, [trial: 134, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-n7s9w
2024-02-24 12:53:06,396 ERROR  , Thread-1 (run), runner.py:368, [trial: 134, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-8v4dp
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '45e283a2-1e3e-4d32-a4d4-bdb9c01c8bbb', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 19:53:06 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-8v4dp\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 12:53:06,443 DEBUG  , Thread-1 (run), engine.py:207, [trial: 134, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 12:53:06,447 INFO   , Thread-1 (run), engine.py:333, Trial 134 finished, completed in 00:18:01
2024-02-24 12:53:06,447 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 12:53:06,447 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 12:53:06,447 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 12:53:06,447 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 12:53:06,485 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-n7s9w
2024-02-24 12:53:20,245 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 12:54:10,879 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 12:54:10,920 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 12:54:19,697 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:25,025 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:25,026 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:25,289 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:30,410 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:30,410 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:30,692 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:35,831 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:35,831 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:35,954 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:41,099 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:41,099 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:41,309 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:46,442 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:46,442 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:46,663 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:51,804 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:51,804 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:54:51,876 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 134, gen: 0] Waiting for all pods to be ready
2024-02-24 12:54:57,017 INFO   , Thread-1 (run), deploy.py:32, [trial: 134, gen: 0] Operator ready
2024-02-24 12:54:57,017 INFO   , Thread-1 (run), deploy.py:36, [trial: 134, gen: 0] All pods took 0 seconds to get ready
2024-02-24 12:55:17,069 WARNING, Thread-1 (run), object.py:155, [trial: 135, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 12:55:17,069 WARNING, Thread-1 (run), object.py:155, [trial: 135, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 12:55:17,069 WARNING, Thread-1 (run), object.py:155, [trial: 135, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 12:55:17,070 DEBUG  , Thread-1 (run), engine.py:652, [trial: 135, gen: 0] Run and check
2024-02-24 12:55:17,219 DEBUG  , Thread-1 (run), runner.py:123, [trial: 135, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 12:55:17,219 DEBUG  , Thread-1 (run), runner.py:124, [trial: 135, gen: 0] STDERR: 
2024-02-24 12:55:17,219 INFO   , Thread-1 (run), runner.py:437, [trial: 135, gen: 0] Waiting for system to converge... 
2024-02-24 12:58:20,700 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 12:59:20,785 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:00:20,894 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:01:23,641 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:02:23,746 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:03:17,263 ERROR  , Thread-1 (run), runner.py:586, [trial: 135, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:03:17,514 DEBUG  , Thread-1 (run), runner.py:267, [trial: 135, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:55:17Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:55:17Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:02:53Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1866', 'uid': '23596df8-b3ca-4170-9708-fab33292ff5e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:02:53Z', 'phase': ''}}}
2024-02-24 13:03:17,536 DEBUG  , Thread-1 (run), runner.py:296, [trial: 135, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xrq7s
2024-02-24 13:03:17,770 ERROR  , Thread-1 (run), runner.py:368, [trial: 135, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dx8g4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'bd65a7d0-3d15-4448-bfab-fdca21ddfbe5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:03:17 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dx8g4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:03:17,807 INFO   , Thread-1 (run), result.py:170, [trial: 135, gen: 0] No stderr, continue
2024-02-24 13:03:17,844 ERROR  , Thread-1 (run), health.py:155, [trial: 135, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 13:03:17,872 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,872 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line time="2024-02-24T19:54:52Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,872 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line time="2024-02-24T19:54:52Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 19:54:52.804416385 +0000 UTC m=+0.010888793]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,872 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line time="2024-02-24T19:54:52Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,873 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line time="2024-02-24T19:54:52Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,873 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line time="2024-02-24T19:54:52Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:17,939 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 135, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:03:18,098 INFO   , Thread-1 (run), consistency.py:496, [trial: 135, gen: 0] All input deltas are matched
2024-02-24 13:03:18,100 INFO   , Thread-1 (run), engine.py:554, [trial: 135, gen: 0] Error result, running recovery
2024-02-24 13:03:18,101 DEBUG  , Thread-1 (run), engine.py:698, [trial: 135, gen: 0] Running recovery
2024-02-24 13:03:18,897 DEBUG  , Thread-1 (run), runner.py:123, [trial: 135, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 13:03:18,897 DEBUG  , Thread-1 (run), runner.py:124, [trial: 135, gen: 0] STDERR: 
2024-02-24 13:03:18,897 INFO   , Thread-1 (run), runner.py:437, [trial: 135, gen: 0] Waiting for system to converge... 
2024-02-24 13:04:19,067 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:05:19,175 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:06:24,602 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:07:24,660 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:08:24,726 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:09:24,793 INFO   , Thread-1 (run), runner.py:508, [trial: 135, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:11:18,906 ERROR  , Thread-1 (run), runner.py:586, [trial: 135, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:11:19,203 DEBUG  , Thread-1 (run), runner.py:267, [trial: 135, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T19:55:17Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T19:55:17Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:10:53Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2866', 'uid': '23596df8-b3ca-4170-9708-fab33292ff5e'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:10:53Z', 'phase': ''}}}
2024-02-24 13:11:19,225 DEBUG  , Thread-1 (run), runner.py:296, [trial: 135, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-xrq7s
2024-02-24 13:11:19,512 ERROR  , Thread-1 (run), runner.py:368, [trial: 135, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-dx8g4
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5e956fb0-4816-4fb7-8572-0e38db641412', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:11:19 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-dx8g4\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:11:19,556 DEBUG  , Thread-1 (run), engine.py:207, [trial: 135, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 13:11:19,560 INFO   , Thread-1 (run), engine.py:333, Trial 135 finished, completed in 00:18:03
2024-02-24 13:11:19,560 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 13:11:19,560 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 13:11:19,560 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 13:11:19,560 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 13:11:19,608 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-xrq7s
2024-02-24 13:11:33,111 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 13:12:29,450 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 13:12:29,460 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 13:12:35,183 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:12:40,477 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:12:40,478 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:12:40,739 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:12:45,872 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:12:45,872 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:12:46,160 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:12:51,298 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:12:51,298 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:12:51,488 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:12:56,628 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:12:56,628 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:12:56,873 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:13:02,011 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:13:02,011 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:13:02,195 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:13:07,311 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:13:07,311 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:13:07,385 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 135, gen: 0] Waiting for all pods to be ready
2024-02-24 13:13:12,519 INFO   , Thread-1 (run), deploy.py:32, [trial: 135, gen: 0] Operator ready
2024-02-24 13:13:12,519 INFO   , Thread-1 (run), deploy.py:36, [trial: 135, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:13:32,573 WARNING, Thread-1 (run), object.py:155, [trial: 136, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 13:13:32,573 WARNING, Thread-1 (run), object.py:155, [trial: 136, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 13:13:32,573 WARNING, Thread-1 (run), object.py:155, [trial: 136, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 13:13:32,574 DEBUG  , Thread-1 (run), engine.py:652, [trial: 136, gen: 0] Run and check
2024-02-24 13:13:32,733 DEBUG  , Thread-1 (run), runner.py:123, [trial: 136, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 13:13:32,733 DEBUG  , Thread-1 (run), runner.py:124, [trial: 136, gen: 0] STDERR: 
2024-02-24 13:13:32,733 INFO   , Thread-1 (run), runner.py:437, [trial: 136, gen: 0] Waiting for system to converge... 
2024-02-24 13:16:38,548 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:17:38,655 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:19:44,464 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:20:44,574 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:21:32,759 ERROR  , Thread-1 (run), runner.py:586, [trial: 136, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:21:33,031 DEBUG  , Thread-1 (run), runner.py:267, [trial: 136, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:13:32Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:13:32Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:21:08Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1801', 'uid': '01fa8318-c03b-421a-b5e7-cb752034f2fd'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:21:08Z', 'phase': ''}}}
2024-02-24 13:21:33,054 DEBUG  , Thread-1 (run), runner.py:296, [trial: 136, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9fhgq
2024-02-24 13:21:33,259 ERROR  , Thread-1 (run), runner.py:368, [trial: 136, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-clgjq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '95cbf317-a17b-416f-8a67-1b1042cf1652', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:21:33 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-clgjq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:21:33,293 INFO   , Thread-1 (run), result.py:170, [trial: 136, gen: 0] No stderr, continue
2024-02-24 13:21:33,328 ERROR  , Thread-1 (run), health.py:155, [trial: 136, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 13:21:33,352 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line time="2024-02-24T20:13:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line time="2024-02-24T20:13:08Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 20:13:08.253105124 +0000 UTC m=+0.010245096]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line time="2024-02-24T20:13:08Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line time="2024-02-24T20:13:08Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,353 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line time="2024-02-24T20:13:08Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,405 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 136, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:21:33,564 INFO   , Thread-1 (run), consistency.py:496, [trial: 136, gen: 0] All input deltas are matched
2024-02-24 13:21:33,567 INFO   , Thread-1 (run), engine.py:554, [trial: 136, gen: 0] Error result, running recovery
2024-02-24 13:21:33,567 DEBUG  , Thread-1 (run), engine.py:698, [trial: 136, gen: 0] Running recovery
2024-02-24 13:21:34,408 DEBUG  , Thread-1 (run), runner.py:123, [trial: 136, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 13:21:34,408 DEBUG  , Thread-1 (run), runner.py:124, [trial: 136, gen: 0] STDERR: 
2024-02-24 13:21:34,408 INFO   , Thread-1 (run), runner.py:437, [trial: 136, gen: 0] Waiting for system to converge... 
2024-02-24 13:22:34,582 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:23:34,691 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:24:38,492 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:25:38,574 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:26:38,667 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:27:38,762 INFO   , Thread-1 (run), runner.py:508, [trial: 136, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:29:34,419 ERROR  , Thread-1 (run), runner.py:586, [trial: 136, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:29:34,712 DEBUG  , Thread-1 (run), runner.py:267, [trial: 136, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:13:32Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:13:32Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:29:08Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2721', 'uid': '01fa8318-c03b-421a-b5e7-cb752034f2fd'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:29:08Z', 'phase': ''}}}
2024-02-24 13:29:34,733 DEBUG  , Thread-1 (run), runner.py:296, [trial: 136, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-9fhgq
2024-02-24 13:29:34,982 ERROR  , Thread-1 (run), runner.py:368, [trial: 136, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-clgjq
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3abec33e-5a66-4ab6-9ba4-390816f961e7', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:29:34 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-clgjq\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:29:35,029 DEBUG  , Thread-1 (run), engine.py:207, [trial: 136, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 13:29:35,033 INFO   , Thread-1 (run), engine.py:333, Trial 136 finished, completed in 00:18:05
2024-02-24 13:29:35,033 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-24 13:29:35,033 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 13:29:35,033 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 13:29:35,033 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 13:29:35,081 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-9fhgq
2024-02-24 13:29:48,547 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 13:30:41,405 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 13:30:41,419 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 13:30:49,028 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:30:54,176 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:30:54,176 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:30:54,413 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:30:59,538 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:30:59,538 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:30:59,821 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:31:05,091 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:31:05,091 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:31:05,225 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:31:10,348 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:31:10,348 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:31:10,612 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:31:15,736 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:31:15,736 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:31:15,934 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:31:21,079 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:31:21,079 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:31:21,148 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 136, gen: 0] Waiting for all pods to be ready
2024-02-24 13:31:26,270 INFO   , Thread-1 (run), deploy.py:32, [trial: 136, gen: 0] Operator ready
2024-02-24 13:31:26,270 INFO   , Thread-1 (run), deploy.py:36, [trial: 136, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:31:46,332 WARNING, Thread-1 (run), object.py:155, [trial: 137, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 13:31:46,332 WARNING, Thread-1 (run), object.py:155, [trial: 137, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 13:31:46,333 WARNING, Thread-1 (run), object.py:155, [trial: 137, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 13:31:46,334 DEBUG  , Thread-1 (run), engine.py:652, [trial: 137, gen: 0] Run and check
2024-02-24 13:31:46,496 DEBUG  , Thread-1 (run), runner.py:123, [trial: 137, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 13:31:46,497 DEBUG  , Thread-1 (run), runner.py:124, [trial: 137, gen: 0] STDERR: 
2024-02-24 13:31:46,497 INFO   , Thread-1 (run), runner.py:437, [trial: 137, gen: 0] Waiting for system to converge... 
2024-02-24 13:34:52,877 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:35:52,970 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:37:52,783 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:38:52,889 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:39:46,530 ERROR  , Thread-1 (run), runner.py:586, [trial: 137, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:39:46,798 DEBUG  , Thread-1 (run), runner.py:267, [trial: 137, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:31:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:31:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:39:22Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'dfba1116-9d22-45b2-8400-86ee0427043c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:39:22Z', 'phase': ''}}}
2024-02-24 13:39:46,820 DEBUG  , Thread-1 (run), runner.py:296, [trial: 137, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-b9zrv
2024-02-24 13:39:47,048 ERROR  , Thread-1 (run), runner.py:368, [trial: 137, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jgzbd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e2e89f17-6da6-46b4-b467-61355a9e83fd', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:39:47 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jgzbd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:39:47,081 INFO   , Thread-1 (run), result.py:170, [trial: 137, gen: 0] No stderr, continue
2024-02-24 13:39:47,115 ERROR  , Thread-1 (run), health.py:155, [trial: 137, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 13:39:47,139 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line time="2024-02-24T20:31:22Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line time="2024-02-24T20:31:22Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 20:31:22.505371111 +0000 UTC m=+0.010250787]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line time="2024-02-24T20:31:22Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line time="2024-02-24T20:31:22Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line time="2024-02-24T20:31:22Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,193 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 137, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:39:47,352 INFO   , Thread-1 (run), consistency.py:496, [trial: 137, gen: 0] All input deltas are matched
2024-02-24 13:39:47,355 INFO   , Thread-1 (run), engine.py:554, [trial: 137, gen: 0] Error result, running recovery
2024-02-24 13:39:47,355 DEBUG  , Thread-1 (run), engine.py:698, [trial: 137, gen: 0] Running recovery
2024-02-24 13:39:48,111 DEBUG  , Thread-1 (run), runner.py:123, [trial: 137, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 13:39:48,112 DEBUG  , Thread-1 (run), runner.py:124, [trial: 137, gen: 0] STDERR: 
2024-02-24 13:39:48,112 INFO   , Thread-1 (run), runner.py:437, [trial: 137, gen: 0] Waiting for system to converge... 
2024-02-24 13:40:48,259 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:41:48,356 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:42:52,715 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:43:52,790 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:44:52,898 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:45:53,006 INFO   , Thread-1 (run), runner.py:508, [trial: 137, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:47:48,122 ERROR  , Thread-1 (run), runner.py:586, [trial: 137, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:47:48,419 DEBUG  , Thread-1 (run), runner.py:267, [trial: 137, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:31:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:31:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:47:22Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2726', 'uid': 'dfba1116-9d22-45b2-8400-86ee0427043c'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:47:22Z', 'phase': ''}}}
2024-02-24 13:47:48,440 DEBUG  , Thread-1 (run), runner.py:296, [trial: 137, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-b9zrv
2024-02-24 13:47:48,706 ERROR  , Thread-1 (run), runner.py:368, [trial: 137, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-jgzbd
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '5c8387c1-1f06-4485-8b59-99c7f05c3885', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:47:48 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-jgzbd\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:47:48,769 DEBUG  , Thread-1 (run), engine.py:207, [trial: 137, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 13:47:48,773 INFO   , Thread-1 (run), engine.py:333, Trial 137 finished, completed in 00:18:03
2024-02-24 13:47:48,773 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-24 13:47:48,773 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 13:47:48,773 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 13:47:48,773 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 13:47:48,811 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-b9zrv
2024-02-24 13:48:02,159 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 13:48:53,809 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 13:48:53,820 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 13:49:00,994 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:06,139 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:06,140 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:06,363 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:11,505 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:11,505 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:11,776 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:17,047 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:17,047 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:17,168 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:22,286 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:22,286 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:22,537 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:27,672 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:27,672 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:27,854 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:33,000 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:33,000 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:33,076 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 137, gen: 0] Waiting for all pods to be ready
2024-02-24 13:49:38,215 INFO   , Thread-1 (run), deploy.py:32, [trial: 137, gen: 0] Operator ready
2024-02-24 13:49:38,215 INFO   , Thread-1 (run), deploy.py:36, [trial: 137, gen: 0] All pods took 0 seconds to get ready
2024-02-24 13:49:58,284 WARNING, Thread-1 (run), object.py:155, [trial: 138, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 13:49:58,285 WARNING, Thread-1 (run), object.py:155, [trial: 138, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 13:49:58,285 WARNING, Thread-1 (run), object.py:155, [trial: 138, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 13:49:58,286 DEBUG  , Thread-1 (run), engine.py:652, [trial: 138, gen: 0] Run and check
2024-02-24 13:49:58,437 DEBUG  , Thread-1 (run), runner.py:123, [trial: 138, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 13:49:58,437 DEBUG  , Thread-1 (run), runner.py:124, [trial: 138, gen: 0] STDERR: 
2024-02-24 13:49:58,438 INFO   , Thread-1 (run), runner.py:437, [trial: 138, gen: 0] Waiting for system to converge... 
2024-02-24 13:53:04,276 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:54:04,389 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:56:06,412 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:57:06,498 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 13:57:58,469 ERROR  , Thread-1 (run), runner.py:586, [trial: 138, gen: 0] System failed to converge within 480 seconds
2024-02-24 13:57:58,738 DEBUG  , Thread-1 (run), runner.py:267, [trial: 138, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:49:58Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:49:58Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T20:57:34Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1807', 'uid': 'ff2faf1a-c9d4-4f09-bce7-bc59e8a5f240'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T20:57:34Z', 'phase': ''}}}
2024-02-24 13:57:58,761 DEBUG  , Thread-1 (run), runner.py:296, [trial: 138, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q7vb9
2024-02-24 13:57:58,973 ERROR  , Thread-1 (run), runner.py:368, [trial: 138, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9ggtb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7c65343d-47f2-4d62-9e9e-e535e6e18d40', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 20:57:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9ggtb\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 13:57:59,014 INFO   , Thread-1 (run), result.py:170, [trial: 138, gen: 0] No stderr, continue
2024-02-24 13:57:59,048 ERROR  , Thread-1 (run), health.py:155, [trial: 138, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line time="2024-02-24T20:49:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line time="2024-02-24T20:49:33Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 20:49:33.987853222 +0000 UTC m=+0.010430747]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line time="2024-02-24T20:49:33Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line time="2024-02-24T20:49:33Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,072 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line time="2024-02-24T20:49:33Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,124 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 138, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 13:57:59,303 INFO   , Thread-1 (run), consistency.py:496, [trial: 138, gen: 0] All input deltas are matched
2024-02-24 13:57:59,305 INFO   , Thread-1 (run), engine.py:554, [trial: 138, gen: 0] Error result, running recovery
2024-02-24 13:57:59,305 DEBUG  , Thread-1 (run), engine.py:698, [trial: 138, gen: 0] Running recovery
2024-02-24 13:58:00,105 DEBUG  , Thread-1 (run), runner.py:123, [trial: 138, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 13:58:00,105 DEBUG  , Thread-1 (run), runner.py:124, [trial: 138, gen: 0] STDERR: 
2024-02-24 13:58:00,105 INFO   , Thread-1 (run), runner.py:437, [trial: 138, gen: 0] Waiting for system to converge... 
2024-02-24 13:59:00,277 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:00:00,389 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:01:07,379 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:02:07,488 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:03:07,555 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:04:07,663 INFO   , Thread-1 (run), runner.py:508, [trial: 138, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:06:00,116 ERROR  , Thread-1 (run), runner.py:586, [trial: 138, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:06:00,415 DEBUG  , Thread-1 (run), runner.py:267, [trial: 138, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T20:49:58Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T20:49:58Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:05:34Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2727', 'uid': 'ff2faf1a-c9d4-4f09-bce7-bc59e8a5f240'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:05:34Z', 'phase': ''}}}
2024-02-24 14:06:00,437 DEBUG  , Thread-1 (run), runner.py:296, [trial: 138, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-q7vb9
2024-02-24 14:06:00,683 ERROR  , Thread-1 (run), runner.py:368, [trial: 138, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-9ggtb
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '3caede43-0dfe-4ed2-b9f6-e2e21a2645b5', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:06:00 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-9ggtb\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:06:00,727 DEBUG  , Thread-1 (run), engine.py:207, [trial: 138, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 14:06:00,732 INFO   , Thread-1 (run), engine.py:333, Trial 138 finished, completed in 00:18:01
2024-02-24 14:06:00,732 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 14:06:00,733 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 14:06:00,733 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 14:06:00,733 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 14:06:00,771 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-q7vb9
2024-02-24 14:06:14,479 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 14:07:07,048 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 14:07:07,064 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 14:07:14,301 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:19,445 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:19,445 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:19,683 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:24,824 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:24,824 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:25,072 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:30,386 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:30,386 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:30,522 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:35,643 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:35,643 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:35,918 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:41,056 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:41,056 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:41,244 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:46,383 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:46,383 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:07:46,449 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 138, gen: 0] Waiting for all pods to be ready
2024-02-24 14:07:51,598 INFO   , Thread-1 (run), deploy.py:32, [trial: 138, gen: 0] Operator ready
2024-02-24 14:07:51,598 INFO   , Thread-1 (run), deploy.py:36, [trial: 138, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:08:11,649 WARNING, Thread-1 (run), object.py:155, [trial: 139, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 14:08:11,649 WARNING, Thread-1 (run), object.py:155, [trial: 139, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 14:08:11,649 WARNING, Thread-1 (run), object.py:155, [trial: 139, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 14:08:11,650 DEBUG  , Thread-1 (run), engine.py:652, [trial: 139, gen: 0] Run and check
2024-02-24 14:08:11,788 DEBUG  , Thread-1 (run), runner.py:123, [trial: 139, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 14:08:11,788 DEBUG  , Thread-1 (run), runner.py:124, [trial: 139, gen: 0] STDERR: 
2024-02-24 14:08:11,788 INFO   , Thread-1 (run), runner.py:437, [trial: 139, gen: 0] Waiting for system to converge... 
2024-02-24 14:11:17,720 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:12:17,828 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:14:17,619 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:15:17,726 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:16:11,812 ERROR  , Thread-1 (run), runner.py:586, [trial: 139, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:16:12,080 DEBUG  , Thread-1 (run), runner.py:267, [trial: 139, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:08:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:08:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:15:47Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1809', 'uid': '085c54c3-e1e7-41b0-9cfe-1d0d58d5d4c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:15:47Z', 'phase': ''}}}
2024-02-24 14:16:12,103 DEBUG  , Thread-1 (run), runner.py:296, [trial: 139, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6jqr9
2024-02-24 14:16:12,328 ERROR  , Thread-1 (run), runner.py:368, [trial: 139, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7l79q
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b96cdd50-07f1-4cee-bd9b-b7da5af1421d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:16:12 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7l79q\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:16:12,374 INFO   , Thread-1 (run), result.py:170, [trial: 139, gen: 0] No stderr, continue
2024-02-24 14:16:12,411 ERROR  , Thread-1 (run), health.py:155, [trial: 139, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 14:16:12,435 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,435 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line time="2024-02-24T21:07:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,435 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line time="2024-02-24T21:07:47Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 21:07:47.345629094 +0000 UTC m=+0.010810842]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,435 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line time="2024-02-24T21:07:47Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,436 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line time="2024-02-24T21:07:47Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,436 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line time="2024-02-24T21:07:47Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,497 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 139, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:16:12,676 INFO   , Thread-1 (run), consistency.py:496, [trial: 139, gen: 0] All input deltas are matched
2024-02-24 14:16:12,678 INFO   , Thread-1 (run), engine.py:554, [trial: 139, gen: 0] Error result, running recovery
2024-02-24 14:16:12,678 DEBUG  , Thread-1 (run), engine.py:698, [trial: 139, gen: 0] Running recovery
2024-02-24 14:16:13,434 DEBUG  , Thread-1 (run), runner.py:123, [trial: 139, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 14:16:13,434 DEBUG  , Thread-1 (run), runner.py:124, [trial: 139, gen: 0] STDERR: 
2024-02-24 14:16:13,435 INFO   , Thread-1 (run), runner.py:437, [trial: 139, gen: 0] Waiting for system to converge... 
2024-02-24 14:17:13,610 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:18:13,694 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:19:24,178 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:20:24,281 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:21:24,386 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:22:24,487 INFO   , Thread-1 (run), runner.py:508, [trial: 139, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:24:13,444 ERROR  , Thread-1 (run), runner.py:586, [trial: 139, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:24:13,739 DEBUG  , Thread-1 (run), runner.py:267, [trial: 139, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:08:11Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:08:11Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:23:47Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2729', 'uid': '085c54c3-e1e7-41b0-9cfe-1d0d58d5d4c0'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:23:47Z', 'phase': ''}}}
2024-02-24 14:24:13,761 DEBUG  , Thread-1 (run), runner.py:296, [trial: 139, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-6jqr9
2024-02-24 14:24:14,014 ERROR  , Thread-1 (run), runner.py:368, [trial: 139, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-7l79q
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '18737742-7f43-4619-9feb-7a6f2cf63dc3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:24:14 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-7l79q\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:24:14,057 DEBUG  , Thread-1 (run), engine.py:207, [trial: 139, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 14:24:14,061 INFO   , Thread-1 (run), engine.py:333, Trial 139 finished, completed in 00:18:03
2024-02-24 14:24:14,061 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 63
2024-02-24 14:24:14,061 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 14:24:14,061 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 14:24:14,061 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 14:24:14,104 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-6jqr9
2024-02-24 14:24:27,796 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 14:25:19,645 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 14:25:19,661 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 14:25:26,542 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:31,685 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:31,685 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:31,945 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:37,084 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:37,084 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:37,368 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:42,655 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:42,655 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:42,772 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:47,899 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:47,899 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:48,175 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:53,311 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:53,311 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:53,493 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:25:58,633 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:25:58,633 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:25:58,704 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 139, gen: 0] Waiting for all pods to be ready
2024-02-24 14:26:03,840 INFO   , Thread-1 (run), deploy.py:32, [trial: 139, gen: 0] Operator ready
2024-02-24 14:26:03,840 INFO   , Thread-1 (run), deploy.py:36, [trial: 139, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:26:23,889 WARNING, Thread-1 (run), object.py:155, [trial: 140, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 14:26:23,889 WARNING, Thread-1 (run), object.py:155, [trial: 140, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 14:26:23,889 WARNING, Thread-1 (run), object.py:155, [trial: 140, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 14:26:23,890 DEBUG  , Thread-1 (run), engine.py:652, [trial: 140, gen: 0] Run and check
2024-02-24 14:26:24,036 DEBUG  , Thread-1 (run), runner.py:123, [trial: 140, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 14:26:24,036 DEBUG  , Thread-1 (run), runner.py:124, [trial: 140, gen: 0] STDERR: 
2024-02-24 14:26:24,036 INFO   , Thread-1 (run), runner.py:437, [trial: 140, gen: 0] Waiting for system to converge... 
2024-02-24 14:29:29,907 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:30:30,015 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:32:29,903 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:33:30,001 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:34:24,059 ERROR  , Thread-1 (run), runner.py:586, [trial: 140, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:34:24,326 DEBUG  , Thread-1 (run), runner.py:267, [trial: 140, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:26:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:26:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:33:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': 'f3ac2f21-328b-400c-b35d-916c0c816a15'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:33:59Z', 'phase': ''}}}
2024-02-24 14:34:24,349 DEBUG  , Thread-1 (run), runner.py:296, [trial: 140, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-8gnc7
2024-02-24 14:34:24,583 ERROR  , Thread-1 (run), runner.py:368, [trial: 140, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vhs95
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '9cf24e76-75ad-46e0-b818-8c6bf2bd9e4a', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:34:24 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vhs95\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:34:24,633 INFO   , Thread-1 (run), result.py:170, [trial: 140, gen: 0] No stderr, continue
2024-02-24 14:34:24,667 ERROR  , Thread-1 (run), health.py:155, [trial: 140, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 14:34:24,695 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,695 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line time="2024-02-24T21:25:59Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,696 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line time="2024-02-24T21:25:59Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 21:25:59.613275478 +0000 UTC m=+0.010178748]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,696 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line time="2024-02-24T21:25:59Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,696 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line time="2024-02-24T21:25:59Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,696 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line time="2024-02-24T21:25:59Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,747 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 140, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:34:24,954 INFO   , Thread-1 (run), consistency.py:496, [trial: 140, gen: 0] All input deltas are matched
2024-02-24 14:34:24,957 INFO   , Thread-1 (run), engine.py:554, [trial: 140, gen: 0] Error result, running recovery
2024-02-24 14:34:24,957 DEBUG  , Thread-1 (run), engine.py:698, [trial: 140, gen: 0] Running recovery
2024-02-24 14:34:25,725 DEBUG  , Thread-1 (run), runner.py:123, [trial: 140, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 14:34:25,725 DEBUG  , Thread-1 (run), runner.py:124, [trial: 140, gen: 0] STDERR: 
2024-02-24 14:34:25,725 INFO   , Thread-1 (run), runner.py:437, [trial: 140, gen: 0] Waiting for system to converge... 
2024-02-24 14:35:25,889 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:36:26,000 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:37:34,915 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:38:35,003 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:39:35,066 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:40:35,137 INFO   , Thread-1 (run), runner.py:508, [trial: 140, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:42:25,736 ERROR  , Thread-1 (run), runner.py:586, [trial: 140, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:42:26,023 DEBUG  , Thread-1 (run), runner.py:267, [trial: 140, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:26:24Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:26:24Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:41:59Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2724', 'uid': 'f3ac2f21-328b-400c-b35d-916c0c816a15'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:41:59Z', 'phase': ''}}}
2024-02-24 14:42:26,045 DEBUG  , Thread-1 (run), runner.py:296, [trial: 140, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-8gnc7
2024-02-24 14:42:26,292 ERROR  , Thread-1 (run), runner.py:368, [trial: 140, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-vhs95
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '53ead432-2b65-4595-98df-5ec3435787ab', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:42:26 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-vhs95\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:42:26,337 DEBUG  , Thread-1 (run), engine.py:207, [trial: 140, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 14:42:26,341 INFO   , Thread-1 (run), engine.py:333, Trial 140 finished, completed in 00:18:02
2024-02-24 14:42:26,341 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 62
2024-02-24 14:42:26,341 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 14:42:26,341 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 14:42:26,341 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 14:42:26,379 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-8gnc7
2024-02-24 14:42:39,849 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 14:43:30,506 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 14:43:30,517 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 14:43:38,330 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:43:43,474 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:43:43,474 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:43:43,764 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:43:48,907 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:43:48,907 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:43:49,243 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:43:54,548 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:43:54,548 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:43:54,675 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:43:59,804 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:43:59,805 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:44:00,026 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:44:05,163 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:44:05,163 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:44:05,336 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:44:10,481 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:44:10,481 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:44:10,545 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 140, gen: 0] Waiting for all pods to be ready
2024-02-24 14:44:15,682 INFO   , Thread-1 (run), deploy.py:32, [trial: 140, gen: 0] Operator ready
2024-02-24 14:44:15,682 INFO   , Thread-1 (run), deploy.py:36, [trial: 140, gen: 0] All pods took 0 seconds to get ready
2024-02-24 14:44:35,733 WARNING, Thread-1 (run), object.py:155, [trial: 141, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 14:44:35,734 WARNING, Thread-1 (run), object.py:155, [trial: 141, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 14:44:35,734 WARNING, Thread-1 (run), object.py:155, [trial: 141, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 14:44:35,734 DEBUG  , Thread-1 (run), engine.py:652, [trial: 141, gen: 0] Run and check
2024-02-24 14:44:35,892 DEBUG  , Thread-1 (run), runner.py:123, [trial: 141, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 14:44:35,892 DEBUG  , Thread-1 (run), runner.py:124, [trial: 141, gen: 0] STDERR: 
2024-02-24 14:44:35,892 INFO   , Thread-1 (run), runner.py:437, [trial: 141, gen: 0] Waiting for system to converge... 
2024-02-24 14:47:36,696 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:48:36,784 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:49:36,889 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:50:49,610 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:51:49,672 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:52:35,919 ERROR  , Thread-1 (run), runner.py:586, [trial: 141, gen: 0] System failed to converge within 480 seconds
2024-02-24 14:52:36,155 DEBUG  , Thread-1 (run), runner.py:267, [trial: 141, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:44:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:44:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T21:52:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1802', 'uid': '2d27b507-e949-423c-8578-530735d875ea'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T21:52:11Z', 'phase': ''}}}
2024-02-24 14:52:36,176 DEBUG  , Thread-1 (run), runner.py:296, [trial: 141, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gp9k2
2024-02-24 14:52:36,413 ERROR  , Thread-1 (run), runner.py:368, [trial: 141, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-lfwmf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'e58a68b9-ea16-4095-b405-179eb81b64da', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 21:52:36 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-lfwmf\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 14:52:36,465 INFO   , Thread-1 (run), result.py:170, [trial: 141, gen: 0] No stderr, continue
2024-02-24 14:52:36,503 ERROR  , Thread-1 (run), health.py:155, [trial: 141, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 14:52:36,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line time="2024-02-24T21:44:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line time="2024-02-24T21:44:11Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 21:44:11.440832183 +0000 UTC m=+0.023202488]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line time="2024-02-24T21:44:11Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,529 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line time="2024-02-24T21:44:11Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,530 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line time="2024-02-24T21:44:11Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,581 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 141, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 14:52:36,740 INFO   , Thread-1 (run), consistency.py:496, [trial: 141, gen: 0] All input deltas are matched
2024-02-24 14:52:36,742 INFO   , Thread-1 (run), engine.py:554, [trial: 141, gen: 0] Error result, running recovery
2024-02-24 14:52:36,742 DEBUG  , Thread-1 (run), engine.py:698, [trial: 141, gen: 0] Running recovery
2024-02-24 14:52:37,559 DEBUG  , Thread-1 (run), runner.py:123, [trial: 141, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 14:52:37,559 DEBUG  , Thread-1 (run), runner.py:124, [trial: 141, gen: 0] STDERR: 
2024-02-24 14:52:37,559 INFO   , Thread-1 (run), runner.py:437, [trial: 141, gen: 0] Waiting for system to converge... 
2024-02-24 14:53:37,739 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:54:37,849 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:55:43,614 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:56:43,721 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:57:43,773 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 14:58:43,861 INFO   , Thread-1 (run), runner.py:508, [trial: 141, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:00:37,570 ERROR  , Thread-1 (run), runner.py:586, [trial: 141, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:00:37,826 DEBUG  , Thread-1 (run), runner.py:267, [trial: 141, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T21:44:35Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T21:44:35Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:00:11Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2722', 'uid': '2d27b507-e949-423c-8578-530735d875ea'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:00:11Z', 'phase': ''}}}
2024-02-24 15:00:37,847 DEBUG  , Thread-1 (run), runner.py:296, [trial: 141, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-gp9k2
2024-02-24 15:00:38,094 ERROR  , Thread-1 (run), runner.py:368, [trial: 141, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-lfwmf
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'a5de18be-009c-46d4-9179-859cfdc76c02', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:00:38 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-lfwmf\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:00:38,138 DEBUG  , Thread-1 (run), engine.py:207, [trial: 141, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 15:00:38,142 INFO   , Thread-1 (run), engine.py:333, Trial 141 finished, completed in 00:18:01
2024-02-24 15:00:38,142 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 15:00:38,142 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 15:00:38,142 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 15:00:38,142 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 15:00:38,178 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-gp9k2
2024-02-24 15:00:51,671 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 15:01:41,595 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 15:01:41,609 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 15:01:48,936 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:01:54,076 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:01:54,077 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:01:54,293 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:01:59,584 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:01:59,584 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:01:59,898 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:02:05,038 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:02:05,038 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:02:05,161 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:02:10,303 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:02:10,303 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:02:10,531 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:02:15,654 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:02:15,654 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:02:15,858 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:02:21,004 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:02:21,004 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:02:21,084 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 141, gen: 0] Waiting for all pods to be ready
2024-02-24 15:02:26,219 INFO   , Thread-1 (run), deploy.py:32, [trial: 141, gen: 0] Operator ready
2024-02-24 15:02:26,219 INFO   , Thread-1 (run), deploy.py:36, [trial: 141, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:02:46,258 WARNING, Thread-1 (run), object.py:155, [trial: 142, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 15:02:46,259 WARNING, Thread-1 (run), object.py:155, [trial: 142, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 15:02:46,259 WARNING, Thread-1 (run), object.py:155, [trial: 142, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 15:02:46,260 DEBUG  , Thread-1 (run), engine.py:652, [trial: 142, gen: 0] Run and check
2024-02-24 15:02:46,405 DEBUG  , Thread-1 (run), runner.py:123, [trial: 142, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 15:02:46,405 DEBUG  , Thread-1 (run), runner.py:124, [trial: 142, gen: 0] STDERR: 
2024-02-24 15:02:46,406 INFO   , Thread-1 (run), runner.py:437, [trial: 142, gen: 0] Waiting for system to converge... 
2024-02-24 15:05:52,280 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:06:52,372 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:08:53,191 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:09:53,303 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:10:46,446 ERROR  , Thread-1 (run), runner.py:586, [trial: 142, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:10:46,716 DEBUG  , Thread-1 (run), runner.py:267, [trial: 142, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:02:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:02:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:10:22Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1803', 'uid': 'f4d2e5a6-f06a-4343-a274-569209366dc7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:10:22Z', 'phase': ''}}}
2024-02-24 15:10:46,737 DEBUG  , Thread-1 (run), runner.py:296, [trial: 142, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4qbtm
2024-02-24 15:10:46,958 ERROR  , Thread-1 (run), runner.py:368, [trial: 142, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rhx7m
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '48d11e33-8653-4397-a85c-c81f72f47566', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:10:46 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rhx7m\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:10:46,992 INFO   , Thread-1 (run), result.py:170, [trial: 142, gen: 0] No stderr, continue
2024-02-24 15:10:47,026 ERROR  , Thread-1 (run), health.py:155, [trial: 142, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 15:10:47,050 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,051 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line time="2024-02-24T22:02:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,051 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line time="2024-02-24T22:02:21Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 22:02:21.988613993 +0000 UTC m=+0.010108949]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,051 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line time="2024-02-24T22:02:21Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,051 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line time="2024-02-24T22:02:21Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,051 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line time="2024-02-24T22:02:21Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,102 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 142, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:10:47,267 INFO   , Thread-1 (run), consistency.py:496, [trial: 142, gen: 0] All input deltas are matched
2024-02-24 15:10:47,269 INFO   , Thread-1 (run), engine.py:554, [trial: 142, gen: 0] Error result, running recovery
2024-02-24 15:10:47,269 DEBUG  , Thread-1 (run), engine.py:698, [trial: 142, gen: 0] Running recovery
2024-02-24 15:10:48,148 DEBUG  , Thread-1 (run), runner.py:123, [trial: 142, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 15:10:48,148 DEBUG  , Thread-1 (run), runner.py:124, [trial: 142, gen: 0] STDERR: 
2024-02-24 15:10:48,148 INFO   , Thread-1 (run), runner.py:437, [trial: 142, gen: 0] Waiting for system to converge... 
2024-02-24 15:11:48,328 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:12:48,437 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:13:53,158 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:14:53,265 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:15:53,313 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:16:53,397 INFO   , Thread-1 (run), runner.py:508, [trial: 142, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:18:48,159 ERROR  , Thread-1 (run), runner.py:586, [trial: 142, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:18:48,439 DEBUG  , Thread-1 (run), runner.py:267, [trial: 142, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:02:46Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:02:46Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:18:22Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2723', 'uid': 'f4d2e5a6-f06a-4343-a274-569209366dc7'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:18:22Z', 'phase': ''}}}
2024-02-24 15:18:48,460 DEBUG  , Thread-1 (run), runner.py:296, [trial: 142, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-4qbtm
2024-02-24 15:18:48,707 ERROR  , Thread-1 (run), runner.py:368, [trial: 142, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-rhx7m
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '870f24bc-9c0a-4772-ba66-5794eadbdac3', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:18:48 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-rhx7m\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:18:48,757 DEBUG  , Thread-1 (run), engine.py:207, [trial: 142, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 15:18:48,761 INFO   , Thread-1 (run), engine.py:333, Trial 142 finished, completed in 00:18:00
2024-02-24 15:18:48,761 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 15:18:48,761 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 15:18:48,761 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 15:18:48,761 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 15:18:48,793 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-4qbtm
2024-02-24 15:19:02,207 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 15:19:52,458 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 15:19:52,472 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 15:19:59,292 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:04,437 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:04,437 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:04,687 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:09,823 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:09,824 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:10,150 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:15,418 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:15,419 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:15,549 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:20,680 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:20,680 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:20,921 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:26,059 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:26,060 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:26,227 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:31,356 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:31,356 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:31,422 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 142, gen: 0] Waiting for all pods to be ready
2024-02-24 15:20:36,553 INFO   , Thread-1 (run), deploy.py:32, [trial: 142, gen: 0] Operator ready
2024-02-24 15:20:36,553 INFO   , Thread-1 (run), deploy.py:36, [trial: 142, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:20:56,613 WARNING, Thread-1 (run), object.py:155, [trial: 143, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 15:20:56,614 WARNING, Thread-1 (run), object.py:155, [trial: 143, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 15:20:56,614 WARNING, Thread-1 (run), object.py:155, [trial: 143, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 15:20:56,615 DEBUG  , Thread-1 (run), engine.py:652, [trial: 143, gen: 0] Run and check
2024-02-24 15:20:56,764 DEBUG  , Thread-1 (run), runner.py:123, [trial: 143, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 15:20:56,764 DEBUG  , Thread-1 (run), runner.py:124, [trial: 143, gen: 0] STDERR: 
2024-02-24 15:20:56,765 INFO   , Thread-1 (run), runner.py:437, [trial: 143, gen: 0] Waiting for system to converge... 
2024-02-24 15:24:02,655 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:25:02,764 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:27:06,719 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:28:06,833 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:28:56,794 ERROR  , Thread-1 (run), runner.py:586, [trial: 143, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:28:57,065 DEBUG  , Thread-1 (run), runner.py:267, [trial: 143, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:20:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:20:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:28:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1799', 'uid': '6dafc8ac-2ab4-421b-9de8-fda06b59cd86'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:28:32Z', 'phase': ''}}}
2024-02-24 15:28:57,087 DEBUG  , Thread-1 (run), runner.py:296, [trial: 143, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tzsnq
2024-02-24 15:28:57,315 ERROR  , Thread-1 (run), runner.py:368, [trial: 143, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8qpm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7dac9829-6aa4-48ee-9a95-40a6ab391df8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:28:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8qpm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:28:57,355 INFO   , Thread-1 (run), result.py:170, [trial: 143, gen: 0] No stderr, continue
2024-02-24 15:28:57,391 ERROR  , Thread-1 (run), health.py:155, [trial: 143, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 15:28:57,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,416 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 22:20:32.335163682 +0000 UTC m=+0.011991466]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,417 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,417 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,417 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,417 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line time="2024-02-24T22:20:32Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,468 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 143, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:28:57,635 INFO   , Thread-1 (run), consistency.py:496, [trial: 143, gen: 0] All input deltas are matched
2024-02-24 15:28:57,638 INFO   , Thread-1 (run), engine.py:554, [trial: 143, gen: 0] Error result, running recovery
2024-02-24 15:28:57,638 DEBUG  , Thread-1 (run), engine.py:698, [trial: 143, gen: 0] Running recovery
2024-02-24 15:28:58,415 DEBUG  , Thread-1 (run), runner.py:123, [trial: 143, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 15:28:58,415 DEBUG  , Thread-1 (run), runner.py:124, [trial: 143, gen: 0] STDERR: 
2024-02-24 15:28:58,415 INFO   , Thread-1 (run), runner.py:437, [trial: 143, gen: 0] Waiting for system to converge... 
2024-02-24 15:29:58,595 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:30:58,695 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:32:02,569 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:33:02,672 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:34:02,784 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:35:02,890 INFO   , Thread-1 (run), runner.py:508, [trial: 143, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:36:58,425 ERROR  , Thread-1 (run), runner.py:586, [trial: 143, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:36:58,716 DEBUG  , Thread-1 (run), runner.py:267, [trial: 143, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:20:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:20:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:36:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': '6dafc8ac-2ab4-421b-9de8-fda06b59cd86'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:36:32Z', 'phase': ''}}}
2024-02-24 15:36:58,738 DEBUG  , Thread-1 (run), runner.py:296, [trial: 143, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tzsnq
2024-02-24 15:36:58,976 ERROR  , Thread-1 (run), runner.py:368, [trial: 143, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-q8qpm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '03a01d6a-be22-4520-ab7a-ace41c3f217d', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:36:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-q8qpm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:36:59,044 DEBUG  , Thread-1 (run), engine.py:207, [trial: 143, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 15:36:59,051 INFO   , Thread-1 (run), engine.py:333, Trial 143 finished, completed in 00:18:00
2024-02-24 15:36:59,051 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 15:36:59,051 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 15:36:59,051 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 15:36:59,051 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 15:36:59,095 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-tzsnq
2024-02-24 15:37:12,477 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 15:38:03,257 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 15:38:03,269 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 15:38:09,558 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:14,703 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:14,703 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:14,940 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:20,090 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:20,090 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:20,398 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:25,540 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:25,540 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:25,688 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:30,828 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:30,828 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:31,057 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:36,355 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:36,356 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:36,549 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:41,696 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:41,696 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:38:41,768 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 143, gen: 0] Waiting for all pods to be ready
2024-02-24 15:38:46,910 INFO   , Thread-1 (run), deploy.py:32, [trial: 143, gen: 0] Operator ready
2024-02-24 15:38:46,910 INFO   , Thread-1 (run), deploy.py:36, [trial: 143, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:39:06,943 WARNING, Thread-1 (run), object.py:155, [trial: 144, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 15:39:06,943 WARNING, Thread-1 (run), object.py:155, [trial: 144, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 15:39:06,944 WARNING, Thread-1 (run), object.py:155, [trial: 144, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 15:39:06,945 DEBUG  , Thread-1 (run), engine.py:652, [trial: 144, gen: 0] Run and check
2024-02-24 15:39:07,086 DEBUG  , Thread-1 (run), runner.py:123, [trial: 144, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 15:39:07,086 DEBUG  , Thread-1 (run), runner.py:124, [trial: 144, gen: 0] STDERR: 
2024-02-24 15:39:07,086 INFO   , Thread-1 (run), runner.py:437, [trial: 144, gen: 0] Waiting for system to converge... 
2024-02-24 15:42:13,143 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:43:13,251 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:45:17,705 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:46:17,812 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:47:07,116 ERROR  , Thread-1 (run), runner.py:586, [trial: 144, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:47:07,377 DEBUG  , Thread-1 (run), runner.py:267, [trial: 144, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:39:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:39:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:46:42Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1815', 'uid': '82859b4b-049e-40e0-81cb-329fb6a83e49'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:46:42Z', 'phase': ''}}}
2024-02-24 15:47:07,398 DEBUG  , Thread-1 (run), runner.py:296, [trial: 144, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ds7j7
2024-02-24 15:47:07,621 ERROR  , Thread-1 (run), runner.py:368, [trial: 144, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hldxl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '2418c163-479e-4333-9ab3-f483008e62bf', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:47:07 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hldxl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:47:07,656 INFO   , Thread-1 (run), result.py:170, [trial: 144, gen: 0] No stderr, continue
2024-02-24 15:47:07,691 ERROR  , Thread-1 (run), health.py:155, [trial: 144, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line time="2024-02-24T22:38:42Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line time="2024-02-24T22:38:42Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 22:38:42.738906055 +0000 UTC m=+0.023443011]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line time="2024-02-24T22:38:42Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line time="2024-02-24T22:38:42Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,716 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line time="2024-02-24T22:38:42Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,769 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 144, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 15:47:07,929 INFO   , Thread-1 (run), consistency.py:496, [trial: 144, gen: 0] All input deltas are matched
2024-02-24 15:47:07,931 INFO   , Thread-1 (run), engine.py:554, [trial: 144, gen: 0] Error result, running recovery
2024-02-24 15:47:07,932 DEBUG  , Thread-1 (run), engine.py:698, [trial: 144, gen: 0] Running recovery
2024-02-24 15:47:08,783 DEBUG  , Thread-1 (run), runner.py:123, [trial: 144, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 15:47:08,784 DEBUG  , Thread-1 (run), runner.py:124, [trial: 144, gen: 0] STDERR: 
2024-02-24 15:47:08,784 INFO   , Thread-1 (run), runner.py:437, [trial: 144, gen: 0] Waiting for system to converge... 
2024-02-24 15:48:08,964 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:49:09,073 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:50:13,013 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:51:13,120 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:52:13,228 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:53:13,283 INFO   , Thread-1 (run), runner.py:508, [trial: 144, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 15:55:08,795 ERROR  , Thread-1 (run), runner.py:586, [trial: 144, gen: 0] System failed to converge within 480 seconds
2024-02-24 15:55:09,093 DEBUG  , Thread-1 (run), runner.py:267, [trial: 144, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:39:07Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:39:07Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T22:54:42Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2740', 'uid': '82859b4b-049e-40e0-81cb-329fb6a83e49'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T22:54:42Z', 'phase': ''}}}
2024-02-24 15:55:09,115 DEBUG  , Thread-1 (run), runner.py:296, [trial: 144, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-ds7j7
2024-02-24 15:55:09,367 ERROR  , Thread-1 (run), runner.py:368, [trial: 144, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-hldxl
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'efa0187f-bba3-453d-87d4-c897e8669645', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 22:55:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-hldxl\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 15:55:09,414 DEBUG  , Thread-1 (run), engine.py:207, [trial: 144, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 15:55:09,418 INFO   , Thread-1 (run), engine.py:333, Trial 144 finished, completed in 00:18:00
2024-02-24 15:55:09,418 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 15:55:09,418 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 15:55:09,419 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 15:55:09,419 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 15:55:09,455 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-ds7j7
2024-02-24 15:55:23,152 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 15:56:14,778 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 15:56:14,801 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 15:56:21,042 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:26,186 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:26,187 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:26,425 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:31,561 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:31,561 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:31,874 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:37,015 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:37,015 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:37,163 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:42,302 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:42,302 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:42,562 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:47,701 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:47,701 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:47,895 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:53,026 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:53,026 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:56:53,098 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 144, gen: 0] Waiting for all pods to be ready
2024-02-24 15:56:58,392 INFO   , Thread-1 (run), deploy.py:32, [trial: 144, gen: 0] Operator ready
2024-02-24 15:56:58,392 INFO   , Thread-1 (run), deploy.py:36, [trial: 144, gen: 0] All pods took 0 seconds to get ready
2024-02-24 15:57:18,459 WARNING, Thread-1 (run), object.py:155, [trial: 145, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 15:57:18,459 WARNING, Thread-1 (run), object.py:155, [trial: 145, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 15:57:18,460 WARNING, Thread-1 (run), object.py:155, [trial: 145, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 15:57:18,461 DEBUG  , Thread-1 (run), engine.py:652, [trial: 145, gen: 0] Run and check
2024-02-24 15:57:18,650 DEBUG  , Thread-1 (run), runner.py:123, [trial: 145, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 15:57:18,650 DEBUG  , Thread-1 (run), runner.py:124, [trial: 145, gen: 0] STDERR: 
2024-02-24 15:57:18,651 INFO   , Thread-1 (run), runner.py:437, [trial: 145, gen: 0] Waiting for system to converge... 
2024-02-24 16:00:54,383 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:01:54,476 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:03:24,332 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:04:24,389 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:05:18,687 ERROR  , Thread-1 (run), runner.py:586, [trial: 145, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:05:18,961 DEBUG  , Thread-1 (run), runner.py:267, [trial: 145, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:57:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:57:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:04:54Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1800', 'uid': 'bd59f864-cd9c-4295-b116-a8245b5f0269'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:04:54Z', 'phase': ''}}}
2024-02-24 16:05:18,983 DEBUG  , Thread-1 (run), runner.py:296, [trial: 145, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tmsps
2024-02-24 16:05:19,212 ERROR  , Thread-1 (run), runner.py:368, [trial: 145, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cptgj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '125c1470-b769-4119-a0e7-4cde8c0855fc', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:05:19 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cptgj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:05:19,261 INFO   , Thread-1 (run), result.py:170, [trial: 145, gen: 0] No stderr, continue
2024-02-24 16:05:19,300 ERROR  , Thread-1 (run), health.py:155, [trial: 145, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 16:05:19,324 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,324 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line time="2024-02-24T22:56:54Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,324 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line time="2024-02-24T22:56:54Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 22:56:54.090919907 +0000 UTC m=+0.011426995]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,324 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line time="2024-02-24T22:56:54Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,324 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line time="2024-02-24T22:56:54Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,325 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line time="2024-02-24T22:56:54Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,375 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 145, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:05:19,532 INFO   , Thread-1 (run), consistency.py:496, [trial: 145, gen: 0] All input deltas are matched
2024-02-24 16:05:19,534 INFO   , Thread-1 (run), engine.py:554, [trial: 145, gen: 0] Error result, running recovery
2024-02-24 16:05:19,534 DEBUG  , Thread-1 (run), engine.py:698, [trial: 145, gen: 0] Running recovery
2024-02-24 16:05:20,430 DEBUG  , Thread-1 (run), runner.py:123, [trial: 145, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 16:05:20,431 DEBUG  , Thread-1 (run), runner.py:124, [trial: 145, gen: 0] STDERR: 
2024-02-24 16:05:20,431 INFO   , Thread-1 (run), runner.py:437, [trial: 145, gen: 0] Waiting for system to converge... 
2024-02-24 16:06:20,611 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:07:20,707 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:08:26,134 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:09:26,249 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:10:26,323 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:11:26,432 INFO   , Thread-1 (run), runner.py:508, [trial: 145, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:13:20,441 ERROR  , Thread-1 (run), runner.py:586, [trial: 145, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:13:20,736 DEBUG  , Thread-1 (run), runner.py:267, [trial: 145, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T22:57:18Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T22:57:18Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:12:54Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2720', 'uid': 'bd59f864-cd9c-4295-b116-a8245b5f0269'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:12:54Z', 'phase': ''}}}
2024-02-24 16:13:20,757 DEBUG  , Thread-1 (run), runner.py:296, [trial: 145, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-tmsps
2024-02-24 16:13:21,007 ERROR  , Thread-1 (run), runner.py:368, [trial: 145, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-cptgj
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '14f8e3f1-aa51-4313-858c-15aea4c7260b', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:13:21 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-cptgj\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:13:21,066 DEBUG  , Thread-1 (run), engine.py:207, [trial: 145, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 16:13:21,070 INFO   , Thread-1 (run), engine.py:333, Trial 145 finished, completed in 00:18:01
2024-02-24 16:13:21,070 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 16:13:21,070 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 16:13:21,070 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 16:13:21,071 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 16:13:21,108 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-tmsps
2024-02-24 16:13:34,690 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 16:14:24,192 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 16:14:24,217 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 16:14:31,434 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:14:36,578 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:14:36,578 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:14:36,852 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:14:41,997 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:14:41,997 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:14:42,322 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:14:47,446 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:14:47,446 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:14:47,564 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:14:52,691 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:14:52,691 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:14:52,953 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:14:58,079 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:14:58,080 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:14:58,290 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:15:03,434 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:15:03,434 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:15:03,507 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 145, gen: 0] Waiting for all pods to be ready
2024-02-24 16:15:08,647 INFO   , Thread-1 (run), deploy.py:32, [trial: 145, gen: 0] Operator ready
2024-02-24 16:15:08,647 INFO   , Thread-1 (run), deploy.py:36, [trial: 145, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:15:28,694 WARNING, Thread-1 (run), object.py:155, [trial: 146, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 16:15:28,694 WARNING, Thread-1 (run), object.py:155, [trial: 146, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 16:15:28,694 WARNING, Thread-1 (run), object.py:155, [trial: 146, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 16:15:28,695 DEBUG  , Thread-1 (run), engine.py:652, [trial: 146, gen: 0] Run and check
2024-02-24 16:15:28,865 DEBUG  , Thread-1 (run), runner.py:123, [trial: 146, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 16:15:28,865 DEBUG  , Thread-1 (run), runner.py:124, [trial: 146, gen: 0] STDERR: 
2024-02-24 16:15:28,865 INFO   , Thread-1 (run), runner.py:437, [trial: 146, gen: 0] Waiting for system to converge... 
2024-02-24 16:18:34,738 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:19:34,850 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:21:35,978 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:22:36,085 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:23:28,894 ERROR  , Thread-1 (run), runner.py:586, [trial: 146, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:23:29,164 DEBUG  , Thread-1 (run), runner.py:267, [trial: 146, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:15:28Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:15:28Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:23:04Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1812', 'uid': 'df3e2941-03ed-4378-9b04-9a26d3855550'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:23:04Z', 'phase': ''}}}
2024-02-24 16:23:29,186 DEBUG  , Thread-1 (run), runner.py:296, [trial: 146, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wgsrj
2024-02-24 16:23:29,407 ERROR  , Thread-1 (run), runner.py:368, [trial: 146, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zf6bv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '6db21398-e901-4ff5-ba31-388cc9deb5d4', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:23:29 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zf6bv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:23:29,443 INFO   , Thread-1 (run), result.py:170, [trial: 146, gen: 0] No stderr, continue
2024-02-24 16:23:29,477 ERROR  , Thread-1 (run), health.py:155, [trial: 146, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 16:23:29,665 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,665 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line time="2024-02-24T23:15:04Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,665 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line time="2024-02-24T23:15:04Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 23:15:04.461738664 +0000 UTC m=+0.010629430]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,666 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line time="2024-02-24T23:15:04Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,666 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line time="2024-02-24T23:15:04Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,666 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line time="2024-02-24T23:15:04Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,718 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 146, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:23:29,933 INFO   , Thread-1 (run), consistency.py:496, [trial: 146, gen: 0] All input deltas are matched
2024-02-24 16:23:29,935 INFO   , Thread-1 (run), engine.py:554, [trial: 146, gen: 0] Error result, running recovery
2024-02-24 16:23:29,935 DEBUG  , Thread-1 (run), engine.py:698, [trial: 146, gen: 0] Running recovery
2024-02-24 16:23:30,721 DEBUG  , Thread-1 (run), runner.py:123, [trial: 146, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 16:23:30,721 DEBUG  , Thread-1 (run), runner.py:124, [trial: 146, gen: 0] STDERR: 
2024-02-24 16:23:30,721 INFO   , Thread-1 (run), runner.py:437, [trial: 146, gen: 0] Waiting for system to converge... 
2024-02-24 16:24:30,890 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:25:30,946 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:26:34,704 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:27:34,809 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:28:34,914 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:29:35,023 INFO   , Thread-1 (run), runner.py:508, [trial: 146, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:31:30,731 ERROR  , Thread-1 (run), runner.py:586, [trial: 146, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:31:31,023 DEBUG  , Thread-1 (run), runner.py:267, [trial: 146, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:15:28Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:15:28Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:31:04Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2732', 'uid': 'df3e2941-03ed-4378-9b04-9a26d3855550'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:31:04Z', 'phase': ''}}}
2024-02-24 16:31:31,045 DEBUG  , Thread-1 (run), runner.py:296, [trial: 146, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wgsrj
2024-02-24 16:31:31,297 ERROR  , Thread-1 (run), runner.py:368, [trial: 146, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-zf6bv
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '20634d39-660d-484c-bb34-0139ae53ea14', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:31:31 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-zf6bv\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:31:31,341 DEBUG  , Thread-1 (run), engine.py:207, [trial: 146, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 16:31:31,345 INFO   , Thread-1 (run), engine.py:333, Trial 146 finished, completed in 00:18:00
2024-02-24 16:31:31,346 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 60
2024-02-24 16:31:31,346 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 16:31:31,346 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 16:31:31,346 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 16:31:31,384 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wgsrj
2024-02-24 16:31:44,955 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 16:32:37,031 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 16:32:37,058 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 16:32:43,117 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:32:48,266 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:32:48,266 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:32:48,509 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:32:53,645 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:32:53,645 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:32:53,924 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:32:59,060 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:32:59,060 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:32:59,192 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:33:04,335 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:33:04,335 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:33:04,595 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:33:09,736 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:33:09,736 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:33:09,922 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:33:15,061 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:33:15,061 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:33:15,132 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 146, gen: 0] Waiting for all pods to be ready
2024-02-24 16:33:20,266 INFO   , Thread-1 (run), deploy.py:32, [trial: 146, gen: 0] Operator ready
2024-02-24 16:33:20,267 INFO   , Thread-1 (run), deploy.py:36, [trial: 146, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:33:40,318 WARNING, Thread-1 (run), object.py:155, [trial: 147, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 16:33:40,319 WARNING, Thread-1 (run), object.py:155, [trial: 147, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 16:33:40,319 WARNING, Thread-1 (run), object.py:155, [trial: 147, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 16:33:40,319 DEBUG  , Thread-1 (run), engine.py:652, [trial: 147, gen: 0] Run and check
2024-02-24 16:33:40,530 DEBUG  , Thread-1 (run), runner.py:123, [trial: 147, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 16:33:40,530 DEBUG  , Thread-1 (run), runner.py:124, [trial: 147, gen: 0] STDERR: 
2024-02-24 16:33:40,530 INFO   , Thread-1 (run), runner.py:437, [trial: 147, gen: 0] Waiting for system to converge... 
2024-02-24 16:36:46,452 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:37:46,561 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:39:53,243 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:40:53,294 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:41:40,560 ERROR  , Thread-1 (run), runner.py:586, [trial: 147, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:41:40,828 DEBUG  , Thread-1 (run), runner.py:267, [trial: 147, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:33:40Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:33:40Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:41:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1805', 'uid': 'c378b368-0725-451e-8566-d62f78a2fc88'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:41:16Z', 'phase': ''}}}
2024-02-24 16:41:40,850 DEBUG  , Thread-1 (run), runner.py:296, [trial: 147, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-t24p4
2024-02-24 16:41:41,068 ERROR  , Thread-1 (run), runner.py:368, [trial: 147, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n5fmc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '7582b361-8fd4-4eb0-8d50-2788f3789e1c', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:41:41 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n5fmc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:41:41,109 INFO   , Thread-1 (run), result.py:170, [trial: 147, gen: 0] No stderr, continue
2024-02-24 16:41:41,144 ERROR  , Thread-1 (run), health.py:155, [trial: 147, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 23:33:16.083783 +0000 UTC m=+0.012236090]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,169 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg="Config section [operator] updated. No update handler registered." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,170 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line time="2024-02-24T23:33:16Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,224 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 147, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:41:41,554 INFO   , Thread-1 (run), consistency.py:496, [trial: 147, gen: 0] All input deltas are matched
2024-02-24 16:41:41,556 INFO   , Thread-1 (run), engine.py:554, [trial: 147, gen: 0] Error result, running recovery
2024-02-24 16:41:41,557 DEBUG  , Thread-1 (run), engine.py:698, [trial: 147, gen: 0] Running recovery
2024-02-24 16:41:42,391 DEBUG  , Thread-1 (run), runner.py:123, [trial: 147, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 16:41:42,392 DEBUG  , Thread-1 (run), runner.py:124, [trial: 147, gen: 0] STDERR: 
2024-02-24 16:41:42,392 INFO   , Thread-1 (run), runner.py:437, [trial: 147, gen: 0] Waiting for system to converge... 
2024-02-24 16:42:42,569 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:44:46,363 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:45:46,471 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:46:46,537 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:47:46,593 INFO   , Thread-1 (run), runner.py:508, [trial: 147, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:49:42,402 ERROR  , Thread-1 (run), runner.py:586, [trial: 147, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:49:42,693 DEBUG  , Thread-1 (run), runner.py:267, [trial: 147, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:33:40Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:33:40Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:49:16Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2725', 'uid': 'c378b368-0725-451e-8566-d62f78a2fc88'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:49:16Z', 'phase': ''}}}
2024-02-24 16:49:42,715 DEBUG  , Thread-1 (run), runner.py:296, [trial: 147, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-t24p4
2024-02-24 16:49:42,963 ERROR  , Thread-1 (run), runner.py:368, [trial: 147, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-n5fmc
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b4480328-b147-422b-bb0e-b771b738bd32', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:49:42 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-n5fmc\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:49:43,024 DEBUG  , Thread-1 (run), engine.py:207, [trial: 147, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 16:49:43,028 INFO   , Thread-1 (run), engine.py:333, Trial 147 finished, completed in 00:18:01
2024-02-24 16:49:43,028 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 61
2024-02-24 16:49:43,028 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 16:49:43,028 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 16:49:43,029 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 16:49:43,065 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-t24p4
2024-02-24 16:49:56,585 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 16:50:54,262 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 16:50:54,274 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 16:50:59,035 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:04,179 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:04,179 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:04,455 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:09,599 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:09,599 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:09,901 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:15,042 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:15,043 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:15,208 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:20,332 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:20,332 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:20,579 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:25,717 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:25,717 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:25,892 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:31,036 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:31,036 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:31,110 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 147, gen: 0] Waiting for all pods to be ready
2024-02-24 16:51:36,246 INFO   , Thread-1 (run), deploy.py:32, [trial: 147, gen: 0] Operator ready
2024-02-24 16:51:36,247 INFO   , Thread-1 (run), deploy.py:36, [trial: 147, gen: 0] All pods took 0 seconds to get ready
2024-02-24 16:51:56,298 WARNING, Thread-1 (run), object.py:155, [trial: 148, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 16:51:56,298 WARNING, Thread-1 (run), object.py:155, [trial: 148, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 16:51:56,298 WARNING, Thread-1 (run), object.py:155, [trial: 148, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 16:51:56,298 DEBUG  , Thread-1 (run), engine.py:652, [trial: 148, gen: 0] Run and check
2024-02-24 16:51:56,520 DEBUG  , Thread-1 (run), runner.py:123, [trial: 148, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 16:51:56,521 DEBUG  , Thread-1 (run), runner.py:124, [trial: 148, gen: 0] STDERR: 
2024-02-24 16:51:56,521 INFO   , Thread-1 (run), runner.py:437, [trial: 148, gen: 0] Waiting for system to converge... 
2024-02-24 16:55:32,686 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:56:32,742 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:58:08,442 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:59:08,506 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 16:59:56,549 ERROR  , Thread-1 (run), runner.py:586, [trial: 148, gen: 0] System failed to converge within 480 seconds
2024-02-24 16:59:56,815 DEBUG  , Thread-1 (run), runner.py:267, [trial: 148, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:51:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:51:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-24T23:59:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1796', 'uid': '79bd4bd4-b881-467c-a2b5-6f1a4de857d6'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-24T23:59:32Z', 'phase': ''}}}
2024-02-24 16:59:56,837 DEBUG  , Thread-1 (run), runner.py:296, [trial: 148, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wssff
2024-02-24 16:59:57,063 ERROR  , Thread-1 (run), runner.py:368, [trial: 148, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-z29wm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '0949332d-53cc-445a-8d7d-3bbc2d174014', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sat, 24 Feb 2024 23:59:57 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-z29wm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 16:59:57,095 INFO   , Thread-1 (run), result.py:170, [trial: 148, gen: 0] No stderr, continue
2024-02-24 16:59:57,125 ERROR  , Thread-1 (run), health.py:155, [trial: 148, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line time="2024-02-24T23:51:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line time="2024-02-24T23:51:32Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-24 23:51:32.095221981 +0000 UTC m=+0.022497662]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line time="2024-02-24T23:51:32Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line time="2024-02-24T23:51:32Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,149 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line time="2024-02-24T23:51:32Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,203 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 148, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 16:59:57,540 INFO   , Thread-1 (run), consistency.py:496, [trial: 148, gen: 0] All input deltas are matched
2024-02-24 16:59:57,542 INFO   , Thread-1 (run), engine.py:554, [trial: 148, gen: 0] Error result, running recovery
2024-02-24 16:59:57,542 DEBUG  , Thread-1 (run), engine.py:698, [trial: 148, gen: 0] Running recovery
2024-02-24 16:59:58,399 DEBUG  , Thread-1 (run), runner.py:123, [trial: 148, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 16:59:58,399 DEBUG  , Thread-1 (run), runner.py:124, [trial: 148, gen: 0] STDERR: 
2024-02-24 16:59:58,400 INFO   , Thread-1 (run), runner.py:437, [trial: 148, gen: 0] Waiting for system to converge... 
2024-02-24 17:00:58,563 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:01:58,673 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:03:05,373 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:04:05,482 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:05:05,540 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:06:05,645 INFO   , Thread-1 (run), runner.py:508, [trial: 148, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:07:58,410 ERROR  , Thread-1 (run), runner.py:586, [trial: 148, gen: 0] System failed to converge within 480 seconds
2024-02-24 17:07:58,705 DEBUG  , Thread-1 (run), runner.py:267, [trial: 148, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-24T23:51:56Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-24T23:51:56Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-25T00:07:32Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '2716', 'uid': '79bd4bd4-b881-467c-a2b5-6f1a4de857d6'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-25T00:07:32Z', 'phase': ''}}}
2024-02-24 17:07:58,727 DEBUG  , Thread-1 (run), runner.py:296, [trial: 148, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-wssff
2024-02-24 17:07:58,987 ERROR  , Thread-1 (run), runner.py:368, [trial: 148, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-z29wm
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': 'b3604272-9aa8-405b-b1b6-568f911b7de8', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sun, 25 Feb 2024 00:07:58 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-z29wm\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 17:07:59,054 DEBUG  , Thread-1 (run), engine.py:207, [trial: 148, gen: 0] failed attempt recovering to seed state - system state diff: {'dictionary_item_added': [<root['deployment_pods']['flinkoperator'] t1:not present, t2:[{'api_versi...]>, <root['deployment_pods']['test-cluster-fc35daad-jm'] t1:not present, t2:[{'api_versi...]>, <root['deployment']['flinkoperator'] t1:not present, t2:{'api_versio...}>, <root['deployment']['test-cluster-fc35daad-jm'] t1:not present, t2:{'api_versio...}>, <root['config_map']['flink-operator-config'] t1:not present, t2:{'api_versio...}>, <root['config_map']['kube-root-ca.crt'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster'] t1:not present, t2:{'api_versio...}>, <root['service']['test-cluster-fc35daad'] t1:not present, t2:{'api_versio...}>, <root['service_account']['default'] t1:not present, t2:{'api_versio...}>, <root['service_account']['flinkoperator'] t1:not present, t2:{'api_versio...}>]}
2024-02-24 17:07:59,060 INFO   , Thread-1 (run), engine.py:333, Trial 148 finished, completed in 00:18:05
2024-02-24 17:07:59,060 INFO   , Thread-1 (run), engine.py:338, Kubernetes bootstrap: 65
2024-02-24 17:07:59,060 INFO   , Thread-1 (run), engine.py:342, Operator deploy: 57
2024-02-24 17:07:59,060 INFO   , Thread-1 (run), engine.py:346, Trial run: 962
2024-02-24 17:07:59,060 INFO   , Thread-1 (run), engine.py:349, ---------------------------------------

2024-02-24 17:07:59,093 DEBUG  , Thread-1 (run), k8s_helper.py:114, Got operator pod: pod name:flinkoperator-677df8d9b-wssff
2024-02-24 17:08:12,522 INFO   , root, kind.py  :104, Kubeconfig: /users/WillOJT/.kube/kind-acto-0-cluster-0
2024-02-24 17:09:04,866 INFO   , Thread-1 (run), base.py  :83, Created cluster
2024-02-24 17:09:04,881 INFO   , root, kind.py  :145, Loading preload images
2024-02-24 17:09:11,145 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:16,288 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:16,288 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:16,533 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:21,672 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:21,672 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:21,955 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:27,091 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:27,092 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:27,239 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:32,379 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:32,379 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:32,611 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:37,737 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:37,737 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:37,947 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:43,108 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:43,108 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:09:43,161 DEBUG  , Thread-1 (run), deploy.py:16, [trial: 148, gen: 0] Waiting for all pods to be ready
2024-02-24 17:09:48,298 INFO   , Thread-1 (run), deploy.py:32, [trial: 148, gen: 0] Operator ready
2024-02-24 17:09:48,298 INFO   , Thread-1 (run), deploy.py:36, [trial: 148, gen: 0] All pods took 0 seconds to get ready
2024-02-24 17:10:08,350 WARNING, Thread-1 (run), object.py:155, [trial: 149, gen: 0] Field [apiVersion] does not have a schema, using opaque schema
2024-02-24 17:10:08,350 WARNING, Thread-1 (run), object.py:155, [trial: 149, gen: 0] Field [kind] does not have a schema, using opaque schema
2024-02-24 17:10:08,350 WARNING, Thread-1 (run), object.py:155, [trial: 149, gen: 0] Field [metadata] does not have a schema, using opaque schema
2024-02-24 17:10:08,351 DEBUG  , Thread-1 (run), engine.py:652, [trial: 149, gen: 0] Run and check
2024-02-24 17:10:08,497 DEBUG  , Thread-1 (run), runner.py:123, [trial: 149, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster created

2024-02-24 17:10:08,497 DEBUG  , Thread-1 (run), runner.py:124, [trial: 149, gen: 0] STDERR: 
2024-02-24 17:10:08,497 INFO   , Thread-1 (run), runner.py:437, [trial: 149, gen: 0] Waiting for system to converge... 
2024-02-24 17:13:44,455 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:14:44,565 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:16:22,244 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:17:22,353 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:18:08,523 ERROR  , Thread-1 (run), runner.py:586, [trial: 149, gen: 0] System failed to converge within 480 seconds
2024-02-24 17:18:08,795 DEBUG  , Thread-1 (run), runner.py:267, [trial: 149, gen: 0] {'test-cluster': {'apiVersion': 'flink.k8s.io/v1beta1', 'kind': 'FlinkApplication', 'metadata': {'annotations': {'kubectl.kubernetes.io/last-applied-configuration': '{"apiVersion":"flink.k8s.io/v1beta1","kind":"FlinkApplication","metadata":{"annotations":{},"labels":{"environment":"development"},"name":"test-cluster","namespace":"flink-operator"},"spec":{"deleteMode":"None","entryClass":"org.apache.flink.WordCount","flinkConfig":{"state.backend.fs.checkpointdir":"file:///checkpoints/flink/checkpoints","state.checkpoints.dir":"file:///checkpoints/flink/externalized-checkpoints","state.savepoints.dir":"file:///checkpoints/flink/savepoints","web.upload.dir":"/opt/flink"},"flinkVersion":"1.16","image":"flink-wordcount","jarName":"wordcount-operator-example-1.0.0-SNAPSHOT.jar","jobManagerConfig":{"replicas":1,"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}}},"parallelism":3,"taskManagerConfig":{"resources":{"requests":{"cpu":"0.1","memory":"1500Mi"}},"taskSlots":3}}}\n'}, 'creationTimestamp': '2024-02-25T00:10:08Z', 'generation': 1, 'labels': {'environment': 'development'}, 'managedFields': [{'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:metadata': {'f:annotations': {'.': {}, 'f:kubectl.kubernetes.io/last-applied-configuration': {}}, 'f:labels': {'.': {}, 'f:environment': {}}}, 'f:spec': {'.': {}, 'f:deleteMode': {}, 'f:entryClass': {}, 'f:flinkConfig': {'.': {}, 'f:state.backend.fs.checkpointdir': {}, 'f:state.checkpoints.dir': {}, 'f:state.savepoints.dir': {}, 'f:web.upload.dir': {}}, 'f:flinkVersion': {}, 'f:image': {}, 'f:jarName': {}, 'f:jobManagerConfig': {'.': {}, 'f:replicas': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}}, 'f:parallelism': {}, 'f:taskManagerConfig': {'.': {}, 'f:resources': {'.': {}, 'f:requests': {'.': {}, 'f:cpu': {}, 'f:memory': {}}}, 'f:taskSlots': {}}}}, 'manager': 'kubectl-client-side-apply', 'operation': 'Update', 'time': '2024-02-25T00:10:08Z'}, {'apiVersion': 'flink.k8s.io/v1beta1', 'fieldsType': 'FieldsV1', 'fieldsV1': {'f:status': {'.': {}, 'f:clusterStatus': {'.': {}, 'f:availableTaskSlots': {}}, 'f:deployHash': {}, 'f:jobStatus': {'.': {}, 'f:jarName': {}, 'f:parallelism': {}}, 'f:lastSeenError': {'.': {}, 'f:appError': {}, 'f:errorCode': {}, 'f:isRetryable': {}, 'f:maxRetries': {}, 'f:method': {}}, 'f:lastUpdatedAt': {}, 'f:phase': {}}}, 'manager': 'flinkoperator', 'operation': 'Update', 'subresource': 'status', 'time': '2024-02-25T00:17:44Z'}], 'name': 'test-cluster', 'namespace': 'flink-operator', 'resourceVersion': '1804', 'uid': '6d21a0c9-b7d4-49e4-aa1b-15d55506f1b8'}, 'spec': {'deleteMode': 'None', 'entryClass': 'org.apache.flink.WordCount', 'flinkConfig': {'state.backend.fs.checkpointdir': 'file:///checkpoints/flink/checkpoints', 'state.checkpoints.dir': 'file:///checkpoints/flink/externalized-checkpoints', 'state.savepoints.dir': 'file:///checkpoints/flink/savepoints', 'web.upload.dir': '/opt/flink'}, 'flinkVersion': '1.16', 'image': 'flink-wordcount', 'jarName': 'wordcount-operator-example-1.0.0-SNAPSHOT.jar', 'jobManagerConfig': {'replicas': 1, 'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}}, 'parallelism': 3, 'taskManagerConfig': {'resources': {'requests': {'cpu': '0.1', 'memory': '1500Mi'}}, 'taskSlots': 3}}, 'status': {'clusterStatus': {'availableTaskSlots': 0}, 'deployHash': '', 'jobStatus': {'jarName': '', 'parallelism': 0}, 'lastSeenError': {'appError': 'UnknownMethod call failed with status FAILED and message \'\': no matches for kind "Ingress" in version "extensions/v1beta1"', 'errorCode': 'FAILED', 'isRetryable': True, 'maxRetries': 20, 'method': 'UnknownMethod'}, 'lastUpdatedAt': '2024-02-25T00:17:44Z', 'phase': ''}}}
2024-02-24 17:18:08,817 DEBUG  , Thread-1 (run), runner.py:296, [trial: 149, gen: 0] Got operator pod: pod name: flinkoperator-677df8d9b-b8pwc
2024-02-24 17:18:09,027 ERROR  , Thread-1 (run), runner.py:368, [trial: 149, gen: 0] Failed to get previous log of pod test-cluster-fc35daad-jm-6ccdf7cbcb-4v89k
Traceback (most recent call last):
  File "/users/WillOJT/CS523/acto/runner/runner.py", line 347, in collect_not_ready_pods_logs
    log = self.core_v1_api.read_namespaced_pod_log(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23747, in read_namespaced_pod_log
    return self.read_namespaced_pod_log_with_http_info(name, namespace, **kwargs)  # noqa: E501
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api/core_v1_api.py", line 23866, in read_namespaced_pod_log_with_http_info
    return self.api_client.call_api(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 348, in call_api
    return self.__call_api(resource_path, method,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 180, in __call_api
    response_data = self.request(
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/api_client.py", line 373, in request
    return self.rest_client.GET(url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 241, in GET
    return self.request("GET", url,
  File "/users/WillOJT/.local/lib/python3.10/site-packages/kubernetes/client/rest.py", line 235, in request
    raise ApiException(http_resp=r)
kubernetes.client.exceptions.ApiException: (400)
Reason: Bad Request
HTTP response headers: HTTPHeaderDict({'Audit-Id': '1fc8fdec-9b58-431f-b578-3f26e77da9fa', 'Cache-Control': 'no-cache, private', 'Content-Type': 'application/json', 'Date': 'Sun, 25 Feb 2024 00:18:09 GMT', 'Content-Length': '246'})
HTTP response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"container \"jobmanager\" in pod \"test-cluster-fc35daad-jm-6ccdf7cbcb-4v89k\" is waiting to start: trying and failing to pull image","reason":"BadRequest","code":400}


2024-02-24 17:18:09,077 INFO   , Thread-1 (run), result.py:170, [trial: 149, gen: 0] No stderr, continue
2024-02-24 17:18:09,115 ERROR  , Thread-1 (run), health.py:155, [trial: 149, gen: 0] Found deployment: test-cluster-fc35daad-jm replicas [1] ready_replicas [None], test-cluster-fc35daad-jm condition [Available] status [False] message [Deployment does not have minimum availability.] with unhealthy status
2024-02-24 17:18:09,139 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line Warn: No metricsProvider set for the workqueue due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,139 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line time="2024-02-25T00:09:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,139 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line time="2024-02-25T00:09:44Z" level=info msg="App [flinkK8sOperator], Version [unknown], BuildSHA [unknown], BuildTS [2024-02-25 00:09:44.159008193 +0000 UTC m=+0.011619712]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,139 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line time="2024-02-25T00:09:44Z" level=info msg=------------------------------------------------------------------------ due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line time="2024-02-25T00:09:44Z" level=info msg="Using config file: [/etc/flinkoperator/config/config.yaml]" due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,140 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line time="2024-02-25T00:09:44Z" level=info msg="Config section [logger] updated. Firing updated event." due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,208 DEBUG  , Thread-1 (run), parse_log.py:101, [trial: 149, gen: 0] parse_log() cannot parse line  due to Expecting value: line 1 column 1 (char 0)
2024-02-24 17:18:09,389 INFO   , Thread-1 (run), consistency.py:496, [trial: 149, gen: 0] All input deltas are matched
2024-02-24 17:18:09,392 INFO   , Thread-1 (run), engine.py:554, [trial: 149, gen: 0] Error result, running recovery
2024-02-24 17:18:09,392 DEBUG  , Thread-1 (run), engine.py:698, [trial: 149, gen: 0] Running recovery
2024-02-24 17:18:10,189 DEBUG  , Thread-1 (run), runner.py:123, [trial: 149, gen: 0] STDOUT: flinkapplication.flink.k8s.io/test-cluster unchanged

2024-02-24 17:18:10,190 DEBUG  , Thread-1 (run), runner.py:124, [trial: 149, gen: 0] STDERR: 
2024-02-24 17:18:10,190 INFO   , Thread-1 (run), runner.py:437, [trial: 149, gen: 0] Waiting for system to converge... 
2024-02-24 17:19:10,343 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:20:10,451 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
2024-02-24 17:21:14,408 INFO   , Thread-1 (run), runner.py:508, [trial: 149, gen: 0] Deployment test-cluster-fc35daad-jm is not ready yet
